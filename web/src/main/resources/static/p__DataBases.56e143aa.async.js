(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[383],{12265:function(S){S.exports={databases:"databases___35H4X","detail-wrap":"detail-wrap___1IA0t","tops-wrap":"tops-wrap___2AQns",tops:"tops___2lHCZ"}},59498:function(S,C,e){"use strict";e.r(C),e.d(C,{default:function(){return le}});var d=e(3182),u=e(11849),N=e(57663),r=e(71577),g=e(34792),Z=e(48086),y=e(86582),f=e(2824),D=e(94043),E=e.n(D),i=e(67294),T=e(83539),F=e(84674),W=e(12265),B=e.n(W),R=e(24480),P=e(66572),$=e(13062),A=e(71230),K=e(89032),O=e(15746),s=e(69886),t=e(85893),o=function(l){var b=(0,i.useCallback)(function(){var p=new s.by("dataActionPie".concat(l.id),{autoFit:!0,height:250,appendPadding:10,data:l.types,angleField:"value",colorField:"type",radius:.75,legend:{position:"bottom"},label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});p.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),p.render()},[l.id]);return(0,i.useEffect)(function(){b()},[b]),(0,t.jsx)("div",{id:"dataActionPie"+l.id})},c=o,a=e(39004),ne=function(l){var b=(0,i.useCallback)(function(){var p=new a.kL({container:"dataRecentlyLine".concat(l.id),autoFit:!0,height:200});p.data(l.ranges),p.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),p.tooltip({showNil:!1,showCrosshairs:!1,title:function(Y,w){return"".concat(Y,"\uFF1A").concat(w.value," \u6B21")},itemTpl:`<div class="g2-tooltip">
  <div class="g2-tooltip-title">Language</div>
  <ul class="g2-tooltip-list">
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">a</span>:<span class="g2-tooltip-value">70</span>
    </li>
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">b</span>:<span class="g2-tooltip-value">50</span>
    </li>
  </ul>
</div>`}),p.axis("value",{label:{}}),p.area().position("year*value"),p.line().position("year*value"),p.render()},[l.id]);return(0,i.useEffect)(function(){b()},[b]),(0,t.jsx)("div",{id:"dataRecentlyLine"+l.id})},se=ne,re=function(l){return(0,t.jsx)(A.Z,{className:l.style["detail-wrap"],gutter:20,children:(0,t.jsx)(O.Z,{span:24,children:(0,t.jsxs)(A.Z,{children:[(0,t.jsxs)(O.Z,{span:12,className:"text-c",children:[(0,t.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,t.jsx)(c,{types:l.types,id:l.id})]}),(0,t.jsx)(O.Z,{span:12,className:"text-c",children:(0,t.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,t.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,t.jsx)(se,{ranges:l.ranges,id:l.id})]})})]})})})},ue=re,V=e(6650),ie=function(){var l=(0,i.useState)([]),b=(0,f.Z)(l,2),p=b[0],L=b[1],Y=(0,i.useState)(""),w=(0,f.Z)(Y,2),z=w[0],H=w[1],oe=(0,i.useState)(0),J=(0,f.Z)(oe,2),de=J[0],ce=J[1],pe=(0,i.useState)(),Q=(0,f.Z)(pe,2),me=Q[0],fe=Q[1],ve=(0,i.useState)({pageSize:10,pageNo:1}),X=(0,f.Z)(ve,2),U=X[0],ge=X[1],he=(0,i.useState)({types:[],ranges:[]}),q=(0,f.Z)(he,2),ye=q[0],ee=q[1],_e=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(v,n){var _="-";if(n.tableNameDesc)_=n.tableNameDesc;else{var m=n.tableName.split("#");_=m[m.length-1]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:_})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",search:!1},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"dateTime",hideInSetting:!0,search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(v,n){return[(0,t.jsx)(r.Z,{type:"link",size:"small",onClick:function(){if(z===n.id){H(""),ee({types:[],ranges:[]});return}if(n.visitedCount!==0){var m=R.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),M=R.Z.getRangeTime(7,"YYYY-mm-dd");(0,V.Xd)({msTableName:n.tableName,startTime:m[0],endTime:m[1],tableName:n.tableName}).then(function(Ce){var G=Ce.data;if(G&&G.length>0){var De=G.map(function(j,I){return{year:M[I],value:j}}),te=(0,y.Z)(F.q);(0,V.et)({tableName:n.tableName}).then(function(j){j.data&&j.data.length>0&&te.forEach(function(I){j.data.forEach(function(Ee){var ae=JSON.parse(Ee),be=ae.dbType,Te=ae.dbTypeTimes;I.type===be&&(I.value=parseInt(Te))})})}),ee({ranges:De,types:te}),setTimeout(function(){H(n.id)},400)}})}else Z.ZP.info("".concat(n.tableName,"\u8868\u8BBF\u88AB\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],x=(0,i.useCallback)(function(h){(0,P.m)(h).then(function(v){var n=v.data;if(n){var _=JSON.parse(n);if(ce(_.total),_.rows){var m=JSON.parse(_.rows);L(m.map(function(M){return M.id=R.Z.uuid(),M}));return}}L([])})},[]);return(0,i.useEffect)(function(){x(U)},[x,U]),(0,t.jsx)("div",{className:B().databases,children:(0,t.jsx)(T.ZP,{columns:_e,rowKey:"id",pagination:{showSizeChanger:!1,total:de,pageSize:U.pageSize,current:U.pageNo,onChange:function(v,n){ge({pageNo:v,pageSize:n}),x((0,u.Z)({pageNo:v,pageSize:n},me))}},toolBarRender:!1,onSubmit:function(){var h=(0,d.Z)(E().mark(function v(n){return E().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return fe(n),m.next=3,x((0,u.Z)((0,u.Z)({},U),n));case 3:case"end":return m.stop()}},v)}));return function(v){return h.apply(this,arguments)}}(),onReset:(0,d.Z)(E().mark(function h(){return E().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:x((0,u.Z)({},U));case 1:case"end":return n.stop()}},h)})),expandable:{expandedRowRender:function(v,n){return(0,i.createElement)(ue,(0,u.Z)((0,u.Z)({},ye),{},{id:n,key:n,style:B()}))},expandIcon:function(){return!1},expandedRowKeys:[z]},dataSource:p})})},le=ie},84674:function(S,C,e){"use strict";e.d(C,{q:function(){return d},Q:function(){return u}});var d=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],u=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},66572:function(S,C,e){"use strict";e.d(C,{m:function(){return Z}});var d=e(11849),u=e(3182),N=e(94043),r=e.n(N),g=e(25377);function Z(f,D){return y.apply(this,arguments)}function y(){return y=(0,u.Z)(r().mark(function f(D,E){return r().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,g.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,d.Z)({method:"GET",params:D},E||{})));case 1:case"end":return T.stop()}},f)})),y.apply(this,arguments)}},6650:function(S,C,e){"use strict";e.d(C,{F$:function(){return Z},Xd:function(){return f},mt:function(){return E},et:function(){return W},FP:function(){return R},Bx:function(){return $},wA:function(){return K}});var d=e(11849),u=e(3182),N=e(94043),r=e.n(N),g=e(25377);function Z(s){return y.apply(this,arguments)}function y(){return y=(0,u.Z)(r().mark(function s(t){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,g.WY)("/api/skyflying/getCoarseCountsOfUser",(0,d.Z)({method:"GET"},t||{})));case 1:case"end":return c.stop()}},s)})),y.apply(this,arguments)}function f(s,t){return D.apply(this,arguments)}function D(){return D=(0,u.Z)(r().mark(function s(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,d.Z)({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},s)})),D.apply(this,arguments)}function E(s,t){return i.apply(this,arguments)}function i(){return i=(0,u.Z)(r().mark(function s(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.WY)("/api/skyflying/getVisitRate",(0,d.Z)({method:"GET",params:{username:t}},o||{})));case 1:case"end":return a.stop()}},s)})),i.apply(this,arguments)}function T(s,t){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime.mark(function s(t,o){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},s)})),F.apply(this,arguments)}function W(s,t){return B.apply(this,arguments)}function B(){return B=(0,u.Z)(r().mark(function s(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.WY)("/api/skyflying/getCountsOfUser",(0,d.Z)({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},s)})),B.apply(this,arguments)}function R(s,t){return P.apply(this,arguments)}function P(){return P=(0,u.Z)(r().mark(function s(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.WY)("/api/skyflying/getUserOperationTypeCount",(0,d.Z)({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},s)})),P.apply(this,arguments)}function $(s,t){return A.apply(this,arguments)}function A(){return A=(0,u.Z)(r().mark(function s(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,d.Z)({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},s)})),A.apply(this,arguments)}function K(s,t){return O.apply(this,arguments)}function O(){return O=(0,u.Z)(r().mark(function s(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,d.Z)({method:"GET",params:t||{}},o||{})));case 1:case"end":return a.stop()}},s)})),O.apply(this,arguments)}}}]);
