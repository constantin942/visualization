(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[383],{12265:function(N){N.exports={databases:"databases___35H4X","detail-wrap":"detail-wrap___1IA0t","tops-wrap":"tops-wrap___2AQns",tops:"tops___2lHCZ"}},59498:function(N,T,e){"use strict";e.r(T),e.d(T,{default:function(){return fe}});var c=e(3182),o=e(11849),Y=e(57663),l=e(71577),D=e(34792),M=e(48086),E=e(86582),g=e(2824),U=e(94043),Z=e.n(U),d=e(67294),A=e(60355),w=e(84674),J=e(12265),x=e.n(J),R=e(24480),k=e(66572),q=e(13062),P=e(71230),ie=e(89032),F=e(15746),$=e(69610),j=e(54941),a=e(81306),n=e(19809),i=e(69886),u=e(85893),t=i.G2.getEngine("canvas"),le=function(I){(0,a.Z)(p,I);var m=(0,n.Z)(p);function p(y){var s;return(0,$.Z)(this,p),s=m.call(this,y),s.state={chart:null},s}return(0,j.Z)(p,[{key:"componentDidMount",value:function(){var s=this,b=new i.by("dataActionPie".concat(this.props.id),{autoFit:!0,height:250,appendPadding:10,data:this.props.types,angleField:"value",colorField:"type",radius:.75,tooltip:{formatter:function(_){var O=_.value,B=_.type,K=s.props.types.map(function(W){return W.value}).reduce(function(W,Q){return W+Q},0);return{name:B,value:(O/K*100).toFixed(2)+"%"}}},legend:{position:"bottom"},label:{type:"spider",labelHeight:28,formatter:function(_,O){var B=new t.Group({});return B.addShape({type:"circle",attrs:{x:0,y:0,width:40,height:50,r:5,fill:O.color}}),B.addShape({type:"text",attrs:{x:10,y:6,text:"".concat(_.type),fill:O.color}}),B.addShape({type:"text",attrs:{x:0,y:20,text:"".concat(R.Z.bigNumberTransform(_.value),"\u6B21 "),fill:O.color,fontWeight:700}}),B}},interactions:[{type:"element-selected"},{type:"element-active"}]});b.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),b.render()}},{key:"render",value:function(){return(0,u.jsx)("div",{id:"dataActionPie"+this.props.id})}}],[{key:"getDerivedStateFromProps",value:function(s,b){var v=b.chart;return s.refreshUid==="open"&&v&&v.changeData(s.types),s}}]),p}(d.Component),oe=e(39004),de=function(I){(0,a.Z)(p,I);var m=(0,n.Z)(p);function p(y){var s;return(0,$.Z)(this,p),s=m.call(this,y),s.state={chart:null},s}return(0,j.Z)(p,[{key:"componentDidMount",value:function(){var s=new oe.kL({container:"RecentlyLine".concat(this.props.id),autoFit:!0,height:200});s.data(this.props.ranges),s.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),s.tooltip({showNil:!1,showCrosshairs:!1,title:function(v,_){return"".concat(v,"\uFF1A").concat(_.value," \u6B21")},itemTpl:`<div class="g2-tooltip">
        <div class="g2-tooltip-title">Language</div>
        <ul class="g2-tooltip-list">
          <li class="g2-tooltip-list-item">
            <span class="g2-tooltip-marker"></span>
            <span class="g2-tooltip-name">a</span>:<span class="g2-tooltip-value">70</span>
          </li>
          <li class="g2-tooltip-list-item">
            <span class="g2-tooltip-marker"></span>
            <span class="g2-tooltip-name">b</span>:<span class="g2-tooltip-value">50</span>
          </li>
        </ul>
      </div>`}),this.setState({chart:s}),s.area().position("year*value"),s.line().position("year*value"),s.render()}},{key:"render",value:function(){return(0,u.jsx)("div",{id:"RecentlyLine"+this.props.id})}}],[{key:"getDerivedStateFromProps",value:function(s,b){var v=b.chart;return s.refreshUid==="open"&&v&&v.changeData(s.ranges),s}}]),p}(d.Component),ce=function(m){return(0,u.jsx)(P.Z,{className:m.style["detail-wrap"],gutter:20,children:(0,u.jsx)(F.Z,{span:24,children:(0,u.jsxs)(P.Z,{children:[(0,u.jsxs)(F.Z,{span:12,className:"text-c",children:[(0,u.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,u.jsx)(le,{types:m.types,id:m.id,refreshUid:m.refreshUid})]}),(0,u.jsx)(F.Z,{span:12,className:"text-c",children:(0,u.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,u.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,u.jsx)(de,{ranges:m.ranges,id:m.id,refreshUid:m.refreshUid})]})})]})})})},pe=ce,ee=e(6650),me=function(){var m=(0,d.useState)([]),p=(0,g.Z)(m,2),y=p[0],s=p[1],b=(0,d.useState)(""),v=(0,g.Z)(b,2),_=v[0],O=v[1],B=(0,d.useState)(0),K=(0,g.Z)(B,2),W=K[0],Q=K[1],ve=(0,d.useState)(),te=(0,g.Z)(ve,2),he=te[0],ge=te[1],ye=(0,d.useState)({pageSize:10,pageNo:1}),ae=(0,g.Z)(ye,2),G=ae[0],_e=ae[1],Ce=(0,d.useState)({types:[],ranges:[]}),ne=(0,g.Z)(Ce,2),De=ne[0],re=ne[1],Ee=[{title:"\u6570\u636E\u5E93",dataIndex:"dbName",key:"dbName",align:"center"},{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(h,r){var S="-";if(r.tableNameDesc)S=r.tableNameDesc;else{var f=r.tableName.split("#");S=f[f.length-1]}return(0,u.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:S})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",search:!1,render:function(h,r){return(0,u.jsx)("div",{children:r.visitedCount.toLocaleString()})}},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"dateTime",hideInSetting:!0,search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(h,r){return[(0,u.jsx)(l.Z,{type:"link",size:"small",onClick:function(){if(_===r.id){O(""),re({types:[],ranges:[]});return}if(r.visitedCount!==0){var f=R.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),z=R.Z.getRangeTime(7,"YYYY-mm-dd");(0,ee.Xd)({msTableName:r.tableName,startTime:f[0],endTime:f[1],tableName:r.tableName}).then(function(be){var X=be.data;if(X&&X.length>0){var Se=X.map(function(L,H){return{year:z[H],value:L}}),se=(0,E.Z)(w.q);(0,ee.et)({tableName:r.tableName}).then(function(L){L.data&&L.data.length>0&&se.forEach(function(H){L.data.forEach(function(Te){var ue=JSON.parse(Te),Ue=ue.dbType,Ze=ue.dbTypeTimes;H.type===Ue&&(H.value=parseInt(Ze))})})}),re({ranges:Se,types:se}),setTimeout(function(){O(r.id)},400)}})}else M.ZP.info("".concat(r.tableName,"\u8868\u8BBF\u88AB\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],V=(0,d.useCallback)(function(C){(0,k.m)(C).then(function(h){var r=h.data;if(r){var S=JSON.parse(r);if(Q(S.total),S.rows){var f=JSON.parse(S.rows);console.log(f),s(f.map(function(z){return z.id=R.Z.uuid(),z}));return}}s([])})},[]);return(0,d.useEffect)(function(){V(G)},[]),(0,u.jsx)("div",{className:x().databases,children:(0,u.jsx)(A.ZP,{headerTitle:"\u6570\u636E\u8BBF\u95EE\u884C\u4E3A\u5217\u8868",columns:Ee,rowKey:"id",pagination:{showSizeChanger:!1,total:W,pageSize:G.pageSize,current:G.pageNo,onChange:function(h,r){_e({pageNo:h,pageSize:r}),V((0,o.Z)({pageNo:h,pageSize:r},he))}},options:!1,onSubmit:function(){var C=(0,c.Z)(Z().mark(function h(r){return Z().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return ge(r),f.next=3,V((0,o.Z)((0,o.Z)({},G),r));case 3:case"end":return f.stop()}},h)}));return function(h){return C.apply(this,arguments)}}(),onReset:(0,c.Z)(Z().mark(function C(){return Z().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:V((0,o.Z)({},G));case 1:case"end":return r.stop()}},C)})),expandable:{expandedRowRender:function(h,r){return(0,d.createElement)(pe,(0,o.Z)((0,o.Z)({},De),{},{id:r,key:r,style:x(),refreshUid:_===""?"close":"open"}))},expandIcon:function(){return!1},expandedRowKeys:[_]},dataSource:y})})},fe=me},84674:function(N,T,e){"use strict";e.d(T,{q:function(){return c}});var c=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],o=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},66572:function(N,T,e){"use strict";e.d(T,{m:function(){return M}});var c=e(11849),o=e(3182),Y=e(94043),l=e.n(Y),D=e(25377);function M(g,U){return E.apply(this,arguments)}function E(){return E=(0,o.Z)(l().mark(function g(U,Z){return l().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,D.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,c.Z)({method:"GET",params:U},Z||{})));case 1:case"end":return A.stop()}},g)})),E.apply(this,arguments)}},6650:function(N,T,e){"use strict";e.d(T,{F$:function(){return M},Xd:function(){return g},mt:function(){return Z},et:function(){return J},FP:function(){return R},Bx:function(){return q},us:function(){return $}});var c=e(11849),o=e(3182),Y=e(94043),l=e.n(Y),D=e(25377);function M(a,n){return E.apply(this,arguments)}function E(){return E=(0,o.Z)(l().mark(function a(n,i){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.WY)("/api/skyflying/getCoarseCountsOfUsers",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}function g(a,n){return U.apply(this,arguments)}function U(){return U=(0,o.Z)(l().mark(function a(n,i){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return t.stop()}},a)})),U.apply(this,arguments)}function Z(a,n){return d.apply(this,arguments)}function d(){return d=(0,o.Z)(l().mark(function a(n,i){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.WY)("/api/skyflying/getVisitRate",(0,c.Z)({method:"GET",params:{username:n}},i||{})));case 1:case"end":return t.stop()}},a)})),d.apply(this,arguments)}function A(a,n){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime.mark(function a(n,i){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:n},i||{})));case 1:case"end":return t.stop()}},a)})),w.apply(this,arguments)}function J(a,n){return x.apply(this,arguments)}function x(){return x=(0,o.Z)(l().mark(function a(n,i){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.WY)("/api/skyflying/getCountsOfUser",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return t.stop()}},a)})),x.apply(this,arguments)}function R(a,n){return k.apply(this,arguments)}function k(){return k=(0,o.Z)(l().mark(function a(n,i){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.WY)("/api/skyflying/getUserOperationTypeCount",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return t.stop()}},a)})),k.apply(this,arguments)}function q(a,n){return P.apply(this,arguments)}function P(){return P=(0,o.Z)(l().mark(function a(n,i){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return t.stop()}},a)})),P.apply(this,arguments)}function ie(a,n){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime.mark(function a(n,i){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/skyflying/getCoarseCountsOfOneUser",_objectSpread({method:"GET",params:n||{}},i||{})));case 1:case"end":return t.stop()}},a)})),F.apply(this,arguments)}function $(a,n){return j.apply(this,arguments)}function j(){return j=(0,o.Z)(l().mark(function a(n,i){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.WY)("/api/skyflying/getCountsOfEveryonRecentSevenDays",(0,c.Z)({method:"GET",params:n||{}},i||{})));case 1:case"end":return t.stop()}},a)})),j.apply(this,arguments)}}}]);
