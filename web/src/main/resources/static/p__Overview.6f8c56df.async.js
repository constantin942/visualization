(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(J){J.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2",nowrap:"nowrap___spq6f"}},81135:function(J,$,e){"use strict";e.r($),e.d($,{default:function(){return Re}});var C=e(57663),g=e(71577),Y=e(58024),r=e(39144),E=e(13062),W=e(71230),D=e(22385),x=e(61580),T=e(95300),I=e(7277),M=e(89032),s=e(15746),S=e(71748),R=e(33860),h=e(3182),l=e(2824),H=e(94043),w=e.n(H),Z=e(67294),ie=e(26516),P=e.n(ie),i=e(13254),n=e(14277),c=e(11849),G=e(46066),a=e(68628),t=e(85893),pe=function(y){var m={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Z,{className:"fs-16 ib danger mr-10"}),(0,t.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,t.jsx)("div",{className:"of-hidden",children:y.warningList.length>0?(0,t.jsx)(G.Z,(0,c.Z)((0,c.Z)({},m),{},{children:y.warningList.map(function(o){return(0,t.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:o.alarmContent},o.id)})})):(0,t.jsx)(n.Z,{description:"\u6682\u65E0\u544A\u8B66\u4FE1\u606F"})})]})},fe=pe,ve=e(69610),ge=e(54941),he=e(81306),ye=e(19809),X=e(69886),Q=e(41694),_e=X.G2.InteractionAction,Ce=X.G2.registerInteraction,Ee=X.G2.registerAction,Ze=function(j){(0,he.Z)(m,j);var y=(0,ye.Z)(m);function m(){return(0,ve.Z)(this,m),y.apply(this,arguments)}return(0,ge.Z)(m,[{key:"active",value:function(){var u=this,N=this.getView(),_=this.context.event;if(_.data){var f=_.data.items,b=N.geometries.filter(function(L){return L.type==="point"});(0,Q.S6)(b,function(L){(0,Q.S6)(L.elements,function(F){var V=(0,Q.cx)(f,function(se){return se.data===F.data})!==-1,z=F.shape.getChildren(),K=(0,l.Z)(z,2),q=K[0],ee=K[1];V?(q.animate({r:10,opacity:.2},{duration:1800,easing:"easeLinear",repeat:!0}),ee.animate({r:6,opacity:.4},{duration:800,easing:"easeLinear",repeat:!0})):u.resetElementState(F)})})}}},{key:"reset",value:function(){var u=this,N=this.getView(),_=N.geometries.filter(function(f){return f.type==="point"});(0,Q.S6)(_,function(f){(0,Q.S6)(f.elements,function(b){u.resetElementState(b)})})}},{key:"resetElementState",value:function(u){var N=u.shape.getChildren(),_=(0,l.Z)(N,2),f=_[0],b=_[1];f.stopAnimate(),b.stopAnimate();var L=f.get("attrs"),F=L.r,V=L.opacity;f.attr({r:F,opacity:V});var z=b.get("attrs"),K=z.r,q=z.opacity;b.attr({r:K,opacity:q})}},{key:"getView",value:function(){return this.context.view}}]),m}(_e),De=function(y){return(0,Z.useEffect)(function(){X.G2.registerShape("point","custom-point",{draw:function(u,N){var _={x:u.x,y:u.y},f=N.addGroup();return f.addShape("circle",{name:"outer-point",attrs:{x:_.x,y:_.y,fill:u.color||"red",opacity:.5,r:6}}),f.addShape("circle",{name:"inner-point",attrs:{x:_.x,y:_.y,fill:u.color||"red",opacity:1,r:2}}),f}}),Ee("custom-marker-action",Ze),Ce("custom-marker-interaction",{start:[{trigger:"tooltip:show",action:"custom-marker-action:active"}],end:[{trigger:"tooltip:hide",action:"custom-marker-action:reset"}]});var m=new X.x1("RangeTimeData",{height:138,autoFit:!0,data:y.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"custom-point",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1,formatter:function(u){return{name:"\u5F53\u65E5\u6536\u96C6\u6570\u91CF",value:u.value+"\u6761"}}},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"custom-marker-interaction"}]});m.render()},[]),(0,t.jsx)("div",{id:"RangeTimeData"})},Se=De,ue=e(60355),O=e(24480),Oe=e(6650),le=e(25377);function Ue(j,y){return ne.apply(this,arguments)}function ne(){return ne=(0,h.Z)(w().mark(function j(y,m){return w().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,le.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,c.Z)({params:y,method:"GET"},m||{})));case 1:case"end":return u.stop()}},j)})),ne.apply(this,arguments)}function xe(j){return re.apply(this,arguments)}function re(){return re=(0,h.Z)(w().mark(function j(y){return w().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,le.WY)("/api/skyflying/getOverviewOfSystem",(0,c.Z)({method:"GET"},y||{})));case 1:case"end":return o.stop()}},j)})),re.apply(this,arguments)}var Te=e(66572),je=e(2335),be=e(52778),Ae=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],Be=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(y,m){var o="-";if(m.tableNameDesc)o=m.tableNameDesc;else{var u=m.tableName.split("#");o=u[u.length-1]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:o})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center"},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,align:"center"}],Ie=function(y){var m=(0,Z.useState)(),o=(0,l.Z)(m,2),u=o[0],N=o[1],_=(0,Z.useState)([]),f=(0,l.Z)(_,2),b=f[0],L=f[1],F=(0,Z.useState)([]),V=(0,l.Z)(F,2),z=V[0],K=V[1],q=(0,Z.useState)([]),ee=(0,l.Z)(q,2),se=ee[0],oe=ee[1],we=(0,Z.useState)(0),ce=(0,l.Z)(we,2),Ne=ce[0],We=ce[1],Me=(0,Z.useState)({pageSize:10,pageNo:1}),Pe=(0,l.Z)(Me,1),te=Pe[0],Ge=(0,Z.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),de=(0,l.Z)(Ge,2),U=de[0],ke=de[1];function $e(){(0,je.cD)({pageSize:100,pageNo:1}).then(function(A){var d=A.data;if(d){var v=JSON.parse(d);if(v){var p=JSON.parse(v.rows);oe(p.map(function(k,B){return k.matchRuleId=B,k}))}else oe([])}})}var Le=function(){(0,Oe.F$)().then(function(d){var v=d.data;v&&v.length>0?N(v.map(function(p){return p.id=O.Z.uuid(),p})):N([])})},Fe=function(){var d=O.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),v=O.Z.getRangeTime(7,"mm-dd");Ue({startTime:d[0],endTime:d[1]}).then(function(p){var k=p.data;L(function(){return k.map(function(B,ae){return{year:v[ae],value:B}})})})},Ke=function(){var A=(0,h.Z)(w().mark(function d(){var v,p;return w().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,xe();case 2:v=B.sent,p=v.data,console.log(p),ke(p);case 6:case"end":return B.stop()}},d)}));return function(){return A.apply(this,arguments)}}(),Ye=function(){var A=(0,h.Z)(w().mark(function d(){return w().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:case"end":return p.stop()}},d)}));return function(){return A.apply(this,arguments)}}(),me=function(d){(0,Te.m)(d).then(function(v){var p=v.data;if(p){var k=JSON.parse(p);if(We(k.total),k.rows){var B=JSON.parse(k.rows);K(B.map(function(ae){return ae.id=O.Z.uuid(),ae}));return}}K([])})};return(0,Z.useEffect)(function(){Le(),Fe(),me(te),Ke().then(),Ye().then(),$e()},[te]),(0,t.jsxs)("div",{className:P().overview,children:[(0,t.jsx)("div",{className:P().staticWrap,children:(0,t.jsxs)(W.Z,{gutter:20,children:[(0,t.jsx)(s.Z,{span:8,children:(0,t.jsx)(R.Z,{active:!0,loading:b.length===0,children:(0,t.jsx)(be.Z,{title:"\u8FD1\u4E03\u5929\u6570\u636E\u6536\u96C6\u60C5\u51B5",chart:(0,t.jsx)("div",{style:{height:"163px"},children:(0,t.jsx)(Se,{data:b})})})})}),(0,t.jsx)(s.Z,{span:8,children:(0,t.jsx)(r.Z,{className:P().bgW,title:(0,t.jsx)("div",{className:"text-c",children:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5"}),children:(0,t.jsx)(W.Z,{gutter:20,className:"text-c",children:(0,t.jsxs)(R.Z,{active:!0,loading:b.length===0,children:[(0,t.jsx)(s.Z,{span:12,className:"mt-15 text-c",children:(0,t.jsx)(x.Z,{placement:"top",title:U.visitedInformation>=O.Z.BIG_NUMBER?U.visitedInformation.toLocaleString():"",children:(0,t.jsx)(I.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:O.Z.bigNumberTransform(U.visitedInformation),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(s.Z,{span:12,className:"mt-15",children:(0,t.jsx)(x.Z,{placement:"top",title:U.dbInstance>=O.Z.BIG_NUMBER?U.dbInstance.toLocaleString():"",children:(0,t.jsx)(I.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:O.Z.bigNumberTransform(U.dbInstance),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(s.Z,{span:12,className:"mt-20",children:(0,t.jsx)(x.Z,{placement:"top",title:U.user>=O.Z.BIG_NUMBER?U.user.toLocaleString():"",children:(0,t.jsx)(I.Z,{title:"\u7528\u6237\u4EBA\u6570",value:O.Z.bigNumberTransform(U.user),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(s.Z,{span:12,className:"mt-20",children:(0,t.jsx)(x.Z,{placement:"top",title:U.table>=O.Z.BIG_NUMBER?U.table.toLocaleString():"",children:(0,t.jsx)(I.Z,{title:"\u6570\u636E\u5E93\u8868",value:O.Z.bigNumberTransform(U.table),valueStyle:{color:"#3f8600"}})})})]})})})}),(0,t.jsx)(s.Z,{span:8,children:(0,t.jsx)("div",{className:P().waringWrap,children:(0,t.jsx)(fe,{warningList:se})})})]})}),(0,t.jsx)("div",{className:P().center,children:(0,t.jsxs)(W.Z,{gutter:30,children:[(0,t.jsx)(s.Z,{span:12,children:(0,t.jsx)(ue.ZP,{columns:Ae,dataSource:u,scroll:{y:500},options:!1,toolBarRender:function(){return[(0,t.jsx)(g.Z,{type:"link",size:"small",onClick:function(){y.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,pagination:!1,headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,t.jsx)(s.Z,{span:12,className:"pr-10",children:(0,t.jsx)(R.Z,{active:!0,loading:!1,paragraph:{rows:5},children:(0,t.jsx)(ue.ZP,{scroll:{y:500},columns:Be,dataSource:z,options:!1,rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:Ne,pageSize:te.pageSize,current:te.pageNo,onChange:function(d,v){me({pageNo:d,pageSize:v})}},toolBarRender:function(){return[(0,t.jsx)(g.Z,{type:"link",size:"small",onClick:function(){y.history.push("/databases")},children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u7EDF\u8BA1"})})})]})})]})},Re=Ie},66572:function(J,$,e){"use strict";e.d($,{m:function(){return W}});var C=e(11849),g=e(3182),Y=e(94043),r=e.n(Y),E=e(25377);function W(x,T){return D.apply(this,arguments)}function D(){return D=(0,g.Z)(r().mark(function x(T,I){return r().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,C.Z)({method:"GET",params:T},I||{})));case 1:case"end":return s.stop()}},x)})),D.apply(this,arguments)}},6650:function(J,$,e){"use strict";e.d($,{F$:function(){return W},Xd:function(){return x},mt:function(){return I},et:function(){return R},FP:function(){return l},Bx:function(){return w}});var C=e(11849),g=e(3182),Y=e(94043),r=e.n(Y),E=e(25377);function W(i,n){return D.apply(this,arguments)}function D(){return D=(0,g.Z)(r().mark(function i(n,c){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.WY)("/api/skyflying/getCoarseCountsOfUsers",(0,C.Z)({method:"GET",params:n},c||{})));case 1:case"end":return a.stop()}},i)})),D.apply(this,arguments)}function x(i,n){return T.apply(this,arguments)}function T(){return T=(0,g.Z)(r().mark(function i(n,c){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,C.Z)({method:"GET",params:n},c||{})));case 1:case"end":return a.stop()}},i)})),T.apply(this,arguments)}function I(i,n){return M.apply(this,arguments)}function M(){return M=(0,g.Z)(r().mark(function i(n,c){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.WY)("/api/skyflying/getVisitRate",(0,C.Z)({method:"GET",params:{username:n}},c||{})));case 1:case"end":return a.stop()}},i)})),M.apply(this,arguments)}function s(i,n){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime.mark(function i(n,c){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:n},c||{})));case 1:case"end":return a.stop()}},i)})),S.apply(this,arguments)}function R(i,n){return h.apply(this,arguments)}function h(){return h=(0,g.Z)(r().mark(function i(n,c){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.WY)("/api/skyflying/getCountsOfUser",(0,C.Z)({method:"GET",params:n},c||{})));case 1:case"end":return a.stop()}},i)})),h.apply(this,arguments)}function l(i,n){return H.apply(this,arguments)}function H(){return H=(0,g.Z)(r().mark(function i(n,c){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.WY)("/api/skyflying/getUserOperationTypeCount",(0,C.Z)({method:"GET",params:n},c||{})));case 1:case"end":return a.stop()}},i)})),H.apply(this,arguments)}function w(i,n){return Z.apply(this,arguments)}function Z(){return Z=(0,g.Z)(r().mark(function i(n,c){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,C.Z)({method:"GET",params:n},c||{})));case 1:case"end":return a.stop()}},i)})),Z.apply(this,arguments)}function ie(i,n){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime.mark(function i(n,c){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCoarseCountsOfOneUser",_objectSpread({method:"GET",params:n||{}},c||{})));case 1:case"end":return a.stop()}},i)})),P.apply(this,arguments)}},2335:function(J,$,e){"use strict";e.d($,{rO:function(){return W},cD:function(){return x},sF:function(){return I}});var C=e(11849),g=e(3182),Y=e(94043),r=e.n(Y),E=e(25377);function W(s){return D.apply(this,arguments)}function D(){return D=(0,g.Z)(r().mark(function s(S){return r().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,E.WY)("/api/skyflying/getUserNameAnomalyDetectionInfo",(0,C.Z)({method:"GET"},S||{})));case 1:case"end":return h.stop()}},s)})),D.apply(this,arguments)}function x(s,S){return T.apply(this,arguments)}function T(){return T=(0,g.Z)(r().mark(function s(S,R){return r().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,C.Z)({method:"GET",params:S||{}},R||{})));case 1:case"end":return l.stop()}},s)})),T.apply(this,arguments)}function I(s,S){return M.apply(this,arguments)}function M(){return M=(0,g.Z)(r().mark(function s(S,R){return r().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.WY)("/api/skyflying/getAnomalyDetectionInfoByGroupByUserName",(0,C.Z)({method:"GET",params:S||{}},R||{})));case 1:case"end":return l.stop()}},s)})),M.apply(this,arguments)}}}]);
