(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[126],{37174:function(Ce){Ce.exports={alarm:"alarm___12xQi",salesRank:"salesRank___-5oIk",rankingList:"rankingList___rxbMU",rankingItemNumber:"rankingItemNumber___3eh0u",active:"active___3KjTZ",rankingItemTitle:"rankingItemTitle___3gCS2","alarm-data":"alarm-data___17B2L",alarmDetail:"alarmDetail___9Lz5b"}},52953:function(){},44887:function(){},26723:function(Ce,re,e){"use strict";e.r(re),e.d(re,{default:function(){return we}});var N=e(20228),w=e(11382),D=e(66456),M=e(78587),V=e(3182),he=e(57663),oe=e(71577),$=e(11849),f=e(2824),Ee=e(94043),ae=e.n(Ee),t=e(67294),ie=e(37174),S=e.n(ie),_=e(48606),le=e(71194),O=e(50146),R=e(88983),xe=e(47933),ze=e(62350),Pe=e(75443),r=e(77576),me=e(12028),ve=e(17462),h=e(76772),J=e(38663),Ie=e(52953),X=e(96156),Te=e(28481),ce=e(90484),Me=e(94184),ue=e.n(Me),Ne=e(50344),fe=e(24308),Re=e(21687),Ae=e(65632),p=e(22122);function ye(a){return a!=null}var de=function(n){var s=n.itemPrefixCls,o=n.component,l=n.span,d=n.className,u=n.style,E=n.labelStyle,I=n.contentStyle,T=n.bordered,C=n.label,g=n.content,z=n.colon,x=o;if(T){var v;return t.createElement(x,{className:ue()((v={},(0,X.Z)(v,"".concat(s,"-item-label"),ye(C)),(0,X.Z)(v,"".concat(s,"-item-content"),ye(g)),v),d),style:u,colSpan:l},ye(C)&&t.createElement("span",{style:E},C),ye(g)&&t.createElement("span",{style:I},g))}return t.createElement(x,{className:ue()("".concat(s,"-item"),d),style:u,colSpan:l},t.createElement("div",{className:"".concat(s,"-item-container")},(C||C===0)&&t.createElement("span",{className:ue()("".concat(s,"-item-label"),(0,X.Z)({},"".concat(s,"-item-no-colon"),!z)),style:E},C),(g||g===0)&&t.createElement("span",{className:ue()("".concat(s,"-item-content")),style:I},g)))},ge=de;function De(a,n,s){var o=n.colon,l=n.prefixCls,d=n.bordered,u=s.component,E=s.type,I=s.showLabel,T=s.showContent,C=s.labelStyle,g=s.contentStyle;return a.map(function(z,x){var v=z.props,j=v.label,k=v.children,B=v.prefixCls,q=B===void 0?l:B,W=v.className,m=v.style,se=v.labelStyle,G=v.contentStyle,ee=v.span,H=ee===void 0?1:ee,Z=z.key;return typeof u=="string"?t.createElement(ge,{key:"".concat(E,"-").concat(Z||x),className:W,style:m,labelStyle:(0,p.Z)((0,p.Z)({},C),se),contentStyle:(0,p.Z)((0,p.Z)({},g),G),span:H,colon:o,component:u,itemPrefixCls:q,bordered:d,label:I?j:null,content:T?k:null}):[t.createElement(ge,{key:"label-".concat(Z||x),className:W,style:(0,p.Z)((0,p.Z)((0,p.Z)({},C),m),se),span:1,colon:o,component:u[0],itemPrefixCls:q,bordered:d,label:j}),t.createElement(ge,{key:"content-".concat(Z||x),className:W,style:(0,p.Z)((0,p.Z)((0,p.Z)({},g),m),G),span:H*2-1,component:u[1],itemPrefixCls:q,bordered:d,content:k})]})}var Se=function(n){var s=t.useContext(A),o=n.prefixCls,l=n.vertical,d=n.row,u=n.index,E=n.bordered;return l?t.createElement(t.Fragment,null,t.createElement("tr",{key:"label-".concat(u),className:"".concat(o,"-row")},De(d,n,(0,p.Z)({component:"th",type:"label",showLabel:!0},s))),t.createElement("tr",{key:"content-".concat(u),className:"".concat(o,"-row")},De(d,n,(0,p.Z)({component:"td",type:"content",showContent:!0},s)))):t.createElement("tr",{key:u,className:"".concat(o,"-row")},De(d,n,(0,p.Z)({component:E?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},s)))},Ue=Se,Be=function(n){var s=n.children;return s},Le=Be,Ke=e(96159),A=t.createContext({}),c={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function y(a,n){if(typeof a=="number")return a;if((0,ce.Z)(a)==="object")for(var s=0;s<fe.c4.length;s++){var o=fe.c4[s];if(n[o]&&a[o]!==void 0)return a[o]||c[o]}return 3}function U(a,n,s){var o=a;return(n===void 0||n>s)&&(o=(0,Ke.Tm)(a,{span:s}),(0,Re.Z)(n===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),o}function je(a,n){var s=(0,Ne.Z)(a).filter(function(u){return u}),o=[],l=[],d=n;return s.forEach(function(u,E){var I,T=(I=u.props)===null||I===void 0?void 0:I.span,C=T||1;if(E===s.length-1){l.push(U(u,T,d)),o.push(l);return}C<d?(d-=C,l.push(u)):(l.push(U(u,C,d)),o.push(l),d=n,l=[])}),o}function _e(a){var n,s=a.prefixCls,o=a.title,l=a.extra,d=a.column,u=d===void 0?c:d,E=a.colon,I=E===void 0?!0:E,T=a.bordered,C=a.layout,g=a.children,z=a.className,x=a.style,v=a.size,j=a.labelStyle,k=a.contentStyle,B=t.useContext(Ae.E_),q=B.getPrefixCls,W=B.direction,m=q("descriptions",s),se=t.useState({}),G=(0,Te.Z)(se,2),ee=G[0],H=G[1],Z=y(u,ee);t.useEffect(function(){var L=fe.ZP.subscribe(function(te){(0,ce.Z)(u)==="object"&&H(te)});return function(){fe.ZP.unsubscribe(L)}},[]);var F=je(g,Z),P=t.useMemo(function(){return{labelStyle:j,contentStyle:k}},[j,k]);return t.createElement(A.Provider,{value:P},t.createElement("div",{className:ue()(m,(n={},(0,X.Z)(n,"".concat(m,"-").concat(v),v&&v!=="default"),(0,X.Z)(n,"".concat(m,"-bordered"),!!T),(0,X.Z)(n,"".concat(m,"-rtl"),W==="rtl"),n),z),style:x},(o||l)&&t.createElement("div",{className:"".concat(m,"-header")},o&&t.createElement("div",{className:"".concat(m,"-title")},o),l&&t.createElement("div",{className:"".concat(m,"-extra")},l)),t.createElement("div",{className:"".concat(m,"-view")},t.createElement("table",null,t.createElement("tbody",null,F.map(function(L,te){return t.createElement(Ue,{key:te,index:te,colon:I,prefixCls:m,vertical:C==="vertical",bordered:T,row:L})}))))))}_e.Item=Le;var pe=_e,Ge=e(74379),Oe=e(38648),We=e(13312),i=e(85893);function Fe(a,n){var s=(0,t.useState)({}),o=(0,f.Z)(s,2),l=o[0],d=o[1],u=(0,t.useState)(!1),E=(0,f.Z)(u,2),I=E[0],T=E[1],C=(0,t.useState)(!1),g=(0,f.Z)(C,2),z=g[0],x=g[1],v=(0,t.useState)(!1),j=(0,f.Z)(v,2),k=j[0],B=j[1],q=(0,t.useState)([]),W=(0,f.Z)(q,2),m=W[0],se=W[1],G=(0,t.useState)("update"),ee=(0,f.Z)(G,2),H=ee[0],Z=ee[1];return(0,t.useImperativeHandle)(n,function(){return{setInitValues:function(P){P.length===1&&d(P[0]),se(P)}}}),(0,i.jsx)(O.Z,{width:600,afterClose:function(){x(!1),T(!1),Z("update")},destroyOnClose:!0,title:m.length===1?"".concat(l==null?void 0:l.userName,"\uFF08\u544A\u8B66\u5904\u7F6E\uFF09"):"\u6279\u91CF\u5904\u7F6E".concat(m.length,"\u6761\u544A\u8B66"),visible:a.handleVisible,onCancel:function(){a.setVisible(!1),B(!1),Z("update")},onOk:function(){if(I&&(0,_.QD)([{id:l.id,matchRuleId:l.matchRuleId,originalTime:l.originalTime,userName:l.userName,alarmContent:l.alarmContent,globalTraceId:l.globalTraceId,flag:k?"update":"delete"}]).then(function(L){var te=L.code;te===We.Gh&&(Oe.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1),a.refresh())}),m.length>1){var P=m.map(function(L){return L.flag=H,L});(0,_.QD)(P).then(function(){a.refresh(),Oe.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)})}a.setVisible(!1)},children:m.length===1?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(pe,{layout:"horizontal",column:2,children:[(0,i.jsx)(pe.Item,{label:"\u8BB0\u5F55\u4EA7\u751F\u65F6\u95F4",children:l==null?void 0:l.originalTime}),(0,i.jsx)(pe.Item,{label:"\u89C4\u5219ID",children:l==null?void 0:l.matchRuleId})]}),(0,i.jsx)(h.Z,{message:l==null?void 0:l.alarmContent,className:"text-c",type:"warning"}),(0,i.jsxs)("div",{className:"flex-x-sb mt-20",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{children:(0,i.jsx)(Pe.Z,{title:"\u662F\u5426\u66F4\u65B0\u753B\u50CF\uFF1F",visible:z,onConfirm:function(){x(!1),B(!0)},onCancel:function(){return x(!1)},okText:"\u66F4\u65B0",cancelText:"\u4E0D\u66F4\u65B0",children:(0,i.jsx)(me.Z,{checkedChildren:"\u5FFD\u7565\u544A\u8B66",unCheckedChildren:"\u4E0D\u5904\u7F6E",onChange:function(P){T(P),x(P)}})})})]})]}):(0,i.jsx)("div",{className:"text-c",children:(0,i.jsx)(xe.ZP.Group,{defaultValue:"update",value:H,options:[{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66",value:"update"},{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\u5E76\u66F4\u65B0\u753B\u50CF",value:"delete"}],onChange:function(P){var L=P.target.value;Z(L)}})})})}var Qe=(0,t.forwardRef)(Fe),Ve=e(25377),Ye=function(n){var s=(0,t.useState)([]),o=(0,f.Z)(s,2),l=o[0],d=o[1],u=(0,t.useState)(0),E=(0,f.Z)(u,2),I=E[0],T=E[1],C=(0,t.useState)(!1),g=(0,f.Z)(C,2),z=g[0],x=g[1],v=(0,t.useState)(!1),j=(0,f.Z)(v,2),k=j[0],B=j[1],q=(0,t.useState)([]),W=(0,f.Z)(q,2),m=W[0],se=W[1],G=(0,Ve.md)(),ee=(0,t.useState)({pageNo:1,pageSize:10}),H=(0,f.Z)(ee,2),Z=H[0],F=H[1],P=(0,t.useRef)(),L=(0,t.useState)({}),te=(0,f.Z)(L,2),$e=te[0],Je=te[1],Ze=(0,t.useCallback)(function(K){(0,_.cD)(K).then(function(ne){var b=ne.data;if(x(!0),b){var Q=JSON.parse(b);if(T(Q.total),Q){var Y=JSON.parse(Q.rows);d(Y.filter(function(He){return He.isDelete===0}))}else d([])}x(!1)})},[]),Xe=[{title:"\u8BB0\u5F55\u4EA7\u751F\u7684\u65F6\u95F4",dataIndex:"originalTime\uFF1A",key:"originalTime\uFF1A",width:"250px",align:"center",render:function(ne,b){return b.originalTime||"-"}},{title:"\u89C4\u5219ID",dataIndex:"matchRuleId\uFF1A",key:"matchRuleId\uFF1A",width:"250px",align:"center",render:function(ne,b){return b.matchRuleId||"-"}},{title:"\u544A\u8B66\u5185\u5BB9",dataIndex:"alarmContent",key:"alarmContent",align:"center"},{title:"\u5904\u7F6E",width:"150px",align:"center",render:function(ne,b){return[(0,i.jsx)(Ve.Nv,{accessible:G.canUpdate,children:(0,i.jsx)("a",{onClick:function(){var Y;B(!0),(Y=P.current)===null||Y===void 0||Y.setInitValues([b])},children:"\u5904\u7F6E"})},"handle")]}}],ke=function(ne){se(ne)},qe={selectedRowKeys:m,onChange:ke},et=m.length>0;return(0,t.useEffect)(function(){var K=n.location.query;Je(K),Ze((0,$.Z)((0,$.Z)((0,$.Z)({},K),Z),{isDelete:0}))},[Ze,Z,n.location.query]),(0,i.jsxs)("div",{className:S().alarmDetail,children:[(0,i.jsx)(w.Z,{spinning:z,children:(0,i.jsx)(M.Z,{rowSelection:qe,columns:Xe,dataSource:l,rowKey:"id",title:function(){return(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:$e.userName}),(0,i.jsx)(Ve.Nv,{accessible:G.canUpdate,children:(0,i.jsx)(oe.Z,{type:"primary",disabled:!et,size:"middle",onClick:function(){var b,Q=l.filter(function(Y){return m.includes(Y.id)});B(!0),(b=P.current)===null||b===void 0||b.setInitValues(Q)},children:"\u6279\u91CF\u5904\u7F6E"})})]})},size:"middle",pagination:{current:Z.pageNo,pageSize:Z.pageSize,total:I,onChange:function(){var K=(0,V.Z)(ae().mark(function b(Q,Y){return ae().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,F(function(){return{pageSize:Y,pageNo:Q}});case 2:Ze((0,$.Z)({pageNo:Q,pageSize:Y},$e));case 3:case"end":return be.stop()}},b)}));function ne(b,Q){return K.apply(this,arguments)}return ne}()}})}),(0,i.jsx)(Qe,{refresh:function(){Ze((0,$.Z)((0,$.Z)({},Z),$e))},setVisible:B,handleVisible:k,ref:P})]})},we=Ye},48606:function(Ce,re,e){"use strict";e.d(re,{Hp:function(){return he},CI:function(){return $},cD:function(){return Ee},QD:function(){return t}});var N=e(11849),w=e(3182),D=e(94043),M=e.n(D),V=e(25377);function he(S){return oe.apply(this,arguments)}function oe(){return oe=(0,w.Z)(M().mark(function S(_){return M().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,V.WY)("/api/skyflying/getAlarmData",(0,N.Z)({method:"GET"},_||{})));case 1:case"end":return O.stop()}},S)})),oe.apply(this,arguments)}function $(S){return f.apply(this,arguments)}function f(){return f=(0,w.Z)(M().mark(function S(_){return M().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,V.WY)("/api/skyflying/getUserAlarmData",(0,N.Z)({method:"GET"},_||{})));case 1:case"end":return O.stop()}},S)})),f.apply(this,arguments)}function Ee(S,_){return ae.apply(this,arguments)}function ae(){return ae=(0,w.Z)(M().mark(function S(_,le){return M().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,V.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,N.Z)({method:"GET",params:_||{}},le||{})));case 1:case"end":return R.stop()}},S)})),ae.apply(this,arguments)}function t(S,_){return ie.apply(this,arguments)}function ie(){return ie=(0,w.Z)(M().mark(function S(_,le){return M().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,V.WY)("/api/skyflying/updateAnomalyDetectionInfo",(0,N.Z)({method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8;"},data:JSON.stringify(_||{})},le||{})));case 1:case"end":return R.stop()}},S)})),ie.apply(this,arguments)}},75443:function(Ce,re,e){"use strict";var N=e(22122),w=e(28481),D=e(67294),M=e(94184),V=e.n(M),he=e(21770),oe=e(68855),$=e(15105),f=e(61580),Ee=e(71577),ae=e(73839),t=e(42051),ie=e(85636),S=e(65632),_=e(81643),le=e(96159),O=e(33603),R=e(86743),xe=void 0,ze=function(r,me){var ve={};for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&me.indexOf(h)<0&&(ve[h]=r[h]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,h=Object.getOwnPropertySymbols(r);J<h.length;J++)me.indexOf(h[J])<0&&Object.prototype.propertyIsEnumerable.call(r,h[J])&&(ve[h[J]]=r[h[J]]);return ve},Pe=D.forwardRef(function(r,me){var ve=D.useContext(S.E_),h=ve.getPrefixCls,J=(0,he.Z)(!1,{value:r.visible,defaultValue:r.defaultVisible}),Ie=(0,w.Z)(J,2),X=Ie[0],Te=Ie[1],ce=function(c,y){var U;Te(c,!0),(U=r.onVisibleChange)===null||U===void 0||U.call(r,c,y)},Me=function(c){ce(!1,c)},ue=function(c){var y;return(y=r.onConfirm)===null||y===void 0?void 0:y.call(xe,c)},Ne=function(c){var y;ce(!1,c),(y=r.onCancel)===null||y===void 0||y.call(xe,c)},fe=function(c){c.keyCode===$.Z.ESC&&X&&ce(!1,c)},Re=function(c){var y=r.disabled;y||ce(c)},Ae=function(c,y){var U=r.okButtonProps,je=r.cancelButtonProps,_e=r.title,pe=r.cancelText,Ge=r.okText,Oe=r.okType,We=r.icon,i=r.showCancel,Fe=i===void 0?!0:i;return D.createElement("div",{className:"".concat(c,"-inner-content")},D.createElement("div",{className:"".concat(c,"-message")},We,D.createElement("div",{className:"".concat(c,"-message-title")},(0,_.Z)(_e))),D.createElement("div",{className:"".concat(c,"-buttons")},Fe&&D.createElement(Ee.Z,(0,N.Z)({onClick:Ne,size:"small"},je),pe||y.cancelText),D.createElement(R.Z,{buttonProps:(0,N.Z)((0,N.Z)({size:"small"},(0,ae.n)(Oe)),U),actionFn:ue,close:Me,prefixCls:h("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},Ge||y.okText)))},p=r.prefixCls,ye=r.placement,de=r.children,ge=r.overlayClassName,De=ze(r,["prefixCls","placement","children","overlayClassName"]),Se=h("popover",p),Ue=h("popconfirm",p),Be=V()(Ue,ge),Le=D.createElement(t.Z,{componentName:"Popconfirm",defaultLocale:ie.Z.Popconfirm},function(A){return Ae(Se,A)}),Ke=h();return D.createElement(f.Z,(0,N.Z)({},De,{prefixCls:Se,placement:ye,onVisibleChange:Re,visible:X,overlay:Le,overlayClassName:Be,ref:me,transitionName:(0,O.mL)(Ke,"zoom-big",r.transitionName)}),(0,le.Tm)(de,{onKeyDown:function(c){var y,U;D.isValidElement(de)&&((U=de==null?void 0:(y=de.props).onKeyDown)===null||U===void 0||U.call(y,c)),fe(c)}}))});Pe.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:D.createElement(oe.Z,null),disabled:!1},re.Z=Pe},62350:function(Ce,re,e){"use strict";var N=e(38663),w=e.n(N),D=e(20136),M=e(57663),V=e(44887),he=e.n(V)}}]);
