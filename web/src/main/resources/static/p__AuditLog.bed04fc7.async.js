(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[504],{25592:function(b,O,e){"use strict";e.d(O,{Z:function(){return E}});var i=e(28991),u=e(67294),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},n=S,c=e(27029),P=function(g,A){return u.createElement(c.Z,(0,i.Z)((0,i.Z)({},g),{},{ref:A,icon:n}))};P.displayName="SyncOutlined";var E=u.forwardRef(P)},78844:function(b,O,e){"use strict";var i=e(22122),u=e(28991),S=e(81253),n=e(67294),c=e(30885),P=e(51617),E=e(66758),U=["fieldProps","proFieldProps"],g="dateTimeRange",A=n.forwardRef(function(d,Z){var T=d.fieldProps,m=d.proFieldProps,a=(0,S.Z)(d,U),M=(0,n.useContext)(E.Z);return n.createElement(c.Z,(0,i.Z)({ref:Z,mode:"edit",fieldProps:(0,u.Z)({getPopupContainer:M.getPopupContainer},T),valueType:g,proFieldProps:m,filedConfig:{valueType:g,lightFilterLabelFormatter:function(C){return(0,P.Z)(C,"YYYY-MM-DD HH:mm:ss")}}},a))});O.Z=A},64317:function(b,O,e){"use strict";var i=e(22122),u=e(28991),S=e(81253),n=e(67294),c=e(30885),P=e(96202),E=e(66758),U=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],g=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],A=n.forwardRef(function(a,M){var f=a.fieldProps,C=a.children,y=a.params,l=a.proFieldProps,_=a.mode,p=a.valueEnum,r=a.request,v=a.showSearch,t=a.options,B=(0,S.Z)(a,U),W=(0,n.useContext)(E.Z);return n.createElement(c.Z,(0,i.Z)({mode:"edit",valueEnum:(0,P.h)(p),request:r,params:y,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,u.Z)({options:t,mode:_,showSearch:v,getPopupContainer:W.getPopupContainer},f),ref:M,proFieldProps:l},B),C)}),d=n.forwardRef(function(a,M){var f=a.fieldProps,C=a.children,y=a.params,l=a.proFieldProps,_=a.mode,p=a.valueEnum,r=a.request,v=a.options,t=(0,S.Z)(a,g),B=(0,u.Z)({options:v,mode:_||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},f),W=(0,n.useContext)(E.Z);return n.createElement(c.Z,(0,i.Z)({mode:"edit",valueEnum:(0,P.h)(p),request:r,params:y,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,u.Z)({getPopupContainer:W.getPopupContainer},B),ref:M,proFieldProps:l},t),C)}),Z=A,T=d,m=Z;m.SearchSelect=T,m.displayName="ProFormComponent",O.Z=m},59712:function(b){b.exports={auditLog:"auditLog___oJOgF","auditLog__form-wrap":"auditLog__form-wrap___1CBpJ",content:"content___Hfc44"}},6227:function(b,O,e){"use strict";e.r(O);var i=e(49111),u=e(19650),S=e(71153),n=e(60331),c=e(57663),P=e(71577),E=e(11849),U=e(3182),g=e(48736),A=e(27049),d=e(2824),Z=e(94043),T=e.n(Z),m=e(67294),a=e(59712),M=e.n(a),f=e(54154),C=e(76570),y=e(25592),l=e(89366),_=e(5894),p=e(64317),r=e(78844),v=e(95934),t=e(85893),B=function(){var J=(0,m.useState)([]),j=(0,d.Z)(J,2),X=j[0],H=j[1],Q=(0,m.useState)([]),N=(0,d.Z)(Q,2),V=N[0],k=N[1],q=(0,m.useState)([]),x=(0,d.Z)(q,2),ee=x[0],te=x[1],re=(0,m.useState)([]),K=(0,d.Z)(re,2),se=K[0],z=K[1],Y=(0,m.useRef)(),ne=(0,m.useState)(0),G=(0,d.Z)(ne,2),ae=G[0],le=G[1],_e=(0,m.useState)({pageNo:1,pageSize:20}),$=(0,d.Z)(_e,2),D=$[0],oe=$[1],F=function(o){(0,f.CX)(o).then(function(s){var L=s.data,I=JSON.parse(L);if(le(I.total),I.rows){var R=JSON.parse(I.rows);z(R)}else z([])})};return(0,m.useEffect)(function(){(0,f.m8)().then(function(h){var o=h.data;if(o){var s=JSON.parse(o);H(s)}}),(0,f.LX)().then(function(h){var o=h.data;if(o){var s=JSON.parse(o);te(s)}}),(0,f.gY)().then(function(h){var o=h.data;if(o){var s=JSON.parse(o);k(s)}}),F(D)},[]),(0,t.jsxs)("div",{className:M().auditLog,children:[(0,t.jsxs)("div",{className:M()["auditLog__form-wrap"],children:[(0,t.jsx)(A.Z,{orientation:"left",plain:!0,children:(0,t.jsx)(C.Z,{})}),(0,t.jsxs)(_.A,{layout:"inline",formRef:Y,size:"small",onFinish:function(){var h=(0,U.Z)(T().mark(function o(s){var L;return T().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:L={},Object.keys(s).length>0&&(s.times?(L=(0,E.Z)({startTime:s[0],endTime:s.times[1]},s),delete L.times):L=(0,E.Z)({},s),oe(function(w){return(0,E.Z)({pageNo:w.pageNo,pageSize:w.pageSize},L)})),F((0,E.Z)({pageSize:D.pageSize,pageNo:D.pageNo},L));case 3:case"end":return R.stop()}},o)}));return function(o){return h.apply(this,arguments)}}(),submitter:{render:function(){return[(0,t.jsx)(P.Z,{type:"primary",htmlType:"submit",icon:(0,t.jsx)(C.Z,{}),className:"br-5 w-80 fs-12",children:"\u67E5\u8BE2"},"edit"),(0,t.jsx)(P.Z,{htmlType:"button",icon:(0,t.jsx)(y.Z,{}),className:"br-5 w-80 fs-12",onClick:function(){var s;(s=Y.current)===null||s===void 0||s.resetFields(),F({pageSize:D.pageSize,pageNo:D.pageNo})},children:"\u91CD\u7F6E"},"reset")]}},children:[(0,t.jsx)(_.A.Group,{children:(0,t.jsx)(p.Z,{options:X,placeholder:"\u7528\u6237\u540D",name:"dbUserName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(_.A.Group,{children:(0,t.jsx)(p.Z,{options:V,width:"sm",placeholder:"\u6570\u636E\u5E93\u8868\u540D",name:"msTableName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(_.A.Group,{children:(0,t.jsx)(p.Z,{options:ee,placeholder:"\u64CD\u4F5C\u7C7B\u578B",name:"sqlType"},"value")}),(0,t.jsx)(_.A.Group,{children:(0,t.jsx)(r.Z,{width:"md",fieldProps:{placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],bordered:!0},name:"times"})})]})]}),(0,t.jsx)("div",{className:M().content,children:(0,t.jsx)(v.Rs,{rowKey:"id",dataSource:se,headerTitle:"\u6570\u636E\u5E93\u5BA1\u8BA1\u65E5\u5FD7\u5217\u8868",pagination:{showSizeChanger:!1,pageSize:D.pageSize,total:ae,current:D.pageNo,size:"small",onChange:function(o,s){F({pageNo:o,pageSize:s,dbUserName:D.dbUserName,sqlType:D.sqlType,msTableName:D.msTableName,startTime:D.startTime,endTime:D.endTime})}},metas:{avatar:{render:function(){return(0,t.jsx)(l.Z,{style:{color:"#52c41a"}})}},title:{dataIndex:"userName"},description:{dataIndex:"instanceName",render:function(o,s){return[(0,t.jsxs)("div",{className:"fs-12",children:[(0,t.jsx)("span",{children:"\u6570\u636E\u5E93\u5B9E\u4F8B\u5730\u5740\uFF1A"}),(0,t.jsx)("span",{style:{color:"#36cfc9"},children:s.instanceName})]},"instanceName")]}},subTitle:{dataIndex:"opTime",render:function(o,s){return[(0,t.jsxs)(u.Z,{children:[(0,t.jsx)("span",{children:s.opTime},"opTime"),s.sqlType&&s.sqlType!=="UNKNOW"&&(0,t.jsx)(n.Z,{color:"#55acee",children:(0,t.jsxs)("span",{className:"fs-12",children:["\u64CD\u4F5C\u7C7B\u578B\uFF1A",s.sqlType]})},"sqlType"),s.msTableName&&(0,t.jsx)(n.Z,{color:"#55acee",children:(0,t.jsxs)("span",{className:"fs-12",children:["\u8868\u540D\uFF1A",s.msTableName]})},"sqlType")]},"space")]}},content:{dataIndex:"msSql",render:function(o,s){return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{color:"#00000073"},children:"SQL\u8BED\u53E5"}),(0,t.jsx)("div",{style:{color:"#000000D9"},children:s.msSql})]},"msSql")}}}})})]})};O.default=B},54154:function(b,O,e){"use strict";e.d(O,{Y8:function(){return P},IY:function(){return U},z2:function(){return A},m8:function(){return Z},LX:function(){return m},gY:function(){return M},CX:function(){return C}});var i=e(11849),u=e(3182),S=e(94043),n=e.n(S),c=e(32773);function P(l){return E.apply(this,arguments)}function E(){return E=(0,u.Z)(n().mark(function l(_){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.WY)("/api/skyflying/getAllUserName",(0,i.Z)({method:"GET"},_||{})));case 1:case"end":return r.stop()}},l)})),E.apply(this,arguments)}function U(l){return g.apply(this,arguments)}function g(){return g=(0,u.Z)(n().mark(function l(_){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.WY)("/api/skyflying/getAllInstanceAndTableName",(0,i.Z)({method:"GET"},_||{})));case 1:case"end":return r.stop()}},l)})),g.apply(this,arguments)}function A(l,_){return d.apply(this,arguments)}function d(){return d=(0,u.Z)(n().mark(function l(_,p){return n().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,c.WY)("/api/skyflying/getAllSegments",(0,i.Z)({method:"GET",timeout:6e4,headers:{"Content-Type":"application/json"},params:_},p||{})));case 1:case"end":return v.stop()}},l)})),d.apply(this,arguments)}function Z(l){return T.apply(this,arguments)}function T(){return T=(0,u.Z)(n().mark(function l(_){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.WY)("/api/skyflying/getAllUserNameFromDMS",(0,i.Z)({timeout:6e4},_||{})));case 1:case"end":return r.stop()}},l)})),T.apply(this,arguments)}function m(l){return a.apply(this,arguments)}function a(){return a=(0,u.Z)(n().mark(function l(_){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.WY)("/api/skyflying/getAllSqlTypeFromDMS",(0,i.Z)({timeout:6e4},_||{})));case 1:case"end":return r.stop()}},l)})),a.apply(this,arguments)}function M(l){return f.apply(this,arguments)}function f(){return f=(0,u.Z)(n().mark(function l(_){return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.WY)("/api/skyflying/getAllTableNameFromDMS",(0,i.Z)({timeout:6e4},_||{})));case 1:case"end":return r.stop()}},l)})),f.apply(this,arguments)}function C(l,_){return y.apply(this,arguments)}function y(){return y=(0,u.Z)(n().mark(function l(_,p){return n().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,c.WY)("/api/skyflying/getDmsAuditLogFromDb",(0,i.Z)({method:"GET",timeout:6e4,params:_},p||{})));case 1:case"end":return v.stop()}},l)})),y.apply(this,arguments)}}}]);
