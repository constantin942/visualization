(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[126],{37174:function(Ce){Ce.exports={alarm:"alarm___12xQi",salesRank:"salesRank___-5oIk",rankingList:"rankingList___rxbMU",rankingItemNumber:"rankingItemNumber___3eh0u",active:"active___3KjTZ",rankingItemTitle:"rankingItemTitle___3gCS2","alarm-data":"alarm-data___17B2L",alarmDetail:"alarmDetail___9Lz5b"}},52953:function(){},44887:function(){},26723:function(Ce,re,e){"use strict";e.r(re),e.d(re,{default:function(){return we}});var R=e(20228),Y=e(11382),D=e(66456),M=e(78587),$=e(3182),Ee=e(57663),oe=e(71577),z=e(11849),f=e(2824),he=e(94043),ne=e.n(he),t=e(67294),ie=e(37174),x=e.n(ie),_=e(48606),ae=e(71194),S=e(50146),N=e(88983),Pe=e(47933),Ve=e(62350),xe=e(75443),r=e(77576),me=e(12028),ve=e(17462),E=e(76772),J=e(38663),Ie=e(52953),X=e(96156),Me=e(28481),ce=e(90484),Te=e(94184),ue=e.n(Te),Re=e(50344),fe=e(24308),Ne=e(21687),Ae=e(65632),p=e(22122);function ye(a){return a!=null}var de=function(n){var s=n.itemPrefixCls,o=n.component,l=n.span,d=n.className,c=n.style,h=n.labelStyle,O=n.contentStyle,b=n.bordered,C=n.label,g=n.content,G=n.colon,P=o;if(b){var v;return t.createElement(P,{className:ue()((v={},(0,X.Z)(v,"".concat(s,"-item-label"),ye(C)),(0,X.Z)(v,"".concat(s,"-item-content"),ye(g)),v),d),style:c,colSpan:l},ye(C)&&t.createElement("span",{style:h},C),ye(g)&&t.createElement("span",{style:O},g))}return t.createElement(P,{className:ue()("".concat(s,"-item"),d),style:c,colSpan:l},t.createElement("div",{className:"".concat(s,"-item-container")},(C||C===0)&&t.createElement("span",{className:ue()("".concat(s,"-item-label"),(0,X.Z)({},"".concat(s,"-item-no-colon"),!G)),style:h},C),(g||g===0)&&t.createElement("span",{className:ue()("".concat(s,"-item-content")),style:O},g)))},ge=de;function De(a,n,s){var o=n.colon,l=n.prefixCls,d=n.bordered,c=s.component,h=s.type,O=s.showLabel,b=s.showContent,C=s.labelStyle,g=s.contentStyle;return a.map(function(G,P){var v=G.props,j=v.label,k=v.children,L=v.prefixCls,q=L===void 0?l:L,W=v.className,m=v.style,le=v.labelStyle,ee=v.contentStyle,w=v.span,U=w===void 0?1:w,F=G.key;return typeof c=="string"?t.createElement(ge,{key:"".concat(h,"-").concat(F||P),className:W,style:m,labelStyle:(0,p.Z)((0,p.Z)({},C),le),contentStyle:(0,p.Z)((0,p.Z)({},g),ee),span:U,colon:o,component:c,itemPrefixCls:q,bordered:d,label:O?j:null,content:b?k:null}):[t.createElement(ge,{key:"label-".concat(F||P),className:W,style:(0,p.Z)((0,p.Z)((0,p.Z)({},C),m),le),span:1,colon:o,component:c[0],itemPrefixCls:q,bordered:d,label:j}),t.createElement(ge,{key:"content-".concat(F||P),className:W,style:(0,p.Z)((0,p.Z)((0,p.Z)({},g),m),ee),span:U*2-1,component:c[1],itemPrefixCls:q,bordered:d,content:k})]})}var _e=function(n){var s=t.useContext(A),o=n.prefixCls,l=n.vertical,d=n.row,c=n.index,h=n.bordered;return l?t.createElement(t.Fragment,null,t.createElement("tr",{key:"label-".concat(c),className:"".concat(o,"-row")},De(d,n,(0,p.Z)({component:"th",type:"label",showLabel:!0},s))),t.createElement("tr",{key:"content-".concat(c),className:"".concat(o,"-row")},De(d,n,(0,p.Z)({component:"td",type:"content",showContent:!0},s)))):t.createElement("tr",{key:c,className:"".concat(o,"-row")},De(d,n,(0,p.Z)({component:h?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},s)))},Be=_e,Le=function(n){var s=n.children;return s},Ue=Le,Ke=e(96159),A=t.createContext({}),i={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function y(a,n){if(typeof a=="number")return a;if((0,ce.Z)(a)==="object")for(var s=0;s<fe.c4.length;s++){var o=fe.c4[s];if(n[o]&&a[o]!==void 0)return a[o]||i[o]}return 3}function B(a,n,s){var o=a;return(n===void 0||n>s)&&(o=(0,Ke.Tm)(a,{span:s}),(0,Ne.Z)(n===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),o}function je(a,n){var s=(0,Re.Z)(a).filter(function(c){return c}),o=[],l=[],d=n;return s.forEach(function(c,h){var O,b=(O=c.props)===null||O===void 0?void 0:O.span,C=b||1;if(h===s.length-1){l.push(B(c,b,d)),o.push(l);return}C<d?(d-=C,l.push(c)):(l.push(B(c,C,d)),o.push(l),d=n,l=[])}),o}function Se(a){var n,s=a.prefixCls,o=a.title,l=a.extra,d=a.column,c=d===void 0?i:d,h=a.colon,O=h===void 0?!0:h,b=a.bordered,C=a.layout,g=a.children,G=a.className,P=a.style,v=a.size,j=a.labelStyle,k=a.contentStyle,L=t.useContext(Ae.E_),q=L.getPrefixCls,W=L.direction,m=q("descriptions",s),le=t.useState({}),ee=(0,Me.Z)(le,2),w=ee[0],U=ee[1],F=y(c,w);t.useEffect(function(){var V=fe.ZP.subscribe(function(se){(0,ce.Z)(c)==="object"&&U(se)});return function(){fe.ZP.unsubscribe(V)}},[]);var T=je(g,F),I=t.useMemo(function(){return{labelStyle:j,contentStyle:k}},[j,k]);return t.createElement(A.Provider,{value:I},t.createElement("div",{className:ue()(m,(n={},(0,X.Z)(n,"".concat(m,"-").concat(v),v&&v!=="default"),(0,X.Z)(n,"".concat(m,"-bordered"),!!b),(0,X.Z)(n,"".concat(m,"-rtl"),W==="rtl"),n),G),style:P},(o||l)&&t.createElement("div",{className:"".concat(m,"-header")},o&&t.createElement("div",{className:"".concat(m,"-title")},o),l&&t.createElement("div",{className:"".concat(m,"-extra")},l)),t.createElement("div",{className:"".concat(m,"-view")},t.createElement("table",null,t.createElement("tbody",null,T.map(function(V,se){return t.createElement(Be,{key:se,index:se,colon:O,prefixCls:m,vertical:C==="vertical",bordered:b,row:V})}))))))}Se.Item=Ue;var pe=Se,$e=e(74379),Ze=e(38648),u=e(85893);function Oe(a,n){var s=(0,t.useState)({}),o=(0,f.Z)(s,2),l=o[0],d=o[1],c=(0,t.useState)(!1),h=(0,f.Z)(c,2),O=h[0],b=h[1],C=(0,t.useState)(!1),g=(0,f.Z)(C,2),G=g[0],P=g[1],v=(0,t.useState)(!1),j=(0,f.Z)(v,2),k=j[0],L=j[1],q=(0,t.useState)([]),W=(0,f.Z)(q,2),m=W[0],le=W[1],ee=(0,t.useState)("update"),w=(0,f.Z)(ee,2),U=w[0],F=w[1];return(0,t.useImperativeHandle)(n,function(){return{setInitValues:function(I){I.length===1&&d(I[0]),le(I)}}}),(0,u.jsx)(S.Z,{width:600,afterClose:function(){P(!1),b(!1),F("update")},destroyOnClose:!0,title:m.length===1?"".concat(l==null?void 0:l.userName,"\uFF08\u544A\u8B66\u5904\u7F6E\uFF09"):"\u6279\u91CF\u5904\u7F6E".concat(m.length,"\u6761\u544A\u8B66"),visible:a.handleVisible,onCancel:function(){a.setVisible(!1),L(!1),F("update")},onOk:function(){if(O&&(0,_.QD)([{id:l.id,matchRuleId:l.matchRuleId,originalTime:l.originalTime,userName:l.userName,alarmContent:l.alarmContent,flag:k?"update":"delete"}]).then(function(){a.refresh(),Ze.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)}),m.length>1){var I=m.map(function(V){return V.flag=U,V});(0,_.QD)(I).then(function(){a.refresh(),Ze.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)})}a.setVisible(!1)},children:m.length===1?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(pe,{layout:"horizontal",column:2,children:[(0,u.jsx)(pe.Item,{label:"\u8BB0\u5F55\u4EA7\u751F\u65F6\u95F4",children:l==null?void 0:l.originalTime}),(0,u.jsx)(pe.Item,{label:"\u89C4\u5219ID",children:l==null?void 0:l.matchRuleId})]}),(0,u.jsx)(E.Z,{message:l==null?void 0:l.alarmContent,className:"text-c",type:"warning"}),(0,u.jsxs)("div",{className:"flex-x-sb mt-20",children:[(0,u.jsx)("div",{}),(0,u.jsx)("div",{children:(0,u.jsx)(xe.Z,{title:"\u662F\u5426\u66F4\u65B0\u753B\u50CF\uFF1F",visible:G,onConfirm:function(){P(!1),L(!0)},onCancel:function(){return P(!1)},okText:"\u66F4\u65B0",cancelText:"\u4E0D\u66F4\u65B0",children:(0,u.jsx)(me.Z,{checkedChildren:"\u5FFD\u7565\u544A\u8B66",unCheckedChildren:"\u4E0D\u5904\u7F6E",onChange:function(I){b(I),P(I)}})})})]})]}):(0,u.jsx)("div",{className:"text-c",children:(0,u.jsx)(Pe.ZP.Group,{defaultValue:"update",value:U,options:[{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66",value:"update"},{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\u5E76\u66F4\u65B0\u753B\u50CF",value:"delete"}],onChange:function(I){var V=I.target.value;F(V)}})})})}var We=(0,t.forwardRef)(Oe),Ge=function(n){var s=(0,t.useState)([]),o=(0,f.Z)(s,2),l=o[0],d=o[1],c=(0,t.useState)(0),h=(0,f.Z)(c,2),O=h[0],b=h[1],C=(0,t.useState)(!1),g=(0,f.Z)(C,2),G=g[0],P=g[1],v=(0,t.useState)(!1),j=(0,f.Z)(v,2),k=j[0],L=j[1],q=(0,t.useState)([]),W=(0,f.Z)(q,2),m=W[0],le=W[1],ee=(0,t.useState)({pageNo:1,pageSize:10}),w=(0,f.Z)(ee,2),U=w[0],F=w[1],T=(0,t.useRef)(),I=(0,t.useState)({}),V=(0,f.Z)(I,2),se=V[0],He=V[1];function Fe(K){(0,_.cD)(K).then(function(te){var Z=te.data;if(P(!0),Z){var H=JSON.parse(Z);if(b(H.total),H){var Q=JSON.parse(H.rows);d(Q.filter(function(ze){return ze.isDelete===0}))}else d([])}P(!1)})}var Qe=[{title:"\u8BB0\u5F55\u4EA7\u751F\u7684\u65F6\u95F4",dataIndex:"originalTime\uFF1A",key:"originalTime\uFF1A",width:"250px",align:"center",render:function(te,Z){return Z.originalTime||"-"}},{title:"\u89C4\u5219ID",dataIndex:"matchRuleId\uFF1A",key:"matchRuleId\uFF1A",width:"250px",align:"center",render:function(te,Z){return Z.matchRuleId||"-"}},{title:"\u544A\u8B66\u5185\u5BB9",dataIndex:"alarmContent",key:"alarmContent",align:"center"},{title:"\u5904\u7F6E",width:"150px",align:"center",render:function(te,Z){return[(0,u.jsx)("a",{onClick:function(){var Q;L(!0),(Q=T.current)===null||Q===void 0||Q.setInitValues([Z])},children:"\u5904\u7F6E"},"handle")]}}],Ye=function(te){le(te)},Je={selectedRowKeys:m,onChange:Ye},Xe=m.length>0;return(0,t.useEffect)(function(){var K=n.location.query;He(K),Fe((0,z.Z)((0,z.Z)((0,z.Z)({},K),U),{isDelete:0}))},[]),(0,u.jsxs)("div",{className:x().alarmDetail,children:[(0,u.jsx)(Y.Z,{spinning:G,children:(0,u.jsx)(M.Z,{rowSelection:Je,columns:Qe,dataSource:l,rowKey:"id",title:function(){return(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{children:se.userName}),(0,u.jsx)(oe.Z,{type:"primary",disabled:!Xe,size:"middle",onClick:function(){var Z,H=l.filter(function(Q){return m.includes(Q.id)});L(!0),(Z=T.current)===null||Z===void 0||Z.setInitValues(H)},children:"\u6279\u91CF\u5904\u7F6E"})]})},size:"middle",pagination:{current:U.pageNo,pageSize:U.pageSize,total:O,onChange:function(){var K=(0,$.Z)(ne().mark(function Z(H,Q){return ne().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,F(function(){return{pageSize:Q,pageNo:H}});case 2:Fe((0,z.Z)({pageNo:H,pageSize:Q},se));case 3:case"end":return be.stop()}},Z)}));function te(Z,H){return K.apply(this,arguments)}return te}()}})}),(0,u.jsx)(We,{refresh:function(){Fe((0,z.Z)((0,z.Z)({},U),se))},setVisible:L,handleVisible:k,ref:T})]})},we=Ge},48606:function(Ce,re,e){"use strict";e.d(re,{Hp:function(){return Ee},CI:function(){return z},cD:function(){return he},QD:function(){return t}});var R=e(11849),Y=e(3182),D=e(94043),M=e.n(D),$=e(21704);function Ee(x){return oe.apply(this,arguments)}function oe(){return oe=(0,Y.Z)(M().mark(function x(_){return M().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,$.WY)("/api/skyflying/getAlarmData",(0,R.Z)({method:"GET"},_||{})));case 1:case"end":return S.stop()}},x)})),oe.apply(this,arguments)}function z(x){return f.apply(this,arguments)}function f(){return f=(0,Y.Z)(M().mark(function x(_){return M().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,$.WY)("/api/skyflying/getUserAlarmData",(0,R.Z)({method:"GET"},_||{})));case 1:case"end":return S.stop()}},x)})),f.apply(this,arguments)}function he(x,_){return ne.apply(this,arguments)}function ne(){return ne=(0,Y.Z)(M().mark(function x(_,ae){return M().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,$.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,R.Z)({method:"GET",params:_||{}},ae||{})));case 1:case"end":return N.stop()}},x)})),ne.apply(this,arguments)}function t(x,_){return ie.apply(this,arguments)}function ie(){return ie=(0,Y.Z)(M().mark(function x(_,ae){return M().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,$.WY)("/api/skyflying/updateAnomalyDetectionInfo",(0,R.Z)({method:"POST",data:_||{}},ae||{})));case 1:case"end":return N.stop()}},x)})),ie.apply(this,arguments)}},75443:function(Ce,re,e){"use strict";var R=e(22122),Y=e(28481),D=e(67294),M=e(94184),$=e.n(M),Ee=e(21770),oe=e(68855),z=e(15105),f=e(61580),he=e(71577),ne=e(73839),t=e(42051),ie=e(85636),x=e(65632),_=e(81643),ae=e(96159),S=e(33603),N=e(86743),Pe=void 0,Ve=function(r,me){var ve={};for(var E in r)Object.prototype.hasOwnProperty.call(r,E)&&me.indexOf(E)<0&&(ve[E]=r[E]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,E=Object.getOwnPropertySymbols(r);J<E.length;J++)me.indexOf(E[J])<0&&Object.prototype.propertyIsEnumerable.call(r,E[J])&&(ve[E[J]]=r[E[J]]);return ve},xe=D.forwardRef(function(r,me){var ve=D.useContext(x.E_),E=ve.getPrefixCls,J=(0,Ee.Z)(!1,{value:r.visible,defaultValue:r.defaultVisible}),Ie=(0,Y.Z)(J,2),X=Ie[0],Me=Ie[1],ce=function(i,y){var B;Me(i,!0),(B=r.onVisibleChange)===null||B===void 0||B.call(r,i,y)},Te=function(i){ce(!1,i)},ue=function(i){var y;return(y=r.onConfirm)===null||y===void 0?void 0:y.call(Pe,i)},Re=function(i){var y;ce(!1,i),(y=r.onCancel)===null||y===void 0||y.call(Pe,i)},fe=function(i){i.keyCode===z.Z.ESC&&X&&ce(!1,i)},Ne=function(i){var y=r.disabled;y||ce(i)},Ae=function(i,y){var B=r.okButtonProps,je=r.cancelButtonProps,Se=r.title,pe=r.cancelText,$e=r.okText,Ze=r.okType,u=r.icon,Oe=r.showCancel,We=Oe===void 0?!0:Oe;return D.createElement("div",{className:"".concat(i,"-inner-content")},D.createElement("div",{className:"".concat(i,"-message")},u,D.createElement("div",{className:"".concat(i,"-message-title")},(0,_.Z)(Se))),D.createElement("div",{className:"".concat(i,"-buttons")},We&&D.createElement(he.Z,(0,R.Z)({onClick:Re,size:"small"},je),pe||y.cancelText),D.createElement(N.Z,{buttonProps:(0,R.Z)((0,R.Z)({size:"small"},(0,ne.n)(Ze)),B),actionFn:ue,close:Te,prefixCls:E("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},$e||y.okText)))},p=r.prefixCls,ye=r.placement,de=r.children,ge=r.overlayClassName,De=Ve(r,["prefixCls","placement","children","overlayClassName"]),_e=E("popover",p),Be=E("popconfirm",p),Le=$()(Be,ge),Ue=D.createElement(t.Z,{componentName:"Popconfirm",defaultLocale:ie.Z.Popconfirm},function(A){return Ae(_e,A)}),Ke=E();return D.createElement(f.Z,(0,R.Z)({},De,{prefixCls:_e,placement:ye,onVisibleChange:Ne,visible:X,overlay:Ue,overlayClassName:Le,ref:me,transitionName:(0,S.mL)(Ke,"zoom-big",r.transitionName)}),(0,ae.Tm)(de,{onKeyDown:function(i){var y,B;D.isValidElement(de)&&((B=de==null?void 0:(y=de.props).onKeyDown)===null||B===void 0||B.call(y,i)),fe(i)}}))});xe.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:D.createElement(oe.Z,null),disabled:!1},re.Z=xe},62350:function(Ce,re,e){"use strict";var R=e(38663),Y=e.n(R),D=e(20136),M=e(57663),$=e(44887),Ee=e.n($)}}]);
