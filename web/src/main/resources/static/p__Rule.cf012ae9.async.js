(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[835],{37476:function(Q,N,e){"use strict";e.d(N,{Y:function(){return J}});var B=e(71194),P=e(50146),Y=e(22122),c=e(87757),m=e.n(c),g=e(92137),Z=e(28991),F=e(28481),G=e(84305),z=e(75901),W=e(81253),a=e(67294),$=e(21770),u=e(73935),I=e(24214),k=e(80334),K=e(82492),w=e.n(K),R=["children","trigger","onVisibleChange","modalProps","onFinish","submitTimeout","title","width","visible"];function J(i){var r,n,o,d,t=i.children,b=i.trigger,f=i.onVisibleChange,l=i.modalProps,L=i.onFinish,x=i.submitTimeout,re=i.title,ne=i.width,j=i.visible,A=(0,W.Z)(i,R);(0,k.ET)(!A.footer||!(l==null?void 0:l.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var V=(0,a.useContext)(z.ZP.ConfigContext),X=(0,a.useState)([]),ae=(0,F.Z)(X,2),q=ae[1],S=(0,a.useState)(!1),ee=(0,F.Z)(S,2),O=ee[0],E=ee[1],C=(0,$.Z)(!!j,{value:j,onChange:f}),s=(0,F.Z)(C,2),U=s[0],T=s[1],te=(0,a.useRef)(null),se=(0,a.useCallback)(function(_){te.current===null&&_&&q([]),te.current=_},[]);(0,a.useEffect)(function(){U&&j&&(f==null||f(!0))},[j,U]);var ue=(0,a.useMemo)(function(){return b?a.cloneElement(b,(0,Z.Z)((0,Z.Z)({key:"trigger"},b.props),{},{onClick:function(){var _=(0,g.Z)(m().mark(function h(y){var D,M;return m().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:T(!U),(D=b.props)===null||D===void 0||(M=D.onClick)===null||M===void 0||M.call(D,y);case 2:case"end":return p.stop()}},h)}));function v(h){return _.apply(this,arguments)}return v}()})):null},[T,b,U]),ie=(0,a.useMemo)(function(){var _,v,h,y,D,M,H,p;return A.submitter===!1?!1:w()({searchConfig:{submitText:(_=(v=l==null?void 0:l.okText)!==null&&v!==void 0?v:(h=V.locale)===null||h===void 0||(y=h.Modal)===null||y===void 0?void 0:y.okText)!==null&&_!==void 0?_:"\u786E\u8BA4",resetText:(D=(M=l==null?void 0:l.cancelText)!==null&&M!==void 0?M:(H=V.locale)===null||H===void 0||(p=H.Modal)===null||p===void 0?void 0:p.cancelText)!==null&&D!==void 0?D:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:x?O:void 0,onClick:function(ce){var le;T(!1),l==null||(le=l.onCancel)===null||le===void 0||le.call(l,ce)}}},A.submitter)},[(r=V.locale)===null||r===void 0||(n=r.Modal)===null||n===void 0?void 0:n.cancelText,(o=V.locale)===null||o===void 0||(d=o.Modal)===null||d===void 0?void 0:d.okText,l,A.submitter,T,O,x]),oe=(0,a.useCallback)(function(_,v){return a.createElement(a.Fragment,null,_,te.current&&v?(0,u.createPortal)(v,te.current):v)},[]),de=(0,a.useCallback)(function(){var _=(0,g.Z)(m().mark(function v(h){var y,D,M;return m().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return y=L==null?void 0:L(h),x&&y instanceof Promise&&(E(!0),D=setTimeout(function(){return E(!1)},x),y.finally(function(){clearTimeout(D),E(!1)})),p.next=4,y;case 4:M=p.sent,M&&T(!1);case 6:case"end":return p.stop()}},v)}));return function(v){return _.apply(this,arguments)}}(),[L,T,x]);return a.createElement(a.Fragment,null,a.createElement(P.Z,(0,Y.Z)({title:re,width:ne||800},l,{visible:U,onCancel:function(v){var h;x&&O||(T(!1),l==null||(h=l.onCancel)===null||h===void 0||h.call(l,v))},footer:A.submitter!==!1&&a.createElement("div",{ref:se,style:{display:"flex",justifyContent:"flex-end"}})}),a.createElement(I.I,(0,Y.Z)({formComponentType:"ModalForm",layout:"vertical"},A,{submitter:ie,onFinish:de,contentRender:oe}),t)),ue)}},20294:function(Q){Q.exports={rule:"rule___2uB8V",formContent:"formContent___mfpUm",cardContent:"cardContent___ADntJ",ruleDescDetail:"ruleDescDetail___2wYEk"}},58541:function(Q,N,e){"use strict";e.r(N),e.d(N,{default:function(){return n}});var B=e(71153),P=e(60331),Y=e(57663),c=e(71577),m=e(2824),g=e(67294),Z=e(59975),F=e(3182),G=e(94043),z=e.n(G),W=e(37476),a=e(5966),$=e(89460),u=e(85893),I=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(t){setTimeout(function(){t(!0)},d)})},k=function(d){return(0,u.jsx)(W.Y,{width:700,modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")}},onFinish:(0,F.Z)(z().mark(function t(){return z().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,I(2e3);case 2:return console.log(1),f.abrupt("return",!0);case 4:case"end":return f.stop()}},t)})),title:"\u6DFB\u52A0\u89C4\u5219",children:(0,u.jsx)($.A.Group,{children:(0,u.jsx)(a.Z,{width:"md",name:"name",label:"\u7B7E\u7EA6\u5BA2\u6237\u540D\u79F0",tooltip:"\u6700\u957F\u4E3A 24 \u4F4D",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"})})})},K=k,w=e(29474),R=e(25377),J=e(20294),i=e.n(J),r=function(){var d=(0,g.useState)([]),t=(0,m.Z)(d,2),b=t[0],f=t[1],l=(0,g.useState)(0),L=(0,m.Z)(l,2),x=L[0],re=L[1],ne=(0,g.useState)(!1),j=(0,m.Z)(ne,2),A=j[0],V=j[1],X=(0,R.md)(),ae=(0,g.useState)({pageNo:1,pageSize:20}),q=(0,m.Z)(ae,2),S=q[0],ee=q[1],O=(0,g.useCallback)(function(E){(0,Z.$D)(E).then(function(C){var s=C.data;if(s){var U=JSON.parse(s);re(U.total);var T=JSON.parse(U.rows);T.length>0?f(T):f([])}})},[]);return(0,g.useEffect)(function(){O(S)},[O,S]),(0,u.jsxs)("div",{className:i().rule,children:[(0,u.jsx)(w.ZP,{pagination:{total:x,pageSize:S.pageSize,current:S.pageNo,defaultPageSize:8,showSizeChanger:!1,onChange:function(C,s){ee({pageSize:s,pageNo:C}),O({pageNo:C,pageSize:s})}},showActions:"hover",toolBarRender:function(){return[(0,u.jsx)(R.Nv,{accessible:X.canUpdate,children:(0,u.jsx)(c.Z,{type:"primary",onClick:function(){V(!0)},children:"\u6DFB\u52A0\u89C4\u5219"})},"add")]},rowKey:"id",rowSelection:!1,grid:{gutter:16,column:2},metas:{title:{dataIndex:"ruleDesc"},subTitle:{render:function(C,s){return[(0,u.jsx)("span",{className:"fs-13 mr-10",children:s.ruleName},"gmtCreate"),(0,u.jsx)(P.Z,{color:s.isDelete===1?"#f50":"#87d068",children:s.isDelete===1?"\u5DF2\u7981\u7528":"\u542F\u7528\u4E2D"},"tag")]}},type:{dataIndex:"gmtCreate"},content:{dataIndex:"ruleDesc",render:function(C,s){return(0,u.jsxs)("div",{className:i().cardContent,children:[(0,u.jsxs)("div",{className:i().ruleDescDetail,children:["\u521B\u5EFA\u65F6\u95F4\uFF1A",s.gmtCreate]},"ruleDesc"),(0,u.jsxs)("div",{className:i().ruleDescDetail,children:["\u63CF\u8FF0\uFF1A",s.ruleDescDetail]},"ruleDescDetail")]})}},actions:{render:function(C,s){return[(0,u.jsx)(R.Nv,{accessible:X.canUpdate,children:(0,u.jsx)(c.Z,{danger:s.isDelete===0,size:"small",type:"link",onClick:function(){(0,Z.Y3)({ruleId:s.id,isDelete:s.isDelete===0?1:0}).then(function(){return O(S)})},children:s.isDelete===1?"\u542F\u7528":"\u7981\u7528"})},"isDelete")]}}},headerTitle:"\u753B\u50CF\u89C4\u5219\u5217\u8868",dataSource:b}),(0,u.jsx)(K,{refresh:function(){return O(S)},setVisible:V,visible:A})]})},n=r},59975:function(Q,N,e){"use strict";e.d(N,{f2:function(){return F},MN:function(){return a},yb:function(){return u},ny:function(){return k},$D:function(){return w},Y3:function(){return J}});var B=e(11849),P=e(3182),Y=e(94043),c=e.n(Y),m=e(25377),g=e(80129),Z=e.n(g);function F(r,n){return G.apply(this,arguments)}function G(){return G=(0,P.Z)(c().mark(function r(n,o){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/api/skyflying/addUserPortraitByVisitedTableEverydayRule",(0,B.Z)({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},r)})),G.apply(this,arguments)}function z(r){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime.mark(function r(n){return _regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",request("/api/skyflying/updateUserPortraitByVisitedTimeRule",_objectSpread({method:"GET"},n||{})));case 1:case"end":return d.stop()}},r)})),W.apply(this,arguments)}function a(r,n){return $.apply(this,arguments)}function $(){return $=(0,P.Z)(c().mark(function r(n,o){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/api/skyflying/addUserPortraitByVisitedTtimeRule",(0,B.Z)({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},r)})),$.apply(this,arguments)}function u(r,n){return I.apply(this,arguments)}function I(){return I=(0,P.Z)(c().mark(function r(n,o){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/api/skyflying/updateUserPortraitByVisitedTimeRule",(0,B.Z)({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},r)})),I.apply(this,arguments)}function k(r,n){return K.apply(this,arguments)}function K(){return K=(0,P.Z)(c().mark(function r(n,o){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/api/skyflying/updateUserPortraitByVisitedTableEverydayRule",(0,B.Z)({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},r)})),K.apply(this,arguments)}function w(r,n){return R.apply(this,arguments)}function R(){return R=(0,P.Z)(c().mark(function r(n,o){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/api/skyflying/getUserPortraitRules",(0,B.Z)({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},r)})),R.apply(this,arguments)}function J(r,n){return i.apply(this,arguments)}function i(){return i=(0,P.Z)(c().mark(function r(n,o){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/api/skyflying/updateUserPortraitRule?"+Z().stringify(n),(0,B.Z)({method:"POST"},o||{})));case 1:case"end":return t.stop()}},r)})),i.apply(this,arguments)}}}]);
