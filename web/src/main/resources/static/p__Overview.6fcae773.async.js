(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(K){K.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2",nowrap:"nowrap___spq6f"}},81135:function(K,P,e){"use strict";e.r(P),e.d(P,{default:function(){return we}});var D=e(57663),_=e(71577),G=e(58024),s=e(39144),S=e(13062),W=e(71230),Z=e(95300),U=e(7277),T=e(89032),C=e(15746),R=e(71748),c=e(33860),p=e(3182),f=e(2824),x=e(94043),l=e.n(x),O=e(67294),te=e(26516),I=e.n(te),de=e(13254),Y=e(14277),n=e(11849),r=e(46066),m=e(68628),t=e(85893),a=function(v){var d={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{className:"fs-16 ib danger mr-10"}),(0,t.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,t.jsx)("div",{className:"of-hidden",children:v.warningList.length>0?(0,t.jsx)(r.Z,(0,n.Z)((0,n.Z)({},d),{},{children:v.warningList.map(function(u){return(0,t.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:u.alarmContent},u.id)})})):(0,t.jsx)(Y.Z,{description:"\u6682\u65E0\u544A\u8B66\u4FE1\u606F"})})]})},me=a,pe=e(69610),fe=e(54941),ve=e(81306),ge=e(19809),V=e(69886),z=e(41694),he=V.G2.InteractionAction,ye=V.G2.registerInteraction,_e=V.G2.registerAction,Ce=function(j){(0,ve.Z)(d,j);var v=(0,ge.Z)(d);function d(){return(0,pe.Z)(this,d),v.apply(this,arguments)}return(0,fe.Z)(d,[{key:"active",value:function(){var i=this,B=this.getView(),E=this.context.event;if(E.data){var g=E.data.items,A=B.geometries.filter(function(M){return M.type==="point"});(0,z.S6)(A,function(M){(0,z.S6)(M.elements,function(k){var L=(0,z.cx)(g,function(re){return re.data===k.data})!==-1,F=k.shape.getChildren(),$=(0,f.Z)(F,2),J=$[0],X=$[1];L?(J.animate({r:10,opacity:.2},{duration:1800,easing:"easeLinear",repeat:!0}),X.animate({r:6,opacity:.4},{duration:800,easing:"easeLinear",repeat:!0})):i.resetElementState(k)})})}}},{key:"reset",value:function(){var i=this,B=this.getView(),E=B.geometries.filter(function(g){return g.type==="point"});(0,z.S6)(E,function(g){(0,z.S6)(g.elements,function(A){i.resetElementState(A)})})}},{key:"resetElementState",value:function(i){var B=i.shape.getChildren(),E=(0,f.Z)(B,2),g=E[0],A=E[1];g.stopAnimate(),A.stopAnimate();var M=g.get("attrs"),k=M.r,L=M.opacity;g.attr({r:k,opacity:L});var F=A.get("attrs"),$=F.r,J=F.opacity;A.attr({r:$,opacity:J})}},{key:"getView",value:function(){return this.context.view}}]),d}(he),Ee=function(v){return(0,O.useEffect)(function(){V.G2.registerShape("point","custom-point",{draw:function(i,B){var E={x:i.x,y:i.y},g=B.addGroup();return g.addShape("circle",{name:"outer-point",attrs:{x:E.x,y:E.y,fill:i.color||"red",opacity:.5,r:6}}),g.addShape("circle",{name:"inner-point",attrs:{x:E.x,y:E.y,fill:i.color||"red",opacity:1,r:2}}),g}}),_e("custom-marker-action",Ce),ye("custom-marker-interaction",{start:[{trigger:"tooltip:show",action:"custom-marker-action:active"}],end:[{trigger:"tooltip:hide",action:"custom-marker-action:reset"}]});var d=new V.x1("RangeTimeData",{height:138,autoFit:!0,data:v.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"custom-point",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1,formatter:function(i){return{name:"\u5F53\u65E5\u6536\u96C6\u6570\u91CF",value:i.value+"\u6761"}}},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"custom-marker-interaction"}]});d.render()},[v.data]),(0,t.jsx)("div",{id:"RangeTimeData"})},De=Ee,se=e(83539),H=e(24480),Se=e(6650),ie=e(25377);function Oe(j,v){return ae.apply(this,arguments)}function ae(){return ae=(0,p.Z)(l().mark(function j(v,d){return l().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ie.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,n.Z)({params:v,method:"GET"},d||{})));case 1:case"end":return i.stop()}},j)})),ae.apply(this,arguments)}function Ze(j){return ne.apply(this,arguments)}function ne(){return ne=(0,p.Z)(l().mark(function j(v){return l().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,ie.WY)("/api/skyflying/getOverviewOfSystem",(0,n.Z)({method:"GET"},v||{})));case 1:case"end":return u.stop()}},j)})),ne.apply(this,arguments)}var xe=e(66572),Ue=e(2335),Te=e(52778),je=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],Ae=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(v,d){var u="-";if(d.tableNameDesc)u=d.tableNameDesc;else{var i=d.tableName.split("#");u=i[i.length-1]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:u})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center"},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,align:"center"}],be=function(v){var d=(0,O.useState)(),u=(0,f.Z)(d,2),i=u[0],B=u[1],E=(0,O.useState)([]),g=(0,f.Z)(E,2),A=g[0],M=g[1],k=(0,O.useState)([]),L=(0,f.Z)(k,2),F=L[0],$=L[1],J=(0,O.useState)([]),X=(0,f.Z)(J,2),re=X[0],ue=X[1],Be=(0,O.useState)(0),le=(0,f.Z)(Be,2),We=le[0],Re=le[1],Ie=(0,O.useState)({pageSize:10,pageNo:1}),Ne=(0,f.Z)(Ie,1),Q=Ne[0],Pe=(0,O.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),oe=(0,f.Z)(Pe,2),q=oe[0],Me=oe[1];function ke(){(0,Ue.cD)({pageSize:100,pageNo:1}).then(function(b){var o=b.data;if(o){var h=JSON.parse(o);if(h){var y=JSON.parse(h.rows);ue(y.map(function(N,w){return N.matchRuleId=w,N}))}else ue([])}})}var $e=function(){(0,Se.F$)().then(function(o){var h=o.data;h&&h.length>0?B(h.map(function(y){return y.id=H.Z.uuid(),y})):B([])})},Ge=function(){var o=H.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),h=H.Z.getRangeTime(7,"mm-dd");Oe({startTime:o[0],endTime:o[1]}).then(function(y){var N=y.data;M(function(){return N.map(function(w,ee){return{year:h[ee],value:w}})})})},Le=function(){var b=(0,p.Z)(l().mark(function o(){var h,y;return l().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Ze();case 2:h=w.sent,y=h.data,Me(y);case 5:case"end":return w.stop()}},o)}));return function(){return b.apply(this,arguments)}}(),Fe=function(){var b=(0,p.Z)(l().mark(function o(){return l().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:case"end":return y.stop()}},o)}));return function(){return b.apply(this,arguments)}}(),ce=function(o){(0,xe.m)(o).then(function(h){var y=h.data;if(y){var N=JSON.parse(y);if(Re(N.total),N.rows){var w=JSON.parse(N.rows);$(w.map(function(ee){return ee.id=H.Z.uuid(),ee}));return}}$([])})};return(0,O.useEffect)(function(){$e(),Ge(),ce(Q),Le().then(),Fe().then(),ke()},[Q]),(0,t.jsxs)("div",{className:I().overview,children:[(0,t.jsx)("div",{className:I().staticWrap,children:(0,t.jsxs)(W.Z,{gutter:20,children:[(0,t.jsx)(C.Z,{span:8,children:(0,t.jsx)(c.Z,{active:!0,loading:A.length===0,children:(0,t.jsx)(Te.Z,{title:"\u8FD1\u4E03\u5929\u6570\u636E\u6536\u96C6\u60C5\u51B5",chart:(0,t.jsx)("div",{style:{height:"163px"},children:(0,t.jsx)(De,{data:A})})})})}),(0,t.jsx)(C.Z,{span:8,children:(0,t.jsx)(s.Z,{className:I().bgW,title:(0,t.jsx)("div",{className:"text-c",children:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5"}),children:(0,t.jsx)(W.Z,{gutter:20,className:"text-c",style:{height:"162px"},children:(0,t.jsxs)(c.Z,{active:!0,loading:A.length===0,children:[(0,t.jsx)(C.Z,{span:12,className:"mt-15 text-c",children:(0,t.jsx)(U.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:q.visitedInformation,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(C.Z,{span:12,className:"mt-15",children:(0,t.jsx)(U.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:q.dbInstance,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(C.Z,{span:12,className:"mt-20",children:(0,t.jsx)(U.Z,{title:"\u7528\u6237\u4EBA\u6570",value:q.user,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(C.Z,{span:12,className:"mt-20",children:(0,t.jsx)(U.Z,{title:"\u6570\u636E\u5E93\u8868",value:q.table,valueStyle:{color:"#3f8600"}})})]})})})}),(0,t.jsx)(C.Z,{span:8,children:(0,t.jsx)("div",{className:I().waringWrap,children:(0,t.jsx)(me,{warningList:re})})})]})}),(0,t.jsx)("div",{className:I().center,children:(0,t.jsxs)(W.Z,{gutter:30,children:[(0,t.jsx)(C.Z,{span:12,children:(0,t.jsx)(se.ZP,{columns:je,dataSource:i,scroll:{y:500},options:!1,toolBarRender:function(){return[(0,t.jsx)(_.Z,{type:"link",size:"small",onClick:function(){v.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,pagination:!1,headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,t.jsx)(C.Z,{span:12,className:"pr-10",children:(0,t.jsx)(c.Z,{active:!0,loading:!1,paragraph:{rows:5},children:(0,t.jsx)(se.ZP,{scroll:{y:500},columns:Ae,dataSource:F,options:!1,rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:We,pageSize:Q.pageSize,current:Q.pageNo,onChange:function(o,h){ce({pageNo:o,pageSize:h})}},toolBarRender:function(){return[(0,t.jsx)(_.Z,{type:"link",size:"small",onClick:function(){v.history.push("/databases")},children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u7EDF\u8BA1"})})})]})})]})},we=be},66572:function(K,P,e){"use strict";e.d(P,{m:function(){return W}});var D=e(11849),_=e(3182),G=e(94043),s=e.n(G),S=e(25377);function W(U,T){return Z.apply(this,arguments)}function Z(){return Z=(0,_.Z)(s().mark(function U(T,C){return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,S.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,D.Z)({method:"GET",params:T},C||{})));case 1:case"end":return c.stop()}},U)})),Z.apply(this,arguments)}},6650:function(K,P,e){"use strict";e.d(P,{F$:function(){return W},Xd:function(){return U},mt:function(){return C},et:function(){return f},FP:function(){return l},Bx:function(){return te}});var D=e(11849),_=e(3182),G=e(94043),s=e.n(G),S=e(25377);function W(n,r){return Z.apply(this,arguments)}function Z(){return Z=(0,_.Z)(s().mark(function n(r,m){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCoarseCountsOfUsers",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),Z.apply(this,arguments)}function U(n,r){return T.apply(this,arguments)}function T(){return T=(0,_.Z)(s().mark(function n(r,m){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),T.apply(this,arguments)}function C(n,r){return R.apply(this,arguments)}function R(){return R=(0,_.Z)(s().mark(function n(r,m){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getVisitRate",(0,D.Z)({method:"GET",params:{username:r}},m||{})));case 1:case"end":return a.stop()}},n)})),R.apply(this,arguments)}function c(n,r){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,m){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),p.apply(this,arguments)}function f(n,r){return x.apply(this,arguments)}function x(){return x=(0,_.Z)(s().mark(function n(r,m){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCountsOfUser",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),x.apply(this,arguments)}function l(n,r){return O.apply(this,arguments)}function O(){return O=(0,_.Z)(s().mark(function n(r,m){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getUserOperationTypeCount",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),O.apply(this,arguments)}function te(n,r){return I.apply(this,arguments)}function I(){return I=(0,_.Z)(s().mark(function n(r,m){return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),I.apply(this,arguments)}function de(n,r){return Y.apply(this,arguments)}function Y(){return Y=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,m){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCoarseCountsOfOneUser",_objectSpread({method:"GET",params:r||{}},m||{})));case 1:case"end":return a.stop()}},n)})),Y.apply(this,arguments)}},2335:function(K,P,e){"use strict";e.d(P,{rO:function(){return W},cD:function(){return U},sF:function(){return C}});var D=e(11849),_=e(3182),G=e(94043),s=e.n(G),S=e(25377);function W(c){return Z.apply(this,arguments)}function Z(){return Z=(0,_.Z)(s().mark(function c(p){return s().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,S.WY)("/api/skyflying/getUserNameAnomalyDetectionInfo",(0,D.Z)({method:"GET"},p||{})));case 1:case"end":return x.stop()}},c)})),Z.apply(this,arguments)}function U(c,p){return T.apply(this,arguments)}function T(){return T=(0,_.Z)(s().mark(function c(p,f){return s().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,S.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,D.Z)({method:"GET",params:p||{}},f||{})));case 1:case"end":return l.stop()}},c)})),T.apply(this,arguments)}function C(c,p){return R.apply(this,arguments)}function R(){return R=(0,_.Z)(s().mark(function c(p,f){return s().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,S.WY)("/api/skyflying/getAnomalyDetectionInfoByGroupByUserName",(0,D.Z)({method:"GET",params:p||{}},f||{})));case 1:case"end":return l.stop()}},c)})),R.apply(this,arguments)}}}]);
