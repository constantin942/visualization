(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[126],{93488:function(me,ee,e){"use strict";e.d(ee,{Z:function(){return H}});var S=e(28991),B=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},O=g,j=e(27029),re=function(v,ce){return B.createElement(j.Z,(0,S.Z)((0,S.Z)({},v),{},{ref:ce,icon:O}))};re.displayName="ArrowRightOutlined";var H=B.forwardRef(re)},37174:function(me){me.exports={alarm:"alarm___12xQi",salesRank:"salesRank___-5oIk",rankingList:"rankingList___rxbMU",rankingItemNumber:"rankingItemNumber___3eh0u",active:"active___3KjTZ",rankingItemTitle:"rankingItemTitle___3gCS2","alarm-data":"alarm-data___17B2L",alarmDetail:"alarmDetail___9Lz5b"}},52953:function(){},44887:function(){},26723:function(me,ee,e){"use strict";e.r(ee),e.d(ee,{default:function(){return et}});var S=e(20228),B=e(11382),g=e(66456),O=e(78587),j=e(3182),re=e(57663),H=e(71577),W=e(11849),v=e(2824),ce=e(94043),se=e.n(ce),t=e(67294),ue=e(37174),Z=e.n(ue),b=e(48606),oe=e(71194),I=e(50146),L=e(88983),xe=e(47933),ze=e(62350),pe=e(75443),o=e(22385),ve=e(61580),fe=e(77576),D=e(12028),te=e(17462),Pe=e(76772),Ae=e(38663),we=e(52953),V=e(96156),Me=e(28481),Se=e(90484),Te=e(94184),de=e.n(Te),Ne=e(50344),he=e(24308),Oe=e(21687),_e=e(65632),y=e(22122);function Ce(a){return a!=null}var Be=function(n){var r=n.itemPrefixCls,i=n.component,l=n.span,m=n.className,c=n.style,x=n.labelStyle,R=n.contentStyle,A=n.bordered,E=n.label,p=n.content,Q=n.colon,P=i;if(A){var f;return t.createElement(P,{className:de()((f={},(0,V.Z)(f,"".concat(r,"-item-label"),Ce(E)),(0,V.Z)(f,"".concat(r,"-item-content"),Ce(p)),f),m),style:c,colSpan:l},Ce(E)&&t.createElement("span",{style:x},E),Ce(p)&&t.createElement("span",{style:R},p))}return t.createElement(P,{className:de()("".concat(r,"-item"),m),style:c,colSpan:l},t.createElement("div",{className:"".concat(r,"-item-container")},(E||E===0)&&t.createElement("span",{className:de()("".concat(r,"-item-label"),(0,V.Z)({},"".concat(r,"-item-no-colon"),!Q)),style:x},E),(p||p===0)&&t.createElement("span",{className:de()("".concat(r,"-item-content")),style:R},p)))},ye=Be;function Ee(a,n,r){var i=n.colon,l=n.prefixCls,m=n.bordered,c=r.component,x=r.type,R=r.showLabel,A=r.showContent,E=r.labelStyle,p=r.contentStyle;return a.map(function(Q,P){var f=Q.props,z=f.label,Y=f.children,F=f.prefixCls,ne=F===void 0?l:F,w=f.className,u=f.style,ie=f.labelStyle,J=f.contentStyle,ae=f.span,G=ae===void 0?1:ae,M=Q.key;return typeof c=="string"?t.createElement(ye,{key:"".concat(x,"-").concat(M||P),className:w,style:u,labelStyle:(0,y.Z)((0,y.Z)({},E),ie),contentStyle:(0,y.Z)((0,y.Z)({},p),J),span:G,colon:i,component:c,itemPrefixCls:ne,bordered:m,label:R?z:null,content:A?Y:null}):[t.createElement(ye,{key:"label-".concat(M||P),className:w,style:(0,y.Z)((0,y.Z)((0,y.Z)({},E),u),ie),span:1,colon:i,component:c[0],itemPrefixCls:ne,bordered:m,label:z}),t.createElement(ye,{key:"content-".concat(M||P),className:w,style:(0,y.Z)((0,y.Z)((0,y.Z)({},p),u),J),span:G*2-1,component:c[1],itemPrefixCls:ne,bordered:m,content:Y})]})}var je=function(n){var r=t.useContext(h),i=n.prefixCls,l=n.vertical,m=n.row,c=n.index,x=n.bordered;return l?t.createElement(t.Fragment,null,t.createElement("tr",{key:"label-".concat(c),className:"".concat(i,"-row")},Ee(m,n,(0,y.Z)({component:"th",type:"label",showLabel:!0},r))),t.createElement("tr",{key:"content-".concat(c),className:"".concat(i,"-row")},Ee(m,n,(0,y.Z)({component:"td",type:"content",showContent:!0},r)))):t.createElement("tr",{key:c,className:"".concat(i,"-row")},Ee(m,n,(0,y.Z)({component:x?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},r)))},Le=je,Ue=function(n){var r=n.children;return r},$=Ue,d=e(96159),h=t.createContext({}),U={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function Fe(a,n){if(typeof a=="number")return a;if((0,Se.Z)(a)==="object")for(var r=0;r<he.c4.length;r++){var i=he.c4[r];if(n[i]&&a[i]!==void 0)return a[i]||U[i]}return 3}function Ze(a,n,r){var i=a;return(n===void 0||n>r)&&(i=(0,d.Tm)(a,{span:r}),(0,Oe.Z)(n===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),i}function Ke(a,n){var r=(0,Ne.Z)(a).filter(function(c){return c}),i=[],l=[],m=n;return r.forEach(function(c,x){var R,A=(R=c.props)===null||R===void 0?void 0:R.span,E=A||1;if(x===r.length-1){l.push(Ze(c,A,m)),i.push(l);return}E<m?(m-=E,l.push(c)):(l.push(Ze(c,E,m)),i.push(l),m=n,l=[])}),i}function be(a){var n,r=a.prefixCls,i=a.title,l=a.extra,m=a.column,c=m===void 0?U:m,x=a.colon,R=x===void 0?!0:x,A=a.bordered,E=a.layout,p=a.children,Q=a.className,P=a.style,f=a.size,z=a.labelStyle,Y=a.contentStyle,F=t.useContext(_e.E_),ne=F.getPrefixCls,w=F.direction,u=ne("descriptions",r),ie=t.useState({}),J=(0,Me.Z)(ie,2),ae=J[0],G=J[1],M=Fe(c,ae);t.useEffect(function(){var _=he.ZP.subscribe(function(le){(0,Se.Z)(c)==="object"&&G(le)});return function(){he.ZP.unsubscribe(_)}},[]);var N=Ke(p,M),C=t.useMemo(function(){return{labelStyle:z,contentStyle:Y}},[z,Y]);return t.createElement(h.Provider,{value:C},t.createElement("div",{className:de()(u,(n={},(0,V.Z)(n,"".concat(u,"-").concat(f),f&&f!=="default"),(0,V.Z)(n,"".concat(u,"-bordered"),!!A),(0,V.Z)(n,"".concat(u,"-rtl"),w==="rtl"),n),Q),style:P},(i||l)&&t.createElement("div",{className:"".concat(u,"-header")},i&&t.createElement("div",{className:"".concat(u,"-title")},i),l&&t.createElement("div",{className:"".concat(u,"-extra")},l)),t.createElement("div",{className:"".concat(u,"-view")},t.createElement("table",null,t.createElement("tbody",null,N.map(function(_,le){return t.createElement(Le,{key:le,index:le,colon:R,prefixCls:u,vertical:E==="vertical",bordered:A,row:_})}))))))}be.Item=$;var ge=be,Ge=e(74379),De=e(38648),We=e(13312),Ye=e(1870),s=e(85893);function Je(a,n){var r=(0,t.useState)({}),i=(0,v.Z)(r,2),l=i[0],m=i[1],c=(0,t.useState)(!1),x=(0,v.Z)(c,2),R=x[0],A=x[1],E=(0,t.useState)(!1),p=(0,v.Z)(E,2),Q=p[0],P=p[1],f=(0,t.useState)(!1),z=(0,v.Z)(f,2),Y=z[0],F=z[1],ne=(0,t.useState)([]),w=(0,v.Z)(ne,2),u=w[0],ie=w[1],J=(0,t.useState)("update"),ae=(0,v.Z)(J,2),G=ae[0],M=ae[1];return(0,t.useImperativeHandle)(n,function(){return{setInitValues:function(C){C.length===1&&m(C[0]),ie(C),console.log(C)}}}),(0,s.jsx)(I.Z,{width:600,afterClose:function(){P(!1),A(!1),M("update")},destroyOnClose:!0,title:u.length===1?"".concat(l==null?void 0:l.userName,"\uFF08\u544A\u8B66\u5904\u7F6E\uFF09"):"\u6279\u91CF\u5904\u7F6E".concat(u.length,"\u6761\u544A\u8B66"),visible:a.handleVisible,onCancel:function(){a.setVisible(!1),F(!1),M("update")},onOk:function(){if(R&&(0,b.QD)([{id:l.id,matchRuleId:l.matchRuleId,originalTime:l.originalTime,userName:l.userName,alarmContent:l.alarmContent,globalTraceId:l.globalTraceId,flag:Y?"update":"delete",updateUserPortrait:Y?1:0}]).then(function(_){var le=_.code;le===We.Gh&&(De.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1),a.refresh())}),u.length>1){var C=u.map(function(_){return _.flag=G,_.updateUserPortrait=G==="delete"?1:0,_});(0,b.QD)(C).then(function(){a.refresh(),De.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)})}a.setVisible(!1)},children:u.length===1?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ge,{layout:"horizontal",column:2,children:[(0,s.jsx)(ge.Item,{label:"\u8BB0\u5F55\u4EA7\u751F\u65F6\u95F4",children:l==null?void 0:l.originalTime}),(0,s.jsx)(ge.Item,{label:"\u89C4\u5219ID",children:l==null?void 0:l.matchRuleId})]}),(0,s.jsx)(Pe.Z,{message:l==null?void 0:l.alarmContent,className:"text-c",type:"warning"}),(0,s.jsxs)("div",{className:"flex-x-sb mt-20",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{children:l.matchRuleId===3?(0,s.jsx)(D.Z,{checkedChildren:"\u5FFD\u7565\u544A\u8B66",unCheckedChildren:"\u4E0D\u5904\u7F6E",onChange:function(C){A(C),P(C)}}):(0,s.jsx)(pe.Z,{title:function(){return(0,s.jsxs)(ve.Z,{title:"\u3010\u4E0D\u66F4\u65B0\u3011\u4EC5\u4EC5\u5FFD\u7565\u6B64\u6761\u544A\u8B66\u4FE1\u606F",children:["\u662F\u5426\u66F4\u65B0\u753B\u50CF\uFF1F",(0,s.jsx)(Ye.Z,{})]})},visible:Q,onConfirm:function(){P(!1),F(!0)},onCancel:function(){return P(!1)},okText:"\u66F4\u65B0",cancelText:"\u4E0D\u66F4\u65B0",children:(0,s.jsx)(D.Z,{checkedChildren:"\u5FFD\u7565\u544A\u8B66",unCheckedChildren:"\u4E0D\u5904\u7F6E",onChange:function(C){A(C),P(C)}})})})]})]}):(0,s.jsx)("div",{className:"text-c",children:(0,s.jsx)(xe.ZP.Group,{defaultValue:"update",value:G,options:u[0]&&u[0].matchRuleId===3?[{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\uFF08\u4EC5\u4EC5\u5FFD\u7565\u6B64\u6761\u544A\u8B66\u4FE1\u606F\uFF09",value:"update"}]:[{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\uFF08\u4EC5\u4EC5\u5FFD\u7565\u6B64\u6761\u544A\u8B66\u4FE1\u606F\uFF09",value:"update"},{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\u5E76\u66F4\u65B0\u753B\u50CF",value:"delete"}],onChange:function(C){var _=C.target.value;M(_)}})})})}var Xe=(0,t.forwardRef)(Je),Ve=e(25377),ke=e(93488),qe=function(n){var r=(0,t.useState)([]),i=(0,v.Z)(r,2),l=i[0],m=i[1],c=(0,t.useState)(0),x=(0,v.Z)(c,2),R=x[0],A=x[1],E=(0,t.useState)(!1),p=(0,v.Z)(E,2),Q=p[0],P=p[1],f=(0,t.useState)(!1),z=(0,v.Z)(f,2),Y=z[0],F=z[1],ne=(0,t.useState)([]),w=(0,v.Z)(ne,2),u=w[0],ie=w[1],J=(0,Ve.md)(),ae=(0,t.useState)({pageNo:1,pageSize:10}),G=(0,v.Z)(ae,2),M=G[0],N=G[1],C=(0,t.useRef)(),_=(0,t.useState)({}),le=(0,v.Z)(_,2),$e=le[0],tt=le[1],He=function(X){ie(X)},nt={selectedRowKeys:u,onChange:He},at=u.length>0,Ie=(0,t.useCallback)(function(K){He([]),(0,b.cD)(K).then(function(X){var T=X.data;if(P(!0),T){var k=JSON.parse(T);if(A(k.total),k){var q=JSON.parse(k.rows);m(q.filter(function(Qe){return Qe.isDelete===0}))}else m([])}P(!1)})},[]),lt=[{title:"\u8BB0\u5F55\u4EA7\u751F\u7684\u65F6\u95F4",dataIndex:"originalTime\uFF1A",key:"originalTime\uFF1A",width:"250px",align:"center",render:function(X,T){return T.originalTime||"-"}},{title:"\u89C4\u5219ID",dataIndex:"matchRuleId\uFF1A",key:"matchRuleId\uFF1A",width:"250px",align:"center",render:function(X,T){return T.matchRuleId||"-"}},{title:"\u544A\u8B66\u5185\u5BB9",dataIndex:"alarmContent",key:"alarmContent",align:"center"},{title:"\u5904\u7F6E",width:"150px",align:"center",render:function(X,T){return[(0,s.jsx)(Ve.Nv,{accessible:J.canUpdate,children:(0,s.jsx)("a",{onClick:function(){var q;F(!0),(q=C.current)===null||q===void 0||q.setInitValues([T])},children:"\u5904\u7F6E"})},"handle")]}}];return(0,t.useEffect)(function(){var K=n.location.query;tt(K),Ie((0,W.Z)((0,W.Z)((0,W.Z)({},K),M),{isDelete:0}))},[Ie,M,n.location.query]),(0,s.jsxs)("div",{className:Z().alarmDetail,children:[(0,s.jsx)(B.Z,{spinning:Q,children:(0,s.jsx)(O.Z,{rowSelection:nt,columns:lt,dataSource:l,rowKey:"id",title:function(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"ib",children:$e.userName}),(0,s.jsxs)("h3",{className:"ib ml-10",children:["\u89E6\u53D1\u4E86 ",(0,s.jsx)("span",{className:"danger",children:R})," \u6761\u544A\u8B66"]})]}),(0,s.jsxs)("div",{className:"flex-x-sb",children:[(0,s.jsx)(Ve.Nv,{accessible:J.canUpdate,children:(0,s.jsx)(H.Z,{type:"primary",disabled:!at,size:"middle",onClick:function(){var T,k=l.filter(function(q){return u.includes(q.id)});F(!0),(T=C.current)===null||T===void 0||T.setInitValues(k)},children:"\u6279\u91CF\u5904\u7F6E"})}),(0,s.jsxs)(H.Z,{type:"primary",onClick:function(){n.history.goBack()},children:["\u8FD4 \u56DE",(0,s.jsx)(ke.Z,{})]})]})]})},size:"middle",pagination:{showSizeChanger:!1,pageSize:M.pageSize,current:M.pageNo,total:R,onChange:function(){var K=(0,j.Z)(se().mark(function T(k,q){return se().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,N(function(){return{pageSize:q,pageNo:k}});case 2:Ie((0,W.Z)({pageNo:k,pageSize:q},$e));case 3:case"end":return Re.stop()}},T)}));function X(T,k){return K.apply(this,arguments)}return X}()}})}),(0,s.jsx)(Xe,{refresh:function(){Ie((0,W.Z)((0,W.Z)({},M),$e))},setVisible:F,handleVisible:Y,ref:C})]})},et=qe},48606:function(me,ee,e){"use strict";e.d(ee,{Hp:function(){return re},CI:function(){return W},cD:function(){return ce},QD:function(){return t}});var S=e(11849),B=e(3182),g=e(94043),O=e.n(g),j=e(25377);function re(Z){return H.apply(this,arguments)}function H(){return H=(0,B.Z)(O().mark(function Z(b){return O().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,j.WY)("/api/skyflying/getAlarmData",(0,S.Z)({method:"GET"},b||{})));case 1:case"end":return I.stop()}},Z)})),H.apply(this,arguments)}function W(Z){return v.apply(this,arguments)}function v(){return v=(0,B.Z)(O().mark(function Z(b){return O().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,j.WY)("/api/skyflying/getUserAlarmData",(0,S.Z)({method:"GET"},b||{})));case 1:case"end":return I.stop()}},Z)})),v.apply(this,arguments)}function ce(Z,b){return se.apply(this,arguments)}function se(){return se=(0,B.Z)(O().mark(function Z(b,oe){return O().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,j.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,S.Z)({method:"GET",params:b||{}},oe||{})));case 1:case"end":return L.stop()}},Z)})),se.apply(this,arguments)}function t(Z,b){return ue.apply(this,arguments)}function ue(){return ue=(0,B.Z)(O().mark(function Z(b,oe){return O().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,j.WY)("/api/skyflying/updateAnomalyDetectionInfo",(0,S.Z)({method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8;"},data:JSON.stringify(b||{})},oe||{})));case 1:case"end":return L.stop()}},Z)})),ue.apply(this,arguments)}},75443:function(me,ee,e){"use strict";var S=e(22122),B=e(28481),g=e(67294),O=e(94184),j=e.n(O),re=e(21770),H=e(68855),W=e(15105),v=e(61580),ce=e(71577),se=e(73839),t=e(42051),ue=e(85636),Z=e(65632),b=e(81643),oe=e(96159),I=e(33603),L=e(86743),xe=void 0,ze=function(o,ve){var fe={};for(var D in o)Object.prototype.hasOwnProperty.call(o,D)&&ve.indexOf(D)<0&&(fe[D]=o[D]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var te=0,D=Object.getOwnPropertySymbols(o);te<D.length;te++)ve.indexOf(D[te])<0&&Object.prototype.propertyIsEnumerable.call(o,D[te])&&(fe[D[te]]=o[D[te]]);return fe},pe=g.forwardRef(function(o,ve){var fe=g.useContext(Z.E_),D=fe.getPrefixCls,te=(0,re.Z)(!1,{value:o.visible,defaultValue:o.defaultVisible}),Pe=(0,B.Z)(te,2),Ae=Pe[0],we=Pe[1],V=function(d,h){var U;we(d,!0),(U=o.onVisibleChange)===null||U===void 0||U.call(o,d,h)},Me=function(d){V(!1,d)},Se=function(d){var h;return(h=o.onConfirm)===null||h===void 0?void 0:h.call(xe,d)},Te=function(d){var h;V(!1,d),(h=o.onCancel)===null||h===void 0||h.call(xe,d)},de=function(d){d.keyCode===W.Z.ESC&&Ae&&V(!1,d)},Ne=function(d){var h=o.disabled;h||V(d)},he=function(d,h){var U=o.okButtonProps,Fe=o.cancelButtonProps,Ze=o.title,Ke=o.cancelText,be=o.okText,ge=o.okType,Ge=o.icon,De=o.showCancel,We=De===void 0?!0:De;return g.createElement("div",{className:"".concat(d,"-inner-content")},g.createElement("div",{className:"".concat(d,"-message")},Ge,g.createElement("div",{className:"".concat(d,"-message-title")},(0,b.Z)(Ze))),g.createElement("div",{className:"".concat(d,"-buttons")},We&&g.createElement(ce.Z,(0,S.Z)({onClick:Te,size:"small"},Fe),Ke||h.cancelText),g.createElement(L.Z,{buttonProps:(0,S.Z)((0,S.Z)({size:"small"},(0,se.n)(ge)),U),actionFn:Se,close:Me,prefixCls:D("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},be||h.okText)))},Oe=o.prefixCls,_e=o.placement,y=o.children,Ce=o.overlayClassName,Be=ze(o,["prefixCls","placement","children","overlayClassName"]),ye=D("popover",Oe),Ee=D("popconfirm",Oe),je=j()(Ee,Ce),Le=g.createElement(t.Z,{componentName:"Popconfirm",defaultLocale:ue.Z.Popconfirm},function($){return he(ye,$)}),Ue=D();return g.createElement(v.Z,(0,S.Z)({},Be,{prefixCls:ye,placement:_e,onVisibleChange:Ne,visible:Ae,overlay:Le,overlayClassName:je,ref:ve,transitionName:(0,I.mL)(Ue,"zoom-big",o.transitionName)}),(0,oe.Tm)(y,{onKeyDown:function(d){var h,U;g.isValidElement(y)&&((U=y==null?void 0:(h=y.props).onKeyDown)===null||U===void 0||U.call(h,d)),de(d)}}))});pe.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:g.createElement(H.Z,null),disabled:!1},ee.Z=pe},62350:function(me,ee,e){"use strict";var S=e(38663),B=e.n(S),g=e(20136),O=e(57663),j=e(44887),re=e.n(j)}}]);
