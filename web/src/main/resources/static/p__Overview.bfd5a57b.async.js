(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(z){z.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2",nowrap:"nowrap___spq6f"}},81135:function(z,$,e){"use strict";e.r($),e.d($,{default:function(){return We}});var E=e(57663),f=e(71577),V=e(58024),l=e(39144),D=e(13062),M=e(71230),x=e(22385),A=e(61580),B=e(95300),R=e(7277),k=e(89032),o=e(15746),U=e(71748),I=e(33860),_=e(3182),c=e(2824),J=e(94043),W=e.n(J),C=e(67294),ue=e(26516),P=e.n(ue),le=e(13254),H=e(14277),s=e(11849),u=e(46066),p=e(68628),t=e(85893),a=function(m){var i={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p.Z,{className:"fs-16 ib danger mr-10"}),(0,t.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,t.jsx)("div",{className:"of-hidden",children:m.warningList.length>0?(0,t.jsx)(u.Z,(0,s.Z)((0,s.Z)({},i),{},{children:m.warningList.map(function(n){return(0,t.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:n.alarmContent},n.id)})})):(0,t.jsx)(H.Z,{description:"\u6682\u65E0\u544A\u8B66\u4FE1\u606F"})})]})},he=a,ye=e(69610),_e=e(54941),Ce=e(81306),Se=e(19809),X=e(69886),Q=e(41694),Ee=X.G2.InteractionAction,De=X.G2.registerInteraction,Ze=X.G2.registerAction,Oe=function(v){(0,Ce.Z)(i,v);var m=(0,Se.Z)(i);function i(){return(0,ye.Z)(this,i),m.apply(this,arguments)}return(0,_e.Z)(i,[{key:"active",value:function(){var r=this,b=this.getView(),Z=this.context.event;if(Z.data){var g=Z.data.items,N=b.geometries.filter(function(G){return G.type==="point"});(0,Q.S6)(N,function(G){(0,Q.S6)(G.elements,function(L){var K=(0,Q.cx)(g,function(se){return se.data===L.data})!==-1,Y=L.shape.getChildren(),F=(0,c.Z)(Y,2),q=F[0],ee=F[1];K?(q.animate({r:10,opacity:.2},{duration:1800,easing:"easeLinear",repeat:!0}),ee.animate({r:6,opacity:.4},{duration:800,easing:"easeLinear",repeat:!0})):r.resetElementState(L)})})}}},{key:"reset",value:function(){var r=this,b=this.getView(),Z=b.geometries.filter(function(g){return g.type==="point"});(0,Q.S6)(Z,function(g){(0,Q.S6)(g.elements,function(N){r.resetElementState(N)})})}},{key:"resetElementState",value:function(r){var b=r.shape.getChildren(),Z=(0,c.Z)(b,2),g=Z[0],N=Z[1];g.stopAnimate(),N.stopAnimate();var G=g.get("attrs"),L=G.r,K=G.opacity;g.attr({r:L,opacity:K});var Y=N.get("attrs"),F=Y.r,q=Y.opacity;N.attr({r:F,opacity:q})}},{key:"getView",value:function(){return this.context.view}}]),i}(Ee),be=function(m){return(0,C.useEffect)(function(){X.G2.registerShape("point","custom-point",{draw:function(r,b){var Z={x:r.x,y:r.y},g=b.addGroup();return g.addShape("circle",{name:"outer-point",attrs:{x:Z.x,y:Z.y,fill:r.color||"red",opacity:.5,r:6}}),g.addShape("circle",{name:"inner-point",attrs:{x:Z.x,y:Z.y,fill:r.color||"red",opacity:1,r:2}}),g}}),Ze("custom-marker-action",Oe),De("custom-marker-interaction",{start:[{trigger:"tooltip:show",action:"custom-marker-action:active"}],end:[{trigger:"tooltip:hide",action:"custom-marker-action:reset"}]});var i=new X.x1("RangeTimeData",{height:138,autoFit:!0,data:m.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"custom-point",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1,formatter:function(r){return{name:"\u5F53\u65E5\u6536\u96C6\u6570\u91CF",value:r.value+"\u6761"}}},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"custom-marker-interaction"}]});i.render()},[]),(0,t.jsx)("div",{id:"RangeTimeData"})},xe=be,oe=e(60355),j=e(24480),Ue=e(6650),ce=e(25377);function je(v,m){return ne.apply(this,arguments)}function ne(){return ne=(0,_.Z)(W().mark(function v(m,i){return W().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,ce.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,s.Z)({params:m,method:"GET"},i||{})));case 1:case"end":return r.stop()}},v)})),ne.apply(this,arguments)}function Te(v){return re.apply(this,arguments)}function re(){return re=(0,_.Z)(W().mark(function v(m){return W().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,ce.WY)("/api/skyflying/getOverviewOfSystem",(0,s.Z)({method:"GET"},m||{})));case 1:case"end":return n.stop()}},v)})),re.apply(this,arguments)}var we=e(66572),Ae=e(2335),Be=e(52778),Ne=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center",render:function(m,i){return(0,t.jsx)("div",{children:i.visitedCount.toLocaleString()})}},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,render:function(m,i){var n="-",r=JSON.parse(i.usualVisitedData);if(r.tableNameDesc)n=r.tableNameDesc;else{var b=r.tableName.split("#");b.shift(),b.length>0?n=b.join("#"):n=r.tableName}return(0,t.jsx)("div",{children:n})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],Re=[{title:"\u6570\u636E\u5E93",dataIndex:"tableName",key:"database",align:"center",search:!1,render:function(m,i){var n="-";if(i.usualVisitedUser.includes("$")){var r=i.usualVisitedUser.split("$");n=r[0]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:n})}},{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(m,i){var n="-";if(i.tableNameDesc)n=i.tableNameDesc;else{var r=i.tableName.split("#");n=r[r.length-1]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:n})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",render:function(m,i){return(0,t.jsx)("div",{children:i.visitedCount.toLocaleString()})}},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458\uFF08\u670D\u52A1\u540D#\u4EBA\u540D\uFF09",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1,render:function(m,i){var n="-";if(i.usualVisitedUser.includes("$")){var r=i.usualVisitedUser.split("$");r.shift(),n=r.join('<span style="font-weight: bold">#</span>')}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:n}})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,align:"center"}],Ie=function(m){var i=(0,C.useState)(),n=(0,c.Z)(i,2),r=n[0],b=n[1],Z=(0,C.useState)([]),g=(0,c.Z)(Z,2),N=g[0],G=g[1],L=(0,C.useState)([]),K=(0,c.Z)(L,2),Y=K[0],F=K[1],q=(0,C.useState)([]),ee=(0,c.Z)(q,2),se=ee[0],de=ee[1],Me=(0,C.useState)(),me=(0,c.Z)(Me,2),ke=me[0],Pe=me[1],$e=(0,C.useState)(0),pe=(0,c.Z)($e,2),Ge=pe[0],Le=pe[1],Fe=(0,C.useState)({pageSize:10,pageNo:1}),Ve=(0,c.Z)(Fe,1),ie=Ve[0],Ke=(0,C.useState)({pageSize:10,pageNo:1}),Ye=(0,c.Z)(Ke,1),te=Ye[0],ze=(0,C.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),fe=(0,c.Z)(ze,2),T=fe[0],Je=fe[1];function He(){(0,Ae.cD)({pageSize:100,pageNo:1}).then(function(w){var d=w.data;if(d){var h=JSON.parse(d);if(h){var y=JSON.parse(h.rows);de(y.map(function(S,O){return S.matchRuleId=O,S}))}else de([])}})}var ve=function(d){(0,Ue.F$)(d).then(function(h){var y=h.data,S=JSON.parse(y);S&&(Pe(S.total),S.rows&&Array.isArray(S.rows)&&b(S.rows.map(function(O){return O.id=j.Z.uuid(),O})))})},Xe=function(){var d=j.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),h=j.Z.getRangeTime(7,"mm-dd");je({startTime:d[0],endTime:d[1]}).then(function(y){var S=y.data;G(function(){return S.map(function(O,ae){return{year:h[ae],value:O}})})})},Qe=function(){var w=(0,_.Z)(W().mark(function d(){var h,y;return W().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,Te();case 2:h=O.sent,y=h.data,console.log(y),Je(y);case 6:case"end":return O.stop()}},d)}));return function(){return w.apply(this,arguments)}}(),qe=function(){var w=(0,_.Z)(W().mark(function d(){return W().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:case"end":return y.stop()}},d)}));return function(){return w.apply(this,arguments)}}(),ge=function(d){(0,we.m)(d).then(function(h){var y=h.data;if(y){var S=JSON.parse(y);if(Le(S.total),S.rows){var O=JSON.parse(S.rows);F(O.map(function(ae){return ae.id=j.Z.uuid(),ae}));return}}F([])})};return(0,C.useEffect)(function(){ve(ie),Xe(),ge(te),Qe().then(),qe().then(),He()},[te]),(0,t.jsxs)("div",{className:P().overview,children:[(0,t.jsx)("div",{className:P().staticWrap,children:(0,t.jsxs)(M.Z,{gutter:20,children:[(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(I.Z,{active:!0,loading:N.length===0,children:(0,t.jsx)(Be.Z,{title:"\u8FD1\u4E03\u5929\u6570\u636E\u6536\u96C6\u60C5\u51B5",chart:(0,t.jsx)("div",{style:{height:"163px"},children:(0,t.jsx)(xe,{data:N})})})})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(l.Z,{className:P().bgW,title:(0,t.jsx)("div",{className:"text-c",children:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5"}),children:(0,t.jsx)(M.Z,{gutter:20,className:"text-c",children:(0,t.jsxs)(I.Z,{active:!0,loading:N.length===0,children:[(0,t.jsx)(o.Z,{span:12,className:"mt-15 text-c",children:(0,t.jsx)(A.Z,{placement:"top",title:T.visitedInformation>=j.Z.BIG_NUMBER?T.visitedInformation.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:j.Z.bigNumberTransform(T.visitedInformation),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(o.Z,{span:12,className:"mt-15",children:(0,t.jsx)(A.Z,{placement:"top",title:T.dbInstance>=j.Z.BIG_NUMBER?T.dbInstance.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:j.Z.bigNumberTransform(T.dbInstance),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(o.Z,{span:12,className:"mt-20",children:(0,t.jsx)(A.Z,{placement:"top",title:T.user>=j.Z.BIG_NUMBER?T.user.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u7528\u6237\u4EBA\u6570",value:j.Z.bigNumberTransform(T.user),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(o.Z,{span:12,className:"mt-20",children:(0,t.jsx)(A.Z,{placement:"top",title:T.table>=j.Z.BIG_NUMBER?T.table.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u6570\u636E\u5E93\u8868",value:j.Z.bigNumberTransform(T.table),valueStyle:{color:"#3f8600"}})})})]})})})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)("div",{className:P().waringWrap,children:(0,t.jsx)(he,{warningList:se})})})]})}),(0,t.jsx)("div",{className:P().center,children:(0,t.jsxs)(M.Z,{gutter:30,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(oe.ZP,{columns:Ne,dataSource:r,scroll:{y:500},options:!1,toolBarRender:function(){return[(0,t.jsx)(f.Z,{type:"link",size:"small",onClick:function(){m.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:ke,pageSize:ie.pageSize,current:ie.pageNo,onChange:function(d,h){ve({pageNo:d,pageSize:h})}},headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,t.jsx)(o.Z,{span:12,className:"pr-10",children:(0,t.jsx)(I.Z,{active:!0,loading:!1,paragraph:{rows:5},children:(0,t.jsx)(oe.ZP,{scroll:{y:500},columns:Re,dataSource:Y,options:!1,rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:Ge,pageSize:te.pageSize,current:te.pageNo,onChange:function(d,h){ge({pageNo:d,pageSize:h})}},toolBarRender:function(){return[(0,t.jsx)(f.Z,{type:"link",size:"small",onClick:function(){m.history.push("/databases")},children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u7EDF\u8BA1"})})})]})})]})},We=Ie},66572:function(z,$,e){"use strict";e.d($,{m:function(){return M}});var E=e(11849),f=e(3182),V=e(94043),l=e.n(V),D=e(25377);function M(A,B){return x.apply(this,arguments)}function x(){return x=(0,f.Z)(l().mark(function A(B,R){return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,E.Z)({method:"GET",params:B},R||{})));case 1:case"end":return o.stop()}},A)})),x.apply(this,arguments)}},6650:function(z,$,e){"use strict";e.d($,{F$:function(){return M},Xd:function(){return A},mt:function(){return R},et:function(){return I},FP:function(){return c},Bx:function(){return W},us:function(){return le}});var E=e(11849),f=e(3182),V=e(94043),l=e.n(V),D=e(25377);function M(s,u){return x.apply(this,arguments)}function x(){return x=(0,f.Z)(l().mark(function s(u,p){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getCoarseCountsOfUsers",(0,E.Z)({method:"GET",params:u},p||{})));case 1:case"end":return a.stop()}},s)})),x.apply(this,arguments)}function A(s,u){return B.apply(this,arguments)}function B(){return B=(0,f.Z)(l().mark(function s(u,p){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,E.Z)({method:"GET",params:u},p||{})));case 1:case"end":return a.stop()}},s)})),B.apply(this,arguments)}function R(s,u){return k.apply(this,arguments)}function k(){return k=(0,f.Z)(l().mark(function s(u,p){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getVisitRate",(0,E.Z)({method:"GET",params:{username:u}},p||{})));case 1:case"end":return a.stop()}},s)})),k.apply(this,arguments)}function o(s,u){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime.mark(function s(u,p){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:u},p||{})));case 1:case"end":return a.stop()}},s)})),U.apply(this,arguments)}function I(s,u){return _.apply(this,arguments)}function _(){return _=(0,f.Z)(l().mark(function s(u,p){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getCountsOfUser",(0,E.Z)({method:"GET",params:u},p||{})));case 1:case"end":return a.stop()}},s)})),_.apply(this,arguments)}function c(s,u){return J.apply(this,arguments)}function J(){return J=(0,f.Z)(l().mark(function s(u,p){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getUserOperationTypeCount",(0,E.Z)({method:"GET",params:u},p||{})));case 1:case"end":return a.stop()}},s)})),J.apply(this,arguments)}function W(s,u){return C.apply(this,arguments)}function C(){return C=(0,f.Z)(l().mark(function s(u,p){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,E.Z)({method:"GET",params:u},p||{})));case 1:case"end":return a.stop()}},s)})),C.apply(this,arguments)}function ue(s,u){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime.mark(function s(u,p){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCoarseCountsOfOneUser",_objectSpread({method:"GET",params:u||{}},p||{})));case 1:case"end":return a.stop()}},s)})),P.apply(this,arguments)}function le(s,u){return H.apply(this,arguments)}function H(){return H=(0,f.Z)(l().mark(function s(u,p){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getCountsOfEveryonRecentSevenDays",(0,E.Z)({method:"GET",params:u||{}},p||{})));case 1:case"end":return a.stop()}},s)})),H.apply(this,arguments)}},2335:function(z,$,e){"use strict";e.d($,{rO:function(){return M},cD:function(){return A},sF:function(){return R}});var E=e(11849),f=e(3182),V=e(94043),l=e.n(V),D=e(25377);function M(o){return x.apply(this,arguments)}function x(){return x=(0,f.Z)(l().mark(function o(U){return l().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,D.WY)("/api/skyflying/getUserNameAnomalyDetectionInfo",(0,E.Z)({method:"GET"},U||{})));case 1:case"end":return _.stop()}},o)})),x.apply(this,arguments)}function A(o,U){return B.apply(this,arguments)}function B(){return B=(0,f.Z)(l().mark(function o(U,I){return l().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,E.Z)({method:"GET",params:U||{}},I||{})));case 1:case"end":return c.stop()}},o)})),B.apply(this,arguments)}function R(o,U){return k.apply(this,arguments)}function k(){return k=(0,f.Z)(l().mark(function o(U,I){return l().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.WY)("/api/skyflying/getAnomalyDetectionInfoByGroupByUserName",(0,E.Z)({method:"GET",params:U||{}},I||{})));case 1:case"end":return c.stop()}},o)})),k.apply(this,arguments)}}}]);
