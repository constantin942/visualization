(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[569],{64317:function(R,S,e){"use strict";var M=e(22122),h=e(28991),b=e(81253),t=e(67294),F=e(30885),r=e(96202),j=e(66758),T=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],L=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],H=t.forwardRef(function(n,E){var V=n.fieldProps,s=n.children,P=n.params,G=n.proFieldProps,C=n.mode,B=n.valueEnum,K=n.request,Z=n.showSearch,v=n.options,z=(0,b.Z)(n,T),N=(0,t.useContext)(j.Z);return t.createElement(F.Z,(0,M.Z)({mode:"edit",valueEnum:(0,r.h)(B),request:K,params:P,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:v,mode:C,showSearch:Z,getPopupContainer:N.getPopupContainer},V),ref:E,proFieldProps:G},z),s)}),A=t.forwardRef(function(n,E){var V=n.fieldProps,s=n.children,P=n.params,G=n.proFieldProps,C=n.mode,B=n.valueEnum,K=n.request,Z=n.options,v=(0,b.Z)(n,L),z=(0,h.Z)({options:Z,mode:C||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},V),N=(0,t.useContext)(j.Z);return t.createElement(F.Z,(0,M.Z)({mode:"edit",valueEnum:(0,r.h)(B),request:K,params:P,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({getPopupContainer:N.getPopupContainer},z),ref:E,proFieldProps:G},v),s)}),q=H,Q=A,f=q;f.SearchSelect=Q,f.displayName="ProFormComponent",S.Z=f},5894:function(R,S,e){"use strict";e.d(S,{A:function(){return Z}});var M=e(9715),h=e(86835),b=e(22122),t=e(67294),F=e(96156),r=e(49111),j=e(19650),T=e(84305),L=e(75901),H=e(28481),A=e(28991),q=e(8812),Q=e(66758),f=e(96138),n=e(28664),E=e(58927),V=e(94184),s=e.n(V),P=e(2514),G=t.forwardRef(function(v,z){var N=t.useContext(Q.Z),X=N.groupProps,D=(0,A.Z)((0,A.Z)({},X),v),me=D.children,fe=D.collapsible,_=D.defaultCollapsed,ve=D.style,Fe=D.labelLayout,ge=D.title,I=ge===void 0?v.label:ge,ae=D.tooltip,he=D.align,ee=he===void 0?"start":he,Ee=D.direction,te=D.size,Pe=te===void 0?32:te,se=D.titleStyle,ye=D.titleRender,Y=D.spaceProps,oe=D.extra,k=D.autoFocus,Ae=(0,n.Z)(function(){return _||!1},{value:v.collapsed,onChange:v.onCollapse}),ne=(0,H.Z)(Ae,2),ie=ne[0],le=ne[1],xe=(0,t.useContext)(L.ZP.ConfigContext),Se=xe.getPrefixCls,a=(0,P.z)(v),be=a.ColWrapper,Ce=a.RowWrapper,i=Se("pro-form-group"),u=fe&&t.createElement(q.Z,{style:{marginRight:8},rotate:ie?void 0:90}),y=t.createElement(E.Z,{label:u?t.createElement("div",null,u,I):I,tooltip:ae}),o=(0,t.useCallback)(function($){var J=$.children;return t.createElement(j.Z,(0,b.Z)({},Y,{className:"".concat(i,"-container"),size:Pe,align:ee,direction:Ee,style:(0,A.Z)({rowGap:0},Y==null?void 0:Y.style)}),J)},[ee,i,Ee,Pe,Y]),m=ye?ye(y,v):y,ue=(0,t.useMemo)(function(){var $=[],J=t.Children.toArray(me).map(function(U,Ze){var de;return t.isValidElement(U)&&(U==null||(de=U.props)===null||de===void 0?void 0:de.hidden)?($.push(U),null):Ze===0&&t.isValidElement(U)&&k?t.cloneElement(U,(0,A.Z)((0,A.Z)({},U.props),{},{autoFocus:k})):U});return[t.createElement(Ce,{key:"children",Wrapper:o},J),$.length>0?t.createElement("div",{style:{display:"none"}},$):null]},[me,Ce,o,k]),re=(0,H.Z)(ue,2),Me=re[0],De=re[1];return t.createElement(be,null,t.createElement("div",{className:s()(i,(0,F.Z)({},"".concat(i,"-twoLine"),Fe==="twoLine")),style:ve,ref:z},De,(I||ae||oe)&&t.createElement("div",{className:"".concat(i,"-title"),style:se,onClick:function(){le(!ie)}},oe?t.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"}},m,t.createElement("span",{onClick:function(J){return J.stopPropagation()}},oe)):m),fe&&ie?null:Me))});G.displayName="ProForm-Group";var C=G,B=e(87808),K=e(24214);function Z(v){return t.createElement(K.I,(0,b.Z)({layout:"vertical",submitter:{render:function(N,X){return X.reverse()}},contentRender:function(N,X){return t.createElement(t.Fragment,null,N,X)}},v))}Z.Group=C,Z.useForm=h.Z.useForm,Z.Item=B.Z},24739:function(R,S,e){"use strict";e.d(S,{UW:function(){return h}});var M=e(5894),h=M.A.Group},58927:function(R,S,e){"use strict";var M=e(22385),h=e(61580),b=e(96156),t=e(84305),F=e(75901),r=e(67294),j=e(68628),T=e(11445),L=e.n(T),H=e(94184),A=e.n(H),q=function(f){var n=f.label,E=f.tooltip,V=f.ellipsis,s=f.subTitle,P=(0,r.useContext)(F.ZP.ConfigContext),G=P.getPrefixCls;if(!E&&!s)return r.createElement(r.Fragment,null,n);var C=G("pro-core-label-tip"),B=typeof E=="string"||r.isValidElement(E)?{title:E}:E,K=(B==null?void 0:B.icon)||r.createElement(j.Z,null);return r.createElement("div",{className:C,onMouseDown:function(v){return v.stopPropagation()},onMouseLeave:function(v){return v.stopPropagation()},onMouseMove:function(v){return v.stopPropagation()}},r.createElement("div",{className:A()("".concat(C,"-title"),(0,b.Z)({},"".concat(C,"-title-ellipsis"),V))},n),s&&r.createElement("div",{className:"".concat(C,"-subtitle")},s),E&&r.createElement(h.Z,B,r.createElement("span",{className:"".concat(C,"-icon")},K)))};S.Z=r.memo(q)},89663:function(R){R.exports={config:"config___2VrF2",wrap:"wrap___hG-7N",formWrap:"formWrap___3-j7Q"}},96138:function(){},11445:function(){},29035:function(R,S,e){"use strict";e.r(S),e.d(S,{default:function(){return Ce}});var M=e(71194),h=e(50146),b=e(12968),t=e(62462),F=e(18106),r=e(51752),j=e(402),T=e(97272),L=e(86582),H=e(57663),A=e(71577),q=e(74379),Q=e(38648),f=e(3182),n=e(11849),E=e(2824),V=e(94043),s=e.n(V),P=e(67294),G=e(89663),C=e.n(G),B=e(24739),K=e(5966),Z=e(13312),v=e(67724),z=e(8812),N=e(22122),X=e(81253),D=e(30885),me=["fieldProps","proFieldProps"],fe=function(u,y){var o=u.fieldProps,m=u.proFieldProps,ue=(0,X.Z)(u,me);return P.createElement(D.Z,(0,N.Z)({ref:y,mode:"edit",valueType:"textarea",fieldProps:o,proFieldProps:m},ue))},_=P.forwardRef(fe),ve=e(5894),Fe=e(64317),ge=e(59962),I=e(25377),ae=e(24480);function he(i){return ee.apply(this,arguments)}function ee(){return ee=(0,f.Z)(s().mark(function i(u){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,I.WY)("/api/skyflying/config/getDingConfig",(0,n.Z)({method:"GET"},u||{})));case 1:case"end":return o.stop()}},i)})),ee.apply(this,arguments)}function Ee(i){return te.apply(this,arguments)}function te(){return te=(0,f.Z)(s().mark(function i(u){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,I.WY)("/api/skyflying/config/getDingGapDic",(0,n.Z)({method:"GET"},u||{})));case 1:case"end":return o.stop()}},i)})),te.apply(this,arguments)}function Pe(i,u){return se.apply(this,arguments)}function se(){return se=(0,f.Z)(s().mark(function i(u,y){return s().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,I.WY)("/api/skyflying/config/updateDingConfig",(0,n.Z)({method:"PUT",data:u},y||{})));case 1:case"end":return m.stop()}},i)})),se.apply(this,arguments)}function ye(i){return Y.apply(this,arguments)}function Y(){return Y=(0,f.Z)(s().mark(function i(u){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,I.WY)("/api/skyflying/getAkSk",(0,n.Z)({method:"GET"},u||{})));case 1:case"end":return o.stop()}},i)})),Y.apply(this,arguments)}function oe(i){return k.apply(this,arguments)}function k(){return k=(0,f.Z)(s().mark(function i(u){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,I.WY)("/api/skyflying/getRegion",(0,n.Z)({method:"GET"},u||{})));case 1:case"end":return o.stop()}},i)})),k.apply(this,arguments)}function Ae(i,u){return ne.apply(this,arguments)}function ne(){return ne=(0,f.Z)(s().mark(function i(u,y){return s().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,I.WY)("/api/skyflying/setAkSk",(0,n.Z)({method:"POST",data:ae.Z.formData(u)},y||{})));case 1:case"end":return m.stop()}},i)})),ne.apply(this,arguments)}function ie(i,u){return le.apply(this,arguments)}function le(){return le=(0,f.Z)(s().mark(function i(u,y){return s().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,I.WY)("/api/skyflying/setRegion",(0,n.Z)({method:"POST",data:ae.Z.formData(u)},y||{})));case 1:case"end":return m.stop()}},i)})),le.apply(this,arguments)}var xe=e(34217),Se=e.n(xe),a=e(85893),be=function(){var u=(0,P.useRef)(),y=(0,P.useRef)(),o=(0,P.useState)(!1),m=(0,E.Z)(o,2),ue=m[0],re=m[1],Me=(0,P.useState)(1),De=(0,E.Z)(Me,2),$=De[0],J=De[1],U=(0,P.useState)(Se()),Ze=(0,E.Z)(U,2),de=Ze[0],Oe=Ze[1],Re=(0,P.useState)({gap:0,id:0,secret:"",webhook:"",mobiles:""}),Te=(0,E.Z)(Re,2),je=Te[0],Le=Te[1],Ie=(0,P.useState)({dingDisabled:!0,dmsDisabled:!0}),Be=(0,E.Z)(Ie,2),w=Be[0],ce=Be[1],We={getAkAndSk:function(){ye().then(function(p){var l=p.data;if(l){var c,d=JSON.parse(l);(c=y.current)===null||c===void 0||c.setFieldsValue(d),oe().then(function(O){if(O&&O.data){var g=JSON.parse(O.data),W=g.config;if(W){var pe,Ue=JSON.parse(W);(pe=y.current)===null||pe===void 0||pe.setFieldsValue({region:Ue["dms-region"]})}}})}})},getConfig:function(){he().then(function(p){var l,c=p.data,d=p.code;d===Z.Gh&&c&&Le(c);var O=[];if(c&&c.mobiles){var g=c.mobiles.includes("#")?c.mobiles.split("#"):[c.mobiles];O=g.map(function(W){return{phone:W}})}(l=u.current)===null||l===void 0||l.setFieldsValue((0,n.Z)((0,n.Z)({},c),{phone:O}))})}};return(0,P.useEffect)(function(){We.getConfig()},[]),(0,a.jsxs)("div",{className:C().config,children:[(0,a.jsxs)(r.Z,{tabPosition:"left",size:"middle",onChange:function(p){We[p](),ce({dingDisabled:!0,dmsDisabled:!0})},type:"card",children:[(0,a.jsxs)(r.Z.TabPane,{tab:"\u9489\u9489\u544A\u8B66",children:[(0,a.jsx)("h3",{className:"text-c mb-30 mt-50 fw-600",children:"\u9489\u9489\u544A\u8B66\u914D\u7F6E"}),(0,a.jsx)("div",{className:C().wrap,children:(0,a.jsxs)(ve.A,{className:C().formWrap,formRef:u,labelAlign:"right",onFinish:function(){var x=(0,f.Z)(s().mark(function p(l){var c,d;return s().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:d=l.phone,d&&d.length>0&&(l.mobiles=d.map(function(W){return W.phone}).join("#"),delete l.phone),Pe((0,n.Z)((0,n.Z)({},l),{id:(c=je.id)!==null&&c!==void 0?c:null})).then(function(W){var pe=W.code;pe===Z.Gh&&(Q.Z.success({message:"\u63D0\u793A",description:"\u4FEE\u6539\u6210\u529F\uFF01"}),ce({dmsDisabled:!0,dingDisabled:!0}))});case 3:case"end":return g.stop()}},p)}));return function(p){return x.apply(this,arguments)}}(),submitter:{render:function(p,l){var c=function(){return(0,a.jsx)(A.Z,{htmlType:"button",onClick:function(){ce(function(g){var W=g.dmsDisabled;return{dingDisabled:!1,dmsDisabled:W}})},children:"\u70B9\u51FB\u7F16\u8F91"},"ding-edit")};return l.splice(1,0,c()),(0,L.Z)(l)},searchConfig:{submitText:"\u786E\u8BA4\u4FEE\u6539"}},labelCol:{span:7},wrapperCol:{span:17},layout:"horizontal",children:[(0,a.jsx)(_,{disabled:w.dingDisabled,help:(0,a.jsx)(T.Z.Link,{onClick:function(){re(!0)},children:"\u5982\u4F55\u83B7\u53D6Webhook\uFF1F"}),width:"lg",name:"webhook",label:"Webhook",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u94A5"}]}),(0,a.jsx)(_,{width:"lg",name:"secret",label:"Secret",disabled:w.dingDisabled,rules:[{required:!0,message:"\u8BF7\u8F93\u5165token"}]}),(0,a.jsx)(Fe.Z,{width:"lg",name:"gap",label:"\u544A\u8B66\u95F4\u9694",debounceTime:300,disabled:w.dingDisabled,rules:[{required:!0,message:"\u9009\u62E9\u544A\u8B66\u95F4\u9694"}],request:(0,f.Z)(s().mark(function x(){var p,l;return s().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,Ee();case 3:return p=d.sent,l=p.data,d.abrupt("return",l.map(function(O){return{label:O,value:O}}));case 8:return d.prev=8,d.t0=d.catch(0),d.abrupt("return",[]);case 11:case"end":return d.stop()}},x,null,[[0,8]])}))}),(0,a.jsx)(ge.u,{name:"phone",label:"@\u6307\u5B9A\u7528\u6237\uFF08\u624B\u673A\u53F7\u7801\uFF09\uFF1A",copyIconProps:!1,deleteIconProps:w.dingDisabled?!1:{},creatorButtonProps:{disabled:w.dingDisabled,creatorButtonText:"\u6DFB\u52A0\u6307\u5B9A\u7528\u6237"},initialValue:[{phone:""}],children:(0,a.jsx)(B.UW,{children:(0,a.jsx)(K.Z,{name:"phone",disabled:w.dingDisabled,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6307\u5B9A\u7528\u6237\u624B\u673A\u53F7\u7801\uFF01"}],fieldProps:{maxLength:11},placeholder:"\u8BF7\u8F93\u5165\u6307\u5B9A\u7528\u6237\u624B\u673A\u53F7\u7801"})},"group")})]})})]},"getConfig"),(0,a.jsxs)(r.Z.TabPane,{tab:"\u83B7\u53D6\u6570\u636E\u5E93\u5BA1\u8BA1\u65E5\u5FD7\u914D\u7F6E",children:[(0,a.jsx)("h3",{className:"text-c mb-30 mt-50 fw-600",children:"\u83B7\u53D6\u6570\u636E\u5E93\u5BA1\u8BA1\u65E5\u5FD7\u914D\u7F6E"}),(0,a.jsx)("div",{className:C().wrap,children:(0,a.jsxs)(ve.A,{className:C().formWrap,formRef:y,labelAlign:"right",onFinish:function(){var x=(0,f.Z)(s().mark(function p(l){var c,d;return s().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Ae(l);case 2:return c=g.sent,g.next=5,ie(l);case 5:d=g.sent,c.code===Z.Gh&&d.code===Z.Gh&&(Q.Z.success({message:"\u63D0\u793A",description:"\u4FEE\u6539\u6210\u529F\uFF01"}),ce({dmsDisabled:!0,dingDisabled:!0}));case 7:case"end":return g.stop()}},p)}));return function(p){return x.apply(this,arguments)}}(),submitter:{render:function(p,l){var c=function(){return(0,a.jsx)(A.Z,{htmlType:"button",onClick:function(){ce(function(g){var W=g.dingDisabled;return{dingDisabled:W,dmsDisabled:!1}})},children:"\u70B9\u51FB\u7F16\u8F91"},"dms-edit")};return l.splice(1,0,c()),(0,L.Z)(l)},searchConfig:{submitText:"\u786E\u8BA4\u4FEE\u6539"}},labelCol:{span:6},layout:"horizontal",children:[(0,a.jsx)(_,{width:"lg",name:"ak",label:"Access Key",style:{textAlign:"left"},disabled:w.dmsDisabled,rules:[{required:!0,message:"\u8BF7\u8F93\u5165Access Key"}]}),(0,a.jsx)(_,{width:"lg",name:"sk",label:"Secret Access Key",style:{textAlign:"left"},disabled:w.dmsDisabled,rules:[{required:!0,message:"\u8BF7\u8F93\u5165Secret Access Key"}]}),(0,a.jsx)(K.Z,{width:"lg",name:"region",label:"\u6570\u636E\u5E93\u6240\u5C5E\u533A\u57DF",style:{textAlign:"left"},disabled:w.dmsDisabled,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u6240\u5C5E\u533A\u57DF"}]})]})})]},"getAkAndSk")]}),(0,a.jsxs)(h.Z,{title:"\u83B7\u53D6Webhook\u64CD\u4F5C\u8BF4\u660E",width:"600px",bodyStyle:{textAlign:"center"},onCancel:function(){return re(!1)},visible:ue,footer:[(0,a.jsx)("div",{className:"text-c",children:(0,a.jsx)(A.Z,{type:"primary",onClick:function(){return re(!1)},children:"\u786E\u8BA4"})},"\u83B7\u53D6Webhook\u64CD\u4F5C\u8BF4\u660E")],children:[$>1&&(0,a.jsx)(A.Z,{type:"primary",className:"mr-10",icon:(0,a.jsx)(v.Z,{}),size:"middle",onClick:function(){J(function(p){return e(26861)("./ding".concat(p-1,".png")).then(function(l){Oe(l.default)}),p-1})}}),(0,a.jsx)(t.Z,{preview:!1,width:350,height:360,src:de,className:"mt-20"}),$<5&&(0,a.jsx)(A.Z,{type:"primary",className:"ml-10",icon:(0,a.jsx)(z.Z,{}),size:"middle",onClick:function(){J(function(p){return e(26861)("./ding".concat(p+1,".png")).then(function(l){Oe(l.default)}),p+1})}})]})]})},Ce=be},34217:function(R,S,e){R.exports=e.p+"static/ding1.189f221b.png"},79370:function(R,S,e){"use strict";e.d(S,{G:function(){return t}});var M=e(98924),h=function(r){if((0,M.Z)()&&window.document.documentElement){var j=Array.isArray(r)?r:[r],T=window.document.documentElement;return j.some(function(L){return L in T.style})}return!1},b=function(r,j){if(!h(r))return!1;var T=document.createElement("div"),L=T.style[r];return T.style[r]=j,T.style[r]!==L};function t(F,r){return!Array.isArray(F)&&r!==void 0?b(F,r):h(F)}},26861:function(R,S,e){var M={"./ding1.png":[34217],"./ding2.png":[37255,255],"./ding3.png":[77897,897],"./ding4.png":[66005,5],"./ding5.png":[13020,20]};function h(b){if(!e.o(M,b))return Promise.resolve().then(function(){var r=new Error("Cannot find module '"+b+"'");throw r.code="MODULE_NOT_FOUND",r});var t=M[b],F=t[0];return Promise.all(t.slice(1).map(e.e)).then(function(){return e.t(F,7|16)})}h.keys=function(){return Object.keys(M)},h.id=26861,R.exports=h}}]);
