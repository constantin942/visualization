(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[310],{5966:function(O,C,e){"use strict";var V=e(22122),N=e(81253),B=e(67294),M=e(30885),a=["fieldProps","proFieldProps"],c=["fieldProps","proFieldProps"],n="text",W=function(f){var S=f.fieldProps,p=f.proFieldProps,E=(0,N.Z)(f,a);return B.createElement(M.Z,(0,V.Z)({mode:"edit",valueType:n,fieldProps:S,filedConfig:{valueType:n},proFieldProps:p},E))},U=function(f){var S=f.fieldProps,p=f.proFieldProps,E=(0,N.Z)(f,c);return B.createElement(M.Z,(0,V.Z)({mode:"edit",valueType:"password",fieldProps:S,proFieldProps:p,filedConfig:{valueType:n}},E))},j=W;j.Password=U,j.displayName="ProFormComponent",C.Z=j},97796:function(O){O.exports={table:"table___3lKck"}},24927:function(O,C,e){"use strict";e.r(C),e.d(C,{default:function(){return ie}});var V=e(62350),N=e(75443),B=e(74379),M=e(38648),a=e(11849),c=e(2824),n=e(67294),W=e(97796),U=e.n(W),j=e(71194),z=e(50146),f=e(57663),S=e(71577),p=e(3182),E=e(94043),v=e.n(E),L=e(5894),k=e(5966),Z=e(25377),q=e(80129),Y=e.n(q);function _(r,l){return K.apply(this,arguments)}function K(){return K=(0,p.Z)(v().mark(function r(l,o){return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,Z.WY)("/api/skyflying/getAllMonitorTables",(0,a.Z)({method:"GET",params:l},o||{})));case 1:case"end":return t.stop()}},r)})),K.apply(this,arguments)}function ee(r,l){return $.apply(this,arguments)}function $(){return $=(0,p.Z)(v().mark(function r(l,o){return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,Z.WY)("/api/skyflying/updateMonitorTable?"+Y().stringify(l),(0,a.Z)({method:"POST"},o||{})));case 1:case"end":return t.stop()}},r)})),$.apply(this,arguments)}function te(r,l){return G.apply(this,arguments)}function G(){return G=(0,p.Z)(v().mark(function r(l,o){return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,Z.WY)("/api/skyflying/updateMonitorTableDesc?"+Y().stringify(l),(0,a.Z)({method:"POST"},o||{})));case 1:case"end":return t.stop()}},r)})),G.apply(this,arguments)}var s=e(85893);function ae(r,l){var o={labelCol:{span:6},wrapperCol:{span:20}},y=(0,n.useState)(),t=(0,c.Z)(y,2),m=t[0],A=t[1],R=(0,n.useRef)();return(0,n.useImperativeHandle)(l,function(){return{setInitValues:function(b){var h;A(b),(h=R.current)===null||h===void 0||h.setFieldsValue({tableDesc:b.tableDesc})}}}),(0,s.jsx)(z.Z,{width:400,title:"\u4FEE\u6539\u63CF\u8FF0",visible:r.visible,footer:[],onCancel:function(){return r.setVisible(!1)},children:(0,s.jsxs)(L.A,(0,a.Z)((0,a.Z)({formRef:R,layout:"horizontal"},o),{},{onFinish:function(){var x=(0,p.Z)(v().mark(function b(h){return v().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:te({id:m==null?void 0:m.id,tableDesc:h.tableDesc,tableName:m==null?void 0:m.tableName}).then(function(){r.refresh(),r.setVisible(!1)});case 1:case"end":return D.stop()}},b)}));return function(b){return x.apply(this,arguments)}}(),submitter:!1,children:[(0,s.jsx)(k.Z,{fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u8868\u7684\u63CF\u8FF0\u6587\u5B57"},label:"\u63CF\u8FF0\u6587\u5B57",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u63CF\u8FF0\u6587\u5B57"}],name:"tableDesc"}),(0,s.jsx)(L.A.Group,{style:{textAlign:"center"},children:(0,s.jsx)(S.Z,{type:"primary",htmlType:"submit",className:"w-100",children:"\u786E\u8BA4\u4FEE\u6539"})})]}))})}var ne=(0,n.forwardRef)(ae),re=e(83539),se=e(13312),le=function(){var l=(0,n.useState)([]),o=(0,c.Z)(l,2),y=o[0],t=o[1],m=(0,n.useState)(0),A=(0,c.Z)(m,2),R=A[0],x=A[1],b=(0,n.useState)({}),h=(0,c.Z)(b,2),I=h[0],D=h[1],oe=(0,n.useState)(!1),J=(0,c.Z)(oe,2),ue=J[0],H=J[1],Q=(0,n.useRef)(),X=(0,Z.md)(),de=(0,n.useState)({pageNo:1,pageSize:10}),w=(0,c.Z)(de,2),g=w[0],ce=w[1],T=(0,n.useCallback)(function(F){_(F).then(function(P){var i=P.data,u=JSON.parse(i);if(u&&u.rows){var d=JSON.parse(u.rows);if(d&&d.length>0){x(u.total),t(d);return}}x(0),t([])})},[]);(0,n.useEffect)(function(){T((0,a.Z)({},g))},[T,g]);var fe=[{title:"\u6570\u636E\u5E93\u5730\u5740",dataIndex:"dbAddress",align:"center"},{title:"\u6570\u636E\u5E93\u540D",dataIndex:"dbName",align:"center",ellipsis:!0},{title:"\u8868\u540D",dataIndex:"tableName",align:"center"},{title:"\u63CF\u8FF0",dataIndex:"tableDesc",align:"center"},{title:"\u72B6\u6001",align:"center",dataIndex:"isDelete",search:!1,initialValue:"0",valueEnum:{0:{text:"\u542F\u7528\u4E2D",status:"Success"},1:{text:"\u5DF2\u7981\u7528",status:"Error"}}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"gmtModified",dataIndex:"gmtModified",align:"center",valueType:"dateTime",search:!1},{title:"\u64CD\u4F5C",key:"option",align:"center",valueType:"option",render:function(P,i){return[(0,s.jsx)(Z.Nv,{accessible:X.canUpdate,children:(0,s.jsx)(N.Z,{title:"\u60A8\u786E\u8BA4".concat(i.isDelete===0?"\u7981\u7528":"\u542F\u7528").concat(i.tableName,"\u8868\u5417\uFF1F"),placement:"top",onConfirm:function(){ee({id:i.id,isDelete:i.isDelete===1?0:1,tableName:i.tableName}).then(function(d){var pe=d.code;pe===se.Gh&&(M.Z.success({message:"\u66F4\u65B0\u6210\u529F\uFF01"}),T((0,a.Z)((0,a.Z)({},g),I)))})},children:(0,s.jsx)("a",{className:i.isDelete===0?"danger":"",children:i.isDelete===0?"\u7981\u7528":"\u542F\u7528"})})},"link"),(0,s.jsx)(Z.Nv,{accessible:X.canUpdate,children:(0,s.jsx)("a",{onClick:function(){var d;(d=Q.current)===null||d===void 0||d.setInitValues(i),H(!0)},children:"\u66F4\u65B0"})},"update")]}}];return(0,s.jsxs)("div",{className:U().table,children:[(0,s.jsx)(re.ZP,{columns:fe,dataSource:y,rowKey:"id",pagination:{showSizeChanger:!1,total:R,pageSize:g.pageSize,current:g.pageNo,onChange:function(P,i){var u={pageNo:P,pageSize:i};ce(u),T((0,a.Z)((0,a.Z)({},u),I))}},search:{},onSubmit:function(P){D(P),T((0,a.Z)((0,a.Z)({},g),P))},onReset:function(){T((0,a.Z)({},g))},dateFormatter:"string",headerTitle:"\u5DF2\u6709\u6570\u636E\u5E93\u8868",toolBarRender:!1}),(0,s.jsx)(ne,{ref:Q,visible:ue,setVisible:H,refresh:function(){T((0,a.Z)((0,a.Z)({},g),I))}})]})},ie=le}}]);
