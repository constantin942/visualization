(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[462],{33599:function(le){le.exports={userAccess:"userAccess___1UdBc","detail-wrap":"detail-wrap___2mcEh","tabs-wrap":"tabs-wrap___3PPX8","content-wrap":"content-wrap___2U6yp"}},99210:function(){},9578:function(le,$,t){"use strict";t.r($),t.d($,{default:function(){return ae}});var m=t(3182),C=t(57663),I=t(71577),n=t(34792),O=t(48086),R=t(86582),D=t(2824),de=t(94043),A=t.n(de),E=t(67294),X=t(33599),me=t.n(X),V=t(24480),ie=t(84674),q=t(84437),j=t(6650),ee=t(13062),ue=t(71230),Q=t(89032),H=t(15746),ce=t(90387),i=t(9536),l=t(69886),a=t(85893),b=function(r){var u=(0,E.useCallback)(function(){var c=new l.by("ActionPie".concat(r.id),{autoFit:!0,height:250,appendPadding:10,data:r.types,angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});c.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),c.render()},[]);return(0,E.useEffect)(function(){u()},[u]),(0,a.jsx)("div",{id:"ActionPie"+r.id})},e=b,s=function(r){var u=(0,E.useCallback)(function(){var c=new l.by("VisibleTimePie"+r.id,{autoFit:!0,height:250,appendPadding:10,data:r.intervals,angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});c.update({theme:{styleSheet:{brandColor:"#FF6B3B",paletteQualitative10:["#FF6B3B","#626681","#FFC100","#9FB40F","#76523B","#DAD5B5","#0E8E89","#E19348","#F383A2","#247FEA"],paletteQualitative20:["#FF6B3B","#626681","#FFC100","#9FB40F","#76523B","#DAD5B5","#0E8E89","#E19348","#F383A2","#247FEA","#2BCB95","#B1ABF4","#1D42C2","#1D9ED1","#D64BC0","#255634","#8C8C47","#8CDAE5","#8E283B","#791DC9"]}}}),c.render()},[]);return(0,E.useEffect)(function(){u()},[u]),(0,a.jsx)("div",{id:"VisibleTimePie"+r.id})},v=s,f=t(39004),g=function(r){var u=(0,E.useCallback)(function(){var c=new f.kL({container:"RecentlyLine".concat(r.id),autoFit:!0,height:200});c.data(r.ranges),c.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),c.tooltip({showNil:!1,showCrosshairs:!1,title:function(Y,h){return"".concat(Y,"\uFF1A").concat(h.value," \u6B21")},itemTpl:`<div class="g2-tooltip">
  <div class="g2-tooltip-title">Language</div>
  <ul class="g2-tooltip-list">
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">a</span>:<span class="g2-tooltip-value">70</span>
    </li>
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">b</span>:<span class="g2-tooltip-value">50</span>
    </li>
  </ul>
</div>`}),c.axis("value",{label:{}}),c.area().position("year*value"),c.line().position("year*value"),c.render()},[]);return(0,E.useEffect)(function(){u()},[u]),(0,a.jsx)("div",{id:"RecentlyLine"+r.id})},p=g,L=[{label:"\u7ECF\u5E38\u8BBF\u95EE\u7684\u6570\u636E",value:"higher"},{label:"\u4E0D\u5E38\u8BBF\u95EE\u7684\u6570\u636E",value:"lower"}],W=function(r){var u,c,F,Y=(0,E.useState)(L[0].value),h=(0,D.Z)(Y,2),k=h[0],x=h[1];return(0,a.jsxs)(ue.Z,{className:r.style["detail-wrap"],children:[(0,a.jsxs)(H.Z,{span:8,className:r.style["tabs-wrap"],children:[(0,a.jsx)(i.Z,{block:!0,options:L,value:k,onChange:x}),(0,a.jsx)("div",{className:r.style["content-wrap"],children:(u=r.details)===null||u===void 0||(c=u.higherOrLower)===null||c===void 0||(F=c[k])===null||F===void 0?void 0:F.map(function(B){return(0,a.jsxs)("div",{className:"flex-x-sb",children:[(0,a.jsx)("span",{children:B.visitedData}),(0,a.jsxs)("span",{children:[B.visitedCount," \u6B21"]})]},B.visitedData)})})]}),(0,a.jsxs)(H.Z,{span:16,className:"pl-10 pr-20",children:[(0,a.jsxs)(ue.Z,{children:[(0,a.jsxs)(H.Z,{span:12,className:"text-c",children:[(0,a.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,a.jsx)(e,{types:r.details.types,id:r.id})]}),(0,a.jsxs)(H.Z,{span:12,className:"text-c",children:[(0,a.jsx)("h3",{children:"\u8BBF\u95EE\u65F6\u6BB5\u5206\u5E03"}),(0,a.jsx)(v,{intervals:r.details.intervals,id:r.id})]})]}),(0,a.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,a.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,a.jsx)(p,{ranges:r.details.ranges,id:r.id})]})]})]})},J=W,te=function(){var r=(0,E.useState)(),u=(0,D.Z)(r,2),c=u[0],F=u[1],Y=(0,E.useState)(""),h=(0,D.Z)(Y,2),k=h[0],x=h[1],B=(0,E.useState)({types:[],intervals:[],ranges:[],higherOrLower:{higher:[],lower:[]}}),fe=(0,D.Z)(B,2),he=fe[0],T=fe[1],Ce=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"applicationUserName",align:"center",initialValue:""},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,width:100,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,render:function(U,d){var w=JSON.parse(d.usualVisitedData),S=w.tableName,_=w.tableNameDesc,K=S.split(","),ne="-";return _?ne=_:K.length>1&&(ne=K[K.length-1]),(0,a.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:ne})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(U,d){return[(0,a.jsx)(I.Z,{type:"link",size:"small",onClick:function(){if(k===d.id){x(""),T({types:[],intervals:[],ranges:[],higherOrLower:{higher:[],lower:[]}});return}if(d.visitedCount!==0){var S=JSON.parse(d.usualVisitedData),_=S.tableName,K=V.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),ne=V.Z.getRangeTime(7,"YYYY-mm-dd HH:MM:SS");(0,j.Xd)({applicationUserName:d.userName,startTime:K[0],endTime:K[1],tableName:_}).then(function(pe){var ve=pe.data;if(ve&&ve.length>0){var Ee=ve.map(function(z,o){return{year:ne[o],value:z}}),ye=(0,R.Z)(ie.q);(0,j.FP)({userName:d.userName}).then(function(z){z.data&&z.data.length>0&&ye.forEach(function(o){z.data.forEach(function(y){var N=JSON.parse(y),se=N.dbType,P=N.dbTypeTimes;o.type===se&&(o.value=parseInt(P))})})});var oe=(0,R.Z)(ie.Q);(0,j.mt)(d.userName).then(function(z){var o=z.data,y=o.afternoon,N=o.morning,se=o.night;y&&(oe[0].value=N*100|0,oe[1].value=y*100|0,oe[2].value=se*100|0),(0,j.Bx)({applicationUserName:d.userName}).then(function(P){P.data&&(P.data.high.forEach(function(M){var re=M.visitedData.split("#");return M.visitedData=re[re.length-1],M}),P.data.low.forEach(function(M){var re=M.visitedData.split("#");return M.visitedData=re[re.length-1],M}),T(function(){return{types:ye,intervals:oe,ranges:Ee,higherOrLower:{higher:P.data.high,lower:P.data.low}}}),x(d.id))})})}})}else O.ZP.info("".concat(d.userName,"\u7528\u6237\u8BBF\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],ge=function(){(0,j.F$)().then(function(U){var d=U.data,w=JSON.parse(d);w&&w.length>0?F(w.map(function(S){return S.id=V.Z.uuid(),S})):F([])})};return(0,E.useEffect)(function(){ge()},[]),(0,a.jsx)("div",{className:me().userAccess,children:(0,a.jsx)(q.Z,{columns:Ce,rowKey:"id",search:{searchText:"\u67E5\u8BE2",resetText:"\u91CD\u7F6E"},toolBarRender:!1,onSubmit:function(){var G=(0,m.Z)(A().mark(function U(d){return A().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:Object.keys(d).length>0?(0,j.wA)(d).then(function(_){console.log(_)}):ge();case 1:case"end":return S.stop()}},U)}));return function(U){return G.apply(this,arguments)}}(),expandable:{expandedRowRender:function(U,d){return(0,a.jsx)(J,{details:he,id:d,style:me()},d)},expandIcon:function(){return!1},expandedRowKeys:[k]},dataSource:c})})},ae=te},84674:function(le,$,t){"use strict";t.d($,{q:function(){return m},Q:function(){return C}});var m=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],C=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},6650:function(le,$,t){"use strict";t.d($,{F$:function(){return R},Xd:function(){return de},mt:function(){return E},et:function(){return ie},FP:function(){return j},Bx:function(){return ue},wA:function(){return H}});var m=t(11849),C=t(3182),I=t(94043),n=t.n(I),O=t(25377);function R(i){return D.apply(this,arguments)}function D(){return D=(0,C.Z)(n().mark(function i(l){return n().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,O.WY)("/api/skyflying/getCoarseCountsOfUser",(0,m.Z)({method:"GET"},l||{})));case 1:case"end":return b.stop()}},i)})),D.apply(this,arguments)}function de(i,l){return A.apply(this,arguments)}function A(){return A=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,O.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,m.Z)({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),A.apply(this,arguments)}function E(i,l){return X.apply(this,arguments)}function X(){return X=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,O.WY)("/api/skyflying/getVisitRate",(0,m.Z)({method:"GET",params:{username:l}},a||{})));case 1:case"end":return e.stop()}},i)})),X.apply(this,arguments)}function me(i,l){return V.apply(this,arguments)}function V(){return V=_asyncToGenerator(_regeneratorRuntime.mark(function i(l,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),V.apply(this,arguments)}function ie(i,l){return q.apply(this,arguments)}function q(){return q=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,O.WY)("/api/skyflying/getCountsOfUser",(0,m.Z)({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),q.apply(this,arguments)}function j(i,l){return ee.apply(this,arguments)}function ee(){return ee=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,O.WY)("/api/skyflying/getUserOperationTypeCount",(0,m.Z)({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),ee.apply(this,arguments)}function ue(i,l){return Q.apply(this,arguments)}function Q(){return Q=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,O.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,m.Z)({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),Q.apply(this,arguments)}function H(i,l){return ce.apply(this,arguments)}function ce(){return ce=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,O.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,m.Z)({method:"GET",params:l||{}},a||{})));case 1:case"end":return e.stop()}},i)})),ce.apply(this,arguments)}},9536:function(le,$,t){"use strict";t.d($,{Z:function(){return b}});var m=t(96156),C=t(22122),I=t(90484),n=t(67294),O=t(94184),R=t.n(O),D=t(28481),de=t(81253),A=t(28991),E=t(63441),X=t(21770),me=t(42550),V=t(98423),ie=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function q(e){if(typeof e.title!="undefined")return e.title;if((0,I.Z)(e.label)!=="object"){var s;return(s=e.label)===null||s===void 0?void 0:s.toString()}}function j(e){return e.map(function(s){if((0,I.Z)(s)==="object"&&s!==null){var v=q(s);return(0,A.Z)((0,A.Z)({},s),{},{title:v})}return{label:s==null?void 0:s.toString(),title:s==null?void 0:s.toString(),value:s}})}var ee=function(s){return{transform:"translateX(".concat(s.offsetLeft,"px)"),width:s.clientWidth}},ue=function(s){var v=s.prefixCls,f=s.className,g=s.disabled,p=s.checked,L=s.label,W=s.title,J=s.value,te=s.onChange,ae=function(r){g||te(r,J)};return n.createElement("label",{className:R()(f,(0,m.Z)({},"".concat(v,"-item-disabled"),g))},n.createElement("input",{className:"".concat(v,"-item-input"),type:"radio",disabled:g,checked:p,onChange:ae}),n.createElement("div",{className:"".concat(v,"-item-label"),title:W},L))},Q=n.forwardRef(function(e,s){var v,f,g=e.prefixCls,p=g===void 0?"rc-segmented":g,L=e.direction,W=e.options,J=e.disabled,te=e.defaultValue,ae=e.value,Z=e.onChange,r=e.className,u=r===void 0?"":r,c=e.motionName,F=c===void 0?"thumb-motion":c,Y=(0,de.Z)(e,ie),h=n.useRef(null),k=(0,me.sQ)(h,s),x=n.useRef({from:null,to:null}),B=n.useMemo(function(){return j(W)},[W]),fe=(0,X.Z)((v=B[0])===null||v===void 0?void 0:v.value,{value:e.value,defaultValue:te}),he=(0,D.Z)(fe,2),T=he[0],Ce=he[1],ge=n.useState(T),G=(0,D.Z)(ge,2),U=G[0],d=G[1],w=n.useState(!1),S=(0,D.Z)(w,2),_=S[0],K=S[1],ne=n.useCallback(function(o){var y,N=B.findIndex(function(re){return re.value===o});if(!(N<0)){var se=(y=h.current)===null||y===void 0?void 0:y.querySelector(".".concat(p,"-item:nth-child(").concat(N+1,")"));if(se){var P,M=(P=h.current)===null||P===void 0?void 0:P.querySelector(".".concat(p,"-item-selected"));M&&se&&x.current&&(x.current.from=ee(M),x.current.to=ee(se),K(!0))}}},[p,B]),pe=n.useRef(U);n.useEffect(function(){pe.current=U}),n.useEffect(function(){(typeof T=="string"||typeof T=="number")&&T!==pe.current&&ne(T)},[T]);var ve=function(y,N){J||(Ce(N),Z==null||Z(N))},Ee=function(){var y=x.current.from;if(y)return d(void 0),y},ye=function(){var y=x.current.to;if(y)return y},oe=function(){K(!1),d(T),x.current&&(x.current={from:null,to:null})},z=(0,V.Z)(Y,["children"]);return n.createElement("div",(0,A.Z)((0,A.Z)({},z),{},{className:R()(p,(f={},(0,m.Z)(f,"".concat(p,"-rtl"),L==="rtl"),(0,m.Z)(f,"".concat(p,"-disabled"),J),f),u),ref:k}),n.createElement(E.Z,{visible:_,motionName:"".concat(p,"-").concat(F),motionDeadline:300,onEnterStart:Ee,onEnterActive:ye,onEnterEnd:oe},function(o){var y=o.className,N=o.style;return n.createElement("div",{style:N,className:R()("".concat(p,"-thumb"),y)})}),B.map(function(o){return n.createElement(ue,(0,A.Z)({key:o.value,prefixCls:p,className:R()(o.className,"".concat(p,"-item"),(0,m.Z)({},"".concat(p,"-item-selected"),o.value===U)),checked:o.value===T,onChange:ve},o))}))});Q.displayName="Segmented",Q.defaultProps={options:[]};var H=Q,ce=t(65632),i=t(97647),l=function(e,s){var v={};for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&s.indexOf(f)<0&&(v[f]=e[f]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,f=Object.getOwnPropertySymbols(e);g<f.length;g++)s.indexOf(f[g])<0&&Object.prototype.propertyIsEnumerable.call(e,f[g])&&(v[f[g]]=e[f[g]]);return v},a=n.forwardRef(function(e,s){var v,f=e.prefixCls,g=e.className,p=e.block,L=e.options,W=e.size,J=W===void 0?"middle":W,te=l(e,["prefixCls","className","block","options","size"]),ae=n.useContext(ce.E_),Z=ae.getPrefixCls,r=ae.direction,u=Z("segmented",f),c=n.useContext(i.Z),F=J||c,Y=n.useMemo(function(){return L.map(function(h){if((0,I.Z)(h)==="object"&&(h==null?void 0:h.icon)){var k=h.icon,x=h.label,B=l(h,["icon","label"]);return(0,C.Z)((0,C.Z)({},B),{label:n.createElement(n.Fragment,null,n.createElement("span",{className:"".concat(u,"-item-icon")},k),n.createElement("span",null,x))})}return h})},[L,u]);return n.createElement(H,(0,C.Z)({},te,{className:R()(g,(v={},(0,m.Z)(v,"".concat(u,"-block"),p),(0,m.Z)(v,"".concat(u,"-sm"),F==="small"),(0,m.Z)(v,"".concat(u,"-lg"),F==="large"),v)),options:Y,ref:s,prefixCls:u,direction:r}))});a.displayName="Segmented",a.defaultProps={options:[]};var b=a},90387:function(le,$,t){"use strict";var m=t(38663),C=t.n(m),I=t(99210),n=t.n(I)}}]);
