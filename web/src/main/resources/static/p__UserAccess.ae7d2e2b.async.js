(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[462],{33599:function(le){le.exports={userAccess:"userAccess___1UdBc","detail-wrap":"detail-wrap___2mcEh","tabs-wrap":"tabs-wrap___3PPX8","content-wrap":"content-wrap___2U6yp"}},99210:function(){},9578:function(le,V,t){"use strict";t.r(V),t.d(V,{default:function(){return ae}});var v=t(3182),C=t(57663),L=t(71577),n=t(34792),T=t(48086),w=t(86582),B=t(2824),de=t(94043),S=t.n(de),E=t(67294),X=t(33599),ve=t.n(X),W=t(24480),ie=t(84674),q=t(84437),M=t(6650),ee=t(13062),ue=t(71230),Q=t(89032),H=t(15746),ce=t(90387),i=t(9536),l=t(69886),a=t(85893),b=function(r){var c=(0,E.useCallback)(function(){var o=new l.by("ActionPie".concat(r.id),{autoFit:!0,height:250,appendPadding:10,data:r.types,angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});o.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),o.render()},[]);return(0,E.useEffect)(function(){c()},[c]),(0,a.jsx)("div",{id:"ActionPie"+r.id})},e=b,s=function(r){var c=(0,E.useCallback)(function(){var o=new l.by("VisibleTimePie"+r.id,{autoFit:!0,height:250,appendPadding:10,data:r.intervals,angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});o.update({theme:{styleSheet:{brandColor:"#FF6B3B",paletteQualitative10:["#FF6B3B","#626681","#FFC100","#9FB40F","#76523B","#DAD5B5","#0E8E89","#E19348","#F383A2","#247FEA"],paletteQualitative20:["#FF6B3B","#626681","#FFC100","#9FB40F","#76523B","#DAD5B5","#0E8E89","#E19348","#F383A2","#247FEA","#2BCB95","#B1ABF4","#1D42C2","#1D9ED1","#D64BC0","#255634","#8C8C47","#8CDAE5","#8E283B","#791DC9"]}}}),o.render()},[]);return(0,E.useEffect)(function(){c()},[c]),(0,a.jsx)("div",{id:"VisibleTimePie"+r.id})},m=s,f=t(39004),p=function(r){var c=(0,E.useCallback)(function(){var o=new f.kL({container:"RecentlyLine".concat(r.id),autoFit:!0,height:200});o.data(r.ranges),o.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),o.tooltip({showNil:!1,showCrosshairs:!1,title:function(G,h){return"".concat(G,"\uFF1A").concat(h.value," \u6B21")},itemTpl:`<div class="g2-tooltip">
  <div class="g2-tooltip-title">Language</div>
  <ul class="g2-tooltip-list">
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">a</span>:<span class="g2-tooltip-value">70</span>
    </li>
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">b</span>:<span class="g2-tooltip-value">50</span>
    </li>
  </ul>
</div>`}),o.axis("value",{label:{}}),o.area().position("year*value"),o.line().position("year*value"),o.render()},[]);return(0,E.useEffect)(function(){c()},[c]),(0,a.jsx)("div",{id:"RecentlyLine"+r.id})},g=p,Y=[{label:"\u7ECF\u5E38\u8BBF\u95EE\u7684\u6570\u636E",value:"higher"},{label:"\u4E0D\u5E38\u8BBF\u95EE\u7684\u6570\u636E",value:"lower"}],k=function(r){var c,o,x,G=(0,E.useState)(Y[0].value),h=(0,B.Z)(G,2),K=h[0],D=h[1];return(0,a.jsxs)(ue.Z,{className:r.style["detail-wrap"],children:[(0,a.jsxs)(H.Z,{span:8,className:r.style["tabs-wrap"],children:[(0,a.jsx)(i.Z,{block:!0,options:Y,value:K,onChange:D}),(0,a.jsx)("div",{className:r.style["content-wrap"],children:(c=r.details)===null||c===void 0||(o=c.higherOrLower)===null||o===void 0||(x=o[K])===null||x===void 0?void 0:x.map(function(Z){return(0,a.jsxs)("div",{className:"flex-x-sb",children:[(0,a.jsx)("span",{children:Z.visitedData}),(0,a.jsxs)("span",{children:[Z.visitedCount," \u6B21"]})]},Z.visitedData)})})]}),(0,a.jsxs)(H.Z,{span:16,className:"pl-10 pr-20",children:[(0,a.jsxs)(ue.Z,{children:[(0,a.jsxs)(H.Z,{span:12,className:"text-c",children:[(0,a.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,a.jsx)(e,{types:r.details.types,id:r.id})]}),(0,a.jsxs)(H.Z,{span:12,className:"text-c",children:[(0,a.jsx)("h3",{children:"\u8BBF\u95EE\u65F6\u6BB5\u5206\u5E03"}),(0,a.jsx)(m,{intervals:r.details.intervals,id:r.id})]})]}),(0,a.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,a.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,a.jsx)(g,{ranges:r.details.ranges,id:r.id})]})]})]})},J=k,te=function(){var r=(0,E.useState)(),c=(0,B.Z)(r,2),o=c[0],x=c[1],G=(0,E.useState)(""),h=(0,B.Z)(G,2),K=h[0],D=h[1],Z=(0,E.useState)({types:[],intervals:[],ranges:[],higherOrLower:{higher:[],lower:[]}}),he=(0,B.Z)(Z,2),pe=he[0],P=he[1],Ce=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"applicationUserName",align:"center",initialValue:""},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,width:100,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,render:function(N,u){var $=JSON.parse(u.usualVisitedData),A=$.tableName,_=$.tableNameDesc,F=A.split(","),ne="-";return _?ne=_:F.length>1&&(ne=F[F.length-1]),(0,a.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:ne})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(N,u){return[(0,a.jsx)(L.Z,{type:"link",size:"small",onClick:function(){if(K===u.id){D(""),P({types:[],intervals:[],ranges:[],higherOrLower:{higher:[],lower:[]}});return}if(u.visitedCount!==0){var A=JSON.parse(u.usualVisitedData),_=A.tableName,F=W.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),ne=W.Z.getRangeTime(7,"YYYY-mm-dd HH:MM:SS");(0,M.Xd)({applicationUserName:u.userName,startTime:F[0],endTime:F[1],tableName:_}).then(function(ge){var fe=ge.data;if(fe&&fe.length>0){var Ee=fe.map(function(z,d){return{year:ne[d],value:z}}),ye=(0,w.Z)(ie.q);(0,M.FP)({userName:u.userName}).then(function(z){z.data&&z.data.length>0&&ye.forEach(function(d){z.data.forEach(function(y){var O=JSON.parse(y),se=O.dbType,j=O.dbTypeTimes;d.type===se&&(d.value=parseInt(j))})})});var oe=(0,w.Z)(ie.Q);(0,M.mt)(u.userName).then(function(z){var d=z.data,y=d.afternoon,O=d.morning,se=d.night;y&&(oe[0].value=O*100|0,oe[1].value=y*100|0,oe[2].value=se*100|0),(0,M.Bx)({applicationUserName:u.userName}).then(function(j){j.data&&(j.data.high.forEach(function(I){var re=I.visitedData.split("#");return I.visitedData=re[re.length-1],I}),j.data.low.forEach(function(I){var re=I.visitedData.split("#");return I.visitedData=re[re.length-1],I}),P(function(){return{types:ye,intervals:oe,ranges:Ee,higherOrLower:{higher:j.data.high,lower:j.data.low}}}),D(u.id))})})}})}else T.ZP.info("".concat(u.userName,"\u7528\u6237\u8BBF\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],me=function(){(0,M.F$)().then(function(N){var u=N.data,$=JSON.parse(u);$&&$.length>0?x($.map(function(A){return A.id=W.Z.uuid(),A})):x([])})};return(0,E.useEffect)(function(){me()},[]),(0,a.jsx)("div",{className:ve().userAccess,children:(0,a.jsx)(q.Z,{headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A\u7EDF\u8BA1\u5217\u8868",columns:Ce,rowKey:"id",search:{searchText:"\u67E5\u8BE2",resetText:"\u91CD\u7F6E"},onReset:(0,v.Z)(S().mark(function R(){return S().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:me();case 1:case"end":return u.stop()}},R)})),pagination:!1,options:!1,onSubmit:function(){var R=(0,v.Z)(S().mark(function N(u){return S().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:Object.keys(u).length>0?(0,M.wA)(u).then(function(_){var F=_.data;if(F&&F.visitedCount!==0){x([F]);return}x([])}):me();case 1:case"end":return A.stop()}},N)}));return function(N){return R.apply(this,arguments)}}(),expandable:{expandedRowRender:function(N,u){return(0,a.jsx)(J,{details:pe,id:u,style:ve()},u)},expandIcon:function(){return!1},expandedRowKeys:[K]},dataSource:o})})},ae=te},84674:function(le,V,t){"use strict";t.d(V,{q:function(){return v},Q:function(){return C}});var v=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],C=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},6650:function(le,V,t){"use strict";t.d(V,{F$:function(){return w},Xd:function(){return de},mt:function(){return E},et:function(){return ie},FP:function(){return M},Bx:function(){return ue},wA:function(){return H}});var v=t(11849),C=t(3182),L=t(94043),n=t.n(L),T=t(25377);function w(i){return B.apply(this,arguments)}function B(){return B=(0,C.Z)(n().mark(function i(l){return n().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,T.WY)("/api/skyflying/getCoarseCountsOfUser",(0,v.Z)({method:"GET"},l||{})));case 1:case"end":return b.stop()}},i)})),B.apply(this,arguments)}function de(i,l){return S.apply(this,arguments)}function S(){return S=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,v.Z)({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),S.apply(this,arguments)}function E(i,l){return X.apply(this,arguments)}function X(){return X=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.WY)("/api/skyflying/getVisitRate",(0,v.Z)({method:"GET",params:{username:l}},a||{})));case 1:case"end":return e.stop()}},i)})),X.apply(this,arguments)}function ve(i,l){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime.mark(function i(l,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),W.apply(this,arguments)}function ie(i,l){return q.apply(this,arguments)}function q(){return q=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.WY)("/api/skyflying/getCountsOfUser",(0,v.Z)({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),q.apply(this,arguments)}function M(i,l){return ee.apply(this,arguments)}function ee(){return ee=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.WY)("/api/skyflying/getUserOperationTypeCount",(0,v.Z)({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),ee.apply(this,arguments)}function ue(i,l){return Q.apply(this,arguments)}function Q(){return Q=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,v.Z)({method:"GET",params:l},a||{})));case 1:case"end":return e.stop()}},i)})),Q.apply(this,arguments)}function H(i,l){return ce.apply(this,arguments)}function ce(){return ce=(0,C.Z)(n().mark(function i(l,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,v.Z)({method:"GET",params:l||{}},a||{})));case 1:case"end":return e.stop()}},i)})),ce.apply(this,arguments)}},9536:function(le,V,t){"use strict";t.d(V,{Z:function(){return b}});var v=t(96156),C=t(22122),L=t(90484),n=t(67294),T=t(94184),w=t.n(T),B=t(28481),de=t(81253),S=t(28991),E=t(63441),X=t(21770),ve=t(42550),W=t(98423),ie=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function q(e){if(typeof e.title!="undefined")return e.title;if((0,L.Z)(e.label)!=="object"){var s;return(s=e.label)===null||s===void 0?void 0:s.toString()}}function M(e){return e.map(function(s){if((0,L.Z)(s)==="object"&&s!==null){var m=q(s);return(0,S.Z)((0,S.Z)({},s),{},{title:m})}return{label:s==null?void 0:s.toString(),title:s==null?void 0:s.toString(),value:s}})}var ee=function(s){return{transform:"translateX(".concat(s.offsetLeft,"px)"),width:s.clientWidth}},ue=function(s){var m=s.prefixCls,f=s.className,p=s.disabled,g=s.checked,Y=s.label,k=s.title,J=s.value,te=s.onChange,ae=function(r){p||te(r,J)};return n.createElement("label",{className:w()(f,(0,v.Z)({},"".concat(m,"-item-disabled"),p))},n.createElement("input",{className:"".concat(m,"-item-input"),type:"radio",disabled:p,checked:g,onChange:ae}),n.createElement("div",{className:"".concat(m,"-item-label"),title:k},Y))},Q=n.forwardRef(function(e,s){var m,f,p=e.prefixCls,g=p===void 0?"rc-segmented":p,Y=e.direction,k=e.options,J=e.disabled,te=e.defaultValue,ae=e.value,U=e.onChange,r=e.className,c=r===void 0?"":r,o=e.motionName,x=o===void 0?"thumb-motion":o,G=(0,de.Z)(e,ie),h=n.useRef(null),K=(0,ve.sQ)(h,s),D=n.useRef({from:null,to:null}),Z=n.useMemo(function(){return M(k)},[k]),he=(0,X.Z)((m=Z[0])===null||m===void 0?void 0:m.value,{value:e.value,defaultValue:te}),pe=(0,B.Z)(he,2),P=pe[0],Ce=pe[1],me=n.useState(P),R=(0,B.Z)(me,2),N=R[0],u=R[1],$=n.useState(!1),A=(0,B.Z)($,2),_=A[0],F=A[1],ne=n.useCallback(function(d){var y,O=Z.findIndex(function(re){return re.value===d});if(!(O<0)){var se=(y=h.current)===null||y===void 0?void 0:y.querySelector(".".concat(g,"-item:nth-child(").concat(O+1,")"));if(se){var j,I=(j=h.current)===null||j===void 0?void 0:j.querySelector(".".concat(g,"-item-selected"));I&&se&&D.current&&(D.current.from=ee(I),D.current.to=ee(se),F(!0))}}},[g,Z]),ge=n.useRef(N);n.useEffect(function(){ge.current=N}),n.useEffect(function(){(typeof P=="string"||typeof P=="number")&&P!==ge.current&&ne(P)},[P]);var fe=function(y,O){J||(Ce(O),U==null||U(O))},Ee=function(){var y=D.current.from;if(y)return u(void 0),y},ye=function(){var y=D.current.to;if(y)return y},oe=function(){F(!1),u(P),D.current&&(D.current={from:null,to:null})},z=(0,W.Z)(G,["children"]);return n.createElement("div",(0,S.Z)((0,S.Z)({},z),{},{className:w()(g,(f={},(0,v.Z)(f,"".concat(g,"-rtl"),Y==="rtl"),(0,v.Z)(f,"".concat(g,"-disabled"),J),f),c),ref:K}),n.createElement(E.Z,{visible:_,motionName:"".concat(g,"-").concat(x),motionDeadline:300,onEnterStart:Ee,onEnterActive:ye,onEnterEnd:oe},function(d){var y=d.className,O=d.style;return n.createElement("div",{style:O,className:w()("".concat(g,"-thumb"),y)})}),Z.map(function(d){return n.createElement(ue,(0,S.Z)({key:d.value,prefixCls:g,className:w()(d.className,"".concat(g,"-item"),(0,v.Z)({},"".concat(g,"-item-selected"),d.value===N)),checked:d.value===P,onChange:fe},d))}))});Q.displayName="Segmented",Q.defaultProps={options:[]};var H=Q,ce=t(65632),i=t(97647),l=function(e,s){var m={};for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&s.indexOf(f)<0&&(m[f]=e[f]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,f=Object.getOwnPropertySymbols(e);p<f.length;p++)s.indexOf(f[p])<0&&Object.prototype.propertyIsEnumerable.call(e,f[p])&&(m[f[p]]=e[f[p]]);return m},a=n.forwardRef(function(e,s){var m,f=e.prefixCls,p=e.className,g=e.block,Y=e.options,k=e.size,J=k===void 0?"middle":k,te=l(e,["prefixCls","className","block","options","size"]),ae=n.useContext(ce.E_),U=ae.getPrefixCls,r=ae.direction,c=U("segmented",f),o=n.useContext(i.Z),x=J||o,G=n.useMemo(function(){return Y.map(function(h){if((0,L.Z)(h)==="object"&&(h==null?void 0:h.icon)){var K=h.icon,D=h.label,Z=l(h,["icon","label"]);return(0,C.Z)((0,C.Z)({},Z),{label:n.createElement(n.Fragment,null,n.createElement("span",{className:"".concat(c,"-item-icon")},K),n.createElement("span",null,D))})}return h})},[Y,c]);return n.createElement(H,(0,C.Z)({},te,{className:w()(p,(m={},(0,v.Z)(m,"".concat(c,"-block"),g),(0,v.Z)(m,"".concat(c,"-sm"),x==="small"),(0,v.Z)(m,"".concat(c,"-lg"),x==="large"),m)),options:G,ref:s,prefixCls:c,direction:r}))});a.displayName="Segmented",a.defaultProps={options:[]};var b=a},90387:function(le,V,t){"use strict";var v=t(38663),C=t.n(v),L=t(99210),n=t.n(L)}}]);
