(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[126],{93488:function(me,ee,e){"use strict";e.d(ee,{Z:function(){return H}});var S=e(28991),_=e(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},O=E,B=e(27029),re=function(v,ce){return _.createElement(B.Z,(0,S.Z)((0,S.Z)({},v),{},{ref:ce,icon:O}))};re.displayName="ArrowRightOutlined";var H=_.forwardRef(re)},37174:function(me){me.exports={alarm:"alarm___12xQi",salesRank:"salesRank___-5oIk",rankingList:"rankingList___rxbMU",rankingItemNumber:"rankingItemNumber___3eh0u",active:"active___3KjTZ",rankingItemTitle:"rankingItemTitle___3gCS2","alarm-data":"alarm-data___17B2L",alarmDetail:"alarmDetail___9Lz5b"}},52953:function(){},44887:function(){},26723:function(me,ee,e){"use strict";e.r(ee),e.d(ee,{default:function(){return et}});var S=e(20228),_=e(11382),E=e(66456),O=e(78587),B=e(3182),re=e(57663),H=e(71577),W=e(11849),v=e(2824),ce=e(94043),se=e.n(ce),t=e(67294),ue=e(37174),Z=e.n(ue),b=e(48606),oe=e(71194),I=e(50146),j=e(88983),xe=e(47933),ze=e(62350),pe=e(75443),o=e(77576),ve=e(12028),fe=e(22385),g=e(61580),te=e(17462),Pe=e(76772),Ae=e(38663),we=e(52953),V=e(96156),Me=e(28481),Se=e(90484),Te=e(94184),de=e.n(Te),Ne=e(50344),he=e(24308),Oe=e(21687),_e=e(65632),y=e(22122);function ye(a){return a!=null}var Be=function(n){var r=n.itemPrefixCls,i=n.component,l=n.span,d=n.className,c=n.style,D=n.labelStyle,R=n.contentStyle,T=n.bordered,C=n.label,x=n.content,Q=n.colon,p=i;if(T){var f;return t.createElement(p,{className:de()((f={},(0,V.Z)(f,"".concat(r,"-item-label"),ye(C)),(0,V.Z)(f,"".concat(r,"-item-content"),ye(x)),f),d),style:c,colSpan:l},ye(C)&&t.createElement("span",{style:D},C),ye(x)&&t.createElement("span",{style:R},x))}return t.createElement(p,{className:de()("".concat(r,"-item"),d),style:c,colSpan:l},t.createElement("div",{className:"".concat(r,"-item-container")},(C||C===0)&&t.createElement("span",{className:de()("".concat(r,"-item-label"),(0,V.Z)({},"".concat(r,"-item-no-colon"),!Q)),style:D},C),(x||x===0)&&t.createElement("span",{className:de()("".concat(r,"-item-content")),style:R},x)))},Ce=Be;function Ee(a,n,r){var i=n.colon,l=n.prefixCls,d=n.bordered,c=r.component,D=r.type,R=r.showLabel,T=r.showContent,C=r.labelStyle,x=r.contentStyle;return a.map(function(Q,p){var f=Q.props,z=f.label,Y=f.children,U=f.prefixCls,ne=U===void 0?l:U,w=f.className,m=f.style,ie=f.labelStyle,J=f.contentStyle,ae=f.span,G=ae===void 0?1:ae,A=Q.key;return typeof c=="string"?t.createElement(Ce,{key:"".concat(D,"-").concat(A||p),className:w,style:m,labelStyle:(0,y.Z)((0,y.Z)({},C),ie),contentStyle:(0,y.Z)((0,y.Z)({},x),J),span:G,colon:i,component:c,itemPrefixCls:ne,bordered:d,label:R?z:null,content:T?Y:null}):[t.createElement(Ce,{key:"label-".concat(A||p),className:w,style:(0,y.Z)((0,y.Z)((0,y.Z)({},C),m),ie),span:1,colon:i,component:c[0],itemPrefixCls:ne,bordered:d,label:z}),t.createElement(Ce,{key:"content-".concat(A||p),className:w,style:(0,y.Z)((0,y.Z)((0,y.Z)({},x),m),J),span:G*2-1,component:c[1],itemPrefixCls:ne,bordered:d,content:Y})]})}var je=function(n){var r=t.useContext(h),i=n.prefixCls,l=n.vertical,d=n.row,c=n.index,D=n.bordered;return l?t.createElement(t.Fragment,null,t.createElement("tr",{key:"label-".concat(c),className:"".concat(i,"-row")},Ee(d,n,(0,y.Z)({component:"th",type:"label",showLabel:!0},r))),t.createElement("tr",{key:"content-".concat(c),className:"".concat(i,"-row")},Ee(d,n,(0,y.Z)({component:"td",type:"content",showContent:!0},r)))):t.createElement("tr",{key:c,className:"".concat(i,"-row")},Ee(d,n,(0,y.Z)({component:D?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},r)))},Le=je,Ue=function(n){var r=n.children;return r},$=Ue,u=e(96159),h=t.createContext({}),L={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function Ke(a,n){if(typeof a=="number")return a;if((0,Se.Z)(a)==="object")for(var r=0;r<he.c4.length;r++){var i=he.c4[r];if(n[i]&&a[i]!==void 0)return a[i]||L[i]}return 3}function Ze(a,n,r){var i=a;return(n===void 0||n>r)&&(i=(0,u.Tm)(a,{span:r}),(0,Oe.Z)(n===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),i}function Fe(a,n){var r=(0,Ne.Z)(a).filter(function(c){return c}),i=[],l=[],d=n;return r.forEach(function(c,D){var R,T=(R=c.props)===null||R===void 0?void 0:R.span,C=T||1;if(D===r.length-1){l.push(Ze(c,T,d)),i.push(l);return}C<d?(d-=C,l.push(c)):(l.push(Ze(c,C,d)),i.push(l),d=n,l=[])}),i}function be(a){var n,r=a.prefixCls,i=a.title,l=a.extra,d=a.column,c=d===void 0?L:d,D=a.colon,R=D===void 0?!0:D,T=a.bordered,C=a.layout,x=a.children,Q=a.className,p=a.style,f=a.size,z=a.labelStyle,Y=a.contentStyle,U=t.useContext(_e.E_),ne=U.getPrefixCls,w=U.direction,m=ne("descriptions",r),ie=t.useState({}),J=(0,Me.Z)(ie,2),ae=J[0],G=J[1],A=Ke(c,ae);t.useEffect(function(){var N=he.ZP.subscribe(function(le){(0,Se.Z)(c)==="object"&&G(le)});return function(){he.ZP.unsubscribe(N)}},[]);var K=Fe(x,A),P=t.useMemo(function(){return{labelStyle:z,contentStyle:Y}},[z,Y]);return t.createElement(h.Provider,{value:P},t.createElement("div",{className:de()(m,(n={},(0,V.Z)(n,"".concat(m,"-").concat(f),f&&f!=="default"),(0,V.Z)(n,"".concat(m,"-bordered"),!!T),(0,V.Z)(n,"".concat(m,"-rtl"),w==="rtl"),n),Q),style:p},(i||l)&&t.createElement("div",{className:"".concat(m,"-header")},i&&t.createElement("div",{className:"".concat(m,"-title")},i),l&&t.createElement("div",{className:"".concat(m,"-extra")},l)),t.createElement("div",{className:"".concat(m,"-view")},t.createElement("table",null,t.createElement("tbody",null,K.map(function(N,le){return t.createElement(Le,{key:le,index:le,colon:R,prefixCls:m,vertical:C==="vertical",bordered:T,row:N})}))))))}be.Item=$;var ge=be,Ge=e(74379),De=e(38648),We=e(13312),Ye=e(1870),s=e(85893);function Je(a,n){var r=(0,t.useState)({}),i=(0,v.Z)(r,2),l=i[0],d=i[1],c=(0,t.useState)(!1),D=(0,v.Z)(c,2),R=D[0],T=D[1],C=(0,t.useState)(!1),x=(0,v.Z)(C,2),Q=x[0],p=x[1],f=(0,t.useState)(!1),z=(0,v.Z)(f,2),Y=z[0],U=z[1],ne=(0,t.useState)([]),w=(0,v.Z)(ne,2),m=w[0],ie=w[1],J=(0,t.useState)("update"),ae=(0,v.Z)(J,2),G=ae[0],A=ae[1];return(0,t.useImperativeHandle)(n,function(){return{setInitValues:function(P){P.length===1&&d(P[0]),ie(P)}}}),(0,s.jsx)(I.Z,{width:600,afterClose:function(){p(!1),T(!1),A("update")},destroyOnClose:!0,title:m.length===1?"".concat(l==null?void 0:l.userName,"\uFF08\u544A\u8B66\u5904\u7F6E\uFF09"):"\u6279\u91CF\u5904\u7F6E".concat(m.length,"\u6761\u544A\u8B66"),visible:a.handleVisible,onCancel:function(){a.setVisible(!1),U(!1),A("update")},onOk:function(){if(R&&(0,b.QD)([{id:l.id,matchRuleId:l.matchRuleId,originalTime:l.originalTime,userName:l.userName,alarmContent:l.alarmContent,globalTraceId:l.globalTraceId,flag:Y?"update":"delete",updateUserPortrait:Y?1:0}]).then(function(N){var le=N.code;le===We.Gh&&(De.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1),a.refresh())}),m.length>1){var P=m.map(function(N){return N.flag=G,N.updateUserPortrait=G==="delete"?1:0,N});(0,b.QD)(P).then(function(){a.refresh(),De.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)})}a.setVisible(!1)},children:m.length===1?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ge,{layout:"horizontal",column:2,children:[(0,s.jsx)(ge.Item,{label:"\u8BB0\u5F55\u4EA7\u751F\u65F6\u95F4",children:l==null?void 0:l.originalTime}),(0,s.jsx)(ge.Item,{label:"\u89C4\u5219ID",children:l==null?void 0:l.matchRuleId})]}),(0,s.jsx)(Pe.Z,{message:l==null?void 0:l.alarmContent,className:"text-c",type:"warning"}),(0,s.jsxs)("div",{className:"flex-x-sb mt-20",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{children:(0,s.jsx)(pe.Z,{title:function(){return(0,s.jsxs)(g.Z,{title:"\u3010\u4E0D\u66F4\u65B0\u3011\u4EC5\u4EC5\u5FFD\u7565\u6B64\u6761\u544A\u8B66\u4FE1\u606F",children:["\u662F\u5426\u66F4\u65B0\u753B\u50CF\uFF1F",(0,s.jsx)(Ye.Z,{})]})},visible:Q,onConfirm:function(){p(!1),U(!0)},onCancel:function(){return p(!1)},okText:"\u66F4\u65B0",cancelText:"\u4E0D\u66F4\u65B0",children:(0,s.jsx)(ve.Z,{checkedChildren:"\u5FFD\u7565\u544A\u8B66",unCheckedChildren:"\u4E0D\u5904\u7F6E",onChange:function(P){T(P),p(P)}})})})]})]}):(0,s.jsx)("div",{className:"text-c",children:(0,s.jsx)(xe.ZP.Group,{defaultValue:"update",value:G,options:[{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\uFF08\u4EC5\u4EC5\u5FFD\u7565\u6B64\u6761\u544A\u8B66\u4FE1\u606F\uFF09",value:"update"},{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\u5E76\u66F4\u65B0\u753B\u50CF",value:"delete"}],onChange:function(P){var N=P.target.value;A(N)}})})})}var Xe=(0,t.forwardRef)(Je),Ve=e(25377),ke=e(93488),qe=function(n){var r=(0,t.useState)([]),i=(0,v.Z)(r,2),l=i[0],d=i[1],c=(0,t.useState)(0),D=(0,v.Z)(c,2),R=D[0],T=D[1],C=(0,t.useState)(!1),x=(0,v.Z)(C,2),Q=x[0],p=x[1],f=(0,t.useState)(!1),z=(0,v.Z)(f,2),Y=z[0],U=z[1],ne=(0,t.useState)([]),w=(0,v.Z)(ne,2),m=w[0],ie=w[1],J=(0,Ve.md)(),ae=(0,t.useState)({pageNo:1,pageSize:10}),G=(0,v.Z)(ae,2),A=G[0],K=G[1],P=(0,t.useRef)(),N=(0,t.useState)({}),le=(0,v.Z)(N,2),$e=le[0],tt=le[1],He=function(X){ie(X)},nt={selectedRowKeys:m,onChange:He},at=m.length>0,Ie=(0,t.useCallback)(function(F){He([]),(0,b.cD)(F).then(function(X){var M=X.data;if(p(!0),M){var k=JSON.parse(M);if(T(k.total),k){var q=JSON.parse(k.rows);d(q.filter(function(Qe){return Qe.isDelete===0}))}else d([])}p(!1)})},[]),lt=[{title:"\u8BB0\u5F55\u4EA7\u751F\u7684\u65F6\u95F4",dataIndex:"originalTime\uFF1A",key:"originalTime\uFF1A",width:"250px",align:"center",render:function(X,M){return M.originalTime||"-"}},{title:"\u89C4\u5219ID",dataIndex:"matchRuleId\uFF1A",key:"matchRuleId\uFF1A",width:"250px",align:"center",render:function(X,M){return M.matchRuleId||"-"}},{title:"\u544A\u8B66\u5185\u5BB9",dataIndex:"alarmContent",key:"alarmContent",align:"center"},{title:"\u5904\u7F6E",width:"150px",align:"center",render:function(X,M){return[(0,s.jsx)(Ve.Nv,{accessible:J.canUpdate,children:(0,s.jsx)("a",{onClick:function(){var q;U(!0),(q=P.current)===null||q===void 0||q.setInitValues([M])},children:"\u5904\u7F6E"})},"handle")]}}];return(0,t.useEffect)(function(){var F=n.location.query;tt(F),Ie((0,W.Z)((0,W.Z)((0,W.Z)({},F),A),{isDelete:0}))},[Ie,A,n.location.query]),(0,s.jsxs)("div",{className:Z().alarmDetail,children:[(0,s.jsx)(_.Z,{spinning:Q,children:(0,s.jsx)(O.Z,{rowSelection:nt,columns:lt,dataSource:l,rowKey:"id",title:function(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"ib",children:$e.userName}),(0,s.jsxs)("h3",{className:"ib ml-10",children:["\u89E6\u53D1\u4E86 ",(0,s.jsx)("span",{className:"danger",children:R})," \u6761\u544A\u8B66"]})]}),(0,s.jsxs)("div",{className:"flex-x-sb",children:[(0,s.jsx)(Ve.Nv,{accessible:J.canUpdate,children:(0,s.jsx)(H.Z,{type:"primary",disabled:!at,size:"middle",onClick:function(){var M,k=l.filter(function(q){return m.includes(q.id)});U(!0),(M=P.current)===null||M===void 0||M.setInitValues(k)},children:"\u6279\u91CF\u5904\u7F6E"})}),(0,s.jsxs)(H.Z,{type:"primary",onClick:function(){n.history.goBack()},children:["\u8FD4 \u56DE",(0,s.jsx)(ke.Z,{})]})]})]})},size:"middle",pagination:{showSizeChanger:!1,pageSize:A.pageSize,current:A.pageNo,total:R,onChange:function(){var F=(0,B.Z)(se().mark(function M(k,q){return se().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,K(function(){return{pageSize:q,pageNo:k}});case 2:Ie((0,W.Z)({pageNo:k,pageSize:q},$e));case 3:case"end":return Re.stop()}},M)}));function X(M,k){return F.apply(this,arguments)}return X}()}})}),(0,s.jsx)(Xe,{refresh:function(){Ie((0,W.Z)((0,W.Z)({},A),$e))},setVisible:U,handleVisible:Y,ref:P})]})},et=qe},48606:function(me,ee,e){"use strict";e.d(ee,{Hp:function(){return re},CI:function(){return W},cD:function(){return ce},QD:function(){return t}});var S=e(11849),_=e(3182),E=e(94043),O=e.n(E),B=e(25377);function re(Z){return H.apply(this,arguments)}function H(){return H=(0,_.Z)(O().mark(function Z(b){return O().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,B.WY)("/api/skyflying/getAlarmData",(0,S.Z)({method:"GET"},b||{})));case 1:case"end":return I.stop()}},Z)})),H.apply(this,arguments)}function W(Z){return v.apply(this,arguments)}function v(){return v=(0,_.Z)(O().mark(function Z(b){return O().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,B.WY)("/api/skyflying/getUserAlarmData",(0,S.Z)({method:"GET"},b||{})));case 1:case"end":return I.stop()}},Z)})),v.apply(this,arguments)}function ce(Z,b){return se.apply(this,arguments)}function se(){return se=(0,_.Z)(O().mark(function Z(b,oe){return O().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,B.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,S.Z)({method:"GET",params:b||{}},oe||{})));case 1:case"end":return j.stop()}},Z)})),se.apply(this,arguments)}function t(Z,b){return ue.apply(this,arguments)}function ue(){return ue=(0,_.Z)(O().mark(function Z(b,oe){return O().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,B.WY)("/api/skyflying/updateAnomalyDetectionInfo",(0,S.Z)({method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8;"},data:JSON.stringify(b||{})},oe||{})));case 1:case"end":return j.stop()}},Z)})),ue.apply(this,arguments)}},75443:function(me,ee,e){"use strict";var S=e(22122),_=e(28481),E=e(67294),O=e(94184),B=e.n(O),re=e(21770),H=e(68855),W=e(15105),v=e(61580),ce=e(71577),se=e(73839),t=e(42051),ue=e(85636),Z=e(65632),b=e(81643),oe=e(96159),I=e(33603),j=e(86743),xe=void 0,ze=function(o,ve){var fe={};for(var g in o)Object.prototype.hasOwnProperty.call(o,g)&&ve.indexOf(g)<0&&(fe[g]=o[g]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var te=0,g=Object.getOwnPropertySymbols(o);te<g.length;te++)ve.indexOf(g[te])<0&&Object.prototype.propertyIsEnumerable.call(o,g[te])&&(fe[g[te]]=o[g[te]]);return fe},pe=E.forwardRef(function(o,ve){var fe=E.useContext(Z.E_),g=fe.getPrefixCls,te=(0,re.Z)(!1,{value:o.visible,defaultValue:o.defaultVisible}),Pe=(0,_.Z)(te,2),Ae=Pe[0],we=Pe[1],V=function(u,h){var L;we(u,!0),(L=o.onVisibleChange)===null||L===void 0||L.call(o,u,h)},Me=function(u){V(!1,u)},Se=function(u){var h;return(h=o.onConfirm)===null||h===void 0?void 0:h.call(xe,u)},Te=function(u){var h;V(!1,u),(h=o.onCancel)===null||h===void 0||h.call(xe,u)},de=function(u){u.keyCode===W.Z.ESC&&Ae&&V(!1,u)},Ne=function(u){var h=o.disabled;h||V(u)},he=function(u,h){var L=o.okButtonProps,Ke=o.cancelButtonProps,Ze=o.title,Fe=o.cancelText,be=o.okText,ge=o.okType,Ge=o.icon,De=o.showCancel,We=De===void 0?!0:De;return E.createElement("div",{className:"".concat(u,"-inner-content")},E.createElement("div",{className:"".concat(u,"-message")},Ge,E.createElement("div",{className:"".concat(u,"-message-title")},(0,b.Z)(Ze))),E.createElement("div",{className:"".concat(u,"-buttons")},We&&E.createElement(ce.Z,(0,S.Z)({onClick:Te,size:"small"},Ke),Fe||h.cancelText),E.createElement(j.Z,{buttonProps:(0,S.Z)((0,S.Z)({size:"small"},(0,se.n)(ge)),L),actionFn:Se,close:Me,prefixCls:g("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},be||h.okText)))},Oe=o.prefixCls,_e=o.placement,y=o.children,ye=o.overlayClassName,Be=ze(o,["prefixCls","placement","children","overlayClassName"]),Ce=g("popover",Oe),Ee=g("popconfirm",Oe),je=B()(Ee,ye),Le=E.createElement(t.Z,{componentName:"Popconfirm",defaultLocale:ue.Z.Popconfirm},function($){return he(Ce,$)}),Ue=g();return E.createElement(v.Z,(0,S.Z)({},Be,{prefixCls:Ce,placement:_e,onVisibleChange:Ne,visible:Ae,overlay:Le,overlayClassName:je,ref:ve,transitionName:(0,I.mL)(Ue,"zoom-big",o.transitionName)}),(0,oe.Tm)(y,{onKeyDown:function(u){var h,L;E.isValidElement(y)&&((L=y==null?void 0:(h=y.props).onKeyDown)===null||L===void 0||L.call(h,u)),de(u)}}))});pe.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:E.createElement(H.Z,null),disabled:!1},ee.Z=pe},62350:function(me,ee,e){"use strict";var S=e(38663),_=e.n(S),E=e(20136),O=e(57663),B=e(44887),re=e.n(B)}}]);
