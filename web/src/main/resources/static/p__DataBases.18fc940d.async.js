(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[383],{12265:function(w){w.exports={databases:"databases___35H4X","detail-wrap":"detail-wrap___1IA0t","tops-wrap":"tops-wrap___2AQns",tops:"tops___2lHCZ"}},59498:function(w,U,e){"use strict";e.r(U),e.d(U,{default:function(){return fe}});var m=e(3182),l=e(11849),$=e(57663),o=e(71577),E=e(34792),N=e(48086),b=e(86582),_=e(2824),T=e(94043),Z=e.n(T),c=e(67294),A=e(60355),k=e(84674),J=e(12265),F=e.n(J),R=e(24480),M=e(66572),q=e(13062),P=e(71230),ie=e(89032),x=e(15746),Y=e(69610),j=e(54941),n=e(81306),r=e(19809),i=e(69886),s=e(85893),t=i.G2.getEngine("canvas"),oe=function(W){(0,n.Z)(f,W);var h=(0,r.Z)(f);function f(C){var u;return(0,Y.Z)(this,f),u=h.call(this,C),u.state={chart:null},u}return(0,j.Z)(f,[{key:"componentDidMount",value:function(){var u=this,S=new i.by("dataActionPie".concat(this.props.id),{autoFit:!0,height:250,appendPadding:10,data:this.props.types,angleField:"value",colorField:"type",radius:.75,tooltip:{formatter:function(D){var B=D.value,O=D.type,K=u.props.types.map(function(I){return I.value}).reduce(function(I,Q){return I+Q},0);return{name:O,value:(B/K*100).toFixed(2)+"%"}}},legend:{position:"bottom"},label:{type:"spider",labelHeight:28,formatter:function(D,B){var O=new t.Group({});return O.addShape({type:"circle",attrs:{x:0,y:0,width:40,height:50,r:5,fill:B.color}}),O.addShape({type:"text",attrs:{x:10,y:6,text:"".concat(D.type),fill:B.color}}),O.addShape({type:"text",attrs:{x:0,y:20,text:"".concat(R.Z.bigNumberTransform(D.value),"\u6B21 "),fill:B.color,fontWeight:700}}),O}},interactions:[{type:"element-selected"},{type:"element-active"}]});S.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),S.render()}},{key:"render",value:function(){return(0,s.jsx)("div",{id:"dataActionPie"+this.props.id})}}],[{key:"getDerivedStateFromProps",value:function(u,S){var y=S.chart;return u.refreshUid==="open"&&y&&y.changeData(u.types),u}}]),f}(c.Component),le=e(39004),de=function(W){(0,n.Z)(f,W);var h=(0,r.Z)(f);function f(C){var u;return(0,Y.Z)(this,f),u=h.call(this,C),u.state={chart:null},u}return(0,j.Z)(f,[{key:"componentDidMount",value:function(){var u=new le.kL({container:"RecentlyLine".concat(this.props.id),autoFit:!0,height:200});u.data(this.props.ranges),u.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),u.tooltip({showNil:!1,showCrosshairs:!1,title:function(y,D){return"".concat(y,"\uFF1A").concat(D.value," \u6B21")},itemTpl:`<div class="g2-tooltip">
        <div class="g2-tooltip-title">Language</div>
        <ul class="g2-tooltip-list">
          <li class="g2-tooltip-list-item">
            <span class="g2-tooltip-marker"></span>
            <span class="g2-tooltip-name">a</span>:<span class="g2-tooltip-value">70</span>
          </li>
          <li class="g2-tooltip-list-item">
            <span class="g2-tooltip-marker"></span>
            <span class="g2-tooltip-name">b</span>:<span class="g2-tooltip-value">50</span>
          </li>
        </ul>
      </div>`}),this.setState({chart:u}),u.area().position("year*value"),u.line().position("year*value"),u.render()}},{key:"render",value:function(){return(0,s.jsx)("div",{id:"RecentlyLine"+this.props.id})}}],[{key:"getDerivedStateFromProps",value:function(u,S){var y=S.chart;return u.refreshUid==="open"&&y&&y.changeData(u.ranges),u}}]),f}(c.Component),ce=function(h){return(0,s.jsx)(P.Z,{className:h.style["detail-wrap"],gutter:20,children:(0,s.jsx)(x.Z,{span:24,children:(0,s.jsxs)(P.Z,{children:[(0,s.jsxs)(x.Z,{span:12,className:"text-c",children:[(0,s.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,s.jsx)(oe,{types:h.types,id:h.id,refreshUid:h.refreshUid})]}),(0,s.jsx)(x.Z,{span:12,className:"text-c",children:(0,s.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,s.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,s.jsx)(de,{ranges:h.ranges,id:h.id,refreshUid:h.refreshUid})]})})]})})})},pe=ce,ee=e(6650),me=function(){var h=(0,c.useState)([]),f=(0,_.Z)(h,2),C=f[0],u=f[1],S=(0,c.useState)(""),y=(0,_.Z)(S,2),D=y[0],B=y[1],O=(0,c.useState)(0),K=(0,_.Z)(O,2),I=K[0],Q=K[1],ve=(0,c.useState)(),te=(0,_.Z)(ve,2),he=te[0],ge=te[1],ye=(0,c.useState)({pageSize:10,pageNo:1}),ae=(0,_.Z)(ye,2),G=ae[0],_e=ae[1],Ce=(0,c.useState)({types:[],ranges:[]}),ne=(0,_.Z)(Ce,2),De=ne[0],re=ne[1],Ee=[{title:"\u6570\u636E\u5E93",dataIndex:"dbName",key:"dbName",align:"center",render:function(v,a){var p="-";if(a.usualVisitedUser.includes("$")){var d=a.usualVisitedUser.split("$");p=d[0]}return(0,s.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:p})}},{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(v,a){var p="-";if(a.tableNameDesc)p=a.tableNameDesc;else{var d=a.tableName.split("#");p=d[d.length-1]}return(0,s.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:p})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",search:!1,render:function(v,a){return(0,s.jsx)("div",{children:a.visitedCount.toLocaleString()})}},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458\uFF08\u670D\u52A1\u540D#\u4EBA\u540D\uFF09",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1,render:function(v,a){var p="-";if(a.usualVisitedUser.includes("$")){var d=a.usualVisitedUser.split("$");d.shift(),p=d.join('<span style="font-weight: bold">#</span>')}return(0,s.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:p}})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"dateTime",hideInSetting:!0,search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(v,a){return[(0,s.jsx)(o.Z,{type:"link",size:"small",onClick:function(){if(D===a.id){B(""),re({types:[],ranges:[]});return}if(a.visitedCount!==0){var d=R.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),z=R.Z.getRangeTime(7,"YYYY-mm-dd");(0,ee.Xd)({msTableName:a.tableName,startTime:d[0],endTime:d[1],tableName:a.tableName}).then(function(be){var X=be.data;if(X&&X.length>0){var Se=X.map(function(L,H){return{year:z[H],value:L}}),se=(0,b.Z)(k.q);(0,ee.et)({tableName:a.tableName}).then(function(L){L.data&&L.data.length>0&&se.forEach(function(H){L.data.forEach(function(Ue){var ue=JSON.parse(Ue),Te=ue.dbType,Ze=ue.dbTypeTimes;H.type===Te&&(H.value=parseInt(Ze))})})}),re({ranges:Se,types:se}),setTimeout(function(){B(a.id)},400)}})}else N.ZP.info("".concat(a.tableName,"\u8868\u8BBF\u88AB\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],V=(0,c.useCallback)(function(g){(0,M.m)(g).then(function(v){var a=v.data;if(a){var p=JSON.parse(a);if(Q(p.total),p.rows){var d=JSON.parse(p.rows);u(d.map(function(z){return z.id=R.Z.uuid(),z}));return}}u([])})},[]);return(0,c.useEffect)(function(){V(G)},[]),(0,s.jsx)("div",{className:F().databases,children:(0,s.jsx)(A.ZP,{headerTitle:"\u6570\u636E\u8BBF\u95EE\u884C\u4E3A\u5217\u8868",columns:Ee,rowKey:"id",pagination:{showSizeChanger:!1,total:I,pageSize:G.pageSize,current:G.pageNo,onChange:function(v,a){_e({pageNo:v,pageSize:a}),V((0,l.Z)({pageNo:v,pageSize:a},he))}},options:!1,onSubmit:function(){var g=(0,m.Z)(Z().mark(function v(a){return Z().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return ge(a),d.next=3,V((0,l.Z)((0,l.Z)({},G),a));case 3:case"end":return d.stop()}},v)}));return function(v){return g.apply(this,arguments)}}(),onReset:(0,m.Z)(Z().mark(function g(){return Z().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:V((0,l.Z)({},G));case 1:case"end":return a.stop()}},g)})),expandable:{expandedRowRender:function(v,a){return(0,c.createElement)(pe,(0,l.Z)((0,l.Z)({},De),{},{id:a,key:a,style:F(),refreshUid:D===""?"close":"open"}))},expandIcon:function(){return!1},expandedRowKeys:[D]},dataSource:C})})},fe=me},84674:function(w,U,e){"use strict";e.d(U,{q:function(){return m}});var m=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],l=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},66572:function(w,U,e){"use strict";e.d(U,{m:function(){return N}});var m=e(11849),l=e(3182),$=e(94043),o=e.n($),E=e(25377);function N(_,T){return b.apply(this,arguments)}function b(){return b=(0,l.Z)(o().mark(function _(T,Z){return o().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,E.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,m.Z)({method:"GET",params:T},Z||{})));case 1:case"end":return A.stop()}},_)})),b.apply(this,arguments)}},6650:function(w,U,e){"use strict";e.d(U,{F$:function(){return N},Xd:function(){return _},mt:function(){return Z},et:function(){return J},FP:function(){return R},Bx:function(){return q},us:function(){return Y}});var m=e(11849),l=e(3182),$=e(94043),o=e.n($),E=e(25377);function N(n,r){return b.apply(this,arguments)}function b(){return b=(0,l.Z)(o().mark(function n(r,i){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.WY)("/api/skyflying/getCoarseCountsOfUsers",(0,m.Z)({method:"GET",params:r},i||{})));case 1:case"end":return t.stop()}},n)})),b.apply(this,arguments)}function _(n,r){return T.apply(this,arguments)}function T(){return T=(0,l.Z)(o().mark(function n(r,i){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,m.Z)({method:"GET",params:r},i||{})));case 1:case"end":return t.stop()}},n)})),T.apply(this,arguments)}function Z(n,r){return c.apply(this,arguments)}function c(){return c=(0,l.Z)(o().mark(function n(r,i){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.WY)("/api/skyflying/getVisitRate",(0,m.Z)({method:"GET",params:{username:r}},i||{})));case 1:case"end":return t.stop()}},n)})),c.apply(this,arguments)}function A(n,r){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,i){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:r},i||{})));case 1:case"end":return t.stop()}},n)})),k.apply(this,arguments)}function J(n,r){return F.apply(this,arguments)}function F(){return F=(0,l.Z)(o().mark(function n(r,i){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.WY)("/api/skyflying/getCountsOfUser",(0,m.Z)({method:"GET",params:r},i||{})));case 1:case"end":return t.stop()}},n)})),F.apply(this,arguments)}function R(n,r){return M.apply(this,arguments)}function M(){return M=(0,l.Z)(o().mark(function n(r,i){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.WY)("/api/skyflying/getUserOperationTypeCount",(0,m.Z)({method:"GET",params:r},i||{})));case 1:case"end":return t.stop()}},n)})),M.apply(this,arguments)}function q(n,r){return P.apply(this,arguments)}function P(){return P=(0,l.Z)(o().mark(function n(r,i){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,m.Z)({method:"GET",params:r},i||{})));case 1:case"end":return t.stop()}},n)})),P.apply(this,arguments)}function ie(n,r){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,i){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/skyflying/getCoarseCountsOfOneUser",_objectSpread({method:"GET",params:r||{}},i||{})));case 1:case"end":return t.stop()}},n)})),x.apply(this,arguments)}function Y(n,r){return j.apply(this,arguments)}function j(){return j=(0,l.Z)(o().mark(function n(r,i){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.WY)("/api/skyflying/getCountsOfEveryonRecentSevenDays",(0,m.Z)({method:"GET",params:r||{}},i||{})));case 1:case"end":return t.stop()}},n)})),j.apply(this,arguments)}}}]);
