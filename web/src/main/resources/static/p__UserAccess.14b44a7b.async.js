(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[462],{33599:function(x){x.exports={userAccess:"userAccess___1UdBc","detail-wrap":"detail-wrap___2mcEh","tabs-wrap":"tabs-wrap___3PPX8","content-wrap":"content-wrap___2U6yp"}},9578:function(x,E,e){"use strict";e.r(E),e.d(E,{default:function(){return he}});var f=e(3182),h=e(57663),U=e(71577),u=e(34792),p=e(48086),t=e(86582),i=e(2824),l=e(94043),s=e.n(l),n=e(67294),_=e(13062),b=e(71230),C=e(89032),D=e(15746),H=e(90387),Q=e(9536),w=e(69886),r=e(85893),M=function(o){return(0,n.useEffect)(function(){var m=new w.by("ActionPie".concat(o.id),{autoFit:!0,height:250,appendPadding:10,data:o.types,angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});m.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),m.render()},[]),(0,r.jsx)("div",{id:"ActionPie"+o.id})},d=M,c=function(o){return(0,n.useEffect)(function(){var m=new w.by("VisibleTimePie"+o.id,{autoFit:!0,height:250,appendPadding:10,data:o.intervals,angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});m.update({theme:{styleSheet:{brandColor:"#FF6B3B",paletteQualitative10:["#FF6B3B","#626681","#FFC100","#9FB40F","#76523B","#DAD5B5","#0E8E89","#E19348","#F383A2","#247FEA"],paletteQualitative20:["#FF6B3B","#626681","#FFC100","#9FB40F","#76523B","#DAD5B5","#0E8E89","#E19348","#F383A2","#247FEA","#2BCB95","#B1ABF4","#1D42C2","#1D9ED1","#D64BC0","#255634","#8C8C47","#8CDAE5","#8E283B","#791DC9"]}}}),m.render()},[]),(0,r.jsx)("div",{id:"VisibleTimePie"+o.id})},g=c,y=e(39004),a=function(o){return(0,n.useEffect)(function(){var m=new y.kL({container:"RecentlyLine".concat(o.id),autoFit:!0,height:200});m.data(o.ranges),m.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),m.tooltip({showCrosshairs:!0,shared:!0}),m.axis("value",{label:{}}),m.area().position("year*value"),m.line().position("year*value"),m.render()},[]),(0,r.jsx)("div",{id:"RecentlyLine"+o.id})},oe=a,ae=[{label:"\u7ECF\u5E38\u8BBF\u95EE\u7684\u6570\u636E",value:"higher"},{label:"\u4E0D\u5E38\u8BBF\u95EE\u7684\u6570\u636E",value:"lower"}],de=function(o){var m,Y,S,z=(0,n.useState)(ae[0].value),W=(0,i.Z)(z,2),K=W[0],q=W[1];return(0,r.jsxs)(b.Z,{className:o.style["detail-wrap"],children:[(0,r.jsxs)(D.Z,{span:8,className:o.style["tabs-wrap"],children:[(0,r.jsx)(Q.Z,{block:!0,options:ae,value:K,onChange:q}),(0,r.jsx)("div",{className:o.style["content-wrap"],children:(m=o.details)===null||m===void 0||(Y=m.higherOrLower)===null||Y===void 0||(S=Y[K])===null||S===void 0?void 0:S.map(function(I){return(0,r.jsxs)("div",{className:"flex-x-sb",children:[(0,r.jsx)("span",{children:I.visitedData}),(0,r.jsxs)("span",{children:[I.visitedCount," \u6B21"]})]},I.visitedData)})})]}),(0,r.jsxs)(D.Z,{span:16,className:"pl-10 pr-20",children:[(0,r.jsxs)(b.Z,{children:[(0,r.jsxs)(D.Z,{span:12,className:"text-c",children:[(0,r.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,r.jsx)(d,{types:o.details.types,id:o.id})]}),(0,r.jsxs)(D.Z,{span:12,className:"text-c",children:[(0,r.jsx)("h3",{children:"\u8BBF\u95EE\u65F6\u6BB5\u5206\u5E03"}),(0,r.jsx)(g,{intervals:o.details.intervals,id:o.id})]})]}),(0,r.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,r.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,r.jsx)(oe,{ranges:o.details.ranges,id:o.id})]})]})]})},ce=de,me=e(33599),ne=e.n(me),ve=e(73016),L=e(6650),pe=e(33414),X=e(24480),se=e(84674),fe=function(){var o=(0,n.useState)(),m=(0,i.Z)(o,2),Y=m[0],S=m[1],z=(0,n.useState)(""),W=(0,i.Z)(z,2),K=W[0],q=W[1],I=(0,n.useState)({types:[],intervals:[],ranges:[],higherOrLower:{higher:[],lower:[]}}),re=(0,i.Z)(I,2),ge=re[0],_e=re[1],ye=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"applicationUserName",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,width:100,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,render:function(T,v){var B=JSON.parse(v.usualVisitedData),A=B.tableName,j=B.tableNameDesc,N=A.split(","),$="-";return j?$=j:N.length>1&&($=N[N.length-1]),(0,r.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:$})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(T,v){return[(0,r.jsx)(U.Z,{type:"link",size:"small",onClick:function(){if(v.visitedCount!==0){var A=JSON.parse(v.usualVisitedData),j=A.tableName,N=X.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),$=X.Z.getRangeTime(7,"YYYY-mm-dd HH:MM:SS");(0,L.Xd)({applicationUserName:v.userName,startTime:N[0],endTime:N[1],tableName:j}).then(function(De){var ee=De.data;if(ee&&ee.length>0){var Ee=ee.map(function(F,Z){return{year:$[Z],value:F}}),ie=(0,t.Z)(se.q);(0,L.FP)({userName:v.userName}).then(function(F){F.data&&F.data.length>0&&ie.forEach(function(Z){F.data.forEach(function(k){var R=JSON.parse(k),O=R.dbType,J=R.dbTypeTimes;Z.type===O&&(Z.value=parseInt(J))})})});var G=(0,t.Z)(se.Q);(0,pe.w)({userName:v.userName}).then(function(F){var Z=JSON.parse(F.data),k=JSON.parse(Z.rows);if(k&&k.length>0){var R=k[0];G[0].value=R.forenoonCount|0,G[1].value=R.afternoonCount|0,G[2].value=R.nightCount|0}(0,L.Bx)({applicationUserName:v.userName}).then(function(O){if(O.data){O.data.forEach(function(te){var le=te.visitedData.split("#");return te.visitedData=le[le.length-1],te});var J=Math.ceil(O.data.length/2),Ce=O.data.splice(0,J),Ae=O.data.splice(-J);_e(function(){return{types:ie,intervals:G,ranges:Ee,higherOrLower:{higher:Ce,lower:Ae}}}),q(v.id)}})})}})}else p.ZP.info("".concat(v.userName,"\u7528\u6237\u8BBF\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],ue=function(){(0,L.F$)().then(function(T){var v=T.data,B=JSON.parse(v);B&&B.length>0?S(B.map(function(A){return A.id=X.Z.uuid(),A})):S([])})};return(0,n.useEffect)(function(){ue()},[]),(0,r.jsx)("div",{className:ne().userAccess,children:(0,r.jsx)(ve.Z,{columns:ye,rowKey:"id",onSubmit:function(){var P=(0,f.Z)(s().mark(function T(v){return s().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:Object.keys(v).length>0?(0,L.wA)(v).then(function(j){console.log(j)}):ue();case 1:case"end":return A.stop()}},T)}));return function(T){return P.apply(this,arguments)}}(),expandable:{expandedRowRender:function(T,v){return(0,r.jsx)(ce,{details:ge,id:v,style:ne()},v)},expandIcon:function(){return!1},expandedRowKeys:[K]},dataSource:Y})})},he=fe},84674:function(x,E,e){"use strict";e.d(E,{q:function(){return f},Q:function(){return h}});var f=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],h=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},33414:function(x,E,e){"use strict";e.d(E,{N:function(){return t},w:function(){return l}});var f=e(11849),h=e(3182),U=e(94043),u=e.n(U),p=e(32773);function t(n){return i.apply(this,arguments)}function i(){return i=(0,h.Z)(u().mark(function n(_){return u().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",(0,p.WY)("/api/skyflying/getAllUserNamePortraitByVisitedTime",(0,f.Z)({method:"GET"},_||{})));case 1:case"end":return C.stop()}},n)})),i.apply(this,arguments)}function l(n,_){return s.apply(this,arguments)}function s(){return s=(0,h.Z)(u().mark(function n(_,b){return u().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,p.WY)("/api/skyflying/getAllUserPortraitByVisitedTime",(0,f.Z)({method:"GET",params:_||{}},b||{})));case 1:case"end":return D.stop()}},n)})),s.apply(this,arguments)}},6650:function(x,E,e){"use strict";e.d(E,{F$:function(){return t},Xd:function(){return l},et:function(){return b},FP:function(){return D},Bx:function(){return Q},wA:function(){return r}});var f=e(11849),h=e(3182),U=e(94043),u=e.n(U),p=e(32773);function t(d){return i.apply(this,arguments)}function i(){return i=(0,h.Z)(u().mark(function d(c){return u().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,p.WY)("/api/skyflying/getCoarseCountsOfUser",(0,f.Z)({method:"GET"},c||{})));case 1:case"end":return y.stop()}},d)})),i.apply(this,arguments)}function l(d,c){return s.apply(this,arguments)}function s(){return s=(0,h.Z)(u().mark(function d(c,g){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,f.Z)({method:"GET",params:c},g||{})));case 1:case"end":return a.stop()}},d)})),s.apply(this,arguments)}function n(d,c){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime.mark(function d(c,g){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:c},g||{})));case 1:case"end":return a.stop()}},d)})),_.apply(this,arguments)}function b(d,c){return C.apply(this,arguments)}function C(){return C=(0,h.Z)(u().mark(function d(c,g){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.WY)("/api/skyflying/getCountsOfUser",(0,f.Z)({method:"GET",params:c},g||{})));case 1:case"end":return a.stop()}},d)})),C.apply(this,arguments)}function D(d,c){return H.apply(this,arguments)}function H(){return H=(0,h.Z)(u().mark(function d(c,g){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.WY)("/api/skyflying/getUserOperationTypeCount",(0,f.Z)({method:"GET",params:c},g||{})));case 1:case"end":return a.stop()}},d)})),H.apply(this,arguments)}function Q(d,c){return w.apply(this,arguments)}function w(){return w=(0,h.Z)(u().mark(function d(c,g){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,f.Z)({method:"GET",params:c},g||{})));case 1:case"end":return a.stop()}},d)})),w.apply(this,arguments)}function r(d,c){return M.apply(this,arguments)}function M(){return M=(0,h.Z)(u().mark(function d(c,g){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,f.Z)({method:"GET",params:c||{}},g||{})));case 1:case"end":return a.stop()}},d)})),M.apply(this,arguments)}},24480:function(x,E,e){"use strict";e.d(E,{Z:function(){return U}});var f=e(69610),h=e(54941),U=function(){function u(){(0,f.Z)(this,u)}return(0,h.Z)(u,null,[{key:"timeStampToTime",value:function(t){var i=new Date(parseInt(t));return i.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",l,s={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()},n=i;for(var _ in s)l=new RegExp("("+_+")").exec(i),l&&(n=n.replace(l[1],l[1].length==1?s[_]:s[_].padStart(l[1].length,"0")));return n}},{key:"uuid",value:function(){for(var t=[],i="0123456789abcdef",l=0;l<36;l++)t[l]=i.substr(Math.floor(Math.random()*16),1);return t[14]="4",t[19]=i.substr(t[19]&3|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(new RegExp(/(-)/g),"")}},{key:"getRangeTime",value:function(t,i){for(var l=[],s=t-1;s>=0;s--){var n=void 0;s===t-1?n=new Date(Date.now()-s*24*60*60*1e3).setHours(0,0,1,0):n=new Date(Date.now()-s*24*60*60*1e3).setHours(23,59,59,999),i?l.push(u.getLocalTime(new Date(n),i)):l.push(n)}return l}},{key:"getRangeStartAndEndTime",value:function(t,i){for(var l=[],s=t-1;s>=0;s--){var n=void 0;s===t-1?n=new Date(Date.now()-s*24*60*60*1e3).setHours(0,0,0,0):s===0?n=new Date(Date.now()-(s-1)*24*60*60*1e3).setHours(0,0,0,0):n=new Date(Date.now()-s*24*60*60*1e3).setHours(23,59,59,999),i?l.push(u.getLocalTime(new Date(n),i)):l.push(n)}return[l[0],l[t-1]]}}]),u}();U.arrayDeDuplication=function(u){return Array.from(new Set(u))}}}]);
