(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(K){K.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2",nowrap:"nowrap___spq6f"}},81135:function(K,P,e){"use strict";e.r(P),e.d(P,{default:function(){return we}});var E=e(57663),g=e(71577),G=e(58024),r=e(39144),D=e(13062),N=e(71230),x=e(95300),A=e(7277),b=e(89032),C=e(15746),R=e(71748),m=e(33860),h=e(3182),y=e(2824),U=e(94043),l=e.n(U),O=e(67294),te=e(26516),I=e.n(te),se=e(13254),Y=e(14277),n=e(11849),s=e(46066),_=e(68628),t=e(85893),a=function(f){var o={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(_.Z,{className:"fs-16 ib danger mr-10"}),(0,t.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,t.jsx)("div",{className:"of-hidden",children:f.warningList.length>0?(0,t.jsx)(s.Z,(0,n.Z)((0,n.Z)({},o),{},{children:f.warningList.map(function(i){return(0,t.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:i.alarmContent},i.id)})})):(0,t.jsx)(Y.Z,{description:"\u6682\u65E0\u544A\u8B66\u4FE1\u606F"})})]})},me=a,pe=e(69610),fe=e(54941),ve=e(81306),ge=e(19809),V=e(69886),z=e(41694),he=V.G2.InteractionAction,ye=V.G2.registerInteraction,_e=V.G2.registerAction,Ce=function(T){(0,ve.Z)(o,T);var f=(0,ge.Z)(o);function o(){return(0,pe.Z)(this,o),f.apply(this,arguments)}return(0,fe.Z)(o,[{key:"active",value:function(){var u=this,Z=this.getView(),p=this.context.event;if(p.data){var c=p.data.items,w=Z.geometries.filter(function(k){return k.type==="point"});(0,z.S6)(w,function(k){(0,z.S6)(k.elements,function(M){var L=(0,z.cx)(c,function(re){return re.data===M.data})!==-1,F=M.shape.getChildren(),$=(0,y.Z)(F,2),J=$[0],X=$[1];L?(J.animate({r:10,opacity:.2},{duration:1800,easing:"easeLinear",repeat:!0}),X.animate({r:6,opacity:.4},{duration:800,easing:"easeLinear",repeat:!0})):u.resetElementState(M)})})}}},{key:"reset",value:function(){var u=this,Z=this.getView(),p=Z.geometries.filter(function(c){return c.type==="point"});(0,z.S6)(p,function(c){(0,z.S6)(c.elements,function(w){u.resetElementState(w)})})}},{key:"resetElementState",value:function(u){var Z=u.shape.getChildren(),p=(0,y.Z)(Z,2),c=p[0],w=p[1];c.stopAnimate(),w.stopAnimate();var k=c.get("attrs"),M=k.r,L=k.opacity;c.attr({r:M,opacity:L});var F=w.get("attrs"),$=F.r,J=F.opacity;w.attr({r:$,opacity:J})}},{key:"getView",value:function(){return this.context.view}}]),o}(he),Ee=function(f){return(0,O.useEffect)(function(){V.G2.registerShape("point","custom-point",{draw:function(u,Z){var p={x:u.x,y:u.y},c=Z.addGroup();return c.addShape("circle",{name:"outer-point",attrs:{x:p.x,y:p.y,fill:u.color||"red",opacity:.5,r:6}}),c.addShape("circle",{name:"inner-point",attrs:{x:p.x,y:p.y,fill:u.color||"red",opacity:1,r:2}}),c}}),_e("custom-marker-action",Ce),ye("custom-marker-interaction",{start:[{trigger:"tooltip:show",action:"custom-marker-action:active"}],end:[{trigger:"tooltip:hide",action:"custom-marker-action:reset"}]});var o=new V.x1("RangeTimeData",{height:138,autoFit:!0,data:f.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"custom-point",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1,formatter:function(u){return{name:"\u5F53\u65E5\u6536\u96C6\u6570\u91CF",value:u.value+"\u6761"}}},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"custom-marker-interaction"}]});o.render()},[f.data]),(0,t.jsx)("div",{id:"RangeTimeData"})},De=Ee,ie=e(83539),H=e(24480),Se=e(6650),ue=e(25377);function Oe(T,f){return ae.apply(this,arguments)}function ae(){return ae=(0,h.Z)(l().mark(function T(f,o){return l().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,ue.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,n.Z)({params:f,method:"GET"},o||{})));case 1:case"end":return u.stop()}},T)})),ae.apply(this,arguments)}function Ze(T){return ne.apply(this,arguments)}function ne(){return ne=(0,h.Z)(l().mark(function T(f){return l().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ue.WY)("/api/skyflying/getOverviewOfSystem",(0,n.Z)({method:"GET"},f||{})));case 1:case"end":return i.stop()}},T)})),ne.apply(this,arguments)}var xe=e(66572),Ue=e(2335),Te=e(52778),je=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,render:function(f,o){var i=JSON.parse(o.usualVisitedData),u=i.tableName,Z=i.tableNameDesc,p=u.split("#"),c="-";return Z?c=Z:p.length>1&&(c=p[p.length-1]),(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:c})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],Ae=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(f,o){var i="-";if(o.tableNameDesc)i=o.tableNameDesc;else{var u=o.tableName.split("#");i=u[u.length-1]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:i})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center"},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,align:"center"}],be=function(f){var o=(0,O.useState)(),i=(0,y.Z)(o,2),u=i[0],Z=i[1],p=(0,O.useState)([]),c=(0,y.Z)(p,2),w=c[0],k=c[1],M=(0,O.useState)([]),L=(0,y.Z)(M,2),F=L[0],$=L[1],J=(0,O.useState)([]),X=(0,y.Z)(J,2),re=X[0],le=X[1],We=(0,O.useState)(0),oe=(0,y.Z)(We,2),Be=oe[0],Ne=oe[1],Re=(0,O.useState)({pageSize:10,pageNo:1}),Ie=(0,y.Z)(Re,1),Q=Ie[0],Pe=(0,O.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),ce=(0,y.Z)(Pe,2),q=ce[0],ke=ce[1];function Me(){(0,Ue.cD)({pageSize:100,pageNo:1}).then(function(W){var d=W.data;if(d){var S=JSON.parse(d);if(S){var v=JSON.parse(S.rows);le(v.map(function(j,B){return j.matchRuleId=B,j}))}else le([])}})}var $e=function(){(0,Se.F$)().then(function(d){var S=d.data,v=JSON.parse(S);v&&v.length>0?Z(v.map(function(j){return j.id=H.Z.uuid(),j})):Z([])})},Ge=function(){var d=H.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),S=H.Z.getRangeTime(7,"mm-dd");Oe({startTime:d[0],endTime:d[1]}).then(function(v){var j=v.data;k(function(){return j.map(function(B,ee){return{year:S[ee],value:B}})})})},Le=function(){var W=(0,h.Z)(l().mark(function d(){var S,v;return l().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Ze();case 2:S=B.sent,v=S.data,ke(v);case 5:case"end":return B.stop()}},d)}));return function(){return W.apply(this,arguments)}}(),Fe=function(){var W=(0,h.Z)(l().mark(function d(){return l().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:case"end":return v.stop()}},d)}));return function(){return W.apply(this,arguments)}}(),de=function(d){(0,xe.m)(d).then(function(S){var v=S.data;if(v){var j=JSON.parse(v);if(Ne(j.total),j.rows){var B=JSON.parse(j.rows);$(B.map(function(ee){return ee.id=H.Z.uuid(),ee}));return}}$([])})};return(0,O.useEffect)(function(){$e(),Ge(),de(Q),Le().then(),Fe().then(),Me()},[Q]),(0,t.jsxs)("div",{className:I().overview,children:[(0,t.jsx)("div",{className:I().staticWrap,children:(0,t.jsxs)(N.Z,{gutter:20,children:[(0,t.jsx)(C.Z,{span:8,children:(0,t.jsx)(m.Z,{active:!0,loading:w.length===0,children:(0,t.jsx)(Te.Z,{title:"\u8FD1\u4E03\u5929\u6570\u636E\u6536\u96C6\u60C5\u51B5",chart:(0,t.jsx)("div",{style:{height:"163px"},children:(0,t.jsx)(De,{data:w})})})})}),(0,t.jsx)(C.Z,{span:8,children:(0,t.jsx)(r.Z,{className:I().bgW,title:(0,t.jsx)("div",{className:"text-c",children:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5"}),children:(0,t.jsx)(N.Z,{gutter:20,className:"text-c",style:{height:"162px"},children:(0,t.jsxs)(m.Z,{active:!0,loading:w.length===0,children:[(0,t.jsx)(C.Z,{span:12,className:"mt-15 text-c",children:(0,t.jsx)(A.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:q.visitedInformation,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(C.Z,{span:12,className:"mt-15",children:(0,t.jsx)(A.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:q.dbInstance,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(C.Z,{span:12,className:"mt-20",children:(0,t.jsx)(A.Z,{title:"\u7528\u6237\u4EBA\u6570",value:q.user,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(C.Z,{span:12,className:"mt-20",children:(0,t.jsx)(A.Z,{title:"\u6570\u636E\u5E93\u8868",value:q.table,valueStyle:{color:"#3f8600"}})})]})})})}),(0,t.jsx)(C.Z,{span:8,children:(0,t.jsx)("div",{className:I().waringWrap,children:(0,t.jsx)(me,{warningList:re})})})]})}),(0,t.jsx)("div",{className:I().center,children:(0,t.jsxs)(N.Z,{gutter:30,children:[(0,t.jsx)(C.Z,{span:12,children:(0,t.jsx)(ie.ZP,{columns:je,dataSource:u,scroll:{y:500},options:!1,toolBarRender:function(){return[(0,t.jsx)(g.Z,{type:"link",size:"small",onClick:function(){f.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,pagination:!1,headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,t.jsx)(C.Z,{span:12,className:"pr-10",children:(0,t.jsx)(m.Z,{active:!0,loading:!1,paragraph:{rows:5},children:(0,t.jsx)(ie.ZP,{scroll:{y:500},columns:Ae,dataSource:F,options:!1,rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:Be,pageSize:Q.pageSize,current:Q.pageNo,onChange:function(d,S){de({pageNo:d,pageSize:S})}},toolBarRender:function(){return[(0,t.jsx)(g.Z,{type:"link",size:"small",onClick:function(){f.history.push("/databases")},children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u7EDF\u8BA1"})})})]})})]})},we=be},66572:function(K,P,e){"use strict";e.d(P,{m:function(){return N}});var E=e(11849),g=e(3182),G=e(94043),r=e.n(G),D=e(25377);function N(A,b){return x.apply(this,arguments)}function x(){return x=(0,g.Z)(r().mark(function A(b,C){return r().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,D.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,E.Z)({method:"GET",params:b},C||{})));case 1:case"end":return m.stop()}},A)})),x.apply(this,arguments)}},6650:function(K,P,e){"use strict";e.d(P,{F$:function(){return N},Xd:function(){return A},mt:function(){return C},et:function(){return y},FP:function(){return l},Bx:function(){return te},wA:function(){return se}});var E=e(11849),g=e(3182),G=e(94043),r=e.n(G),D=e(25377);function N(n){return x.apply(this,arguments)}function x(){return x=(0,g.Z)(r().mark(function n(s){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.WY)("/api/skyflying/getCoarseCountsOfUser",(0,E.Z)({method:"GET"},s||{})));case 1:case"end":return t.stop()}},n)})),x.apply(this,arguments)}function A(n,s){return b.apply(this,arguments)}function b(){return b=(0,g.Z)(r().mark(function n(s,_){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,E.Z)({method:"GET",params:s},_||{})));case 1:case"end":return a.stop()}},n)})),b.apply(this,arguments)}function C(n,s){return R.apply(this,arguments)}function R(){return R=(0,g.Z)(r().mark(function n(s,_){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getVisitRate",(0,E.Z)({method:"GET",params:{username:s}},_||{})));case 1:case"end":return a.stop()}},n)})),R.apply(this,arguments)}function m(n,s){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime.mark(function n(s,_){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:s},_||{})));case 1:case"end":return a.stop()}},n)})),h.apply(this,arguments)}function y(n,s){return U.apply(this,arguments)}function U(){return U=(0,g.Z)(r().mark(function n(s,_){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getCountsOfUser",(0,E.Z)({method:"GET",params:s},_||{})));case 1:case"end":return a.stop()}},n)})),U.apply(this,arguments)}function l(n,s){return O.apply(this,arguments)}function O(){return O=(0,g.Z)(r().mark(function n(s,_){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getUserOperationTypeCount",(0,E.Z)({method:"GET",params:s},_||{})));case 1:case"end":return a.stop()}},n)})),O.apply(this,arguments)}function te(n,s){return I.apply(this,arguments)}function I(){return I=(0,g.Z)(r().mark(function n(s,_){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,E.Z)({method:"GET",params:s},_||{})));case 1:case"end":return a.stop()}},n)})),I.apply(this,arguments)}function se(n,s){return Y.apply(this,arguments)}function Y(){return Y=(0,g.Z)(r().mark(function n(s,_){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,E.Z)({method:"GET",params:s||{}},_||{})));case 1:case"end":return a.stop()}},n)})),Y.apply(this,arguments)}},2335:function(K,P,e){"use strict";e.d(P,{rO:function(){return N},cD:function(){return A},sF:function(){return C}});var E=e(11849),g=e(3182),G=e(94043),r=e.n(G),D=e(25377);function N(m){return x.apply(this,arguments)}function x(){return x=(0,g.Z)(r().mark(function m(h){return r().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,D.WY)("/api/skyflying/getUserNameAnomalyDetectionInfo",(0,E.Z)({method:"GET"},h||{})));case 1:case"end":return U.stop()}},m)})),x.apply(this,arguments)}function A(m,h){return b.apply(this,arguments)}function b(){return b=(0,g.Z)(r().mark(function m(h,y){return r().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,E.Z)({method:"GET",params:h||{}},y||{})));case 1:case"end":return l.stop()}},m)})),b.apply(this,arguments)}function C(m,h){return R.apply(this,arguments)}function R(){return R=(0,g.Z)(r().mark(function m(h,y){return r().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.WY)("/api/skyflying/getAnomalyDetectionInfoByGroupByUserName",(0,E.Z)({method:"GET",params:h||{}},y||{})));case 1:case"end":return l.stop()}},m)})),R.apply(this,arguments)}}}]);
