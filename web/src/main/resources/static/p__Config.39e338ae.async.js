(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[569],{64317:function(W,x,e){"use strict";var b=e(22122),h=e(28991),S=e(81253),t=e(67294),Z=e(30885),r=e(96202),j=e(66758),T=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],L=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],Q=t.forwardRef(function(n,E){var V=n.fieldProps,s=n.children,P=n.params,G=n.proFieldProps,M=n.mode,B=n.valueEnum,K=n.request,D=n.showSearch,v=n.options,z=(0,S.Z)(n,T),$=(0,t.useContext)(j.Z);return t.createElement(Z.Z,(0,b.Z)({mode:"edit",valueEnum:(0,r.h)(B),request:K,params:P,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:v,mode:M,showSearch:D,getPopupContainer:$.getPopupContainer},V),ref:E,proFieldProps:G},z),s)}),A=t.forwardRef(function(n,E){var V=n.fieldProps,s=n.children,P=n.params,G=n.proFieldProps,M=n.mode,B=n.valueEnum,K=n.request,D=n.options,v=(0,S.Z)(n,L),z=(0,h.Z)({options:D,mode:M||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},V),$=(0,t.useContext)(j.Z);return t.createElement(Z.Z,(0,b.Z)({mode:"edit",valueEnum:(0,r.h)(B),request:K,params:P,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({getPopupContainer:$.getPopupContainer},z),ref:E,proFieldProps:G},v),s)}),q=Q,X=A,f=q;f.SearchSelect=X,f.displayName="ProFormComponent",x.Z=f},5894:function(W,x,e){"use strict";e.d(x,{A:function(){return D}});var b=e(9715),h=e(86835),S=e(22122),t=e(67294),Z=e(96156),r=e(49111),j=e(19650),T=e(84305),L=e(75901),Q=e(28481),A=e(28991),q=e(8812),X=e(66758),f=e(96138),n=e(28664),E=e(58927),V=e(94184),s=e.n(V),P=e(2514),G=t.forwardRef(function(v,z){var $=t.useContext(X.Z),k=$.groupProps,C=(0,A.Z)((0,A.Z)({},k),v),pe=C.children,me=C.collapsible,_=C.defaultCollapsed,fe=C.style,Ze=C.labelLayout,ve=C.title,I=ve===void 0?v.label:ve,ae=C.tooltip,ge=C.align,ee=ge===void 0?"start":ge,he=C.direction,te=C.size,Ee=te===void 0?32:te,se=C.titleStyle,Pe=C.titleRender,Y=C.spaceProps,oe=C.extra,w=C.autoFocus,Ae=(0,n.Z)(function(){return _||!1},{value:v.collapsed,onChange:v.onCollapse}),ne=(0,Q.Z)(Ae,2),ie=ne[0],le=ne[1],Fe=(0,t.useContext)(L.ZP.ConfigContext),xe=Fe.getPrefixCls,a=(0,P.z)(v),Se=a.ColWrapper,ye=a.RowWrapper,i=xe("pro-form-group"),u=me&&t.createElement(q.Z,{style:{marginRight:8},rotate:ie?void 0:90}),y=t.createElement(E.Z,{label:u?t.createElement("div",null,u,I):I,tooltip:ae}),o=(0,t.useCallback)(function(N){var H=N.children;return t.createElement(j.Z,(0,S.Z)({},Y,{className:"".concat(i,"-container"),size:Ee,align:ee,direction:he,style:(0,A.Z)({rowGap:0},Y==null?void 0:Y.style)}),H)},[ee,i,he,Ee,Y]),m=Pe?Pe(y,v):y,ue=(0,t.useMemo)(function(){var N=[],H=t.Children.toArray(pe).map(function(U,De){var de;return t.isValidElement(U)&&(U==null||(de=U.props)===null||de===void 0?void 0:de.hidden)?(N.push(U),null):De===0&&t.isValidElement(U)&&w?t.cloneElement(U,(0,A.Z)((0,A.Z)({},U.props),{},{autoFocus:w})):U});return[t.createElement(ye,{key:"children",Wrapper:o},H),N.length>0?t.createElement("div",{style:{display:"none"}},N):null]},[pe,ye,o,w]),re=(0,Q.Z)(ue,2),be=re[0],Ce=re[1];return t.createElement(Se,null,t.createElement("div",{className:s()(i,(0,Z.Z)({},"".concat(i,"-twoLine"),Ze==="twoLine")),style:fe,ref:z},Ce,(I||ae||oe)&&t.createElement("div",{className:"".concat(i,"-title"),style:se,onClick:function(){le(!ie)}},oe?t.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"}},m,t.createElement("span",{onClick:function(H){return H.stopPropagation()}},oe)):m),me&&ie?null:be))});G.displayName="ProForm-Group";var M=G,B=e(87808),K=e(24214);function D(v){return t.createElement(K.I,(0,S.Z)({layout:"vertical",submitter:{render:function($,k){return k.reverse()}},contentRender:function($,k){return t.createElement(t.Fragment,null,$,k)}},v))}D.Group=M,D.useForm=h.Z.useForm,D.Item=B.Z},24739:function(W,x,e){"use strict";e.d(x,{UW:function(){return h}});var b=e(5894),h=b.A.Group},58927:function(W,x,e){"use strict";var b=e(22385),h=e(61580),S=e(96156),t=e(84305),Z=e(75901),r=e(67294),j=e(68628),T=e(11445),L=e.n(T),Q=e(94184),A=e.n(Q),q=function(f){var n=f.label,E=f.tooltip,V=f.ellipsis,s=f.subTitle,P=(0,r.useContext)(Z.ZP.ConfigContext),G=P.getPrefixCls;if(!E&&!s)return r.createElement(r.Fragment,null,n);var M=G("pro-core-label-tip"),B=typeof E=="string"||r.isValidElement(E)?{title:E}:E,K=(B==null?void 0:B.icon)||r.createElement(j.Z,null);return r.createElement("div",{className:M,onMouseDown:function(v){return v.stopPropagation()},onMouseLeave:function(v){return v.stopPropagation()},onMouseMove:function(v){return v.stopPropagation()}},r.createElement("div",{className:A()("".concat(M,"-title"),(0,S.Z)({},"".concat(M,"-title-ellipsis"),V))},n),s&&r.createElement("div",{className:"".concat(M,"-subtitle")},s),E&&r.createElement(h.Z,B,r.createElement("span",{className:"".concat(M,"-icon")},K)))};x.Z=r.memo(q)},89663:function(W){W.exports={config:"config___2VrF2"}},96138:function(){},11445:function(){},29035:function(W,x,e){"use strict";e.r(x),e.d(x,{default:function(){return ye}});var b=e(71194),h=e(50146),S=e(12968),t=e(62462),Z=e(18106),r=e(51752),j=e(402),T=e(97272),L=e(86582),Q=e(57663),A=e(71577),q=e(74379),X=e(38648),f=e(3182),n=e(11849),E=e(2824),V=e(94043),s=e.n(V),P=e(67294),G=e(89663),M=e.n(G),B=e(24739),K=e(5966),D=e(13312),v=e(67724),z=e(8812),$=e(22122),k=e(81253),C=e(30885),pe=["fieldProps","proFieldProps"],me=function(u,y){var o=u.fieldProps,m=u.proFieldProps,ue=(0,k.Z)(u,pe);return P.createElement(C.Z,(0,$.Z)({ref:y,mode:"edit",valueType:"textarea",fieldProps:o,proFieldProps:m},ue))},_=P.forwardRef(me),fe=e(5894),Ze=e(64317),ve=e(59962),I=e(25377),ae=e(24480);function ge(i){return ee.apply(this,arguments)}function ee(){return ee=(0,f.Z)(s().mark(function i(u){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,I.WY)("/api/skyflying/config/getDingConfig",(0,n.Z)({method:"GET"},u||{})));case 1:case"end":return o.stop()}},i)})),ee.apply(this,arguments)}function he(i){return te.apply(this,arguments)}function te(){return te=(0,f.Z)(s().mark(function i(u){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,I.WY)("/api/skyflying/config/getDingGapDic",(0,n.Z)({method:"GET"},u||{})));case 1:case"end":return o.stop()}},i)})),te.apply(this,arguments)}function Ee(i,u){return se.apply(this,arguments)}function se(){return se=(0,f.Z)(s().mark(function i(u,y){return s().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,I.WY)("/api/skyflying/config/updateDingConfig",(0,n.Z)({method:"PUT",data:u},y||{})));case 1:case"end":return m.stop()}},i)})),se.apply(this,arguments)}function Pe(i){return Y.apply(this,arguments)}function Y(){return Y=(0,f.Z)(s().mark(function i(u){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,I.WY)("/api/skyflying/getAkSk",(0,n.Z)({method:"GET"},u||{})));case 1:case"end":return o.stop()}},i)})),Y.apply(this,arguments)}function oe(i){return w.apply(this,arguments)}function w(){return w=(0,f.Z)(s().mark(function i(u){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,I.WY)("/api/skyflying/getRegion",(0,n.Z)({method:"GET"},u||{})));case 1:case"end":return o.stop()}},i)})),w.apply(this,arguments)}function Ae(i,u){return ne.apply(this,arguments)}function ne(){return ne=(0,f.Z)(s().mark(function i(u,y){return s().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,I.WY)("/api/skyflying/setAkSk",(0,n.Z)({method:"POST",data:ae.Z.formData(u)},y||{})));case 1:case"end":return m.stop()}},i)})),ne.apply(this,arguments)}function ie(i,u){return le.apply(this,arguments)}function le(){return le=(0,f.Z)(s().mark(function i(u,y){return s().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,I.WY)("/api/skyflying/setRegion",(0,n.Z)({method:"POST",data:ae.Z.formData(u)},y||{})));case 1:case"end":return m.stop()}},i)})),le.apply(this,arguments)}var Fe=e(34217),xe=e.n(Fe),a=e(85893),Se=function(){var u=(0,P.useRef)(),y=(0,P.useRef)(),o=(0,P.useState)(!1),m=(0,E.Z)(o,2),ue=m[0],re=m[1],be=(0,P.useState)(1),Ce=(0,E.Z)(be,2),N=Ce[0],H=Ce[1],U=(0,P.useState)(xe()),De=(0,E.Z)(U,2),de=De[0],Oe=De[1],We=(0,P.useState)({gap:0,id:0,secret:"",webhook:"",mobiles:""}),Te=(0,E.Z)(We,2),je=Te[0],Le=Te[1],Ie=(0,P.useState)({dingDisabled:!0,dmsDisabled:!0}),Be=(0,E.Z)(Ie,2),J=Be[0],Me=Be[1],Re={getAkAndSk:function(){Pe().then(function(p){var l=p.data;if(l){var c,d=JSON.parse(l);(c=y.current)===null||c===void 0||c.setFieldsValue(d),oe().then(function(O){if(O&&O.data){var g=JSON.parse(O.data),R=g.config;if(R){var ce,Ue=JSON.parse(R);(ce=y.current)===null||ce===void 0||ce.setFieldsValue({region:Ue["dms-region"]})}}})}})},getConfig:function(){ge().then(function(p){var l,c=p.data,d=p.code;d===D.Gh&&c&&Le(c);var O=[];if(c&&c.mobiles){var g=c.mobiles.includes("#")?c.mobiles.split("#"):[c.mobiles];O=g.map(function(R){return{phone:R}})}(l=u.current)===null||l===void 0||l.setFieldsValue((0,n.Z)((0,n.Z)({},c),{phone:O}))})}};return(0,P.useEffect)(function(){Re.getConfig()},[]),(0,a.jsxs)("div",{className:M().config,children:[(0,a.jsxs)(r.Z,{tabPosition:"left",size:"middle",onChange:function(p){Re[p](),Me({dingDisabled:!0,dmsDisabled:!0})},type:"card",children:[(0,a.jsxs)(r.Z.TabPane,{tab:"\u9489\u9489\u544A\u8B66",children:[(0,a.jsx)("h3",{className:"text-c mb-30 mt-50 fw-600",children:"\u9489\u9489\u544A\u8B66\u914D\u7F6E"}),(0,a.jsx)("div",{style:{display:"inline-block",margin:"0 auto"},children:(0,a.jsxs)(fe.A,{formRef:u,labelAlign:"right",onFinish:function(){var F=(0,f.Z)(s().mark(function p(l){var c,d;return s().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:d=l.phone,d&&d.length>0&&(l.mobiles=d.map(function(R){return R.phone}).join("#"),delete l.phone),Ee((0,n.Z)((0,n.Z)({},l),{id:(c=je.id)!==null&&c!==void 0?c:null})).then(function(R){var ce=R.code;ce===D.Gh&&X.Z.success({message:"\u63D0\u793A",description:"\u4FEE\u6539\u6210\u529F\uFF01"})});case 3:case"end":return g.stop()}},p)}));return function(p){return F.apply(this,arguments)}}(),submitter:{render:function(p,l){var c=function(){return(0,a.jsx)(A.Z,{htmlType:"button",onClick:function(){Me(function(g){var R=g.dmsDisabled;return{dingDisabled:!1,dmsDisabled:R}})},children:"\u70B9\u51FB\u7F16\u8F91"},"ding-edit")};return l.splice(1,0,c()),(0,L.Z)(l)},searchConfig:{submitText:"\u786E\u8BA4\u4FEE\u6539"}},labelCol:{span:8},layout:"horizontal",children:[(0,a.jsx)(_,{disabled:J.dingDisabled,help:(0,a.jsx)(T.Z.Link,{onClick:function(){re(!0)},children:"\u5982\u4F55\u83B7\u53D6Webhook\uFF1F"}),width:"lg",name:"webhook",label:"Webhook",tooltip:"\u9489\u9489\u7FA4\u8BBE\u7F6E->\u667A\u80FD\u7FA4\u52A9\u624B->",style:{textAlign:"left"},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u94A5"}]}),(0,a.jsx)(_,{width:"lg",name:"secret",label:"Secret",style:{textAlign:"left"},disabled:J.dingDisabled,rules:[{required:!0,message:"\u8BF7\u8F93\u5165token"}]}),(0,a.jsx)(Ze.Z,{width:"lg",name:"gap",label:"\u544A\u8B66\u95F4\u9694",debounceTime:300,style:{textAlign:"left"},disabled:J.dingDisabled,rules:[{required:!0,message:"\u9009\u62E9\u544A\u8B66\u95F4\u9694"}],request:(0,f.Z)(s().mark(function F(){var p,l;return s().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,he();case 3:return p=d.sent,l=p.data,d.abrupt("return",l.map(function(O){return{label:O,value:O}}));case 8:return d.prev=8,d.t0=d.catch(0),d.abrupt("return",[]);case 11:case"end":return d.stop()}},F,null,[[0,8]])}))}),(0,a.jsx)(ve.u,{name:"phone",label:"@\u6307\u5B9A\u7528\u6237\uFF08\u624B\u673A\u53F7\u7801\uFF09\uFF1A",copyIconProps:!1,deleteIconProps:J.dingDisabled?!1:{},creatorButtonProps:{disabled:J.dingDisabled,creatorButtonText:"\u6DFB\u52A0\u6307\u5B9A\u7528\u6237"},initialValue:[{phone:""}],children:(0,a.jsx)(B.UW,{children:(0,a.jsx)(K.Z,{name:"phone",disabled:J.dingDisabled,fieldProps:{maxLength:11},placeholder:"\u8BF7\u8F93\u5165\u6307\u5B9A\u7528\u6237\u624B\u673A\u53F7\u7801"})},"group")})]})})]},"getConfig"),(0,a.jsxs)(r.Z.TabPane,{tab:"\u83B7\u53D6\u6570\u636E\u5E93\u5BA1\u8BA1\u65E5\u5FD7\u914D\u7F6E",children:[(0,a.jsx)("h3",{className:"text-c mb-30 mt-50 fw-600",children:"\u83B7\u53D6\u6570\u636E\u5E93\u5BA1\u8BA1\u65E5\u5FD7\u914D\u7F6E"}),(0,a.jsx)("div",{style:{display:"inline-block",margin:"0 auto"},children:(0,a.jsxs)(fe.A,{formRef:y,labelAlign:"right",onFinish:function(){var F=(0,f.Z)(s().mark(function p(l){var c,d;return s().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Ae(l);case 2:return c=g.sent,g.next=5,ie(l);case 5:d=g.sent,c.code===D.Gh&&d.code===D.Gh&&X.Z.success({message:"\u63D0\u793A",description:"\u4FEE\u6539\u6210\u529F\uFF01"});case 7:case"end":return g.stop()}},p)}));return function(p){return F.apply(this,arguments)}}(),submitter:{render:function(p,l){var c=function(){return(0,a.jsx)(A.Z,{htmlType:"button",onClick:function(){Me(function(g){var R=g.dingDisabled;return{dingDisabled:R,dmsDisabled:!1}})},children:"\u70B9\u51FB\u7F16\u8F91"},"dms-edit")};return l.splice(1,0,c()),(0,L.Z)(l)},searchConfig:{submitText:"\u786E\u8BA4\u4FEE\u6539"}},labelCol:{span:6},layout:"horizontal",children:[(0,a.jsx)(_,{width:"lg",name:"ak",label:"Access Key",style:{textAlign:"left"},disabled:J.dmsDisabled,rules:[{required:!0,message:"\u8BF7\u8F93\u5165Access Key"}]}),(0,a.jsx)(_,{width:"lg",name:"sk",label:"Secret Access Key",style:{textAlign:"left"},disabled:J.dmsDisabled,rules:[{required:!0,message:"\u8BF7\u8F93\u5165Secret Access Key"}]}),(0,a.jsx)(K.Z,{width:"lg",name:"region",label:"\u6570\u636E\u5E93\u6240\u5C5E\u533A\u57DF",style:{textAlign:"left"},disabled:J.dmsDisabled,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u6240\u5C5E\u533A\u57DF"}]})]})})]},"getAkAndSk")]}),(0,a.jsxs)(h.Z,{title:"\u83B7\u53D6Webhook\u64CD\u4F5C\u8BF4\u660E",width:"600px",bodyStyle:{textAlign:"center"},onCancel:function(){return re(!1)},visible:ue,footer:[(0,a.jsx)(A.Z,{type:"primary",onClick:function(){return re(!1)},children:"\u786E\u8BA4"})],children:[N>1&&(0,a.jsx)(A.Z,{type:"primary",className:"mr-10",icon:(0,a.jsx)(v.Z,{}),size:"middle",onClick:function(){H(function(p){return e(26861)("./ding".concat(p-1,".png")).then(function(l){Oe(l.default)}),p-1})}}),(0,a.jsx)(t.Z,{preview:!1,width:350,src:de,className:"mt-20"}),N<4&&(0,a.jsx)(A.Z,{type:"primary",className:"ml-10",icon:(0,a.jsx)(z.Z,{}),size:"middle",onClick:function(){H(function(p){return e(26861)("./ding".concat(p+1,".png")).then(function(l){Oe(l.default)}),p+1})}})]})]})},ye=Se},34217:function(W,x,e){W.exports=e.p+"static/ding1.24b67825.png"},79370:function(W,x,e){"use strict";e.d(x,{G:function(){return t}});var b=e(98924),h=function(r){if((0,b.Z)()&&window.document.documentElement){var j=Array.isArray(r)?r:[r],T=window.document.documentElement;return j.some(function(L){return L in T.style})}return!1},S=function(r,j){if(!h(r))return!1;var T=document.createElement("div"),L=T.style[r];return T.style[r]=j,T.style[r]!==L};function t(Z,r){return!Array.isArray(Z)&&r!==void 0?S(Z,r):h(Z)}},26861:function(W,x,e){var b={"./ding1.png":[34217],"./ding2.png":[37255,255],"./ding3.png":[77897,897],"./ding4.png":[66005,5]};function h(S){if(!e.o(b,S))return Promise.resolve().then(function(){var r=new Error("Cannot find module '"+S+"'");throw r.code="MODULE_NOT_FOUND",r});var t=b[S],Z=t[0];return Promise.all(t.slice(1).map(e.e)).then(function(){return e.t(Z,7|16)})}h.keys=function(){return Object.keys(b)},h.id=26861,W.exports=h}}]);
