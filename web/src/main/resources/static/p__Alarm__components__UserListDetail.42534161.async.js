(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[126],{37174:function(Ce){Ce.exports={alarm:"alarm___12xQi",salesRank:"salesRank___-5oIk",rankingList:"rankingList___rxbMU",rankingItemNumber:"rankingItemNumber___3eh0u",active:"active___3KjTZ",rankingItemTitle:"rankingItemTitle___3gCS2","alarm-data":"alarm-data___17B2L",alarmDetail:"alarmDetail___9Lz5b"}},52953:function(){},44887:function(){},26723:function(Ce,se,e){"use strict";e.r(se),e.d(se,{default:function(){return Qe}});var R=e(20228),Y=e(11382),D=e(66456),T=e(78587),F=e(3182),Ee=e(57663),re=e(71577),V=e(11849),f=e(2824),he=e(94043),ne=e.n(he),t=e(67294),oe=e(37174),S=e.n(oe),_=e(48606),ae=e(71194),Z=e(50146),N=e(88983),xe=e(47933),ze=e(62350),Pe=e(75443),r=e(77576),me=e(12028),ve=e(17462),E=e(76772),J=e(38663),Ie=e(52953),X=e(96156),Me=e(28481),ie=e(90484),Te=e(94184),ce=e.n(Te),Re=e(50344),fe=e(24308),Ne=e(21687),Ae=e(65632),p=e(22122);function ye(a){return a!=null}var ue=function(n){var s=n.itemPrefixCls,o=n.component,l=n.span,d=n.className,u=n.style,h=n.labelStyle,b=n.contentStyle,I=n.bordered,C=n.label,g=n.content,$=n.colon,x=o;if(I){var v;return t.createElement(x,{className:ce()((v={},(0,X.Z)(v,"".concat(s,"-item-label"),ye(C)),(0,X.Z)(v,"".concat(s,"-item-content"),ye(g)),v),d),style:u,colSpan:l},ye(C)&&t.createElement("span",{style:h},C),ye(g)&&t.createElement("span",{style:b},g))}return t.createElement(x,{className:ce()("".concat(s,"-item"),d),style:u,colSpan:l},t.createElement("div",{className:"".concat(s,"-item-container")},(C||C===0)&&t.createElement("span",{className:ce()("".concat(s,"-item-label"),(0,X.Z)({},"".concat(s,"-item-no-colon"),!$)),style:h},C),(g||g===0)&&t.createElement("span",{className:ce()("".concat(s,"-item-content")),style:b},g)))},ge=ue;function De(a,n,s){var o=n.colon,l=n.prefixCls,d=n.bordered,u=s.component,h=s.type,b=s.showLabel,I=s.showContent,C=s.labelStyle,g=s.contentStyle;return a.map(function($,x){var v=$.props,K=v.label,k=v.children,L=v.prefixCls,q=L===void 0?l:L,j=v.className,m=v.style,le=v.labelStyle,z=v.contentStyle,ee=v.span,G=ee===void 0?1:ee,M=$.key;return typeof u=="string"?t.createElement(ge,{key:"".concat(h,"-").concat(M||x),className:j,style:m,labelStyle:(0,p.Z)((0,p.Z)({},C),le),contentStyle:(0,p.Z)((0,p.Z)({},g),z),span:G,colon:o,component:u,itemPrefixCls:q,bordered:d,label:b?K:null,content:I?k:null}):[t.createElement(ge,{key:"label-".concat(M||x),className:j,style:(0,p.Z)((0,p.Z)((0,p.Z)({},C),m),le),span:1,colon:o,component:u[0],itemPrefixCls:q,bordered:d,label:K}),t.createElement(ge,{key:"content-".concat(M||x),className:j,style:(0,p.Z)((0,p.Z)((0,p.Z)({},g),m),z),span:G*2-1,component:u[1],itemPrefixCls:q,bordered:d,content:k})]})}var Se=function(n){var s=t.useContext(A),o=n.prefixCls,l=n.vertical,d=n.row,u=n.index,h=n.bordered;return l?t.createElement(t.Fragment,null,t.createElement("tr",{key:"label-".concat(u),className:"".concat(o,"-row")},De(d,n,(0,p.Z)({component:"th",type:"label",showLabel:!0},s))),t.createElement("tr",{key:"content-".concat(u),className:"".concat(o,"-row")},De(d,n,(0,p.Z)({component:"td",type:"content",showContent:!0},s)))):t.createElement("tr",{key:u,className:"".concat(o,"-row")},De(d,n,(0,p.Z)({component:h?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},s)))},Be=Se,Le=function(n){var s=n.children;return s},Ue=Le,Ke=e(96159),A=t.createContext({}),c={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function y(a,n){if(typeof a=="number")return a;if((0,ie.Z)(a)==="object")for(var s=0;s<fe.c4.length;s++){var o=fe.c4[s];if(n[o]&&a[o]!==void 0)return a[o]||c[o]}return 3}function B(a,n,s){var o=a;return(n===void 0||n>s)&&(o=(0,Ke.Tm)(a,{span:s}),(0,Ne.Z)(n===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),o}function je(a,n){var s=(0,Re.Z)(a).filter(function(u){return u}),o=[],l=[],d=n;return s.forEach(function(u,h){var b,I=(b=u.props)===null||b===void 0?void 0:b.span,C=I||1;if(h===s.length-1){l.push(B(u,I,d)),o.push(l);return}C<d?(d-=C,l.push(u)):(l.push(B(u,C,d)),o.push(l),d=n,l=[])}),o}function _e(a){var n,s=a.prefixCls,o=a.title,l=a.extra,d=a.column,u=d===void 0?c:d,h=a.colon,b=h===void 0?!0:h,I=a.bordered,C=a.layout,g=a.children,$=a.className,x=a.style,v=a.size,K=a.labelStyle,k=a.contentStyle,L=t.useContext(Ae.E_),q=L.getPrefixCls,j=L.direction,m=q("descriptions",s),le=t.useState({}),z=(0,Me.Z)(le,2),ee=z[0],G=z[1],M=y(u,ee);t.useEffect(function(){var w=fe.ZP.subscribe(function(de){(0,ie.Z)(u)==="object"&&G(de)});return function(){fe.ZP.unsubscribe(w)}},[]);var W=je(g,M),P=t.useMemo(function(){return{labelStyle:K,contentStyle:k}},[K,k]);return t.createElement(A.Provider,{value:P},t.createElement("div",{className:ce()(m,(n={},(0,X.Z)(n,"".concat(m,"-").concat(v),v&&v!=="default"),(0,X.Z)(n,"".concat(m,"-bordered"),!!I),(0,X.Z)(n,"".concat(m,"-rtl"),j==="rtl"),n),$),style:x},(o||l)&&t.createElement("div",{className:"".concat(m,"-header")},o&&t.createElement("div",{className:"".concat(m,"-title")},o),l&&t.createElement("div",{className:"".concat(m,"-extra")},l)),t.createElement("div",{className:"".concat(m,"-view")},t.createElement("table",null,t.createElement("tbody",null,W.map(function(w,de){return t.createElement(Be,{key:de,index:de,colon:b,prefixCls:m,vertical:C==="vertical",bordered:I,row:w})}))))))}_e.Item=Ue;var pe=_e,Ge=e(74379),Ze=e(38648),i=e(85893);function Oe(a,n){var s=(0,t.useState)({}),o=(0,f.Z)(s,2),l=o[0],d=o[1],u=(0,t.useState)(!1),h=(0,f.Z)(u,2),b=h[0],I=h[1],C=(0,t.useState)(!1),g=(0,f.Z)(C,2),$=g[0],x=g[1],v=(0,t.useState)(!1),K=(0,f.Z)(v,2),k=K[0],L=K[1],q=(0,t.useState)([]),j=(0,f.Z)(q,2),m=j[0],le=j[1],z=(0,t.useState)("update"),ee=(0,f.Z)(z,2),G=ee[0],M=ee[1];return(0,t.useImperativeHandle)(n,function(){return{setInitValues:function(P){P.length===1&&d(P[0]),le(P)}}}),(0,i.jsx)(Z.Z,{width:600,afterClose:function(){x(!1),I(!1),M("update")},destroyOnClose:!0,title:m.length===1?"".concat(l==null?void 0:l.userName,"\uFF08\u544A\u8B66\u5904\u7F6E\uFF09"):"\u6279\u91CF\u5904\u7F6E".concat(m.length,"\u6761\u544A\u8B66"),visible:a.handleVisible,onCancel:function(){a.setVisible(!1),L(!1),M("update")},onOk:function(){if(b&&(0,_.QD)([{id:l.id,matchRuleId:l.matchRuleId,originalTime:l.originalTime,userName:l.userName,alarmContent:l.alarmContent,flag:k?"update":"delete"}]).then(function(){a.refresh(),Ze.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)}),m.length>1){var P=m.map(function(w){return w.flag=G,w});(0,_.QD)(P).then(function(){a.refresh(),Ze.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)})}a.setVisible(!1)},children:m.length===1?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(pe,{layout:"horizontal",column:2,children:[(0,i.jsx)(pe.Item,{label:"\u8BB0\u5F55\u4EA7\u751F\u65F6\u95F4",children:l==null?void 0:l.originalTime}),(0,i.jsx)(pe.Item,{label:"\u89C4\u5219ID",children:l==null?void 0:l.matchRuleId})]}),(0,i.jsx)(E.Z,{message:l==null?void 0:l.alarmContent,className:"text-c",type:"warning"}),(0,i.jsxs)("div",{className:"flex-x-sb mt-20",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{children:(0,i.jsx)(Pe.Z,{title:"\u662F\u5426\u66F4\u65B0\u753B\u50CF\uFF1F",visible:$,onConfirm:function(){x(!1),L(!0)},onCancel:function(){return x(!1)},okText:"\u66F4\u65B0",cancelText:"\u4E0D\u66F4\u65B0",children:(0,i.jsx)(me.Z,{checkedChildren:"\u5FFD\u7565\u544A\u8B66",unCheckedChildren:"\u4E0D\u5904\u7F6E",onChange:function(P){I(P),x(P)}})})})]})]}):(0,i.jsx)("div",{className:"text-c",children:(0,i.jsx)(xe.ZP.Group,{defaultValue:"update",value:G,options:[{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66",value:"update"},{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\u5E76\u66F4\u65B0\u753B\u50CF",value:"delete"}],onChange:function(P){var w=P.target.value;M(w)}})})})}var We=(0,t.forwardRef)(Oe),Fe=e(32773),He=function(n){var s=(0,t.useState)([]),o=(0,f.Z)(s,2),l=o[0],d=o[1],u=(0,t.useState)(0),h=(0,f.Z)(u,2),b=h[0],I=h[1],C=(0,t.useState)(!1),g=(0,f.Z)(C,2),$=g[0],x=g[1],v=(0,t.useState)(!1),K=(0,f.Z)(v,2),k=K[0],L=K[1],q=(0,t.useState)([]),j=(0,f.Z)(q,2),m=j[0],le=j[1],z=(0,Fe.md)(),ee=(0,t.useState)({pageNo:1,pageSize:10}),G=(0,f.Z)(ee,2),M=G[0],W=G[1],P=(0,t.useRef)(),w=(0,t.useState)({}),de=(0,f.Z)(w,2),Ve=de[0],Ye=de[1];function $e(U){(0,_.cD)(U).then(function(te){var O=te.data;if(x(!0),O){var H=JSON.parse(O);if(I(H.total),H){var Q=JSON.parse(H.rows);d(Q.filter(function(we){return we.isDelete===0}))}else d([])}x(!1)})}var Je=[{title:"\u8BB0\u5F55\u4EA7\u751F\u7684\u65F6\u95F4",dataIndex:"originalTime\uFF1A",key:"originalTime\uFF1A",width:"250px",align:"center",render:function(te,O){return O.originalTime||"-"}},{title:"\u89C4\u5219ID",dataIndex:"matchRuleId\uFF1A",key:"matchRuleId\uFF1A",width:"250px",align:"center",render:function(te,O){return O.matchRuleId||"-"}},{title:"\u544A\u8B66\u5185\u5BB9",dataIndex:"alarmContent",key:"alarmContent",align:"center"},{title:"\u5904\u7F6E",width:"150px",align:"center",render:function(te,O){return[(0,i.jsx)(Fe.Nv,{accessible:z.canUpdate(),children:(0,i.jsx)("a",{onClick:function(){var Q;L(!0),(Q=P.current)===null||Q===void 0||Q.setInitValues([O])},children:"\u5904\u7F6E"})},"handle")]}}],Xe=function(te){le(te)},ke={selectedRowKeys:m,onChange:Xe},qe=m.length>0;return(0,t.useEffect)(function(){var U=n.location.query;Ye(U),$e((0,V.Z)((0,V.Z)((0,V.Z)({},U),M),{isDelete:0}))},[]),(0,i.jsxs)("div",{className:S().alarmDetail,children:[(0,i.jsx)(Y.Z,{spinning:$,children:(0,i.jsx)(T.Z,{rowSelection:ke,columns:Je,dataSource:l,rowKey:"id",title:function(){return(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:Ve.userName}),(0,i.jsx)(Fe.Nv,{accessible:z.canUpdate(),children:(0,i.jsx)(re.Z,{type:"primary",disabled:!qe,size:"middle",onClick:function(){var O,H=l.filter(function(Q){return m.includes(Q.id)});L(!0),(O=P.current)===null||O===void 0||O.setInitValues(H)},children:"\u6279\u91CF\u5904\u7F6E"})})]})},size:"middle",pagination:{current:M.pageNo,pageSize:M.pageSize,total:b,onChange:function(){var U=(0,F.Z)(ne().mark(function O(H,Q){return ne().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,W(function(){return{pageSize:Q,pageNo:H}});case 2:$e((0,V.Z)({pageNo:H,pageSize:Q},Ve));case 3:case"end":return be.stop()}},O)}));function te(O,H){return U.apply(this,arguments)}return te}()}})}),(0,i.jsx)(We,{refresh:function(){$e((0,V.Z)((0,V.Z)({},M),Ve))},setVisible:L,handleVisible:k,ref:P})]})},Qe=He},48606:function(Ce,se,e){"use strict";e.d(se,{Hp:function(){return Ee},CI:function(){return V},cD:function(){return he},QD:function(){return t}});var R=e(11849),Y=e(3182),D=e(94043),T=e.n(D),F=e(21704);function Ee(S){return re.apply(this,arguments)}function re(){return re=(0,Y.Z)(T().mark(function S(_){return T().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",(0,F.WY)("/api/skyflying/getAlarmData",(0,R.Z)({method:"GET"},_||{})));case 1:case"end":return Z.stop()}},S)})),re.apply(this,arguments)}function V(S){return f.apply(this,arguments)}function f(){return f=(0,Y.Z)(T().mark(function S(_){return T().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",(0,F.WY)("/api/skyflying/getUserAlarmData",(0,R.Z)({method:"GET"},_||{})));case 1:case"end":return Z.stop()}},S)})),f.apply(this,arguments)}function he(S,_){return ne.apply(this,arguments)}function ne(){return ne=(0,Y.Z)(T().mark(function S(_,ae){return T().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,F.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,R.Z)({method:"GET",params:_||{}},ae||{})));case 1:case"end":return N.stop()}},S)})),ne.apply(this,arguments)}function t(S,_){return oe.apply(this,arguments)}function oe(){return oe=(0,Y.Z)(T().mark(function S(_,ae){return T().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,F.WY)("/api/skyflying/updateAnomalyDetectionInfo",(0,R.Z)({method:"POST",data:_||{}},ae||{})));case 1:case"end":return N.stop()}},S)})),oe.apply(this,arguments)}},75443:function(Ce,se,e){"use strict";var R=e(22122),Y=e(28481),D=e(67294),T=e(94184),F=e.n(T),Ee=e(21770),re=e(68855),V=e(15105),f=e(61580),he=e(71577),ne=e(73839),t=e(42051),oe=e(85636),S=e(65632),_=e(81643),ae=e(96159),Z=e(33603),N=e(86743),xe=void 0,ze=function(r,me){var ve={};for(var E in r)Object.prototype.hasOwnProperty.call(r,E)&&me.indexOf(E)<0&&(ve[E]=r[E]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,E=Object.getOwnPropertySymbols(r);J<E.length;J++)me.indexOf(E[J])<0&&Object.prototype.propertyIsEnumerable.call(r,E[J])&&(ve[E[J]]=r[E[J]]);return ve},Pe=D.forwardRef(function(r,me){var ve=D.useContext(S.E_),E=ve.getPrefixCls,J=(0,Ee.Z)(!1,{value:r.visible,defaultValue:r.defaultVisible}),Ie=(0,Y.Z)(J,2),X=Ie[0],Me=Ie[1],ie=function(c,y){var B;Me(c,!0),(B=r.onVisibleChange)===null||B===void 0||B.call(r,c,y)},Te=function(c){ie(!1,c)},ce=function(c){var y;return(y=r.onConfirm)===null||y===void 0?void 0:y.call(xe,c)},Re=function(c){var y;ie(!1,c),(y=r.onCancel)===null||y===void 0||y.call(xe,c)},fe=function(c){c.keyCode===V.Z.ESC&&X&&ie(!1,c)},Ne=function(c){var y=r.disabled;y||ie(c)},Ae=function(c,y){var B=r.okButtonProps,je=r.cancelButtonProps,_e=r.title,pe=r.cancelText,Ge=r.okText,Ze=r.okType,i=r.icon,Oe=r.showCancel,We=Oe===void 0?!0:Oe;return D.createElement("div",{className:"".concat(c,"-inner-content")},D.createElement("div",{className:"".concat(c,"-message")},i,D.createElement("div",{className:"".concat(c,"-message-title")},(0,_.Z)(_e))),D.createElement("div",{className:"".concat(c,"-buttons")},We&&D.createElement(he.Z,(0,R.Z)({onClick:Re,size:"small"},je),pe||y.cancelText),D.createElement(N.Z,{buttonProps:(0,R.Z)((0,R.Z)({size:"small"},(0,ne.n)(Ze)),B),actionFn:ce,close:Te,prefixCls:E("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},Ge||y.okText)))},p=r.prefixCls,ye=r.placement,ue=r.children,ge=r.overlayClassName,De=ze(r,["prefixCls","placement","children","overlayClassName"]),Se=E("popover",p),Be=E("popconfirm",p),Le=F()(Be,ge),Ue=D.createElement(t.Z,{componentName:"Popconfirm",defaultLocale:oe.Z.Popconfirm},function(A){return Ae(Se,A)}),Ke=E();return D.createElement(f.Z,(0,R.Z)({},De,{prefixCls:Se,placement:ye,onVisibleChange:Ne,visible:X,overlay:Ue,overlayClassName:Le,ref:me,transitionName:(0,Z.mL)(Ke,"zoom-big",r.transitionName)}),(0,ae.Tm)(ue,{onKeyDown:function(c){var y,B;D.isValidElement(ue)&&((B=ue==null?void 0:(y=ue.props).onKeyDown)===null||B===void 0||B.call(y,c)),fe(c)}}))});Pe.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:D.createElement(re.Z,null),disabled:!1},se.Z=Pe},62350:function(Ce,se,e){"use strict";var R=e(38663),Y=e.n(R),D=e(20136),T=e(57663),F=e(44887),Ee=e.n(F)}}]);
