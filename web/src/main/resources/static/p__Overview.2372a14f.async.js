(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(H){H.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2",nowrap:"nowrap___spq6f"}},81135:function(H,L,e){"use strict";e.r(L),e.d(L,{default:function(){return Pe}});var D=e(57663),v=e(71577),Y=e(58024),u=e(39144),Z=e(13062),M=e(71230),j=e(22385),N=e(61580),B=e(95300),R=e(7277),P=e(89032),o=e(15746),U=e(71748),I=e(33860),_=e(3182),c=e(2824),te=e(71153),re=e(60331),X=e(94043),G=e.n(X),C=e(67294),se=e(26516),k=e.n(se),s=e(13254),r=e(14277),m=e(11849),W=e(46066),a=e(68628),t=e(85893),ye=function(d){var n={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Z,{className:"fs-16 ib danger mr-10"}),(0,t.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,t.jsx)("div",{className:"of-hidden",children:d.warningList.length>0?(0,t.jsx)(W.Z,(0,m.Z)((0,m.Z)({},n),{},{children:d.warningList.map(function(l){return(0,t.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:l.alarmContent},l.id)})})):(0,t.jsx)(r.Z,{description:"\u6682\u65E0\u544A\u8B66\u4FE1\u606F"})})]})},_e=ye,Ce=e(69610),Se=e(54941),Ee=e(43028),De=e(6783),Q=e(69886),q=e(41694),Ze=Q.G2.InteractionAction,Oe=Q.G2.registerInteraction,xe=Q.G2.registerAction,je=function(f){(0,Ee.Z)(n,f);var d=(0,De.Z)(n);function n(){return(0,Ce.Z)(this,n),d.apply(this,arguments)}return(0,Se.Z)(n,[{key:"active",value:function(){var i=this,x=this.getView(),O=this.context.event;if(O.data){var g=O.data.items,w=x.geometries.filter(function($){return $.type==="point"});(0,q.S6)(w,function($){(0,q.S6)($.elements,function(K){var z=(0,q.cx)(g,function(le){return le.data===K.data})!==-1,J=K.shape.getChildren(),V=(0,c.Z)(J,2),ee=V[0],ae=V[1];z?(ee.animate({r:10,opacity:.2},{duration:1800,easing:"easeLinear",repeat:!0}),ae.animate({r:6,opacity:.4},{duration:800,easing:"easeLinear",repeat:!0})):i.resetElementState(K)})})}}},{key:"reset",value:function(){var i=this,x=this.getView(),O=x.geometries.filter(function(g){return g.type==="point"});(0,q.S6)(O,function(g){(0,q.S6)(g.elements,function(w){i.resetElementState(w)})})}},{key:"resetElementState",value:function(i){var x=i.shape.getChildren(),O=(0,c.Z)(x,2),g=O[0],w=O[1];g.stopAnimate(),w.stopAnimate();var $=g.get("attrs"),K=$.r,z=$.opacity;g.attr({r:K,opacity:z});var J=w.get("attrs"),V=J.r,ee=J.opacity;w.attr({r:V,opacity:ee})}},{key:"getView",value:function(){return this.context.view}}]),n}(Ze),Ue=function(d){return(0,C.useEffect)(function(){Q.G2.registerShape("point","custom-point",{draw:function(i,x){var O={x:i.x,y:i.y},g=x.addGroup();return g.addShape("circle",{name:"outer-point",attrs:{x:O.x,y:O.y,fill:i.color||"red",opacity:.5,r:6}}),g.addShape("circle",{name:"inner-point",attrs:{x:O.x,y:O.y,fill:i.color||"red",opacity:1,r:2}}),g}}),xe("custom-marker-action",je),Oe("custom-marker-interaction",{start:[{trigger:"tooltip:show",action:"custom-marker-action:active"}],end:[{trigger:"tooltip:hide",action:"custom-marker-action:reset"}]});var n=new Q.x1("RangeTimeData",{height:138,autoFit:!0,data:d.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"custom-point",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1,formatter:function(i){return{name:"\u5F53\u65E5\u6536\u96C6\u6570\u91CF",value:i.value+"\u6761"}}},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"custom-marker-interaction"}]});n.render()},[]),(0,t.jsx)("div",{id:"RangeTimeData"})},Te=Ue,ce=e(60355),T=e(24480),be=e(6650),de=e(25377);function Ae(f,d){return ie.apply(this,arguments)}function ie(){return ie=(0,_.Z)(G().mark(function f(d,n){return G().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,de.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,m.Z)({params:d,method:"GET"},n||{})));case 1:case"end":return i.stop()}},f)})),ie.apply(this,arguments)}function Ne(f){return ue.apply(this,arguments)}function ue(){return ue=(0,_.Z)(G().mark(function f(d){return G().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,de.WY)("/api/skyflying/getOverviewOfSystem",(0,m.Z)({method:"GET"},d||{})));case 1:case"end":return l.stop()}},f)})),ue.apply(this,arguments)}var Be=e(66572),we=e(2335),Re=e(52778),Ie=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center",sorter:function(d,n){return n.visitedCount-d.visitedCount},render:function(d,n){return(0,t.jsx)("div",{children:n.visitedCount.toLocaleString()})}},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,render:function(d,n){var l="-",i=JSON.parse(n.usualVisitedData);if(i.tableNameDesc)l=i.tableNameDesc;else{var x=i.tableName.split("#");x.shift(),x.length>0?l=x.join("#"):l=i.tableName}return(0,t.jsx)("div",{children:l})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],We=[{title:"\u6570\u636E\u5E93",dataIndex:"dbName",key:"dbName",align:"center",search:!1},{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(d,n){var l="-";if(n.tableNameDesc)l=n.tableNameDesc;else{var i=n.tableName.split("#");l=i[i.length-1]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:l})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",sorter:function(d,n){return n.visitedCount-d.visitedCount},render:function(d,n){return(0,t.jsx)("div",{children:n.visitedCount.toLocaleString()})}},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1,render:function(d,n){return(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:n.usualVisitedUser}),n.userFrom&&(0,t.jsx)(re.Z,{style:{marginLeft:5},color:"#108ee9",children:"\u5B9A\u65F6\u4EFB\u52A1"})]})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,align:"center"}],Me=function(d){var n=(0,C.useState)(),l=(0,c.Z)(n,2),i=l[0],x=l[1],O=(0,C.useState)([]),g=(0,c.Z)(O,2),w=g[0],$=g[1],K=(0,C.useState)([]),z=(0,c.Z)(K,2),J=z[0],V=z[1],ee=(0,C.useState)([]),ae=(0,c.Z)(ee,2),le=ae[0],me=ae[1],Ge=(0,C.useState)(),pe=(0,c.Z)(Ge,2),ke=pe[0],Le=pe[1],$e=(0,C.useState)(0),fe=(0,c.Z)($e,2),Fe=fe[0],Ke=fe[1],Ve=(0,C.useState)({pageSize:10,pageNo:1}),Ye=(0,c.Z)(Ve,1),oe=Ye[0],ze=(0,C.useState)({pageSize:10,pageNo:1}),Je=(0,c.Z)(ze,1),ne=Je[0],He=(0,C.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),ve=(0,c.Z)(He,2),b=ve[0],Xe=ve[1];function Qe(){(0,we.cD)({pageSize:100,pageNo:1}).then(function(A){var p=A.data;if(p){var h=JSON.parse(p);if(h){var S=JSON.parse(h.rows);me(S.map(function(E,y){return E.matchRuleId=y,E}))}else me([])}})}var ge=function(p){(0,be.F$)(p).then(function(h){var S=h.data,E=JSON.parse(S);E&&(Le(E.total),E.rows&&Array.isArray(E.rows)&&x(E.rows.map(function(y){return y.id=T.Z.uuid(),y}).sort(function(y,F){return F.visitedCount-y.visitedCount})))})},qe=function(){var p=T.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),h=T.Z.getRangeTime(7,"mm-dd");Ae({startTime:p[0],endTime:p[1]}).then(function(S){var E=S.data;$(function(){return E.map(function(y,F){return{year:h[F],value:y}})})})},et=function(){var A=(0,_.Z)(G().mark(function p(){var h,S;return G().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Ne();case 2:h=y.sent,S=h.data,Xe(S);case 5:case"end":return y.stop()}},p)}));return function(){return A.apply(this,arguments)}}(),tt=function(){var A=(0,_.Z)(G().mark(function p(){return G().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:case"end":return S.stop()}},p)}));return function(){return A.apply(this,arguments)}}(),he=function(p){(0,Be.m)(p).then(function(h){var S=h.data;if(S){var E=JSON.parse(S);if(Ke(E.total),E.rows){var y=JSON.parse(E.rows);V(y.map(function(F){return F.id=T.Z.uuid(),F}).sort(function(F,at){return at.visitedCount-F.visitedCount}));return}}V([])})};return(0,C.useEffect)(function(){ge(oe),qe(),he(ne),et().then(),tt().then(),Qe()},[ne]),(0,t.jsxs)("div",{className:k().overview,children:[(0,t.jsx)("div",{className:k().staticWrap,children:(0,t.jsxs)(M.Z,{gutter:20,children:[(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(I.Z,{active:!0,loading:w.length===0,children:(0,t.jsx)(Re.Z,{title:"\u8FD1\u4E03\u5929\u6570\u636E\u6536\u96C6\u60C5\u51B5",chart:(0,t.jsx)("div",{style:{height:"163px"},children:(0,t.jsx)(Te,{data:w})})})})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(u.Z,{className:k().bgW,title:(0,t.jsx)("div",{className:"text-c",children:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5"}),children:(0,t.jsx)(M.Z,{gutter:20,className:"text-c",children:(0,t.jsxs)(I.Z,{active:!0,loading:w.length===0,children:[(0,t.jsx)(o.Z,{span:12,className:"mt-15 text-c",children:(0,t.jsx)(N.Z,{placement:"top",title:b.visitedInformation>=T.Z.BIG_NUMBER?b.visitedInformation.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:T.Z.bigNumberTransform(b.visitedInformation),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(o.Z,{span:12,className:"mt-15",children:(0,t.jsx)(N.Z,{placement:"top",title:b.dbInstance>=T.Z.BIG_NUMBER?b.dbInstance.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:T.Z.bigNumberTransform(b.dbInstance),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(o.Z,{span:12,className:"mt-20",children:(0,t.jsx)(N.Z,{placement:"top",title:b.user>=T.Z.BIG_NUMBER?b.user.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u7528\u6237\u4EBA\u6570",value:T.Z.bigNumberTransform(b.user),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(o.Z,{span:12,className:"mt-20",children:(0,t.jsx)(N.Z,{placement:"top",title:b.table>=T.Z.BIG_NUMBER?b.table.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u6570\u636E\u5E93\u8868",value:T.Z.bigNumberTransform(b.table),valueStyle:{color:"#3f8600"}})})})]})})})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)("div",{className:k().waringWrap,children:(0,t.jsx)(_e,{warningList:le})})})]})}),(0,t.jsx)("div",{className:k().center,children:(0,t.jsxs)(M.Z,{gutter:30,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(ce.ZP,{columns:Ie,dataSource:i,scroll:{y:500},options:!1,toolBarRender:function(){return[(0,t.jsx)(v.Z,{type:"link",size:"small",onClick:function(){d.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:ke,pageSize:oe.pageSize,current:oe.pageNo,onChange:function(p,h){ge({pageNo:p,pageSize:h})}},headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,t.jsx)(o.Z,{span:12,className:"pr-10",children:(0,t.jsx)(I.Z,{active:!0,loading:!1,paragraph:{rows:5},children:(0,t.jsx)(ce.ZP,{scroll:{y:500},columns:We,dataSource:J,options:!1,rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:Fe,pageSize:ne.pageSize,current:ne.pageNo,onChange:function(p,h){he({pageNo:p,pageSize:h})}},toolBarRender:function(){return[(0,t.jsx)(v.Z,{type:"link",size:"small",onClick:function(){d.history.push("/databases")},children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u7EDF\u8BA1"})})})]})})]})},Pe=Me},66572:function(H,L,e){"use strict";e.d(L,{m:function(){return M}});var D=e(11849),v=e(3182),Y=e(94043),u=e.n(Y),Z=e(25377);function M(N,B){return j.apply(this,arguments)}function j(){return j=(0,v.Z)(u().mark(function N(B,R){return u().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Z.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,D.Z)({method:"GET",params:B},R||{})));case 1:case"end":return o.stop()}},N)})),j.apply(this,arguments)}},6650:function(H,L,e){"use strict";e.d(L,{F$:function(){return M},Xd:function(){return N},mt:function(){return R},et:function(){return I},FP:function(){return c},Bx:function(){return re},us:function(){return se}});var D=e(11849),v=e(3182),Y=e(94043),u=e.n(Y),Z=e(25377);function M(s,r){return j.apply(this,arguments)}function j(){return j=(0,v.Z)(u().mark(function s(r,m){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/skyflying/getCoarseCountsOfUsers",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},s)})),j.apply(this,arguments)}function N(s,r){return B.apply(this,arguments)}function B(){return B=(0,v.Z)(u().mark(function s(r,m){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},s)})),B.apply(this,arguments)}function R(s,r){return P.apply(this,arguments)}function P(){return P=(0,v.Z)(u().mark(function s(r,m){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/skyflying/getVisitRate",(0,D.Z)({method:"GET",params:{username:r}},m||{})));case 1:case"end":return a.stop()}},s)})),P.apply(this,arguments)}function o(s,r){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime.mark(function s(r,m){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},s)})),U.apply(this,arguments)}function I(s,r){return _.apply(this,arguments)}function _(){return _=(0,v.Z)(u().mark(function s(r,m){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/skyflying/getCountsOfUser",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},s)})),_.apply(this,arguments)}function c(s,r){return te.apply(this,arguments)}function te(){return te=(0,v.Z)(u().mark(function s(r,m){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/skyflying/getUserOperationTypeCount",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},s)})),te.apply(this,arguments)}function re(s,r){return X.apply(this,arguments)}function X(){return X=(0,v.Z)(u().mark(function s(r,m){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,D.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},s)})),X.apply(this,arguments)}function G(s,r){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime.mark(function s(r,m){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCoarseCountsOfOneUser",_objectSpread({method:"GET",params:r||{}},m||{})));case 1:case"end":return a.stop()}},s)})),C.apply(this,arguments)}function se(s,r){return k.apply(this,arguments)}function k(){return k=(0,v.Z)(u().mark(function s(r,m){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/skyflying/getCountsOfEveryonRecentSevenDays",(0,D.Z)({method:"GET",params:r||{}},m||{})));case 1:case"end":return a.stop()}},s)})),k.apply(this,arguments)}},2335:function(H,L,e){"use strict";e.d(L,{rO:function(){return M},cD:function(){return N},sF:function(){return R}});var D=e(11849),v=e(3182),Y=e(94043),u=e.n(Y),Z=e(25377);function M(o){return j.apply(this,arguments)}function j(){return j=(0,v.Z)(u().mark(function o(U){return u().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,Z.WY)("/api/skyflying/getUserNameAnomalyDetectionInfo",(0,D.Z)({method:"GET"},U||{})));case 1:case"end":return _.stop()}},o)})),j.apply(this,arguments)}function N(o,U){return B.apply(this,arguments)}function B(){return B=(0,v.Z)(u().mark(function o(U,I){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Z.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,D.Z)({method:"GET",params:U||{}},I||{})));case 1:case"end":return c.stop()}},o)})),B.apply(this,arguments)}function R(o,U){return P.apply(this,arguments)}function P(){return P=(0,v.Z)(u().mark(function o(U,I){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Z.WY)("/api/skyflying/getAnomalyDetectionInfoByGroupByUserName",(0,D.Z)({method:"GET",params:U||{}},I||{})));case 1:case"end":return c.stop()}},o)})),P.apply(this,arguments)}}}]);
