(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[383],{12265:function(U){U.exports={databases:"databases___35H4X","detail-wrap":"detail-wrap___1IA0t","tops-wrap":"tops-wrap___2AQns",tops:"tops___2lHCZ"}},59498:function(U,_,e){"use strict";e.r(_),e.d(_,{default:function(){return le}});var d=e(3182),i=e(11849),j=e(57663),r=e(71577),v=e(34792),S=e(48086),h=e(86582),f=e(2824),C=e(94043),O=e.n(C),u=e(67294),b=e(83539),Z=e(84674),W=e(12265),B=e.n(W),F=e(24480),R=e(66572),K=e(13062),A=e(71230),$=e(89032),T=e(15746),n=e(69886),t=e(85893),o=function(l){var D=(0,u.useCallback)(function(){var p=new n.by("dataActionPie".concat(l.id),{autoFit:!0,height:250,appendPadding:10,data:l.types,angleField:"value",colorField:"type",radius:.75,legend:{position:"bottom"},label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});p.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),p.render()},[l.id]);return(0,u.useEffect)(function(){D()},[D]),(0,t.jsx)("div",{id:"dataActionPie"+l.id})},c=o,a=e(39004),ne=function(l){var D=(0,u.useCallback)(function(){var p=new a.kL({container:"dataRecentlyLine".concat(l.id),autoFit:!0,height:200});p.data(l.ranges),p.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),p.tooltip({showNil:!1,showCrosshairs:!1,title:function(Y,N){return"".concat(Y,"\uFF1A").concat(N.value," \u6B21")},itemTpl:`<div class="g2-tooltip">
  <div class="g2-tooltip-title">Language</div>
  <ul class="g2-tooltip-list">
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">a</span>:<span class="g2-tooltip-value">70</span>
    </li>
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">b</span>:<span class="g2-tooltip-value">50</span>
    </li>
  </ul>
</div>`}),p.axis("value",{label:{}}),p.area().position("year*value"),p.line().position("year*value"),p.render()},[l.id]);return(0,u.useEffect)(function(){D()},[D]),(0,t.jsx)("div",{id:"dataRecentlyLine"+l.id})},se=ne,re=function(l){return(0,t.jsx)(A.Z,{className:l.style["detail-wrap"],gutter:20,children:(0,t.jsx)(T.Z,{span:24,children:(0,t.jsxs)(A.Z,{children:[(0,t.jsxs)(T.Z,{span:12,className:"text-c",children:[(0,t.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,t.jsx)(c,{types:l.types,id:l.id})]}),(0,t.jsx)(T.Z,{span:12,className:"text-c",children:(0,t.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,t.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,t.jsx)(se,{ranges:l.ranges,id:l.id})]})})]})})})},ue=re,V=e(6650),ie=function(){var l=(0,u.useState)([]),D=(0,f.Z)(l,2),p=D[0],k=D[1],Y=(0,u.useState)(""),N=(0,f.Z)(Y,2),z=N[0],H=N[1],oe=(0,u.useState)(0),J=(0,f.Z)(oe,2),de=J[0],ce=J[1],pe=(0,u.useState)(),Q=(0,f.Z)(pe,2),me=Q[0],fe=Q[1],ve=(0,u.useState)({pageSize:10,pageNo:1}),X=(0,f.Z)(ve,2),x=X[0],ge=X[1],he=(0,u.useState)({types:[],ranges:[]}),q=(0,f.Z)(he,2),ye=q[0],ee=q[1],_e=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(g,s){var y="-";if(s.tableNameDesc)y=s.tableNameDesc;else{var m=s.tableName.split("#");y=m[m.length-1]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:y})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",search:!1},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"dateTime",hideInSetting:!0,search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(g,s){return[(0,t.jsx)(r.Z,{type:"link",size:"small",onClick:function(){if(z===s.id){H(""),ee({types:[],ranges:[]});return}if(s.visitedCount!==0){var m=F.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),M=F.Z.getRangeTime(7,"YYYY-mm-dd");(0,V.Xd)({msTableName:s.tableName,startTime:m[0],endTime:m[1],tableName:s.tableName}).then(function(Ce){var G=Ce.data;if(G&&G.length>0){var De=G.map(function(P,I){return{year:M[I],value:P}}),te=(0,h.Z)(Z.q);(0,V.et)({tableName:s.tableName}).then(function(P){P.data&&P.data.length>0&&te.forEach(function(I){P.data.forEach(function(Ee){var ae=JSON.parse(Ee),be=ae.dbType,Te=ae.dbTypeTimes;I.type===be&&(I.value=parseInt(Te))})})}),ee({ranges:De,types:te}),setTimeout(function(){H(s.id)},400)}})}else S.ZP.info("".concat(s.tableName,"\u8868\u8BBF\u88AB\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],w=(0,u.useCallback)(function(E){(0,R.m)(E).then(function(g){var s=g.data;if(s){var y=JSON.parse(s);if(ce(y.total),y.rows){var m=JSON.parse(y.rows);k(m.map(function(M){return M.id=F.Z.uuid(),M}));return}}k([])})},[]);return(0,u.useEffect)(function(){w(x)},[w,x]),(0,t.jsx)("div",{className:B().databases,children:(0,t.jsx)(b.ZP,{columns:_e,rowKey:"id",pagination:{showSizeChanger:!1,total:de,pageSize:x.pageSize,current:x.pageNo,onChange:function(g,s){ge({pageNo:g,pageSize:s}),w((0,i.Z)({pageNo:g,pageSize:s},me))}},toolBarRender:!1,onSubmit:function(){var E=(0,d.Z)(O().mark(function g(s){return O().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return fe(s),m.next=3,w((0,i.Z)((0,i.Z)({},x),s));case 3:case"end":return m.stop()}},g)}));return function(g){return E.apply(this,arguments)}}(),expandable:{expandedRowRender:function(g,s){return(0,u.createElement)(ue,(0,i.Z)((0,i.Z)({},ye),{},{id:s,key:s,style:B()}))},expandIcon:function(){return!1},expandedRowKeys:[z]},dataSource:p})})},le=ie},84674:function(U,_,e){"use strict";e.d(_,{q:function(){return d},Q:function(){return i}});var d=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],i=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},66572:function(U,_,e){"use strict";e.d(_,{m:function(){return S}});var d=e(11849),i=e(3182),j=e(94043),r=e.n(j),v=e(25377);function S(f,C){return h.apply(this,arguments)}function h(){return h=(0,i.Z)(r().mark(function f(C,O){return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,v.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,d.Z)({method:"GET",params:C},O||{})));case 1:case"end":return b.stop()}},f)})),h.apply(this,arguments)}},6650:function(U,_,e){"use strict";e.d(_,{F$:function(){return S},Xd:function(){return f},mt:function(){return O},et:function(){return W},FP:function(){return F},Bx:function(){return K},wA:function(){return $}});var d=e(11849),i=e(3182),j=e(94043),r=e.n(j),v=e(25377);function S(n){return h.apply(this,arguments)}function h(){return h=(0,i.Z)(r().mark(function n(t){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,v.WY)("/api/skyflying/getCoarseCountsOfUser",(0,d.Z)({method:"GET"},t||{})));case 1:case"end":return c.stop()}},n)})),h.apply(this,arguments)}function f(n,t){return C.apply(this,arguments)}function C(){return C=(0,i.Z)(r().mark(function n(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,d.Z)({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},n)})),C.apply(this,arguments)}function O(n,t){return u.apply(this,arguments)}function u(){return u=(0,i.Z)(r().mark(function n(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.WY)("/api/skyflying/getVisitRate",(0,d.Z)({method:"GET",params:{username:t}},o||{})));case 1:case"end":return a.stop()}},n)})),u.apply(this,arguments)}function b(n,t){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,o){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},n)})),Z.apply(this,arguments)}function W(n,t){return B.apply(this,arguments)}function B(){return B=(0,i.Z)(r().mark(function n(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.WY)("/api/skyflying/getCountsOfUser",(0,d.Z)({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},n)})),B.apply(this,arguments)}function F(n,t){return R.apply(this,arguments)}function R(){return R=(0,i.Z)(r().mark(function n(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.WY)("/api/skyflying/getUserOperationTypeCount",(0,d.Z)({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},n)})),R.apply(this,arguments)}function K(n,t){return A.apply(this,arguments)}function A(){return A=(0,i.Z)(r().mark(function n(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,d.Z)({method:"GET",params:t},o||{})));case 1:case"end":return a.stop()}},n)})),A.apply(this,arguments)}function $(n,t){return T.apply(this,arguments)}function T(){return T=(0,i.Z)(r().mark(function n(t,o){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,d.Z)({method:"GET",params:t||{}},o||{})));case 1:case"end":return a.stop()}},n)})),T.apply(this,arguments)}}}]);
