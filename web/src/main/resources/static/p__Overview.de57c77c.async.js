(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(Y){Y.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2",nowrap:"nowrap___spq6f"}},81135:function(Y,M,e){"use strict";e.r(M),e.d(M,{default:function(){return we}});var D=e(57663),_=e(71577),L=e(58024),n=e(39144),S=e(13062),I=e(71230),x=e(95300),b=e(7277),w=e(89032),C=e(15746),R=e(71748),d=e(33860),h=e(3182),y=e(2824),U=e(94043),l=e.n(U),O=e(67294),te=e(26516),P=e.n(te),i=e(13254),u=e(14277),f=e(11849),j=e(46066),a=e(68628),t=e(85893),de=function(v){var o={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Z,{className:"fs-16 ib danger mr-10"}),(0,t.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,t.jsx)("div",{className:"of-hidden",children:v.warningList.length>0?(0,t.jsx)(j.Z,(0,f.Z)((0,f.Z)({},o),{},{children:v.warningList.map(function(r){return(0,t.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:r.alarmContent},r.id)})})):(0,t.jsx)(u.Z,{description:"\u6682\u65E0\u544A\u8B66\u4FE1\u606F"})})]})},me=de,pe=e(69610),fe=e(54941),ve=e(81306),ge=e(19809),V=e(69886),z=e(41694),he=V.G2.InteractionAction,ye=V.G2.registerInteraction,_e=V.G2.registerAction,Ce=function(T){(0,ve.Z)(o,T);var v=(0,ge.Z)(o);function o(){return(0,pe.Z)(this,o),v.apply(this,arguments)}return(0,fe.Z)(o,[{key:"active",value:function(){var s=this,Z=this.getView(),p=this.context.event;if(p.data){var c=p.data.items,B=Z.geometries.filter(function(k){return k.type==="point"});(0,z.S6)(B,function(k){(0,z.S6)(k.elements,function($){var F=(0,z.cx)(c,function(re){return re.data===$.data})!==-1,K=$.shape.getChildren(),G=(0,y.Z)(K,2),J=G[0],X=G[1];F?(J.animate({r:10,opacity:.2},{duration:1800,easing:"easeLinear",repeat:!0}),X.animate({r:6,opacity:.4},{duration:800,easing:"easeLinear",repeat:!0})):s.resetElementState($)})})}}},{key:"reset",value:function(){var s=this,Z=this.getView(),p=Z.geometries.filter(function(c){return c.type==="point"});(0,z.S6)(p,function(c){(0,z.S6)(c.elements,function(B){s.resetElementState(B)})})}},{key:"resetElementState",value:function(s){var Z=s.shape.getChildren(),p=(0,y.Z)(Z,2),c=p[0],B=p[1];c.stopAnimate(),B.stopAnimate();var k=c.get("attrs"),$=k.r,F=k.opacity;c.attr({r:$,opacity:F});var K=B.get("attrs"),G=K.r,J=K.opacity;B.attr({r:G,opacity:J})}},{key:"getView",value:function(){return this.context.view}}]),o}(he),Ee=function(v){return(0,O.useEffect)(function(){V.G2.registerShape("point","custom-point",{draw:function(s,Z){var p={x:s.x,y:s.y},c=Z.addGroup();return c.addShape("circle",{name:"outer-point",attrs:{x:p.x,y:p.y,fill:s.color||"red",opacity:.5,r:6}}),c.addShape("circle",{name:"inner-point",attrs:{x:p.x,y:p.y,fill:s.color||"red",opacity:1,r:2}}),c}}),_e("custom-marker-action",Ce),ye("custom-marker-interaction",{start:[{trigger:"tooltip:show",action:"custom-marker-action:active"}],end:[{trigger:"tooltip:hide",action:"custom-marker-action:reset"}]});var o=new V.x1("RangeTimeData",{height:138,autoFit:!0,data:v.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"custom-point",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"custom-marker-interaction"}]});o.render()},[v.data]),(0,t.jsx)("div",{id:"RangeTimeData"})},De=Ee,se=e(83539),H=e(24480),Se=e(6650),ie=e(25377);function Oe(T,v){return ae.apply(this,arguments)}function ae(){return ae=(0,h.Z)(l().mark(function T(v,o){return l().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,ie.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,f.Z)({params:v,method:"GET"},o||{})));case 1:case"end":return s.stop()}},T)})),ae.apply(this,arguments)}function Ze(T){return ne.apply(this,arguments)}function ne(){return ne=(0,h.Z)(l().mark(function T(v){return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,ie.WY)("/api/skyflying/getOverviewOfSystem",(0,f.Z)({method:"GET"},v||{})));case 1:case"end":return r.stop()}},T)})),ne.apply(this,arguments)}var xe=e(66572),Ue=e(2335),je=e(52778),Te=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,render:function(v,o){var r=JSON.parse(o.usualVisitedData),s=r.tableName,Z=r.tableNameDesc,p=s.split("#"),c="-";return Z?c=Z:p.length>1&&(c=p[p.length-1]),(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:c})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],Ae=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(v,o){var r="-";if(o.tableNameDesc)r=o.tableNameDesc;else{var s=o.tableName.split("#");r=s[s.length-1]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:r})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center"},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,align:"center"}],be=function(v){var o=(0,O.useState)(),r=(0,y.Z)(o,2),s=r[0],Z=r[1],p=(0,O.useState)([]),c=(0,y.Z)(p,2),B=c[0],k=c[1],$=(0,O.useState)([]),F=(0,y.Z)($,2),K=F[0],G=F[1],J=(0,O.useState)([]),X=(0,y.Z)(J,2),re=X[0],ue=X[1],Be=(0,O.useState)(0),le=(0,y.Z)(Be,2),We=le[0],Ne=le[1],Ie=(0,O.useState)({pageSize:10,pageNo:1}),Re=(0,y.Z)(Ie,1),Q=Re[0],Pe=(0,O.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),oe=(0,y.Z)(Pe,2),q=oe[0],Me=oe[1];function ke(){(0,Ue.cD)({pageSize:100,pageNo:1}).then(function(W){var m=W.data;if(m){var E=JSON.parse(m);if(E){var g=JSON.parse(E.rows);ue(g.map(function(A,N){return A.matchRuleId=N,A}))}else ue([])}})}var $e=function(){(0,Se.F$)().then(function(m){var E=m.data,g=JSON.parse(E);g&&g.length>0?Z(g.map(function(A){return A.id=H.Z.uuid(),A})):Z([])})},Ge=function(){var m=H.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),E=H.Z.getRangeTime(7,"mm-dd");Oe({startTime:m[0],endTime:m[1]}).then(function(g){var A=g.data;k(function(){return A.map(function(N,ee){return{year:E[ee],value:N}})})})},Le=function(){var W=(0,h.Z)(l().mark(function m(){var E,g;return l().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Ze();case 2:E=N.sent,g=E.data,Me(g);case 5:case"end":return N.stop()}},m)}));return function(){return W.apply(this,arguments)}}(),Fe=function(){var W=(0,h.Z)(l().mark(function m(){return l().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:case"end":return g.stop()}},m)}));return function(){return W.apply(this,arguments)}}(),ce=function(m){(0,xe.m)(m).then(function(E){var g=E.data;if(g){var A=JSON.parse(g);if(Ne(A.total),A.rows){var N=JSON.parse(A.rows);G(N.map(function(ee){return ee.id=H.Z.uuid(),ee}));return}}G([])})};return(0,O.useEffect)(function(){$e(),Ge(),ce(Q),Le().then(),Fe().then(),ke()},[Q]),(0,t.jsxs)("div",{className:P().overview,children:[(0,t.jsx)("div",{className:P().staticWrap,children:(0,t.jsxs)(I.Z,{gutter:20,children:[(0,t.jsx)(C.Z,{span:8,children:(0,t.jsx)(d.Z,{active:!0,loading:B.length===0,children:(0,t.jsx)(je.Z,{title:"\u8FD1\u4E03\u5929\u6570\u636E\u6536\u96C6\u60C5\u51B5",chart:(0,t.jsx)("div",{style:{height:"163px"},children:(0,t.jsx)(De,{data:B})})})})}),(0,t.jsx)(C.Z,{span:8,children:(0,t.jsx)(n.Z,{className:P().bgW,title:(0,t.jsx)("div",{className:"text-c",children:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5"}),children:(0,t.jsx)(I.Z,{gutter:20,className:"text-c",style:{height:"162px"},children:(0,t.jsxs)(d.Z,{active:!0,loading:B.length===0,children:[(0,t.jsx)(C.Z,{span:12,className:"mt-15 text-c",children:(0,t.jsx)(b.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:q.visitedInformation,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(C.Z,{span:12,className:"mt-15",children:(0,t.jsx)(b.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:q.dbInstance,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(C.Z,{span:12,className:"mt-20",children:(0,t.jsx)(b.Z,{title:"\u7528\u6237\u4EBA\u6570",value:q.user,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(C.Z,{span:12,className:"mt-20",children:(0,t.jsx)(b.Z,{title:"\u6570\u636E\u5E93\u8868",value:q.table,valueStyle:{color:"#3f8600"}})})]})})})}),(0,t.jsx)(C.Z,{span:8,children:(0,t.jsx)("div",{className:P().waringWrap,children:(0,t.jsx)(me,{warningList:re})})})]})}),(0,t.jsx)("div",{className:P().center,children:(0,t.jsxs)(I.Z,{gutter:30,children:[(0,t.jsx)(C.Z,{span:12,children:(0,t.jsx)(se.ZP,{columns:Te,dataSource:s,scroll:{y:500},options:!1,toolBarRender:function(){return[(0,t.jsx)(_.Z,{type:"link",size:"small",onClick:function(){v.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,pagination:!1,headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,t.jsx)(C.Z,{span:12,className:"pr-10",children:(0,t.jsx)(d.Z,{active:!0,loading:!1,paragraph:{rows:5},children:(0,t.jsx)(se.ZP,{scroll:{y:500},columns:Ae,dataSource:K,options:!1,rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:We,pageSize:Q.pageSize,current:Q.pageNo,onChange:function(m,E){ce({pageNo:m,pageSize:E})}},toolBarRender:function(){return[(0,t.jsx)(_.Z,{type:"link",size:"small",onClick:function(){v.history.push("/databases")},children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u7EDF\u8BA1"})})})]})})]})},we=be},66572:function(Y,M,e){"use strict";e.d(M,{m:function(){return I}});var D=e(11849),_=e(3182),L=e(94043),n=e.n(L),S=e(25377);function I(b,w){return x.apply(this,arguments)}function x(){return x=(0,_.Z)(n().mark(function b(w,C){return n().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,S.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,D.Z)({method:"GET",params:w},C||{})));case 1:case"end":return d.stop()}},b)})),x.apply(this,arguments)}},6650:function(Y,M,e){"use strict";e.d(M,{F$:function(){return I},Xd:function(){return b},et:function(){return d},FP:function(){return y},Bx:function(){return l},wA:function(){return te}});var D=e(11849),_=e(3182),L=e(94043),n=e.n(L),S=e(25377);function I(i){return x.apply(this,arguments)}function x(){return x=(0,_.Z)(n().mark(function i(u){return n().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,S.WY)("/api/skyflying/getCoarseCountsOfUser",(0,D.Z)({method:"GET"},u||{})));case 1:case"end":return j.stop()}},i)})),x.apply(this,arguments)}function b(i,u){return w.apply(this,arguments)}function w(){return w=(0,_.Z)(n().mark(function i(u,f){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,D.Z)({method:"GET",params:u},f||{})));case 1:case"end":return a.stop()}},i)})),w.apply(this,arguments)}function C(i,u){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime.mark(function i(u,f){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:u},f||{})));case 1:case"end":return a.stop()}},i)})),R.apply(this,arguments)}function d(i,u){return h.apply(this,arguments)}function h(){return h=(0,_.Z)(n().mark(function i(u,f){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCountsOfUser",(0,D.Z)({method:"GET",params:u},f||{})));case 1:case"end":return a.stop()}},i)})),h.apply(this,arguments)}function y(i,u){return U.apply(this,arguments)}function U(){return U=(0,_.Z)(n().mark(function i(u,f){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getUserOperationTypeCount",(0,D.Z)({method:"GET",params:u},f||{})));case 1:case"end":return a.stop()}},i)})),U.apply(this,arguments)}function l(i,u){return O.apply(this,arguments)}function O(){return O=(0,_.Z)(n().mark(function i(u,f){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,D.Z)({method:"GET",params:u},f||{})));case 1:case"end":return a.stop()}},i)})),O.apply(this,arguments)}function te(i,u){return P.apply(this,arguments)}function P(){return P=(0,_.Z)(n().mark(function i(u,f){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,D.Z)({method:"GET",params:u||{}},f||{})));case 1:case"end":return a.stop()}},i)})),P.apply(this,arguments)}},2335:function(Y,M,e){"use strict";e.d(M,{rO:function(){return I},cD:function(){return b},sF:function(){return C}});var D=e(11849),_=e(3182),L=e(94043),n=e.n(L),S=e(25377);function I(d){return x.apply(this,arguments)}function x(){return x=(0,_.Z)(n().mark(function d(h){return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,S.WY)("/api/skyflying/getUserNameAnomalyDetectionInfo",(0,D.Z)({method:"GET"},h||{})));case 1:case"end":return U.stop()}},d)})),x.apply(this,arguments)}function b(d,h){return w.apply(this,arguments)}function w(){return w=(0,_.Z)(n().mark(function d(h,y){return n().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,S.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,D.Z)({method:"GET",params:h||{}},y||{})));case 1:case"end":return l.stop()}},d)})),w.apply(this,arguments)}function C(d,h){return R.apply(this,arguments)}function R(){return R=(0,_.Z)(n().mark(function d(h,y){return n().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,S.WY)("/api/skyflying/getAnomalyDetectionInfoByGroupByUserName",(0,D.Z)({method:"GET",params:h||{}},y||{})));case 1:case"end":return l.stop()}},d)})),R.apply(this,arguments)}}}]);
