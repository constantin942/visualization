(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[462],{33599:function(de){de.exports={userAccess:"userAccess___1UdBc","detail-wrap":"detail-wrap___2mcEh","tabs-wrap":"tabs-wrap___3PPX8","content-wrap":"content-wrap___2U6yp",visitedData:"visitedData___1KcWz",visitedCount:"visitedCount___Z0bCy"}},99210:function(){},27226:function(de,k,t){"use strict";t.r(k),t.d(k,{default:function(){return Ee}});var f=t(3182),T=t(57663),G=t(71577),a=t(34792),M=t(48086),Y=t(86582),A=t(2824),pe=t(94043),b=t.n(pe),O=t(67294),re=t(33599),ge=t.n(re),z=t(24480),ye=t(84674),se=t(84437),K=t(6650),ie=t(13062),ve=t(71230),J=t(89032),le=t(15746),me=t(22385),i=t(61580),l=t(90387),h=t(9536),R=t(69886),e=t(85893),n=function(r){var d=(0,O.useCallback)(function(){var u=new R.by("ActionPie".concat(r.id),{autoFit:!0,height:250,appendPadding:10,data:r.types,angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});u.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),u.render()},[]);return(0,O.useEffect)(function(){d()},[d]),(0,e.jsx)("div",{id:"ActionPie"+r.id})},p=n,o=t(39004),g=function(r){var d=(0,O.useCallback)(function(){var u=new o.kL({container:"RecentlyLine".concat(r.id),autoFit:!0,height:200});u.data(r.ranges),u.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),u.tooltip({showNil:!1,showCrosshairs:!1,title:function(Z,v){return"".concat(Z,"\uFF1A").concat(v.value," \u6B21")},itemTpl:`<div class="g2-tooltip">
  <div class="g2-tooltip-title">Language</div>
  <ul class="g2-tooltip-list">
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">a</span>:<span class="g2-tooltip-value">70</span>
    </li>
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">b</span>:<span class="g2-tooltip-value">50</span>
    </li>
  </ul>
</div>`}),u.axis("value",{label:{}}),u.area().position("year*value"),u.line().position("year*value"),u.render()},[]);return(0,O.useEffect)(function(){d()},[d]),(0,e.jsx)("div",{id:"RecentlyLine"+r.id})},y=g,_=t(69610),H=t(54941),q=t(81306),ue=t(19809),B=t(41694),ee=function(C){(0,q.Z)(d,C);var r=(0,ue.Z)(d);function d(){return(0,_.Z)(this,d),r.apply(this,arguments)}return(0,H.Z)(d,[{key:"active",value:function(){var s=this,Z=this.getView(),v=this.context.event;if(v.data){var m=v.data.items,E=Z.geometries.filter(function(x){return x.type==="point"});(0,B.S6)(E,function(x){(0,B.S6)(x.elements,function(L){var ae=(0,B.cx)(m,function(j){return j.data===L.data})!==-1,X=L.shape.getChildren(),Q=(0,A.Z)(X,2),V=Q[0],F=Q[1];ae?(V.animate({r:10,opacity:.2},{duration:1800,easing:"easeLinear",repeat:!0}),F.animate({r:6,opacity:.4},{duration:800,easing:"easeLinear",repeat:!0})):s.resetElementState(L)})})}}},{key:"reset",value:function(){var s=this,Z=this.getView(),v=Z.geometries.filter(function(m){return m.type==="point"});(0,B.S6)(v,function(m){(0,B.S6)(m.elements,function(E){s.resetElementState(E)})})}},{key:"resetElementState",value:function(s){var Z=s.shape.getChildren(),v=(0,A.Z)(Z,2),m=v[0],E=v[1];m.stopAnimate(),E.stopAnimate();var x=m.get("attrs"),L=x.r,ae=x.opacity;m.attr({r:L,opacity:ae});var X=E.get("attrs"),Q=X.r,V=X.opacity;E.attr({r:Q,opacity:V})}},{key:"getView",value:function(){return this.context.view}}]),d}(o.Mx),te=function(r){return(0,O.useEffect)(function(){R.G2.registerShape("point","custom-point",{draw:function(s,Z){var v={x:s.x,y:s.y},m=Z.addGroup();return m.addShape("circle",{name:"outer-point",attrs:{x:v.x,y:v.y,fill:s.color||"red",opacity:.5,r:6}}),m.addShape("circle",{name:"inner-point",attrs:{x:v.x,y:v.y,fill:s.color||"red",opacity:1,r:2}}),m}}),(0,o.zl)("custom-marker-action",ee),(0,o.w_)("custom-marker-interaction",{start:[{trigger:"tooltip:show",action:"custom-marker-action:active"}],end:[{trigger:"tooltip:hide",action:"custom-marker-action:reset"}]});var d=new R.x1("24hours".concat(r.id),{height:250,autoFit:!0,data:r.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"custom-point",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1,formatter:function(s){return{name:"\u8BBF\u95EE\u6B21\u6570",value:s.value+"\u6B21"}}},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"custom-marker-interaction"}]});d.render()},[]),(0,e.jsx)("div",{id:"24hours"+r.id})},I=te,oe=[{label:"\u7ECF\u5E38\u8BBF\u95EE\u7684\u6570\u636E",value:"higher"},{label:"\u4E0D\u5E38\u8BBF\u95EE\u7684\u6570\u636E",value:"lower"}],fe=function(r){var d,u,s,Z=(0,O.useState)(oe[0].value),v=(0,A.Z)(Z,2),m=v[0],E=v[1];return(0,e.jsxs)(ve.Z,{className:r.style["detail-wrap"],children:[(0,e.jsxs)(le.Z,{span:8,className:r.style["tabs-wrap"],children:[(0,e.jsx)(h.Z,{block:!0,options:oe,value:m,onChange:E}),(0,e.jsx)("div",{className:r.style["content-wrap"],children:(d=r.details)===null||d===void 0||(u=d.higherOrLower)===null||u===void 0||(s=u[m])===null||s===void 0?void 0:s.map(function(x){return(0,e.jsxs)("div",{className:"flex-x-sb",children:[(0,e.jsx)(i.Z,{title:x.visitedData,children:(0,e.jsx)("span",{id:"visitedData",className:r.style.visitedData,children:x.visitedData})}),(0,e.jsxs)("span",{className:r.style.visitedCount,children:[x.visitedCount," \u6B21"]})]},x.visitedData)})})]}),(0,e.jsxs)(le.Z,{span:16,className:"pl-10 pr-20",children:[(0,e.jsxs)(ve.Z,{children:[(0,e.jsxs)(le.Z,{span:12,className:"text-c",children:[(0,e.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,e.jsx)(p,{types:r.details.types,id:r.id})]}),(0,e.jsxs)(le.Z,{span:12,className:"text-c",children:[(0,e.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,e.jsx)(y,{ranges:r.details.ranges,id:r.id})]})]}),(0,e.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,e.jsx)("h3",{children:"\u8BBF\u95EE\u65F6\u6BB5\u5206\u5E03"}),(0,e.jsx)(I,{data:r.details.intervals,id:r.id})]})]})]})},Ce=fe,N=function(){var r=(0,O.useState)(),d=(0,A.Z)(r,2),u=d[0],s=d[1],Z=(0,O.useState)(""),v=(0,A.Z)(Z,2),m=v[0],E=v[1],x=(0,O.useState)({types:[],intervals:[],ranges:[],higherOrLower:{higher:[],lower:[]}}),L=(0,A.Z)(x,2),ae=L[0],X=L[1],Q=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"applicationUserName",align:"center",initialValue:""},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,width:100,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(j,c){return[(0,e.jsx)(G.Z,{type:"link",size:"small",onClick:function(){if(m===c.id){E(""),X({types:[],intervals:[],ranges:[],higherOrLower:{higher:[],lower:[]}});return}if(c.visitedCount!==0){var W=c.usualVisitedData,De=z.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),S=z.Z.getRangeTime(7,"YYYY-mm-dd HH:MM:SS");(0,K.Xd)({applicationUserName:c.userName,startTime:De[0],endTime:De[1],tableName:W}).then(function(U){var P=U.data;if(P&&P.length>0){var xe=P.map(function(w,D){return{year:S[D],value:w}}),he=(0,Y.Z)(ye.q);(0,K.FP)({userName:c.userName}).then(function(w){w.data&&w.data.length>0&&he.forEach(function(D){w.data.forEach(function($){var ne=JSON.parse($),Ze=ne.dbType,Ae=ne.dbTypeTimes;D.type===Ze&&(D.value=parseInt(Ae))})})});var Se=[];(0,K.mt)(c.userName).then(function(w){w.data&&(Se=Object.keys(w.data).map(function(D){return{temp:parseInt(D.replace(/[^0-9]/ig,"")),year:D.replace(/[^0-9]/ig,"")+":00",value:w.data[D]}}).sort(function(D,$){return D.temp-$.temp})),(0,K.Bx)({applicationUserName:c.userName}).then(function(D){D.data&&(D.data.high.forEach(function($){var ne=$.visitedData.split("#");return $.visitedData=ne[ne.length-1],$}),D.data.low.forEach(function($){var ne=$.visitedData.split("#");return $.visitedData=ne[ne.length-1],$}),X(function(){return{types:he,intervals:Se,ranges:xe,higherOrLower:{higher:D.data.high,lower:D.data.low}}}),E(c.id))})})}})}else M.ZP.info("".concat(c.userName,"\u7528\u6237\u8BBF\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],V=function(j){(0,K.F$)(j).then(function(c){var ce=c.data;ce&&ce.length>0?s(ce.map(function(W){return W.id=z.Z.uuid(),W})):s([])})};return(0,O.useEffect)(function(){V()},[]),(0,e.jsx)("div",{className:ge().userAccess,children:(0,e.jsx)(se.Z,{headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A\u7EDF\u8BA1\u5217\u8868",columns:Q,rowKey:"id",search:{searchText:"\u67E5\u8BE2",resetText:"\u91CD\u7F6E"},onReset:(0,f.Z)(b().mark(function F(){return b().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:V();case 1:case"end":return c.stop()}},F)})),pagination:!1,options:!1,onSubmit:function(){var F=(0,f.Z)(b().mark(function j(c){return b().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:Object.keys(c).length>0?(console.log(c),V({username:c.applicationUserName})):V();case 1:case"end":return W.stop()}},j)}));return function(j){return F.apply(this,arguments)}}(),expandable:{expandedRowRender:function(j,c){return(0,e.jsx)(Ce,{details:ae,id:c,style:ge()},c)},expandIcon:function(){return!1},expandedRowKeys:[m]},dataSource:u})})},Ee=N},84674:function(de,k,t){"use strict";t.d(k,{q:function(){return f}});var f=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],T=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},6650:function(de,k,t){"use strict";t.d(k,{F$:function(){return Y},Xd:function(){return pe},mt:function(){return O},et:function(){return ye},FP:function(){return K},Bx:function(){return ve}});var f=t(11849),T=t(3182),G=t(94043),a=t.n(G),M=t(25377);function Y(i,l){return A.apply(this,arguments)}function A(){return A=(0,T.Z)(a().mark(function i(l,h){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.WY)("/api/skyflying/getCoarseCountsOfUsers",(0,f.Z)({method:"GET",params:l},h||{})));case 1:case"end":return e.stop()}},i)})),A.apply(this,arguments)}function pe(i,l){return b.apply(this,arguments)}function b(){return b=(0,T.Z)(a().mark(function i(l,h){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,f.Z)({method:"GET",params:l},h||{})));case 1:case"end":return e.stop()}},i)})),b.apply(this,arguments)}function O(i,l){return re.apply(this,arguments)}function re(){return re=(0,T.Z)(a().mark(function i(l,h){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.WY)("/api/skyflying/getVisitRate",(0,f.Z)({method:"GET",params:{username:l}},h||{})));case 1:case"end":return e.stop()}},i)})),re.apply(this,arguments)}function ge(i,l){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime.mark(function i(l,h){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:l},h||{})));case 1:case"end":return e.stop()}},i)})),z.apply(this,arguments)}function ye(i,l){return se.apply(this,arguments)}function se(){return se=(0,T.Z)(a().mark(function i(l,h){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.WY)("/api/skyflying/getCountsOfUser",(0,f.Z)({method:"GET",params:l},h||{})));case 1:case"end":return e.stop()}},i)})),se.apply(this,arguments)}function K(i,l){return ie.apply(this,arguments)}function ie(){return ie=(0,T.Z)(a().mark(function i(l,h){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.WY)("/api/skyflying/getUserOperationTypeCount",(0,f.Z)({method:"GET",params:l},h||{})));case 1:case"end":return e.stop()}},i)})),ie.apply(this,arguments)}function ve(i,l){return J.apply(this,arguments)}function J(){return J=(0,T.Z)(a().mark(function i(l,h){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,f.Z)({method:"GET",params:l},h||{})));case 1:case"end":return e.stop()}},i)})),J.apply(this,arguments)}function le(i,l){return me.apply(this,arguments)}function me(){return me=_asyncToGenerator(_regeneratorRuntime.mark(function i(l,h){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/skyflying/getCoarseCountsOfOneUser",_objectSpread({method:"GET",params:l||{}},h||{})));case 1:case"end":return e.stop()}},i)})),me.apply(this,arguments)}},9536:function(de,k,t){"use strict";t.d(k,{Z:function(){return R}});var f=t(96156),T=t(22122),G=t(90484),a=t(67294),M=t(94184),Y=t.n(M),A=t(28481),pe=t(81253),b=t(28991),O=t(63441),re=t(21770),ge=t(42550),z=t(98423),ye=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function se(e){if(typeof e.title!="undefined")return e.title;if((0,G.Z)(e.label)!=="object"){var n;return(n=e.label)===null||n===void 0?void 0:n.toString()}}function K(e){return e.map(function(n){if((0,G.Z)(n)==="object"&&n!==null){var p=se(n);return(0,b.Z)((0,b.Z)({},n),{},{title:p})}return{label:n==null?void 0:n.toString(),title:n==null?void 0:n.toString(),value:n}})}var ie=function(n){return{transform:"translateX(".concat(n.offsetLeft,"px)"),width:n.clientWidth}},ve=function(n){var p=n.prefixCls,o=n.className,g=n.disabled,y=n.checked,_=n.label,H=n.title,q=n.value,ue=n.onChange,B=function(te){g||ue(te,q)};return a.createElement("label",{className:Y()(o,(0,f.Z)({},"".concat(p,"-item-disabled"),g))},a.createElement("input",{className:"".concat(p,"-item-input"),type:"radio",disabled:g,checked:y,onChange:B}),a.createElement("div",{className:"".concat(p,"-item-label"),title:H},_))},J=a.forwardRef(function(e,n){var p,o,g=e.prefixCls,y=g===void 0?"rc-segmented":g,_=e.direction,H=e.options,q=e.disabled,ue=e.defaultValue,B=e.value,ee=e.onChange,te=e.className,I=te===void 0?"":te,oe=e.motionName,fe=oe===void 0?"thumb-motion":oe,Ce=(0,pe.Z)(e,ye),N=a.useRef(null),Ee=(0,ge.sQ)(N,n),C=a.useRef({from:null,to:null}),r=a.useMemo(function(){return K(H)},[H]),d=(0,re.Z)((p=r[0])===null||p===void 0?void 0:p.value,{value:e.value,defaultValue:ue}),u=(0,A.Z)(d,2),s=u[0],Z=u[1],v=a.useState(s),m=(0,A.Z)(v,2),E=m[0],x=m[1],L=a.useState(!1),ae=(0,A.Z)(L,2),X=ae[0],Q=ae[1],V=a.useCallback(function(S){var U,P=r.findIndex(function(w){return w.value===S});if(!(P<0)){var xe=(U=N.current)===null||U===void 0?void 0:U.querySelector(".".concat(y,"-item:nth-child(").concat(P+1,")"));if(xe){var he,Se=(he=N.current)===null||he===void 0?void 0:he.querySelector(".".concat(y,"-item-selected"));Se&&xe&&C.current&&(C.current.from=ie(Se),C.current.to=ie(xe),Q(!0))}}},[y,r]),F=a.useRef(E);a.useEffect(function(){F.current=E}),a.useEffect(function(){(typeof s=="string"||typeof s=="number")&&s!==F.current&&V(s)},[s]);var j=function(U,P){q||(Z(P),ee==null||ee(P))},c=function(){var U=C.current.from;if(U)return x(void 0),U},ce=function(){var U=C.current.to;if(U)return U},W=function(){Q(!1),x(s),C.current&&(C.current={from:null,to:null})},De=(0,z.Z)(Ce,["children"]);return a.createElement("div",(0,b.Z)((0,b.Z)({},De),{},{className:Y()(y,(o={},(0,f.Z)(o,"".concat(y,"-rtl"),_==="rtl"),(0,f.Z)(o,"".concat(y,"-disabled"),q),o),I),ref:Ee}),a.createElement(O.Z,{visible:X,motionName:"".concat(y,"-").concat(fe),motionDeadline:300,onEnterStart:c,onEnterActive:ce,onEnterEnd:W},function(S){var U=S.className,P=S.style;return a.createElement("div",{style:P,className:Y()("".concat(y,"-thumb"),U)})}),r.map(function(S){return a.createElement(ve,(0,b.Z)({key:S.value,prefixCls:y,className:Y()(S.className,"".concat(y,"-item"),(0,f.Z)({},"".concat(y,"-item-selected"),S.value===E)),checked:S.value===s,onChange:j},S))}))});J.displayName="Segmented",J.defaultProps={options:[]};var le=J,me=t(65632),i=t(97647),l=function(e,n){var p={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(p[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,o=Object.getOwnPropertySymbols(e);g<o.length;g++)n.indexOf(o[g])<0&&Object.prototype.propertyIsEnumerable.call(e,o[g])&&(p[o[g]]=e[o[g]]);return p},h=a.forwardRef(function(e,n){var p,o=e.prefixCls,g=e.className,y=e.block,_=e.options,H=e.size,q=H===void 0?"middle":H,ue=l(e,["prefixCls","className","block","options","size"]),B=a.useContext(me.E_),ee=B.getPrefixCls,te=B.direction,I=ee("segmented",o),oe=a.useContext(i.Z),fe=q||oe,Ce=a.useMemo(function(){return _.map(function(N){if((0,G.Z)(N)==="object"&&(N==null?void 0:N.icon)){var Ee=N.icon,C=N.label,r=l(N,["icon","label"]);return(0,T.Z)((0,T.Z)({},r),{label:a.createElement(a.Fragment,null,a.createElement("span",{className:"".concat(I,"-item-icon")},Ee),a.createElement("span",null,C))})}return N})},[_,I]);return a.createElement(le,(0,T.Z)({},ue,{className:Y()(g,(p={},(0,f.Z)(p,"".concat(I,"-block"),y),(0,f.Z)(p,"".concat(I,"-sm"),fe==="small"),(0,f.Z)(p,"".concat(I,"-lg"),fe==="large"),p)),options:Ce,ref:n,prefixCls:I,direction:te}))});h.displayName="Segmented",h.defaultProps={options:[]};var R=h},90387:function(de,k,t){"use strict";var f=t(38663),T=t.n(f),G=t(99210),a=t.n(G)}}]);
