(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(z){z.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2",nowrap:"nowrap___spq6f"}},81135:function(z,k,e){"use strict";e.r(k),e.d(k,{default:function(){return We}});var E=e(57663),p=e(71577),K=e(58024),i=e(39144),S=e(13062),M=e(71230),T=e(22385),w=e(61580),N=e(95300),R=e(7277),P=e(89032),l=e(15746),U=e(71748),I=e(33860),y=e(3182),o=e(2824),J=e(94043),W=e.n(J),_=e(67294),ue=e(26516),G=e.n(ue),le=e(13254),H=e(14277),n=e(11849),r=e(46066),m=e(68628),t=e(85893),a=function(f){var d={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{className:"fs-16 ib danger mr-10"}),(0,t.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,t.jsx)("div",{className:"of-hidden",children:f.warningList.length>0?(0,t.jsx)(r.Z,(0,n.Z)((0,n.Z)({},d),{},{children:f.warningList.map(function(u){return(0,t.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:u.alarmContent},u.id)})})):(0,t.jsx)(H.Z,{description:"\u6682\u65E0\u544A\u8B66\u4FE1\u606F"})})]})},he=a,ye=e(69610),_e=e(54941),Ce=e(81306),Ee=e(19809),X=e(69886),Q=e(41694),Se=X.G2.InteractionAction,De=X.G2.registerInteraction,Ze=X.G2.registerAction,Oe=function(j){(0,Ce.Z)(d,j);var f=(0,Ee.Z)(d);function d(){return(0,ye.Z)(this,d),f.apply(this,arguments)}return(0,_e.Z)(d,[{key:"active",value:function(){var s=this,O=this.getView(),D=this.context.event;if(D.data){var g=D.data.items,B=O.geometries.filter(function($){return $.type==="point"});(0,Q.S6)(B,function($){(0,Q.S6)($.elements,function(L){var Y=(0,Q.cx)(g,function(se){return se.data===L.data})!==-1,V=L.shape.getChildren(),F=(0,o.Z)(V,2),q=F[0],ee=F[1];Y?(q.animate({r:10,opacity:.2},{duration:1800,easing:"easeLinear",repeat:!0}),ee.animate({r:6,opacity:.4},{duration:800,easing:"easeLinear",repeat:!0})):s.resetElementState(L)})})}}},{key:"reset",value:function(){var s=this,O=this.getView(),D=O.geometries.filter(function(g){return g.type==="point"});(0,Q.S6)(D,function(g){(0,Q.S6)(g.elements,function(B){s.resetElementState(B)})})}},{key:"resetElementState",value:function(s){var O=s.shape.getChildren(),D=(0,o.Z)(O,2),g=D[0],B=D[1];g.stopAnimate(),B.stopAnimate();var $=g.get("attrs"),L=$.r,Y=$.opacity;g.attr({r:L,opacity:Y});var V=B.get("attrs"),F=V.r,q=V.opacity;B.attr({r:F,opacity:q})}},{key:"getView",value:function(){return this.context.view}}]),d}(Se),Te=function(f){return(0,_.useEffect)(function(){X.G2.registerShape("point","custom-point",{draw:function(s,O){var D={x:s.x,y:s.y},g=O.addGroup();return g.addShape("circle",{name:"outer-point",attrs:{x:D.x,y:D.y,fill:s.color||"red",opacity:.5,r:6}}),g.addShape("circle",{name:"inner-point",attrs:{x:D.x,y:D.y,fill:s.color||"red",opacity:1,r:2}}),g}}),Ze("custom-marker-action",Oe),De("custom-marker-interaction",{start:[{trigger:"tooltip:show",action:"custom-marker-action:active"}],end:[{trigger:"tooltip:hide",action:"custom-marker-action:reset"}]});var d=new X.x1("RangeTimeData",{height:138,autoFit:!0,data:f.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"custom-point",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1,formatter:function(s){return{name:"\u5F53\u65E5\u6536\u96C6\u6570\u91CF",value:s.value+"\u6761"}}},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"custom-marker-interaction"}]});d.render()},[]),(0,t.jsx)("div",{id:"RangeTimeData"})},Ue=Te,oe=e(60355),x=e(24480),xe=e(6650),ce=e(25377);function je(j,f){return ne.apply(this,arguments)}function ne(){return ne=(0,y.Z)(W().mark(function j(f,d){return W().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,ce.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,n.Z)({params:f,method:"GET"},d||{})));case 1:case"end":return s.stop()}},j)})),ne.apply(this,arguments)}function be(j){return re.apply(this,arguments)}function re(){return re=(0,y.Z)(W().mark(function j(f){return W().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,ce.WY)("/api/skyflying/getOverviewOfSystem",(0,n.Z)({method:"GET"},f||{})));case 1:case"end":return u.stop()}},j)})),re.apply(this,arguments)}var Ae=e(66572),we=e(2335),Ne=e(52778),Be=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,render:function(f,d){var u="-",s=JSON.parse(d.usualVisitedData);if(s.tableNameDesc)u=s.tableNameDesc;else{var O=s.tableName.split("#");O.shift(),O.length>0?u=O.join("#"):u=s.tableName}return(0,t.jsx)("div",{children:u})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],Re=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(f,d){var u="-";if(d.tableNameDesc)u=d.tableNameDesc;else{var s=d.tableName.split("#");u=s[s.length-1]}return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:u})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center"},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,align:"center"}],Ie=function(f){var d=(0,_.useState)(),u=(0,o.Z)(d,2),s=u[0],O=u[1],D=(0,_.useState)([]),g=(0,o.Z)(D,2),B=g[0],$=g[1],L=(0,_.useState)([]),Y=(0,o.Z)(L,2),V=Y[0],F=Y[1],q=(0,_.useState)([]),ee=(0,o.Z)(q,2),se=ee[0],de=ee[1],Me=(0,_.useState)(),me=(0,o.Z)(Me,2),Pe=me[0],Ge=me[1],ke=(0,_.useState)(0),pe=(0,o.Z)(ke,2),$e=pe[0],Le=pe[1],Fe=(0,_.useState)({pageSize:10,pageNo:1}),Ke=(0,o.Z)(Fe,1),ie=Ke[0],Ye=(0,_.useState)({pageSize:10,pageNo:1}),Ve=(0,o.Z)(Ye,1),te=Ve[0],ze=(0,_.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),fe=(0,o.Z)(ze,2),b=fe[0],Je=fe[1];function He(){(0,we.cD)({pageSize:100,pageNo:1}).then(function(A){var c=A.data;if(c){var v=JSON.parse(c);if(v){var h=JSON.parse(v.rows);de(h.map(function(C,Z){return C.matchRuleId=Z,C}))}else de([])}})}var ge=function(c){(0,xe.F$)(c).then(function(v){var h=v.data,C=JSON.parse(h);C&&(Ge(C.total),C.rows&&Array.isArray(C.rows)&&O(C.rows.map(function(Z){return Z.id=x.Z.uuid(),Z})))})},Xe=function(){var c=x.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),v=x.Z.getRangeTime(7,"mm-dd");je({startTime:c[0],endTime:c[1]}).then(function(h){var C=h.data;$(function(){return C.map(function(Z,ae){return{year:v[ae],value:Z}})})})},Qe=function(){var A=(0,y.Z)(W().mark(function c(){var v,h;return W().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,be();case 2:v=Z.sent,h=v.data,console.log(h),Je(h);case 6:case"end":return Z.stop()}},c)}));return function(){return A.apply(this,arguments)}}(),qe=function(){var A=(0,y.Z)(W().mark(function c(){return W().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:case"end":return h.stop()}},c)}));return function(){return A.apply(this,arguments)}}(),ve=function(c){(0,Ae.m)(c).then(function(v){var h=v.data;if(h){var C=JSON.parse(h);if(Le(C.total),C.rows){var Z=JSON.parse(C.rows);F(Z.map(function(ae){return ae.id=x.Z.uuid(),ae}));return}}F([])})};return(0,_.useEffect)(function(){ge(ie),Xe(),ve(te),Qe().then(),qe().then(),He()},[te]),(0,t.jsxs)("div",{className:G().overview,children:[(0,t.jsx)("div",{className:G().staticWrap,children:(0,t.jsxs)(M.Z,{gutter:20,children:[(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)(I.Z,{active:!0,loading:B.length===0,children:(0,t.jsx)(Ne.Z,{title:"\u8FD1\u4E03\u5929\u6570\u636E\u6536\u96C6\u60C5\u51B5",chart:(0,t.jsx)("div",{style:{height:"163px"},children:(0,t.jsx)(Ue,{data:B})})})})}),(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)(i.Z,{className:G().bgW,title:(0,t.jsx)("div",{className:"text-c",children:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5"}),children:(0,t.jsx)(M.Z,{gutter:20,className:"text-c",children:(0,t.jsxs)(I.Z,{active:!0,loading:B.length===0,children:[(0,t.jsx)(l.Z,{span:12,className:"mt-15 text-c",children:(0,t.jsx)(w.Z,{placement:"top",title:b.visitedInformation>=x.Z.BIG_NUMBER?b.visitedInformation.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:x.Z.bigNumberTransform(b.visitedInformation),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(l.Z,{span:12,className:"mt-15",children:(0,t.jsx)(w.Z,{placement:"top",title:b.dbInstance>=x.Z.BIG_NUMBER?b.dbInstance.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:x.Z.bigNumberTransform(b.dbInstance),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(l.Z,{span:12,className:"mt-20",children:(0,t.jsx)(w.Z,{placement:"top",title:b.user>=x.Z.BIG_NUMBER?b.user.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u7528\u6237\u4EBA\u6570",value:x.Z.bigNumberTransform(b.user),valueStyle:{color:"#3f8600"}})})}),(0,t.jsx)(l.Z,{span:12,className:"mt-20",children:(0,t.jsx)(w.Z,{placement:"top",title:b.table>=x.Z.BIG_NUMBER?b.table.toLocaleString():"",children:(0,t.jsx)(R.Z,{title:"\u6570\u636E\u5E93\u8868",value:x.Z.bigNumberTransform(b.table),valueStyle:{color:"#3f8600"}})})})]})})})}),(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)("div",{className:G().waringWrap,children:(0,t.jsx)(he,{warningList:se})})})]})}),(0,t.jsx)("div",{className:G().center,children:(0,t.jsxs)(M.Z,{gutter:30,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(oe.ZP,{columns:Be,dataSource:s,scroll:{y:500},options:!1,toolBarRender:function(){return[(0,t.jsx)(p.Z,{type:"link",size:"small",onClick:function(){f.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:Pe,pageSize:ie.pageSize,current:ie.pageNo,onChange:function(c,v){ge({pageNo:c,pageSize:v})}},headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,t.jsx)(l.Z,{span:12,className:"pr-10",children:(0,t.jsx)(I.Z,{active:!0,loading:!1,paragraph:{rows:5},children:(0,t.jsx)(oe.ZP,{scroll:{y:500},columns:Re,dataSource:V,options:!1,rowKey:"id",search:!1,pagination:{showSizeChanger:!1,total:$e,pageSize:te.pageSize,current:te.pageNo,onChange:function(c,v){ve({pageNo:c,pageSize:v})}},toolBarRender:function(){return[(0,t.jsx)(p.Z,{type:"link",size:"small",onClick:function(){f.history.push("/databases")},children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u7EDF\u8BA1"})})})]})})]})},We=Ie},66572:function(z,k,e){"use strict";e.d(k,{m:function(){return M}});var E=e(11849),p=e(3182),K=e(94043),i=e.n(K),S=e(25377);function M(w,N){return T.apply(this,arguments)}function T(){return T=(0,p.Z)(i().mark(function w(N,R){return i().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,S.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,E.Z)({method:"GET",params:N},R||{})));case 1:case"end":return l.stop()}},w)})),T.apply(this,arguments)}},6650:function(z,k,e){"use strict";e.d(k,{F$:function(){return M},Xd:function(){return w},mt:function(){return R},et:function(){return I},FP:function(){return o},Bx:function(){return W},us:function(){return le}});var E=e(11849),p=e(3182),K=e(94043),i=e.n(K),S=e(25377);function M(n,r){return T.apply(this,arguments)}function T(){return T=(0,p.Z)(i().mark(function n(r,m){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCoarseCountsOfUsers",(0,E.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),T.apply(this,arguments)}function w(n,r){return N.apply(this,arguments)}function N(){return N=(0,p.Z)(i().mark(function n(r,m){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,E.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),N.apply(this,arguments)}function R(n,r){return P.apply(this,arguments)}function P(){return P=(0,p.Z)(i().mark(function n(r,m){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getVisitRate",(0,E.Z)({method:"GET",params:{username:r}},m||{})));case 1:case"end":return a.stop()}},n)})),P.apply(this,arguments)}function l(n,r){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,m){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),U.apply(this,arguments)}function I(n,r){return y.apply(this,arguments)}function y(){return y=(0,p.Z)(i().mark(function n(r,m){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCountsOfUser",(0,E.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),y.apply(this,arguments)}function o(n,r){return J.apply(this,arguments)}function J(){return J=(0,p.Z)(i().mark(function n(r,m){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getUserOperationTypeCount",(0,E.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),J.apply(this,arguments)}function W(n,r){return _.apply(this,arguments)}function _(){return _=(0,p.Z)(i().mark(function n(r,m){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,E.Z)({method:"GET",params:r},m||{})));case 1:case"end":return a.stop()}},n)})),_.apply(this,arguments)}function ue(n,r){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,m){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCoarseCountsOfOneUser",_objectSpread({method:"GET",params:r||{}},m||{})));case 1:case"end":return a.stop()}},n)})),G.apply(this,arguments)}function le(n,r){return H.apply(this,arguments)}function H(){return H=(0,p.Z)(i().mark(function n(r,m){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,S.WY)("/api/skyflying/getCountsOfEveryonRecentSevenDays",(0,E.Z)({method:"GET",params:r||{}},m||{})));case 1:case"end":return a.stop()}},n)})),H.apply(this,arguments)}},2335:function(z,k,e){"use strict";e.d(k,{rO:function(){return M},cD:function(){return w},sF:function(){return R}});var E=e(11849),p=e(3182),K=e(94043),i=e.n(K),S=e(25377);function M(l){return T.apply(this,arguments)}function T(){return T=(0,p.Z)(i().mark(function l(U){return i().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,S.WY)("/api/skyflying/getUserNameAnomalyDetectionInfo",(0,E.Z)({method:"GET"},U||{})));case 1:case"end":return y.stop()}},l)})),T.apply(this,arguments)}function w(l,U){return N.apply(this,arguments)}function N(){return N=(0,p.Z)(i().mark(function l(U,I){return i().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,S.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,E.Z)({method:"GET",params:U||{}},I||{})));case 1:case"end":return o.stop()}},l)})),N.apply(this,arguments)}function R(l,U){return P.apply(this,arguments)}function P(){return P=(0,p.Z)(i().mark(function l(U,I){return i().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,S.WY)("/api/skyflying/getAnomalyDetectionInfoByGroupByUserName",(0,E.Z)({method:"GET",params:U||{}},I||{})));case 1:case"end":return o.stop()}},l)})),P.apply(this,arguments)}}}]);
