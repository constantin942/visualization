(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[126],{37174:function(he){he.exports={alarm:"alarm___12xQi",salesRank:"salesRank___-5oIk",rankingList:"rankingList___rxbMU",rankingItemNumber:"rankingItemNumber___3eh0u",active:"active___3KjTZ",rankingItemTitle:"rankingItemTitle___3gCS2","alarm-data":"alarm-data___17B2L",alarmDetail:"alarmDetail___9Lz5b"}},52953:function(){},44887:function(){},26723:function(he,re,e){"use strict";e.r(re),e.d(re,{default:function(){return qe}});var R=e(20228),X=e(11382),p=e(66456),M=e(78587),z=e(3182),ye=e(57663),oe=e(71577),G=e(11849),h=e(2824),Ce=e(94043),ae=e.n(Ce),t=e(67294),ie=e(37174),S=e.n(ie),Z=e(48606),le=e(71194),O=e(50146),A=e(88983),pe=e(47933),ze=e(62350),xe=e(75443),r=e(77576),ue=e(12028),de=e(22385),E=e(61580),k=e(17462),Pe=e(76772),Te=e(38663),Ge=e(52953),K=e(96156),Me=e(28481),Se=e(90484),Ne=e(94184),ce=e.n(Ne),Re=e(50344),me=e(24308),Ze=e(21687),Ae=e(65632),y=e(22122);function ve(a){return a!=null}var Be=function(n){var s=n.itemPrefixCls,o=n.component,l=n.span,d=n.className,c=n.style,g=n.labelStyle,b=n.contentStyle,T=n.bordered,C=n.label,D=n.content,Q=n.colon,x=o;if(T){var v;return t.createElement(x,{className:ce()((v={},(0,K.Z)(v,"".concat(s,"-item-label"),ve(C)),(0,K.Z)(v,"".concat(s,"-item-content"),ve(D)),v),d),style:c,colSpan:l},ve(C)&&t.createElement("span",{style:g},C),ve(D)&&t.createElement("span",{style:b},D))}return t.createElement(x,{className:ce()("".concat(s,"-item"),d),style:c,colSpan:l},t.createElement("div",{className:"".concat(s,"-item-container")},(C||C===0)&&t.createElement("span",{className:ce()("".concat(s,"-item-label"),(0,K.Z)({},"".concat(s,"-item-no-colon"),!Q)),style:g},C),(D||D===0)&&t.createElement("span",{className:ce()("".concat(s,"-item-content")),style:b},D)))},fe=Be;function Ee(a,n,s){var o=n.colon,l=n.prefixCls,d=n.bordered,c=s.component,g=s.type,b=s.showLabel,T=s.showContent,C=s.labelStyle,D=s.contentStyle;return a.map(function(Q,x){var v=Q.props,W=v.label,H=v.children,U=v.prefixCls,q=U===void 0?l:U,V=v.className,m=v.style,se=v.labelStyle,Y=v.contentStyle,ee=v.span,$=ee===void 0?1:ee,I=Q.key;return typeof c=="string"?t.createElement(fe,{key:"".concat(g,"-").concat(I||x),className:V,style:m,labelStyle:(0,y.Z)((0,y.Z)({},C),se),contentStyle:(0,y.Z)((0,y.Z)({},D),Y),span:$,colon:o,component:c,itemPrefixCls:q,bordered:d,label:b?W:null,content:T?H:null}):[t.createElement(fe,{key:"label-".concat(I||x),className:V,style:(0,y.Z)((0,y.Z)((0,y.Z)({},C),m),se),span:1,colon:o,component:c[0],itemPrefixCls:q,bordered:d,label:W}),t.createElement(fe,{key:"content-".concat(I||x),className:V,style:(0,y.Z)((0,y.Z)((0,y.Z)({},D),m),Y),span:$*2-1,component:c[1],itemPrefixCls:q,bordered:d,content:H})]})}var Ue=function(n){var s=t.useContext(f),o=n.prefixCls,l=n.vertical,d=n.row,c=n.index,g=n.bordered;return l?t.createElement(t.Fragment,null,t.createElement("tr",{key:"label-".concat(c),className:"".concat(o,"-row")},Ee(d,n,(0,y.Z)({component:"th",type:"label",showLabel:!0},s))),t.createElement("tr",{key:"content-".concat(c),className:"".concat(o,"-row")},Ee(d,n,(0,y.Z)({component:"td",type:"content",showContent:!0},s)))):t.createElement("tr",{key:c,className:"".concat(o,"-row")},Ee(d,n,(0,y.Z)({component:g?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},s)))},Le=Ue,je=function(n){var s=n.children;return s},F=je,u=e(96159),f=t.createContext({}),B={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function Ke(a,n){if(typeof a=="number")return a;if((0,Se.Z)(a)==="object")for(var s=0;s<me.c4.length;s++){var o=me.c4[s];if(n[o]&&a[o]!==void 0)return a[o]||B[o]}return 3}function Oe(a,n,s){var o=a;return(n===void 0||n>s)&&(o=(0,u.Tm)(a,{span:s}),(0,Ze.Z)(n===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),o}function Fe(a,n){var s=(0,Re.Z)(a).filter(function(c){return c}),o=[],l=[],d=n;return s.forEach(function(c,g){var b,T=(b=c.props)===null||b===void 0?void 0:b.span,C=T||1;if(g===s.length-1){l.push(Oe(c,T,d)),o.push(l);return}C<d?(d-=C,l.push(c)):(l.push(Oe(c,C,d)),o.push(l),d=n,l=[])}),o}function be(a){var n,s=a.prefixCls,o=a.title,l=a.extra,d=a.column,c=d===void 0?B:d,g=a.colon,b=g===void 0?!0:g,T=a.bordered,C=a.layout,D=a.children,Q=a.className,x=a.style,v=a.size,W=a.labelStyle,H=a.contentStyle,U=t.useContext(Ae.E_),q=U.getPrefixCls,V=U.direction,m=q("descriptions",s),se=t.useState({}),Y=(0,Me.Z)(se,2),ee=Y[0],$=Y[1],I=Ke(c,ee);t.useEffect(function(){var N=me.ZP.subscribe(function(te){(0,Se.Z)(c)==="object"&&$(te)});return function(){me.ZP.unsubscribe(N)}},[]);var L=Fe(D,I),P=t.useMemo(function(){return{labelStyle:W,contentStyle:H}},[W,H]);return t.createElement(f.Provider,{value:P},t.createElement("div",{className:ce()(m,(n={},(0,K.Z)(n,"".concat(m,"-").concat(v),v&&v!=="default"),(0,K.Z)(n,"".concat(m,"-bordered"),!!T),(0,K.Z)(n,"".concat(m,"-rtl"),V==="rtl"),n),Q),style:x},(o||l)&&t.createElement("div",{className:"".concat(m,"-header")},o&&t.createElement("div",{className:"".concat(m,"-title")},o),l&&t.createElement("div",{className:"".concat(m,"-extra")},l)),t.createElement("div",{className:"".concat(m,"-view")},t.createElement("table",null,t.createElement("tbody",null,L.map(function(N,te){return t.createElement(Le,{key:te,index:te,colon:b,prefixCls:m,vertical:C==="vertical",bordered:T,row:N})}))))))}be.Item=F;var ge=be,Qe=e(74379),De=e(38648),We=e(13312),Je=e(1870),i=e(85893);function we(a,n){var s=(0,t.useState)({}),o=(0,h.Z)(s,2),l=o[0],d=o[1],c=(0,t.useState)(!1),g=(0,h.Z)(c,2),b=g[0],T=g[1],C=(0,t.useState)(!1),D=(0,h.Z)(C,2),Q=D[0],x=D[1],v=(0,t.useState)(!1),W=(0,h.Z)(v,2),H=W[0],U=W[1],q=(0,t.useState)([]),V=(0,h.Z)(q,2),m=V[0],se=V[1],Y=(0,t.useState)("update"),ee=(0,h.Z)(Y,2),$=ee[0],I=ee[1];return(0,t.useImperativeHandle)(n,function(){return{setInitValues:function(P){P.length===1&&d(P[0]),se(P)}}}),(0,i.jsx)(O.Z,{width:600,afterClose:function(){x(!1),T(!1),I("update")},destroyOnClose:!0,title:m.length===1?"".concat(l==null?void 0:l.userName,"\uFF08\u544A\u8B66\u5904\u7F6E\uFF09"):"\u6279\u91CF\u5904\u7F6E".concat(m.length,"\u6761\u544A\u8B66"),visible:a.handleVisible,onCancel:function(){a.setVisible(!1),U(!1),I("update")},onOk:function(){if(b&&(0,Z.QD)([{id:l.id,matchRuleId:l.matchRuleId,originalTime:l.originalTime,userName:l.userName,alarmContent:l.alarmContent,globalTraceId:l.globalTraceId,flag:H?"update":"delete",updateUserPortrait:H?1:0}]).then(function(N){var te=N.code;te===We.Gh&&(De.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1),a.refresh())}),m.length>1){var P=m.map(function(N){return N.flag=$,N.updateUserPortrait=$==="delete"?1:0,N});(0,Z.QD)(P).then(function(){a.refresh(),De.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)})}a.setVisible(!1)},children:m.length===1?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ge,{layout:"horizontal",column:2,children:[(0,i.jsx)(ge.Item,{label:"\u8BB0\u5F55\u4EA7\u751F\u65F6\u95F4",children:l==null?void 0:l.originalTime}),(0,i.jsx)(ge.Item,{label:"\u89C4\u5219ID",children:l==null?void 0:l.matchRuleId})]}),(0,i.jsx)(Pe.Z,{message:l==null?void 0:l.alarmContent,className:"text-c",type:"warning"}),(0,i.jsxs)("div",{className:"flex-x-sb mt-20",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{children:(0,i.jsx)(xe.Z,{title:function(){return(0,i.jsxs)(E.Z,{title:"\u3010\u4E0D\u66F4\u65B0\u3011\u4EC5\u4EC5\u5FFD\u7565\u6B64\u6761\u544A\u8B66\u4FE1\u606F",children:["\u662F\u5426\u66F4\u65B0\u753B\u50CF\uFF1F",(0,i.jsx)(Je.Z,{})]})},visible:Q,onConfirm:function(){x(!1),U(!0)},onCancel:function(){return x(!1)},okText:"\u66F4\u65B0",cancelText:"\u4E0D\u66F4\u65B0",children:(0,i.jsx)(ue.Z,{checkedChildren:"\u5FFD\u7565\u544A\u8B66",unCheckedChildren:"\u4E0D\u5904\u7F6E",onChange:function(P){T(P),x(P)}})})})]})]}):(0,i.jsx)("div",{className:"text-c",children:(0,i.jsx)(pe.ZP.Group,{defaultValue:"update",value:$,options:[{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\uFF08\u4EC5\u4EC5\u5FFD\u7565\u6B64\u6761\u544A\u8B66\u4FE1\u606F\uFF09",value:"update"},{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\u5E76\u66F4\u65B0\u753B\u50CF",value:"delete"}],onChange:function(P){var N=P.target.value;I(N)}})})})}var Xe=(0,t.forwardRef)(we),Ve=e(25377),ke=function(n){var s=(0,t.useState)([]),o=(0,h.Z)(s,2),l=o[0],d=o[1],c=(0,t.useState)(0),g=(0,h.Z)(c,2),b=g[0],T=g[1],C=(0,t.useState)(!1),D=(0,h.Z)(C,2),Q=D[0],x=D[1],v=(0,t.useState)(!1),W=(0,h.Z)(v,2),H=W[0],U=W[1],q=(0,t.useState)([]),V=(0,h.Z)(q,2),m=V[0],se=V[1],Y=(0,Ve.md)(),ee=(0,t.useState)({pageNo:1,pageSize:10}),$=(0,h.Z)(ee,2),I=$[0],L=$[1],P=(0,t.useRef)(),N=(0,t.useState)({}),te=(0,h.Z)(N,2),$e=te[0],et=te[1],He=function(ne){se(ne)},tt={selectedRowKeys:m,onChange:He},nt=m.length>0,Ie=(0,t.useCallback)(function(j){He([]),(0,Z.cD)(j).then(function(ne){var _=ne.data;if(x(!0),_){var J=JSON.parse(_);if(T(J.total),J){var w=JSON.parse(J.rows);d(w.filter(function(Ye){return Ye.isDelete===0}))}else d([])}x(!1)})},[]),at=[{title:"\u8BB0\u5F55\u4EA7\u751F\u7684\u65F6\u95F4",dataIndex:"originalTime\uFF1A",key:"originalTime\uFF1A",width:"250px",align:"center",render:function(ne,_){return _.originalTime||"-"}},{title:"\u89C4\u5219ID",dataIndex:"matchRuleId\uFF1A",key:"matchRuleId\uFF1A",width:"250px",align:"center",render:function(ne,_){return _.matchRuleId||"-"}},{title:"\u544A\u8B66\u5185\u5BB9",dataIndex:"alarmContent",key:"alarmContent",align:"center"},{title:"\u5904\u7F6E",width:"150px",align:"center",render:function(ne,_){return[(0,i.jsx)(Ve.Nv,{accessible:Y.canUpdate,children:(0,i.jsx)("a",{onClick:function(){var w;U(!0),(w=P.current)===null||w===void 0||w.setInitValues([_])},children:"\u5904\u7F6E"})},"handle")]}}];return(0,t.useEffect)(function(){var j=n.location.query;et(j),Ie((0,G.Z)((0,G.Z)((0,G.Z)({},j),I),{isDelete:0}))},[Ie,I,n.location.query]),(0,i.jsxs)("div",{className:S().alarmDetail,children:[(0,i.jsx)(X.Z,{spinning:Q,children:(0,i.jsx)(M.Z,{rowSelection:tt,columns:at,dataSource:l,rowKey:"id",title:function(){return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"ib",children:$e.userName}),(0,i.jsxs)("h3",{className:"ib ml-10",children:["\u89E6\u53D1\u4E86 ",(0,i.jsx)("span",{className:"danger",children:b})," \u6761\u544A\u8B66"]})]}),(0,i.jsx)(Ve.Nv,{accessible:Y.canUpdate,children:(0,i.jsx)(oe.Z,{type:"primary",disabled:!nt,size:"middle",onClick:function(){var _,J=l.filter(function(w){return m.includes(w.id)});U(!0),(_=P.current)===null||_===void 0||_.setInitValues(J)},children:"\u6279\u91CF\u5904\u7F6E"})})]})},size:"middle",pagination:{showSizeChanger:!1,pageSize:I.pageSize,current:I.pageNo,total:b,onChange:function(){var j=(0,z.Z)(ae().mark(function _(J,w){return ae().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,L(function(){return{pageSize:w,pageNo:J}});case 2:Ie((0,G.Z)({pageNo:J,pageSize:w},$e));case 3:case"end":return _e.stop()}},_)}));function ne(_,J){return j.apply(this,arguments)}return ne}()}})}),(0,i.jsx)(Xe,{refresh:function(){Ie((0,G.Z)((0,G.Z)({},I),$e))},setVisible:U,handleVisible:H,ref:P})]})},qe=ke},48606:function(he,re,e){"use strict";e.d(re,{Hp:function(){return ye},CI:function(){return G},cD:function(){return Ce},QD:function(){return t}});var R=e(11849),X=e(3182),p=e(94043),M=e.n(p),z=e(25377);function ye(S){return oe.apply(this,arguments)}function oe(){return oe=(0,X.Z)(M().mark(function S(Z){return M().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,z.WY)("/api/skyflying/getAlarmData",(0,R.Z)({method:"GET"},Z||{})));case 1:case"end":return O.stop()}},S)})),oe.apply(this,arguments)}function G(S){return h.apply(this,arguments)}function h(){return h=(0,X.Z)(M().mark(function S(Z){return M().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,z.WY)("/api/skyflying/getUserAlarmData",(0,R.Z)({method:"GET"},Z||{})));case 1:case"end":return O.stop()}},S)})),h.apply(this,arguments)}function Ce(S,Z){return ae.apply(this,arguments)}function ae(){return ae=(0,X.Z)(M().mark(function S(Z,le){return M().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,z.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,R.Z)({method:"GET",params:Z||{}},le||{})));case 1:case"end":return A.stop()}},S)})),ae.apply(this,arguments)}function t(S,Z){return ie.apply(this,arguments)}function ie(){return ie=(0,X.Z)(M().mark(function S(Z,le){return M().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,z.WY)("/api/skyflying/updateAnomalyDetectionInfo",(0,R.Z)({method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8;"},data:JSON.stringify(Z||{})},le||{})));case 1:case"end":return A.stop()}},S)})),ie.apply(this,arguments)}},75443:function(he,re,e){"use strict";var R=e(22122),X=e(28481),p=e(67294),M=e(94184),z=e.n(M),ye=e(21770),oe=e(68855),G=e(15105),h=e(61580),Ce=e(71577),ae=e(73839),t=e(42051),ie=e(85636),S=e(65632),Z=e(81643),le=e(96159),O=e(33603),A=e(86743),pe=void 0,ze=function(r,ue){var de={};for(var E in r)Object.prototype.hasOwnProperty.call(r,E)&&ue.indexOf(E)<0&&(de[E]=r[E]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,E=Object.getOwnPropertySymbols(r);k<E.length;k++)ue.indexOf(E[k])<0&&Object.prototype.propertyIsEnumerable.call(r,E[k])&&(de[E[k]]=r[E[k]]);return de},xe=p.forwardRef(function(r,ue){var de=p.useContext(S.E_),E=de.getPrefixCls,k=(0,ye.Z)(!1,{value:r.visible,defaultValue:r.defaultVisible}),Pe=(0,X.Z)(k,2),Te=Pe[0],Ge=Pe[1],K=function(u,f){var B;Ge(u,!0),(B=r.onVisibleChange)===null||B===void 0||B.call(r,u,f)},Me=function(u){K(!1,u)},Se=function(u){var f;return(f=r.onConfirm)===null||f===void 0?void 0:f.call(pe,u)},Ne=function(u){var f;K(!1,u),(f=r.onCancel)===null||f===void 0||f.call(pe,u)},ce=function(u){u.keyCode===G.Z.ESC&&Te&&K(!1,u)},Re=function(u){var f=r.disabled;f||K(u)},me=function(u,f){var B=r.okButtonProps,Ke=r.cancelButtonProps,Oe=r.title,Fe=r.cancelText,be=r.okText,ge=r.okType,Qe=r.icon,De=r.showCancel,We=De===void 0?!0:De;return p.createElement("div",{className:"".concat(u,"-inner-content")},p.createElement("div",{className:"".concat(u,"-message")},Qe,p.createElement("div",{className:"".concat(u,"-message-title")},(0,Z.Z)(Oe))),p.createElement("div",{className:"".concat(u,"-buttons")},We&&p.createElement(Ce.Z,(0,R.Z)({onClick:Ne,size:"small"},Ke),Fe||f.cancelText),p.createElement(A.Z,{buttonProps:(0,R.Z)((0,R.Z)({size:"small"},(0,ae.n)(ge)),B),actionFn:Se,close:Me,prefixCls:E("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},be||f.okText)))},Ze=r.prefixCls,Ae=r.placement,y=r.children,ve=r.overlayClassName,Be=ze(r,["prefixCls","placement","children","overlayClassName"]),fe=E("popover",Ze),Ee=E("popconfirm",Ze),Ue=z()(Ee,ve),Le=p.createElement(t.Z,{componentName:"Popconfirm",defaultLocale:ie.Z.Popconfirm},function(F){return me(fe,F)}),je=E();return p.createElement(h.Z,(0,R.Z)({},Be,{prefixCls:fe,placement:Ae,onVisibleChange:Re,visible:Te,overlay:Le,overlayClassName:Ue,ref:ue,transitionName:(0,O.mL)(je,"zoom-big",r.transitionName)}),(0,le.Tm)(y,{onKeyDown:function(u){var f,B;p.isValidElement(y)&&((B=y==null?void 0:(f=y.props).onKeyDown)===null||B===void 0||B.call(f,u)),ce(u)}}))});xe.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:p.createElement(oe.Z,null),disabled:!1},re.Z=xe},62350:function(he,re,e){"use strict";var R=e(38663),X=e.n(R),p=e(20136),M=e(57663),z=e(44887),ye=e.n(z)}}]);
