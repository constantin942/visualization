(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[383],{12265:function(U){U.exports={databases:"databases___35H4X","detail-wrap":"detail-wrap___1IA0t","tops-wrap":"tops-wrap___2AQns",tops:"tops___2lHCZ"}},59498:function(U,D,e){"use strict";e.r(D),e.d(D,{default:function(){return q}});var m=e(11849),v=e(57663),C=e(71577),u=e(34792),_=e(48086),n=e(86582),s=e(2824),t=e(67294),r=e(23210),d=e(13062),y=e(71230),b=e(89032),T=e(15746),P=e(69886),o=e(85893),M=function(f){return(0,t.useEffect)(function(){var g=new P.by("dataActionPie".concat(f.id),{autoFit:!0,height:250,appendPadding:10,data:f.types,angleField:"value",colorField:"type",radius:.75,legend:{position:"bottom"},label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});g.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),g.render()},[]),(0,o.jsx)("div",{id:"dataActionPie"+f.id})},S=M,j=e(39004),B=function(f){return(0,t.useEffect)(function(){var g=new j.kL({container:"dataRecentlyLine".concat(f.id),autoFit:!0,height:200});g.data(f.ranges),g.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),g.tooltip({}),g.axis("value",{label:{}}),g.area().position("year*value"),g.line().position("year*value"),g.render()},[]),(0,o.jsx)("div",{id:"dataRecentlyLine"+f.id})},i=B,l=function(f){return(0,o.jsx)(y.Z,{className:f.style["detail-wrap"],gutter:20,children:(0,o.jsx)(T.Z,{span:24,children:(0,o.jsxs)(y.Z,{children:[(0,o.jsxs)(T.Z,{span:12,className:"text-c",children:[(0,o.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,o.jsx)(S,{types:f.types,id:f.id})]}),(0,o.jsx)(T.Z,{span:12,className:"text-c",children:(0,o.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,o.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,o.jsx)(i,{ranges:f.ranges,id:f.id})]})})]})})})},p=l,h=e(12265),a=e.n(h),Q=e(66572),w=e(24480),W=e(6650),V=e(84674),X=function(){var f=(0,t.useState)([]),g=(0,s.Z)(f,2),ee=g[0],te=g[1],ae=(0,t.useState)(""),k=(0,s.Z)(ae,2),ne=k[0],se=k[1],re=(0,t.useState)(0),H=(0,s.Z)(re,2),ue=H[0],ie=H[1],le=(0,t.useState)({pageSize:10,pageNo:1}),K=(0,s.Z)(le,2),I=K[0],oe=K[1],de=(0,t.useState)({types:[],ranges:[]}),G=(0,s.Z)(de,2),ce=G[0],me=G[1],_e=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(O,c){var A="-";if(c.tableNameDesc)A=c.tableNameDesc;else{var E=c.tableName.split("#");A=E[E.length-1]}return(0,o.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:A})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",search:!1},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(O,c){return[(0,o.jsx)(C.Z,{type:"link",size:"small",onClick:function(){if(c.visitedCount!==0){var E=w.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),L=w.Z.getRangeTime(7,"YYYY-mm-dd");(0,W.Xd)({msTableName:c.tableName,startTime:E[0],endTime:E[1],tableName:c.tableName}).then(function(Z){var Y=Z.data;if(Y&&Y.length>0){var fe=Y.map(function(R,F){return{year:L[F],value:R}}),z=(0,n.Z)(V.q);(0,W.et)({tableName:c.tableName}).then(function(R){R.data&&R.data.length>0&&z.forEach(function(F){R.data.forEach(function(pe){var J=JSON.parse(pe),ve=J.dbType,ge=J.dbTypeTimes;F.type===ve&&(F.value=parseInt(ge))})})}),me({ranges:fe,types:z}),setTimeout(function(){se(c.id)},400)}})}else _.ZP.info("".concat(c.tableName,"\u8868\u8BBF\u88AB\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],$=function(O){(0,Q.m)(O).then(function(c){var A=c.data;if(A){var E=JSON.parse(A);ie(E.total);var L=JSON.parse(E.rows);te(L.map(function(Z){return Z.id=w.Z.uuid(),Z}))}})};return(0,t.useEffect)(function(){$(I)},[]),(0,o.jsx)("div",{className:a().databases,children:(0,o.jsx)(r.ZP,{columns:_e,rowKey:"id",pagination:{showSizeChanger:!1,total:ue,pageSize:I.pageSize,current:I.pageNo,onChange:function(O,c){oe({pageNo:O,pageSize:c}),$({pageNo:O,pageSize:c})}},expandable:{expandedRowRender:function(O,c){return(0,t.createElement)(p,(0,m.Z)((0,m.Z)({},ce),{},{id:c,key:c,style:a()}))},expandIcon:function(){return!1},expandedRowKeys:[ne]},dataSource:ee})})},q=X},84674:function(U,D,e){"use strict";e.d(D,{q:function(){return m},Q:function(){return v}});var m=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],v=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},66572:function(U,D,e){"use strict";e.d(D,{m:function(){return n}});var m=e(11849),v=e(3182),C=e(94043),u=e.n(C),_=e(21704);function n(t,r){return s.apply(this,arguments)}function s(){return s=(0,v.Z)(u().mark(function t(r,d){return u().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,_.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,m.Z)({method:"GET",params:r},d||{})));case 1:case"end":return b.stop()}},t)})),s.apply(this,arguments)}},6650:function(U,D,e){"use strict";e.d(D,{F$:function(){return n},Xd:function(){return t},et:function(){return b},FP:function(){return P},Bx:function(){return M},wA:function(){return j}});var m=e(11849),v=e(3182),C=e(94043),u=e.n(C),_=e(32773);function n(i){return s.apply(this,arguments)}function s(){return s=(0,v.Z)(u().mark(function i(l){return u().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,_.WY)("/api/skyflying/getCoarseCountsOfUser",(0,m.Z)({method:"GET"},l||{})));case 1:case"end":return h.stop()}},i)})),s.apply(this,arguments)}function t(i,l){return r.apply(this,arguments)}function r(){return r=(0,v.Z)(u().mark(function i(l,p){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,m.Z)({method:"GET",params:l},p||{})));case 1:case"end":return a.stop()}},i)})),r.apply(this,arguments)}function d(i,l){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime.mark(function i(l,p){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:l},p||{})));case 1:case"end":return a.stop()}},i)})),y.apply(this,arguments)}function b(i,l){return T.apply(this,arguments)}function T(){return T=(0,v.Z)(u().mark(function i(l,p){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.WY)("/api/skyflying/getCountsOfUser",(0,m.Z)({method:"GET",params:l},p||{})));case 1:case"end":return a.stop()}},i)})),T.apply(this,arguments)}function P(i,l){return o.apply(this,arguments)}function o(){return o=(0,v.Z)(u().mark(function i(l,p){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.WY)("/api/skyflying/getUserOperationTypeCount",(0,m.Z)({method:"GET",params:l},p||{})));case 1:case"end":return a.stop()}},i)})),o.apply(this,arguments)}function M(i,l){return S.apply(this,arguments)}function S(){return S=(0,v.Z)(u().mark(function i(l,p){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,m.Z)({method:"GET",params:l},p||{})));case 1:case"end":return a.stop()}},i)})),S.apply(this,arguments)}function j(i,l){return B.apply(this,arguments)}function B(){return B=(0,v.Z)(u().mark(function i(l,p){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,m.Z)({method:"GET",params:l||{}},p||{})));case 1:case"end":return a.stop()}},i)})),B.apply(this,arguments)}},24480:function(U,D,e){"use strict";e.d(D,{Z:function(){return C}});var m=e(69610),v=e(54941),C=function(){function u(){(0,m.Z)(this,u)}return(0,v.Z)(u,null,[{key:"timeStampToTime",value:function(n){var s=new Date(parseInt(n));return s.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",t,r={"Y+":n.getFullYear().toString(),"m+":(n.getMonth()+1).toString(),"d+":n.getDate().toString(),"H+":n.getHours().toString(),"M+":n.getMinutes().toString(),"S+":n.getSeconds().toString()},d=s;for(var y in r)t=new RegExp("("+y+")").exec(s),t&&(d=d.replace(t[1],t[1].length==1?r[y]:r[y].padStart(t[1].length,"0")));return d}},{key:"uuid",value:function(){for(var n=[],s="0123456789abcdef",t=0;t<36;t++)n[t]=s.substr(Math.floor(Math.random()*16),1);return n[14]="4",n[19]=s.substr(n[19]&3|8,1),n[8]=n[13]=n[18]=n[23]="-",n.join("").replace(new RegExp(/(-)/g),"")}},{key:"getRangeTime",value:function(n,s){for(var t=[],r=n-1;r>=0;r--){var d=void 0;r===n-1?d=new Date(Date.now()-r*24*60*60*1e3).setHours(0,0,1,0):d=new Date(Date.now()-r*24*60*60*1e3).setHours(23,59,59,999),s?t.push(u.getLocalTime(new Date(d),s)):t.push(d)}return t}},{key:"getRangeStartAndEndTime",value:function(n,s){for(var t=[],r=n-1;r>=0;r--){var d=void 0;r===n-1?d=new Date(Date.now()-r*24*60*60*1e3).setHours(0,0,0,0):r===0?d=new Date(Date.now()-(r-1)*24*60*60*1e3).setHours(0,0,0,0):d=new Date(Date.now()-r*24*60*60*1e3).setHours(23,59,59,999),s?t.push(u.getLocalTime(new Date(d),s)):t.push(d)}return[t[0],t[n-1]]}}]),u}();C.arrayDeDuplication=function(u){return Array.from(new Set(u))}}}]);
