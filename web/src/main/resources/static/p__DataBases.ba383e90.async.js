(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[383],{12265:function(Z){Z.exports={databases:"databases___35H4X","detail-wrap":"detail-wrap___1IA0t","tops-wrap":"tops-wrap___2AQns",tops:"tops___2lHCZ"}},59498:function(Z,D,t){"use strict";t.r(D),t.d(D,{default:function(){return le}});var c=t(3182),o=t(11849),w=t(57663),u=t(71577),g=t(34792),R=t(48086),_=t(86582),f=t(2824),E=t(94043),b=t.n(E),l=t(67294),T=t(60355),F=t(84674),W=t(12265),B=t.n(W),x=t(24480),P=t(66572),V=t(13062),U=t(71230),se=t(89032),S=t(15746),L=t(69886),r=t(85893),a=function(d){var O=(0,l.useCallback)(function(){var p=new L.by("dataActionPie".concat(d.id),{autoFit:!0,height:250,appendPadding:10,data:d.types,angleField:"value",colorField:"type",radius:.75,legend:{position:"bottom"},label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});p.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),p.render()},[d.id]);return(0,l.useEffect)(function(){O()},[O]),(0,r.jsx)("div",{id:"dataActionPie"+d.id})},n=a,i=t(39004),h=function(d){var O=(0,l.useCallback)(function(){var p=new i.kL({container:"dataRecentlyLine".concat(d.id),autoFit:!0,height:200});p.data(d.ranges),p.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),p.tooltip({showNil:!1,showCrosshairs:!1,title:function($,M){return"".concat($,"\uFF1A").concat(M.value," \u6B21")},itemTpl:`<div class="g2-tooltip">
  <div class="g2-tooltip-title">Language</div>
  <ul class="g2-tooltip-list">
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">a</span>:<span class="g2-tooltip-value">70</span>
    </li>
    <li class="g2-tooltip-list-item">
      <span class="g2-tooltip-marker"></span>
      <span class="g2-tooltip-name">b</span>:<span class="g2-tooltip-value">50</span>
    </li>
  </ul>
</div>`}),p.axis("value",{label:{}}),p.area().position("year*value"),p.line().position("year*value"),p.render()},[d.id]);return(0,l.useEffect)(function(){O()},[O]),(0,r.jsx)("div",{id:"dataRecentlyLine"+d.id})},e=h,re=function(d){return(0,r.jsx)(U.Z,{className:d.style["detail-wrap"],gutter:20,children:(0,r.jsx)(S.Z,{span:24,children:(0,r.jsxs)(U.Z,{children:[(0,r.jsxs)(S.Z,{span:12,className:"text-c",children:[(0,r.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,r.jsx)(n,{types:d.types,id:d.id})]}),(0,r.jsx)(S.Z,{span:12,className:"text-c",children:(0,r.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,r.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,r.jsx)(e,{ranges:d.ranges,id:d.id})]})})]})})})},ue=re,z=t(6650),ie=function(){var d=(0,l.useState)([]),O=(0,f.Z)(d,2),p=O[0],G=O[1],$=(0,l.useState)(""),M=(0,f.Z)($,2),H=M[0],J=M[1],oe=(0,l.useState)(0),Q=(0,f.Z)(oe,2),de=Q[0],ce=Q[1],pe=(0,l.useState)(),X=(0,f.Z)(pe,2),me=X[0],fe=X[1],ve=(0,l.useState)({pageSize:10,pageNo:1}),q=(0,f.Z)(ve,2),A=q[0],ge=q[1],he=(0,l.useState)({types:[],ranges:[]}),ee=(0,f.Z)(he,2),ye=ee[0],te=ee[1],_e=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(v,s){var C="-";if(s.tableNameDesc)C=s.tableNameDesc;else{var m=s.tableName.split("#");C=m[m.length-1]}return(0,r.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:C})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",search:!1},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"dateTime",hideInSetting:!0,search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(v,s){return[(0,r.jsx)(u.Z,{type:"link",size:"small",onClick:function(){if(H===s.id){J(""),te({types:[],ranges:[]});return}if(s.visitedCount!==0){var m=x.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),k=x.Z.getRangeTime(7,"YYYY-mm-dd");(0,z.Xd)({msTableName:s.tableName,startTime:m[0],endTime:m[1],tableName:s.tableName}).then(function(Ce){var K=Ce.data;if(K&&K.length>0){var De=K.map(function(N,I){return{year:k[I],value:N}}),ae=(0,_.Z)(F.q);(0,z.et)({tableName:s.tableName}).then(function(N){N.data&&N.data.length>0&&ae.forEach(function(I){N.data.forEach(function(Ee){var ne=JSON.parse(Ee),be=ne.dbType,Oe=ne.dbTypeTimes;I.type===be&&(I.value=parseInt(Oe))})})}),te({ranges:De,types:ae}),setTimeout(function(){J(s.id)},400)}})}else R.ZP.info("".concat(s.tableName,"\u8868\u8BBF\u88AB\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],j=(0,l.useCallback)(function(y){(0,P.m)(y).then(function(v){var s=v.data;if(s){var C=JSON.parse(s);if(ce(C.total),C.rows){var m=JSON.parse(C.rows);G(m.map(function(k){return k.id=x.Z.uuid(),k}));return}}G([])})},[]);return(0,l.useEffect)(function(){j(A)},[j,A]),(0,r.jsx)("div",{className:B().databases,children:(0,r.jsx)(T.ZP,{columns:_e,rowKey:"id",pagination:{showSizeChanger:!1,total:de,pageSize:A.pageSize,current:A.pageNo,onChange:function(v,s){ge({pageNo:v,pageSize:s}),j((0,o.Z)({pageNo:v,pageSize:s},me))}},toolBarRender:!1,onSubmit:function(){var y=(0,c.Z)(b().mark(function v(s){return b().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return fe(s),m.next=3,j((0,o.Z)((0,o.Z)({},A),s));case 3:case"end":return m.stop()}},v)}));return function(v){return y.apply(this,arguments)}}(),onReset:(0,c.Z)(b().mark(function y(){return b().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:j((0,o.Z)({},A));case 1:case"end":return s.stop()}},y)})),expandable:{expandedRowRender:function(v,s){return(0,l.createElement)(ue,(0,o.Z)((0,o.Z)({},ye),{},{id:s,key:s,style:B()}))},expandIcon:function(){return!1},expandedRowKeys:[H]},dataSource:p})})},le=ie},84674:function(Z,D,t){"use strict";t.d(D,{q:function(){return c}});var c=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],o=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},66572:function(Z,D,t){"use strict";t.d(D,{m:function(){return R}});var c=t(11849),o=t(3182),w=t(94043),u=t.n(w),g=t(25377);function R(f,E){return _.apply(this,arguments)}function _(){return _=(0,o.Z)(u().mark(function f(E,b){return u().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,g.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,c.Z)({method:"GET",params:E},b||{})));case 1:case"end":return T.stop()}},f)})),_.apply(this,arguments)}},6650:function(Z,D,t){"use strict";t.d(D,{F$:function(){return R},Xd:function(){return f},mt:function(){return b},et:function(){return W},FP:function(){return x},Bx:function(){return V},us:function(){return L}});var c=t(11849),o=t(3182),w=t(94043),u=t.n(w),g=t(25377);function R(a,n){return _.apply(this,arguments)}function _(){return _=(0,o.Z)(u().mark(function a(n,i){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/skyflying/getCoarseCountsOfUsers",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return e.stop()}},a)})),_.apply(this,arguments)}function f(a,n){return E.apply(this,arguments)}function E(){return E=(0,o.Z)(u().mark(function a(n,i){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return e.stop()}},a)})),E.apply(this,arguments)}function b(a,n){return l.apply(this,arguments)}function l(){return l=(0,o.Z)(u().mark(function a(n,i){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/skyflying/getVisitRate",(0,c.Z)({method:"GET",params:{username:n}},i||{})));case 1:case"end":return e.stop()}},a)})),l.apply(this,arguments)}function T(a,n){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime.mark(function a(n,i){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:n},i||{})));case 1:case"end":return e.stop()}},a)})),F.apply(this,arguments)}function W(a,n){return B.apply(this,arguments)}function B(){return B=(0,o.Z)(u().mark(function a(n,i){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/skyflying/getCountsOfUser",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return e.stop()}},a)})),B.apply(this,arguments)}function x(a,n){return P.apply(this,arguments)}function P(){return P=(0,o.Z)(u().mark(function a(n,i){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/skyflying/getUserOperationTypeCount",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return e.stop()}},a)})),P.apply(this,arguments)}function V(a,n){return U.apply(this,arguments)}function U(){return U=(0,o.Z)(u().mark(function a(n,i){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,c.Z)({method:"GET",params:n},i||{})));case 1:case"end":return e.stop()}},a)})),U.apply(this,arguments)}function se(a,n){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime.mark(function a(n,i){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/skyflying/getCoarseCountsOfOneUser",_objectSpread({method:"GET",params:n||{}},i||{})));case 1:case"end":return e.stop()}},a)})),S.apply(this,arguments)}function L(a,n){return r.apply(this,arguments)}function r(){return r=(0,o.Z)(u().mark(function a(n,i){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.WY)("/api/skyflying/getCountsOfEveryonRecentSevenDays",(0,c.Z)({method:"GET",params:n||{}},i||{})));case 1:case"end":return e.stop()}},a)})),r.apply(this,arguments)}}}]);
