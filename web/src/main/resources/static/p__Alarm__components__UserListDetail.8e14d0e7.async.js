(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[126],{37174:function(ye){ye.exports={alarm:"alarm___12xQi",salesRank:"salesRank___-5oIk",rankingList:"rankingList___rxbMU",rankingItemNumber:"rankingItemNumber___3eh0u",active:"active___3KjTZ",rankingItemTitle:"rankingItemTitle___3gCS2","alarm-data":"alarm-data___17B2L",alarmDetail:"alarmDetail___9Lz5b"}},52953:function(){},44887:function(){},26723:function(ye,re,e){"use strict";e.r(re),e.d(re,{default:function(){return Je}});var R=e(20228),J=e(11382),D=e(66456),M=e(78587),$=e(3182),Ce=e(57663),oe=e(71577),z=e(11849),f=e(2824),Ee=e(94043),ae=e.n(Ee),t=e(67294),ie=e(37174),S=e.n(ie),_=e(48606),le=e(71194),O=e(50146),A=e(88983),xe=e(47933),ze=e(62350),Pe=e(75443),r=e(77576),me=e(12028),ve=e(17462),C=e(76772),X=e(38663),Ie=e(52953),k=e(96156),Te=e(28481),ce=e(90484),Me=e(94184),ue=e.n(Me),Ne=e(50344),fe=e(24308),Re=e(21687),Ae=e(65632),p=e(22122);function he(a){return a!=null}var de=function(n){var s=n.itemPrefixCls,i=n.component,l=n.span,d=n.className,u=n.style,E=n.labelStyle,Z=n.contentStyle,T=n.bordered,y=n.label,g=n.content,G=n.colon,x=i;if(T){var v;return t.createElement(x,{className:ue()((v={},(0,k.Z)(v,"".concat(s,"-item-label"),he(y)),(0,k.Z)(v,"".concat(s,"-item-content"),he(g)),v),d),style:u,colSpan:l},he(y)&&t.createElement("span",{style:E},y),he(g)&&t.createElement("span",{style:Z},g))}return t.createElement(x,{className:ue()("".concat(s,"-item"),d),style:u,colSpan:l},t.createElement("div",{className:"".concat(s,"-item-container")},(y||y===0)&&t.createElement("span",{className:ue()("".concat(s,"-item-label"),(0,k.Z)({},"".concat(s,"-item-no-colon"),!G)),style:E},y),(g||g===0)&&t.createElement("span",{className:ue()("".concat(s,"-item-content")),style:Z},g)))},ge=de;function De(a,n,s){var i=n.colon,l=n.prefixCls,d=n.bordered,u=s.component,E=s.type,Z=s.showLabel,T=s.showContent,y=s.labelStyle,g=s.contentStyle;return a.map(function(G,x){var v=G.props,K=v.label,w=v.children,L=v.prefixCls,q=L===void 0?l:L,W=v.className,m=v.style,se=v.labelStyle,H=v.contentStyle,ee=v.span,F=ee===void 0?1:ee,b=G.key;return typeof u=="string"?t.createElement(ge,{key:"".concat(E,"-").concat(b||x),className:W,style:m,labelStyle:(0,p.Z)((0,p.Z)({},y),se),contentStyle:(0,p.Z)((0,p.Z)({},g),H),span:F,colon:i,component:u,itemPrefixCls:q,bordered:d,label:Z?K:null,content:T?w:null}):[t.createElement(ge,{key:"label-".concat(b||x),className:W,style:(0,p.Z)((0,p.Z)((0,p.Z)({},y),m),se),span:1,colon:i,component:u[0],itemPrefixCls:q,bordered:d,label:K}),t.createElement(ge,{key:"content-".concat(b||x),className:W,style:(0,p.Z)((0,p.Z)((0,p.Z)({},g),m),H),span:F*2-1,component:u[1],itemPrefixCls:q,bordered:d,content:w})]})}var Se=function(n){var s=t.useContext(U),i=n.prefixCls,l=n.vertical,d=n.row,u=n.index,E=n.bordered;return l?t.createElement(t.Fragment,null,t.createElement("tr",{key:"label-".concat(u),className:"".concat(i,"-row")},De(d,n,(0,p.Z)({component:"th",type:"label",showLabel:!0},s))),t.createElement("tr",{key:"content-".concat(u),className:"".concat(i,"-row")},De(d,n,(0,p.Z)({component:"td",type:"content",showContent:!0},s)))):t.createElement("tr",{key:u,className:"".concat(i,"-row")},De(d,n,(0,p.Z)({component:E?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},s)))},Ue=Se,Be=function(n){var s=n.children;return s},Le=Be,je=e(96159),U=t.createContext({}),c={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function h(a,n){if(typeof a=="number")return a;if((0,ce.Z)(a)==="object")for(var s=0;s<fe.c4.length;s++){var i=fe.c4[s];if(n[i]&&a[i]!==void 0)return a[i]||c[i]}return 3}function B(a,n,s){var i=a;return(n===void 0||n>s)&&(i=(0,je.Tm)(a,{span:s}),(0,Re.Z)(n===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),i}function Ke(a,n){var s=(0,Ne.Z)(a).filter(function(u){return u}),i=[],l=[],d=n;return s.forEach(function(u,E){var Z,T=(Z=u.props)===null||Z===void 0?void 0:Z.span,y=T||1;if(E===s.length-1){l.push(B(u,T,d)),i.push(l);return}y<d?(d-=y,l.push(u)):(l.push(B(u,y,d)),i.push(l),d=n,l=[])}),i}function _e(a){var n,s=a.prefixCls,i=a.title,l=a.extra,d=a.column,u=d===void 0?c:d,E=a.colon,Z=E===void 0?!0:E,T=a.bordered,y=a.layout,g=a.children,G=a.className,x=a.style,v=a.size,K=a.labelStyle,w=a.contentStyle,L=t.useContext(Ae.E_),q=L.getPrefixCls,W=L.direction,m=q("descriptions",s),se=t.useState({}),H=(0,Te.Z)(se,2),ee=H[0],F=H[1],b=h(u,ee);t.useEffect(function(){var N=fe.ZP.subscribe(function(te){(0,ce.Z)(u)==="object"&&F(te)});return function(){fe.ZP.unsubscribe(N)}},[]);var V=Ke(g,b),P=t.useMemo(function(){return{labelStyle:K,contentStyle:w}},[K,w]);return t.createElement(U.Provider,{value:P},t.createElement("div",{className:ue()(m,(n={},(0,k.Z)(n,"".concat(m,"-").concat(v),v&&v!=="default"),(0,k.Z)(n,"".concat(m,"-bordered"),!!T),(0,k.Z)(n,"".concat(m,"-rtl"),W==="rtl"),n),G),style:x},(i||l)&&t.createElement("div",{className:"".concat(m,"-header")},i&&t.createElement("div",{className:"".concat(m,"-title")},i),l&&t.createElement("div",{className:"".concat(m,"-extra")},l)),t.createElement("div",{className:"".concat(m,"-view")},t.createElement("table",null,t.createElement("tbody",null,V.map(function(N,te){return t.createElement(Ue,{key:te,index:te,colon:Z,prefixCls:m,vertical:y==="vertical",bordered:T,row:N})}))))))}_e.Item=Le;var pe=_e,Ge=e(74379),Oe=e(38648),We=e(13312),o=e(85893);function Fe(a,n){var s=(0,t.useState)({}),i=(0,f.Z)(s,2),l=i[0],d=i[1],u=(0,t.useState)(!1),E=(0,f.Z)(u,2),Z=E[0],T=E[1],y=(0,t.useState)(!1),g=(0,f.Z)(y,2),G=g[0],x=g[1],v=(0,t.useState)(!1),K=(0,f.Z)(v,2),w=K[0],L=K[1],q=(0,t.useState)([]),W=(0,f.Z)(q,2),m=W[0],se=W[1],H=(0,t.useState)("update"),ee=(0,f.Z)(H,2),F=ee[0],b=ee[1];return(0,t.useImperativeHandle)(n,function(){return{setInitValues:function(P){P.length===1&&d(P[0]),se(P)}}}),(0,o.jsx)(O.Z,{width:600,afterClose:function(){x(!1),T(!1),b("update")},destroyOnClose:!0,title:m.length===1?"".concat(l==null?void 0:l.userName,"\uFF08\u544A\u8B66\u5904\u7F6E\uFF09"):"\u6279\u91CF\u5904\u7F6E".concat(m.length,"\u6761\u544A\u8B66"),visible:a.handleVisible,onCancel:function(){a.setVisible(!1),L(!1),b("update")},onOk:function(){if(Z&&(0,_.QD)([{id:l.id,matchRuleId:l.matchRuleId,originalTime:l.originalTime,userName:l.userName,alarmContent:l.alarmContent,globalTraceId:l.globalTraceId,flag:w?"update":"delete",updateUserPortrait:w?1:0}]).then(function(N){var te=N.code;te===We.Gh&&(Oe.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1),a.refresh())}),m.length>1){var P=m.map(function(N){return N.flag=F,N.updateUserPortrait=F==="delete"?1:0,N});(0,_.QD)(P).then(function(){a.refresh(),Oe.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)})}a.setVisible(!1)},children:m.length===1?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(pe,{layout:"horizontal",column:2,children:[(0,o.jsx)(pe.Item,{label:"\u8BB0\u5F55\u4EA7\u751F\u65F6\u95F4",children:l==null?void 0:l.originalTime}),(0,o.jsx)(pe.Item,{label:"\u89C4\u5219ID",children:l==null?void 0:l.matchRuleId})]}),(0,o.jsx)(C.Z,{message:l==null?void 0:l.alarmContent,className:"text-c",type:"warning"}),(0,o.jsxs)("div",{className:"flex-x-sb mt-20",children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{children:(0,o.jsx)(Pe.Z,{title:"\u662F\u5426\u66F4\u65B0\u753B\u50CF\uFF1F",visible:G,onConfirm:function(){x(!1),L(!0)},onCancel:function(){return x(!1)},okText:"\u66F4\u65B0",cancelText:"\u4E0D\u66F4\u65B0",children:(0,o.jsx)(me.Z,{checkedChildren:"\u5FFD\u7565\u544A\u8B66",unCheckedChildren:"\u4E0D\u5904\u7F6E",onChange:function(P){T(P),x(P)}})})})]})]}):(0,o.jsx)("div",{className:"text-c",children:(0,o.jsx)(xe.ZP.Group,{defaultValue:"update",value:F,options:[{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66",value:"update"},{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\u5E76\u66F4\u65B0\u753B\u50CF",value:"delete"}],onChange:function(P){var N=P.target.value;b(N)}})})})}var Qe=(0,t.forwardRef)(Fe),Ve=e(25377),Ye=function(n){var s=(0,t.useState)([]),i=(0,f.Z)(s,2),l=i[0],d=i[1],u=(0,t.useState)(0),E=(0,f.Z)(u,2),Z=E[0],T=E[1],y=(0,t.useState)(!1),g=(0,f.Z)(y,2),G=g[0],x=g[1],v=(0,t.useState)(!1),K=(0,f.Z)(v,2),w=K[0],L=K[1],q=(0,t.useState)([]),W=(0,f.Z)(q,2),m=W[0],se=W[1],H=(0,Ve.md)(),ee=(0,t.useState)({pageNo:1,pageSize:10}),F=(0,f.Z)(ee,2),b=F[0],V=F[1],P=(0,t.useRef)(),N=(0,t.useState)({}),te=(0,f.Z)(N,2),$e=te[0],Xe=te[1],we=function(ne){se(ne)},ke={selectedRowKeys:m,onChange:we},qe=m.length>0,Ze=(0,t.useCallback)(function(j){we([]),(0,_.cD)(j).then(function(ne){var I=ne.data;if(x(!0),I){var Q=JSON.parse(I);if(T(Q.total),Q){var Y=JSON.parse(Q.rows);d(Y.filter(function(He){return He.isDelete===0}))}else d([])}x(!1)})},[]),et=[{title:"\u8BB0\u5F55\u4EA7\u751F\u7684\u65F6\u95F4",dataIndex:"originalTime\uFF1A",key:"originalTime\uFF1A",width:"250px",align:"center",render:function(ne,I){return I.originalTime||"-"}},{title:"\u89C4\u5219ID",dataIndex:"matchRuleId\uFF1A",key:"matchRuleId\uFF1A",width:"250px",align:"center",render:function(ne,I){return I.matchRuleId||"-"}},{title:"\u544A\u8B66\u5185\u5BB9",dataIndex:"alarmContent",key:"alarmContent",align:"center"},{title:"\u5904\u7F6E",width:"150px",align:"center",render:function(ne,I){return[(0,o.jsx)(Ve.Nv,{accessible:H.canUpdate,children:(0,o.jsx)("a",{onClick:function(){var Y;L(!0),(Y=P.current)===null||Y===void 0||Y.setInitValues([I])},children:"\u5904\u7F6E"})},"handle")]}}];return(0,t.useEffect)(function(){var j=n.location.query;Xe(j),Ze((0,z.Z)((0,z.Z)((0,z.Z)({},j),b),{isDelete:0}))},[Ze,b,n.location.query]),(0,o.jsxs)("div",{className:S().alarmDetail,children:[(0,o.jsx)(J.Z,{spinning:G,children:(0,o.jsx)(M.Z,{rowSelection:ke,columns:et,dataSource:l,rowKey:"id",title:function(){return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"ib",children:$e.userName}),(0,o.jsxs)("h3",{className:"ib ml-10",children:["\u89E6\u53D1\u4E86 ",(0,o.jsx)("span",{className:"danger",children:Z})," \u6761\u544A\u8B66"]})]}),(0,o.jsx)(Ve.Nv,{accessible:H.canUpdate,children:(0,o.jsx)(oe.Z,{type:"primary",disabled:!qe,size:"middle",onClick:function(){var I,Q=l.filter(function(Y){return m.includes(Y.id)});L(!0),(I=P.current)===null||I===void 0||I.setInitValues(Q)},children:"\u6279\u91CF\u5904\u7F6E"})})]})},size:"middle",pagination:{showSizeChanger:!1,pageSize:b.pageSize,current:b.pageNo,total:Z,onChange:function(){var j=(0,$.Z)(ae().mark(function I(Q,Y){return ae().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,V(function(){return{pageSize:Y,pageNo:Q}});case 2:Ze((0,z.Z)({pageNo:Q,pageSize:Y},$e));case 3:case"end":return be.stop()}},I)}));function ne(I,Q){return j.apply(this,arguments)}return ne}()}})}),(0,o.jsx)(Qe,{refresh:function(){Ze((0,z.Z)((0,z.Z)({},b),$e))},setVisible:L,handleVisible:w,ref:P})]})},Je=Ye},48606:function(ye,re,e){"use strict";e.d(re,{Hp:function(){return Ce},CI:function(){return z},cD:function(){return Ee},QD:function(){return t}});var R=e(11849),J=e(3182),D=e(94043),M=e.n(D),$=e(25377);function Ce(S){return oe.apply(this,arguments)}function oe(){return oe=(0,J.Z)(M().mark(function S(_){return M().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,$.WY)("/api/skyflying/getAlarmData",(0,R.Z)({method:"GET"},_||{})));case 1:case"end":return O.stop()}},S)})),oe.apply(this,arguments)}function z(S){return f.apply(this,arguments)}function f(){return f=(0,J.Z)(M().mark(function S(_){return M().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,$.WY)("/api/skyflying/getUserAlarmData",(0,R.Z)({method:"GET"},_||{})));case 1:case"end":return O.stop()}},S)})),f.apply(this,arguments)}function Ee(S,_){return ae.apply(this,arguments)}function ae(){return ae=(0,J.Z)(M().mark(function S(_,le){return M().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,$.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,R.Z)({method:"GET",params:_||{}},le||{})));case 1:case"end":return A.stop()}},S)})),ae.apply(this,arguments)}function t(S,_){return ie.apply(this,arguments)}function ie(){return ie=(0,J.Z)(M().mark(function S(_,le){return M().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,$.WY)("/api/skyflying/updateAnomalyDetectionInfo",(0,R.Z)({method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8;"},data:JSON.stringify(_||{})},le||{})));case 1:case"end":return A.stop()}},S)})),ie.apply(this,arguments)}},75443:function(ye,re,e){"use strict";var R=e(22122),J=e(28481),D=e(67294),M=e(94184),$=e.n(M),Ce=e(21770),oe=e(68855),z=e(15105),f=e(61580),Ee=e(71577),ae=e(73839),t=e(42051),ie=e(85636),S=e(65632),_=e(81643),le=e(96159),O=e(33603),A=e(86743),xe=void 0,ze=function(r,me){var ve={};for(var C in r)Object.prototype.hasOwnProperty.call(r,C)&&me.indexOf(C)<0&&(ve[C]=r[C]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var X=0,C=Object.getOwnPropertySymbols(r);X<C.length;X++)me.indexOf(C[X])<0&&Object.prototype.propertyIsEnumerable.call(r,C[X])&&(ve[C[X]]=r[C[X]]);return ve},Pe=D.forwardRef(function(r,me){var ve=D.useContext(S.E_),C=ve.getPrefixCls,X=(0,Ce.Z)(!1,{value:r.visible,defaultValue:r.defaultVisible}),Ie=(0,J.Z)(X,2),k=Ie[0],Te=Ie[1],ce=function(c,h){var B;Te(c,!0),(B=r.onVisibleChange)===null||B===void 0||B.call(r,c,h)},Me=function(c){ce(!1,c)},ue=function(c){var h;return(h=r.onConfirm)===null||h===void 0?void 0:h.call(xe,c)},Ne=function(c){var h;ce(!1,c),(h=r.onCancel)===null||h===void 0||h.call(xe,c)},fe=function(c){c.keyCode===z.Z.ESC&&k&&ce(!1,c)},Re=function(c){var h=r.disabled;h||ce(c)},Ae=function(c,h){var B=r.okButtonProps,Ke=r.cancelButtonProps,_e=r.title,pe=r.cancelText,Ge=r.okText,Oe=r.okType,We=r.icon,o=r.showCancel,Fe=o===void 0?!0:o;return D.createElement("div",{className:"".concat(c,"-inner-content")},D.createElement("div",{className:"".concat(c,"-message")},We,D.createElement("div",{className:"".concat(c,"-message-title")},(0,_.Z)(_e))),D.createElement("div",{className:"".concat(c,"-buttons")},Fe&&D.createElement(Ee.Z,(0,R.Z)({onClick:Ne,size:"small"},Ke),pe||h.cancelText),D.createElement(A.Z,{buttonProps:(0,R.Z)((0,R.Z)({size:"small"},(0,ae.n)(Oe)),B),actionFn:ue,close:Me,prefixCls:C("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},Ge||h.okText)))},p=r.prefixCls,he=r.placement,de=r.children,ge=r.overlayClassName,De=ze(r,["prefixCls","placement","children","overlayClassName"]),Se=C("popover",p),Ue=C("popconfirm",p),Be=$()(Ue,ge),Le=D.createElement(t.Z,{componentName:"Popconfirm",defaultLocale:ie.Z.Popconfirm},function(U){return Ae(Se,U)}),je=C();return D.createElement(f.Z,(0,R.Z)({},De,{prefixCls:Se,placement:he,onVisibleChange:Re,visible:k,overlay:Le,overlayClassName:Be,ref:me,transitionName:(0,O.mL)(je,"zoom-big",r.transitionName)}),(0,le.Tm)(de,{onKeyDown:function(c){var h,B;D.isValidElement(de)&&((B=de==null?void 0:(h=de.props).onKeyDown)===null||B===void 0||B.call(h,c)),fe(c)}}))});Pe.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:D.createElement(oe.Z,null),disabled:!1},re.Z=Pe},62350:function(ye,re,e){"use strict";var R=e(38663),J=e.n(R),D=e(20136),M=e(57663),$=e(44887),Ce=e.n($)}}]);
