(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[383],{12265:function(O){O.exports={databases:"databases___35H4X","detail-wrap":"detail-wrap___1IA0t","tops-wrap":"tops-wrap___2AQns",tops:"tops___2lHCZ"}},59498:function(O,v,e){"use strict";e.r(v),e.d(v,{default:function(){return q}});var d=e(11849),f=e(57663),T=e(71577),u=e(34792),_=e(48086),B=e(86582),c=e(2824),l=e(67294),g=e(47369),P=e(13062),y=e(71230),C=e(89032),D=e(15746),R=e(69886),s=e(85893),j=function(i){return(0,l.useEffect)(function(){var m=new R.by("dataActionPie".concat(i.id),{autoFit:!0,height:250,appendPadding:10,data:i.types,angleField:"value",colorField:"type",radius:.75,legend:{position:"bottom"},label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]});m.update({theme:{styleSheet:{brandColor:"#025DF4",paletteQualitative10:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF"],paletteQualitative20:["#025DF4","#DB6BCF","#2498D1","#BBBDE6","#4045B2","#21A97A","#FF745A","#007E99","#FFA8A8","#2391FF","#FFC328","#A0DC2C","#946DFF","#626681","#EB4185","#CD8150","#36BCCB","#327039","#803488","#83BC99"]}}}),m.render()},[]),(0,s.jsx)("div",{id:"dataActionPie"+i.id})},U=j,N=e(39004),A=function(i){return(0,l.useEffect)(function(){var m=new N.kL({container:"dataRecentlyLine".concat(i.id),autoFit:!0,height:200});m.data(i.ranges),m.scale({value:{min:0,nice:!1},year:{range:[0,1]}}),m.tooltip({}),m.axis("value",{label:{}}),m.area().position("year*value"),m.line().position("year*value"),m.render()},[]),(0,s.jsx)("div",{id:"dataRecentlyLine"+i.id})},a=A,n=function(i){return(0,s.jsx)(y.Z,{className:i.style["detail-wrap"],gutter:20,children:(0,s.jsx)(D.Z,{span:24,children:(0,s.jsxs)(y.Z,{children:[(0,s.jsxs)(D.Z,{span:12,className:"text-c",children:[(0,s.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,s.jsx)(U,{types:i.types,id:i.id})]}),(0,s.jsx)(D.Z,{span:12,className:"text-c",children:(0,s.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,s.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,s.jsx)(a,{ranges:i.ranges,id:i.id})]})})]})})})},o=n,p=e(12265),t=e.n(p),Q=e(66572),M=e(24480),Y=e(6650),V=e(84674),X=function(){var i=(0,l.useState)([]),m=(0,c.Z)(i,2),ee=m[0],te=m[1],ae=(0,l.useState)(""),K=(0,c.Z)(ae,2),ne=K[0],se=K[1],re=(0,l.useState)(0),k=(0,c.Z)(re,2),ue=k[0],ie=k[1],le=(0,l.useState)({pageSize:10,pageNo:1}),G=(0,c.Z)(le,2),W=G[0],oe=G[1],de=(0,l.useState)({types:[],ranges:[]}),$=(0,c.Z)(de,2),ce=$[0],me=$[1],pe=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center",render:function(E,r){var b="-";if(r.tableNameDesc)b=r.tableNameDesc;else{var h=r.tableName.split("#");b=h[h.length-1]}return(0,s.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:b})}},{title:"\u88AB\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",search:!1},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,search:!1,align:"center"},{title:"\u64CD\u4F5C",key:"action",align:"center",search:!1,render:function(E,r){return[(0,s.jsx)(T.Z,{type:"link",size:"small",onClick:function(){if(r.visitedCount!==0){var h=M.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),w=M.Z.getRangeTime(7,"YYYY-mm-dd");(0,Y.Xd)({msTableName:r.tableName,startTime:h[0],endTime:h[1],tableName:r.tableName}).then(function(Z){var L=Z.data;if(L&&L.length>0){var fe=L.map(function(F,x){return{year:w[x],value:F}}),H=(0,B.Z)(V.q);(0,Y.et)({tableName:r.tableName}).then(function(F){F.data&&F.data.length>0&&H.forEach(function(x){F.data.forEach(function(_e){var J=JSON.parse(_e),ve=J.dbType,ge=J.dbTypeTimes;x.type===ve&&(x.value=parseInt(ge))})})}),me({ranges:fe,types:H}),setTimeout(function(){se(r.id)},400)}})}else _.ZP.info("".concat(r.tableName,"\u8868\u8BBF\u88AB\u95EE\u6B21\u6570\u4E3A0\uFF0C\u6682\u65E0\u8BE6\u60C5\u6570\u636E")).then()},children:"\u8BE6\u60C5"},"action")]}}],z=function(E){(0,Q.m)(E).then(function(r){var b=r.data;if(b){var h=JSON.parse(b);ie(h.total);var w=JSON.parse(h.rows);te(w.map(function(Z){return Z.id=M.Z.uuid(),Z}))}})};return(0,l.useEffect)(function(){z(W)},[]),(0,s.jsx)("div",{className:t().databases,children:(0,s.jsx)(g.ZP,{columns:pe,rowKey:"id",pagination:{showSizeChanger:!1,total:ue,pageSize:W.pageSize,current:W.pageNo,onChange:function(E,r){oe({pageNo:E,pageSize:r}),z({pageNo:E,pageSize:r})}},expandable:{expandedRowRender:function(E,r){return(0,l.createElement)(o,(0,d.Z)((0,d.Z)({},ce),{},{id:r,key:r,style:t()}))},expandIcon:function(){return!1},expandedRowKeys:[ne]},dataSource:ee})})},q=X},84674:function(O,v,e){"use strict";e.d(v,{q:function(){return d},Q:function(){return f}});var d=[{type:"insert",value:0},{type:"delete",value:0},{type:"update",value:0},{type:"select",value:0}],f=[{type:"\u4E0A\u5348",value:0},{type:"\u4E0B\u5348",value:0},{type:"\u665A\u4E0A",value:0}]},66572:function(O,v,e){"use strict";e.d(v,{m:function(){return B}});var d=e(11849),f=e(3182),T=e(94043),u=e.n(T),_=e(21704);function B(l,g){return c.apply(this,arguments)}function c(){return c=(0,f.Z)(u().mark(function l(g,P){return u().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",(0,_.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,d.Z)({method:"GET",params:g},P||{})));case 1:case"end":return C.stop()}},l)})),c.apply(this,arguments)}},6650:function(O,v,e){"use strict";e.d(v,{F$:function(){return B},Xd:function(){return l},et:function(){return C},FP:function(){return R},Bx:function(){return j},wA:function(){return N}});var d=e(11849),f=e(3182),T=e(94043),u=e.n(T),_=e(32773);function B(a){return c.apply(this,arguments)}function c(){return c=(0,f.Z)(u().mark(function a(n){return u().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,_.WY)("/api/skyflying/getCoarseCountsOfUser",(0,d.Z)({method:"GET"},n||{})));case 1:case"end":return p.stop()}},a)})),c.apply(this,arguments)}function l(a,n){return g.apply(this,arguments)}function g(){return g=(0,f.Z)(u().mark(function a(n,o){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,d.Z)({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},a)})),g.apply(this,arguments)}function P(a,n){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime.mark(function a(n,o){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},a)})),y.apply(this,arguments)}function C(a,n){return D.apply(this,arguments)}function D(){return D=(0,f.Z)(u().mark(function a(n,o){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)("/api/skyflying/getCountsOfUser",(0,d.Z)({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},a)})),D.apply(this,arguments)}function R(a,n){return s.apply(this,arguments)}function s(){return s=(0,f.Z)(u().mark(function a(n,o){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)("/api/skyflying/getUserOperationTypeCount",(0,d.Z)({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},a)})),s.apply(this,arguments)}function j(a,n){return U.apply(this,arguments)}function U(){return U=(0,f.Z)(u().mark(function a(n,o){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,d.Z)({method:"GET",params:n},o||{})));case 1:case"end":return t.stop()}},a)})),U.apply(this,arguments)}function N(a,n){return A.apply(this,arguments)}function A(){return A=(0,f.Z)(u().mark(function a(n,o){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,d.Z)({method:"GET",params:n||{}},o||{})));case 1:case"end":return t.stop()}},a)})),A.apply(this,arguments)}}}]);
