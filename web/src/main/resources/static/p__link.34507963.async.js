(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[72],{25592:function(R,O,e){"use strict";e.d(O,{Z:function(){return f}});var E=e(28991),d=e(67294),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},a=v,b=e(27029),l=function(u,g){return d.createElement(b.Z,(0,E.Z)((0,E.Z)({},u),{},{ref:g,icon:a}))};l.displayName="SyncOutlined";var f=d.forwardRef(l)},78844:function(R,O,e){"use strict";var E=e(22122),d=e(28991),v=e(81253),a=e(67294),b=e(30885),l=e(51617),f=e(66758),c=["fieldProps","proFieldProps"],u="dateTimeRange",g=a.forwardRef(function(_,W){var j=_.fieldProps,S=_.proFieldProps,o=(0,v.Z)(_,c),p=(0,a.useContext)(f.Z);return a.createElement(b.Z,(0,E.Z)({ref:W,mode:"edit",fieldProps:(0,d.Z)({getPopupContainer:p.getPopupContainer},j),valueType:u,proFieldProps:S,filedConfig:{valueType:u,lightFilterLabelFormatter:function(m){return(0,l.Z)(m,"YYYY-MM-DD HH:mm:ss")}}},o))});O.Z=g},64317:function(R,O,e){"use strict";var E=e(22122),d=e(28991),v=e(81253),a=e(67294),b=e(30885),l=e(96202),f=e(66758),c=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],g=a.forwardRef(function(o,p){var i=o.fieldProps,m=o.children,r=o.params,n=o.proFieldProps,h=o.mode,x=o.valueEnum,s=o.request,P=o.showSearch,A=o.options,I=(0,v.Z)(o,c),w=(0,a.useContext)(f.Z);return a.createElement(b.Z,(0,E.Z)({mode:"edit",valueEnum:(0,l.h)(x),request:s,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({options:A,mode:h,showSearch:P,getPopupContainer:w.getPopupContainer},i),ref:p,proFieldProps:n},I),m)}),_=a.forwardRef(function(o,p){var i=o.fieldProps,m=o.children,r=o.params,n=o.proFieldProps,h=o.mode,x=o.valueEnum,s=o.request,P=o.options,A=(0,v.Z)(o,u),I=(0,d.Z)({options:P,mode:h||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},i),w=(0,a.useContext)(f.Z);return a.createElement(b.Z,(0,E.Z)({mode:"edit",valueEnum:(0,l.h)(x),request:s,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({getPopupContainer:w.getPopupContainer},I),ref:p,proFieldProps:n},A),m)}),W=g,j=_,S=W;S.SearchSelect=j,S.displayName="ProFormComponent",O.Z=S},82277:function(R){R.exports={"link__form-wrap":"link__form-wrap___4fdvJ",link__content:"link__content___oPe_t",pages:"pages___3NUwO","link__item-card":"link__item-card___y2kSX",link:"link___s0XZS","detail-table":"detail-table___2NvnS","ant-table-tbody":"ant-table-tbody___2xnJD","is-active":"is-active___3dJbi"}},57529:function(){},5882:function(R,O,e){"use strict";e.r(O),e.d(O,{default:function(){return se}});var E=e(20228),d=e(11382),v=e(13254),a=e(14277),b=e(14781),l=e(23492),f=e(57663),c=e(71577),u=e(11849),g=e(3182),_=e(2824),W=e(94043),j=e.n(W),S=e(67294),o=e(5894),p=e(64317),i=e(78844),m=e(76570),r=e(25592),n=["select","insert","update","delete"],h=e(54154),x=e(87593),s=e(37636),P=e(47369),A=e(84787),I=e(24480),w=e(71194),$=e(50146),t=e(85893),V=function(N){return(0,t.jsx)($.Z,{visible:N.detailVisible,title:"\u8BBF\u95EE\u8BE6\u60C5",onCancel:function(){return N.setVisible(!1)}})},B=V,X=function(N){var G=function(){return N.body.length===1?N.body[0].segments.filter(function(z){return z.peer}):N.body[0].segments},M=(0,S.useState)(0),Z=(0,_.Z)(M,2),J=Z[0],k=Z[1],ve=(0,S.useState)(!1),ie=(0,_.Z)(ve,2),fe=ie[0],oe=ie[1],ge=(0,S.useState)(G().map(function(L){return L.id=I.Z.uuid(),L})),ue=(0,_.Z)(ge,2),ee=ue[0],he=ue[1],de=[{title:"\u64CD\u4F5C\u6570\u636E",dataIndex:"function",align:"center",ellipsis:!0},{title:"IP",dataIndex:"peer",align:"center"},{title:"\u6570\u636E\u5E93\u8D26\u53F7",dataIndex:"dbUserName",align:"center"},{title:"\u6570\u636E\u5E93\u5B9E\u4F8B",dataIndex:"dbInstance",align:"center"},{title:"\u6570\u636E\u5E93\u8868\u540D",dataIndex:"dbTableName",align:"center"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"dbType",align:"center"},{title:"SQL\u8BED\u53E5",dataIndex:"dbStatement",ellipsis:!0,copyable:!0,search:!1}],_e=function(z,te){k(te),he(z.map(function(ce){return ce.id=I.Z.uuid(),ce}))};return(0,t.jsxs)("div",{className:N.style["detail-table"],children:[(0,t.jsxs)(A.ZP,{split:"vertical",children:[N.body.length>1&&(0,t.jsx)(A.ZP,{colSpan:"30%",children:(0,t.jsx)(s.Z,{children:N.body.map(function(L,z){return(0,t.jsx)(s.Z.Item,{color:L.segments.length>1?"#00CCFF":"green",className:"pointer pb-10",children:(0,t.jsx)("div",{onClick:function(){_e(L.segments,z)},children:(0,t.jsx)("p",{className:J===z?N.style["is-active"]:"",children:L.url})})},I.Z.uuid())})})}),(0,t.jsx)(A.ZP,{headerBordered:!0,children:ee.length>0?(0,t.jsx)(P.ZP,{columns:de,options:!1,size:"small",dataSource:ee,rowKey:"id",search:!1,pagination:!1}):(0,t.jsx)(a.Z,{description:"\u6682\u65E0\u64CD\u4F5C\u6570\u636E"})})]}),(0,t.jsx)(B,{detailVisible:fe,setVisible:oe})]})},T=X,Q=e(6251),q=e.n(Q),K=e(82277),H=e.n(K),ae=[],re=function(){var N=(0,S.useState)([]),G=(0,_.Z)(N,2),M=G[0],Z=G[1],J=(0,S.useState)(ae),k=(0,_.Z)(J,2),ve=k[0],ie=k[1],fe=(0,S.useState)([]),oe=(0,_.Z)(fe,2),ge=oe[0],ue=oe[1],ee=(0,S.useRef)(),he=(0,S.useState)(0),de=(0,_.Z)(he,2),_e=de[0],L=de[1],z=(0,S.useState)(!1),te=(0,_.Z)(z,2),ce=te[0],be=te[1],Ee=(0,S.useState)([]),Pe=(0,_.Z)(Ee,2),Se=Pe[0],Ce=Pe[1],De=(0,S.useState)({pageNo:1,pageSize:10}),Te=(0,_.Z)(De,2),Y=Te[0],xe=Te[1],me=function(U){be(!0),(0,h.z2)(Object.assign(U)).then(function(y){var D=y.data,C=JSON.parse(D);L(C.total);var ne=JSON.parse(C.rows);C.rows?(console.log(ne),Array.isArray(ne)&&ne.length>0?Z(ne):Z([])):Z([]),be(!1)})};return(0,S.useEffect)(function(){(0,h.Y8)().then(function(F){var U=F.data,y=JSON.parse(U).filter(function(D){return D});ie(function(D){return D.concat(y)})}),(0,h.IY)().then(function(F){var U=F.data,y=JSON.parse(U).filter(function(C){return C.msTableName}),D=y.map(function(C){return C.label=C.dbInstance+"#"+C.msTableName,C.value=C.msTableName,C.id=I.Z.uuid(),C});Ce(D),ue(function(){return D.map(function(C){return C.label})})}),me(Y)},[]),(0,t.jsxs)("div",{className:H().link,children:[(0,t.jsx)("div",{className:H()["link__form-wrap"],children:(0,t.jsxs)(o.A,{layout:"inline",formRef:ee,size:"small",onFinish:function(){var F=(0,g.Z)(j().mark(function U(y){var D,C;return j().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:D=y,Object.keys(y).length>0&&(y.times&&(y.startTime=y.times[0],y.endTime=y.times[1],delete y.times,D=(0,u.Z)({},y)),y.msTableName&&(C=Se.find(function(pe){return pe.label===y.msTableName}),C&&(y.msTableName=C.msTableName,y.dbInstance=C.dbInstance,D=(0,u.Z)({},y))),xe(function(pe){return{pageNo:pe.pageNo,pageSize:pe.pageSize,applicationUserName:D.applicationUserName,dbType:D.dbType,msTableName:D.msTableName,startTime:D.startTime,endTime:D.endTime,dbInstance:D.dbInstance}})),me(D);case 3:case"end":return ye.stop()}},U)}));return function(U){return F.apply(this,arguments)}}(),submitter:{render:function(){return[(0,t.jsx)(c.Z,{type:"primary",htmlType:"submit",icon:(0,t.jsx)(m.Z,{}),children:"\u67E5\u8BE2"},"edit"),(0,t.jsx)(c.Z,{htmlType:"button",icon:(0,t.jsx)(r.Z,{}),onClick:function(){var y;(y=ee.current)===null||y===void 0||y.resetFields(),me({pageSize:Y.pageSize,pageNo:Y.pageNo})},children:"\u91CD\u7F6E"},"reset")]}},children:[(0,t.jsx)(o.A.Group,{children:(0,t.jsx)(p.Z,{options:ve,placeholder:"\u7528\u6237\u540D",name:"applicationUserName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(o.A.Group,{children:(0,t.jsx)(p.Z,{options:ge,width:"md",placeholder:"\u6570\u636E\u5E93\u8868\u540D",name:"msTableName",filedConfig:{},fieldProps:{}})}),(0,t.jsx)(o.A.Group,{children:(0,t.jsx)(p.Z,{options:n,placeholder:"\u64CD\u4F5C\u7C7B\u578B",name:"dbType"},"value")}),(0,t.jsx)(o.A.Group,{children:(0,t.jsx)(i.Z,{width:"md",fieldProps:{placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],bordered:!0},name:"times"})})]})}),(0,t.jsx)(d.Z,{spinning:ce,children:M.length>0?(0,t.jsxs)("div",{className:H().link__content,children:[M.map(function(F){return(0,t.jsx)(A.ZP,{collapsibleIconRender:function(){return(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"primary-blue-5 m-0",children:F.header.userName}),(0,t.jsxs)("div",{className:"fs-12",children:[(0,t.jsxs)("span",{className:"mr-20",children:[(0,t.jsx)("span",{className:"in-l",children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),(0,t.jsx)("span",{children:F.header.requestStartTime})]}),(0,t.jsxs)("span",{className:"mt-20",children:[(0,t.jsx)("span",{className:"in-l",children:"URL\uFF1A"}),(0,t.jsx)("span",{children:F.header.url})]})]})]})},className:"link__item-card",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,t.jsx)(T,{body:F.body,style:H()})},I.Z.uuid())}),(0,t.jsx)("div",{className:H().pages,children:(0,t.jsx)(l.Z,{showSizeChanger:!1,total:_e,size:"small",onChange:function(U,y){me({pageNo:U,pageSize:y,applicationUserName:Y.applicationUserName,msTableName:Y.msTableName,dbType:Y.dbType,startTime:Y.startTime,endTime:Y.endTime,dbInstance:Y.dbInstance})},defaultPageSize:20,defaultCurrent:1})})]}):(0,t.jsx)(a.Z,{style:{textAlign:"center",fontSize:"18px",color:"#C0C4CC",marginTop:"100px"},imageStyle:{width:"400px",height:"400px",margin:"0 auto"},image:q()})})]})},se=re},54154:function(R,O,e){"use strict";e.d(O,{Y8:function(){return l},IY:function(){return c},z2:function(){return g},m8:function(){return W},LX:function(){return S},gY:function(){return p},CX:function(){return m}});var E=e(11849),d=e(3182),v=e(94043),a=e.n(v),b=e(32773);function l(n){return f.apply(this,arguments)}function f(){return f=(0,d.Z)(a().mark(function n(h){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,b.WY)("/api/skyflying/getAllUserName",(0,E.Z)({method:"GET"},h||{})));case 1:case"end":return s.stop()}},n)})),f.apply(this,arguments)}function c(n){return u.apply(this,arguments)}function u(){return u=(0,d.Z)(a().mark(function n(h){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,b.WY)("/api/skyflying/getAllInstanceAndTableName",(0,E.Z)({method:"GET"},h||{})));case 1:case"end":return s.stop()}},n)})),u.apply(this,arguments)}function g(n,h){return _.apply(this,arguments)}function _(){return _=(0,d.Z)(a().mark(function n(h,x){return a().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,b.WY)("/api/skyflying/getAllSegments",(0,E.Z)({method:"GET",timeout:6e4,headers:{"Content-Type":"application/json"},params:h},x||{})));case 1:case"end":return P.stop()}},n)})),_.apply(this,arguments)}function W(n){return j.apply(this,arguments)}function j(){return j=(0,d.Z)(a().mark(function n(h){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,b.WY)("/api/skyflying/getAllUserNameFromDMS",(0,E.Z)({timeout:6e4},h||{})));case 1:case"end":return s.stop()}},n)})),j.apply(this,arguments)}function S(n){return o.apply(this,arguments)}function o(){return o=(0,d.Z)(a().mark(function n(h){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,b.WY)("/api/skyflying/getAllSqlTypeFromDMS",(0,E.Z)({timeout:6e4},h||{})));case 1:case"end":return s.stop()}},n)})),o.apply(this,arguments)}function p(n){return i.apply(this,arguments)}function i(){return i=(0,d.Z)(a().mark(function n(h){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,b.WY)("/api/skyflying/getAllTableNameFromDMS",(0,E.Z)({timeout:6e4},h||{})));case 1:case"end":return s.stop()}},n)})),i.apply(this,arguments)}function m(n,h){return r.apply(this,arguments)}function r(){return r=(0,d.Z)(a().mark(function n(h,x){return a().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,b.WY)("/api/skyflying/getDmsAuditLogFromDb",(0,E.Z)({method:"GET",timeout:6e4,params:h},x||{})));case 1:case"end":return P.stop()}},n)})),r.apply(this,arguments)}},24480:function(R,O,e){"use strict";e.d(O,{Z:function(){return v}});var E=e(69610),d=e(54941),v=function(){function a(){(0,E.Z)(this,a)}return(0,d.Z)(a,null,[{key:"timeStampToTime",value:function(l){var f=new Date(parseInt(l));return f.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(l){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",c,u={"Y+":l.getFullYear().toString(),"m+":(l.getMonth()+1).toString(),"d+":l.getDate().toString(),"H+":l.getHours().toString(),"M+":l.getMinutes().toString(),"S+":l.getSeconds().toString()},g=f;for(var _ in u)c=new RegExp("("+_+")").exec(f),c&&(g=g.replace(c[1],c[1].length==1?u[_]:u[_].padStart(c[1].length,"0")));return g}},{key:"uuid",value:function(){for(var l=[],f="0123456789abcdef",c=0;c<36;c++)l[c]=f.substr(Math.floor(Math.random()*16),1);return l[14]="4",l[19]=f.substr(l[19]&3|8,1),l[8]=l[13]=l[18]=l[23]="-",l.join("").replace(new RegExp(/(-)/g),"")}},{key:"getRangeTime",value:function(l,f){for(var c=[],u=l-1;u>=0;u--){var g=void 0;u===l-1?g=new Date(Date.now()-u*24*60*60*1e3).setHours(0,0,1,0):g=new Date(Date.now()-u*24*60*60*1e3).setHours(23,59,59,999),f?c.push(a.getLocalTime(new Date(g),f)):c.push(g)}return c}},{key:"getRangeStartAndEndTime",value:function(l,f){for(var c=[],u=l-1;u>=0;u--){var g=void 0;u===l-1?g=new Date(Date.now()-u*24*60*60*1e3).setHours(0,0,0,0):u===0?g=new Date(Date.now()-(u-1)*24*60*60*1e3).setHours(0,0,0,0):g=new Date(Date.now()-u*24*60*60*1e3).setHours(23,59,59,999),f?c.push(a.getLocalTime(new Date(g),f)):c.push(g)}return[c[0],c[l-1]]}}]),a}();v.arrayDeDuplication=function(a){return Array.from(new Set(a))}},6251:function(R,O,e){R.exports=e.p+"static/empty.a9f51423.png"},37636:function(R,O,e){"use strict";e.d(O,{Z:function(){return o}});var E=e(22122),d=e(96156),v=e(67294),a=e(94184),b=e.n(a),l=e(7085),f=e(65632),c=function(p,i){var m={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(m[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(p);n<r.length;n++)i.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(p,r[n])&&(m[r[n]]=p[r[n]]);return m},u=function(i){var m,r,n=i.prefixCls,h=i.className,x=i.color,s=x===void 0?"blue":x,P=i.dot,A=i.pending,I=A===void 0?!1:A,w=i.position,$=i.label,t=i.children,V=c(i,["prefixCls","className","color","dot","pending","position","label","children"]),B=v.useContext(f.E_),X=B.getPrefixCls,T=X("timeline",n),Q=b()((m={},(0,d.Z)(m,"".concat(T,"-item"),!0),(0,d.Z)(m,"".concat(T,"-item-pending"),I),m),h),q=b()((r={},(0,d.Z)(r,"".concat(T,"-item-head"),!0),(0,d.Z)(r,"".concat(T,"-item-head-custom"),!!P),(0,d.Z)(r,"".concat(T,"-item-head-").concat(s),!0),r)),K=/blue|red|green|gray/.test(s||"")?void 0:s;return v.createElement("li",(0,E.Z)({},V,{className:Q}),$&&v.createElement("div",{className:"".concat(T,"-item-label")},$),v.createElement("div",{className:"".concat(T,"-item-tail")}),v.createElement("div",{className:q,style:{borderColor:K,color:K}},P),v.createElement("div",{className:"".concat(T,"-item-content")},t))},g=u,_=e(96159),W=function(p,i){var m={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(m[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(p);n<r.length;n++)i.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(p,r[n])&&(m[r[n]]=p[r[n]]);return m},j=function(i){var m,r=v.useContext(f.E_),n=r.getPrefixCls,h=r.direction,x=i.prefixCls,s=i.pending,P=s===void 0?null:s,A=i.pendingDot,I=i.children,w=i.className,$=i.reverse,t=$===void 0?!1:$,V=i.mode,B=V===void 0?"":V,X=W(i,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),T=n("timeline",x),Q=typeof P=="boolean"?null:P,q=P?v.createElement(g,{pending:!!P,dot:A||v.createElement(l.Z,null)},Q):null,K=v.Children.toArray(I);K.push(q),t&&K.reverse();var H=function(Z,J){return B==="alternate"?Z.props.position==="right"?"".concat(T,"-item-right"):Z.props.position==="left"||J%2==0?"".concat(T,"-item-left"):"".concat(T,"-item-right"):B==="left"?"".concat(T,"-item-left"):B==="right"||Z.props.position==="right"?"".concat(T,"-item-right"):""},ae=K.filter(function(M){return!!M}),re=v.Children.count(ae),se="".concat(T,"-item-last"),le=v.Children.map(ae,function(M,Z){var J=Z===re-2?se:"",k=Z===re-1?se:"";return(0,_.Tm)(M,{className:b()([M.props.className,!t&&!!P?J:k,H(M,Z)])})}),N=K.some(function(M){var Z;return!!((Z=M==null?void 0:M.props)===null||Z===void 0?void 0:Z.label)}),G=b()(T,(m={},(0,d.Z)(m,"".concat(T,"-pending"),!!P),(0,d.Z)(m,"".concat(T,"-reverse"),!!t),(0,d.Z)(m,"".concat(T,"-").concat(B),!!B&&!N),(0,d.Z)(m,"".concat(T,"-label"),N),(0,d.Z)(m,"".concat(T,"-rtl"),h==="rtl"),m),w);return v.createElement("ul",(0,E.Z)({},X,{className:G}),le)};j.Item=g;var S=j,o=S},87593:function(R,O,e){"use strict";var E=e(38663),d=e.n(E),v=e(57529),a=e.n(v)}}]);
