(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[504],{78844:function(B,L,e){"use strict";var M=e(22122),E=e(28991),Z=e(81253),t=e(67294),u=e(30885),d=e(51617),f=e(66758),W=["fieldProps","proFieldProps"],y="dateTimeRange",p=t.forwardRef(function(P,S){var C=P.fieldProps,T=P.proFieldProps,n=(0,Z.Z)(P,W),c=(0,t.useContext)(f.Z);return t.createElement(u.Z,(0,M.Z)({ref:S,mode:"edit",fieldProps:(0,E.Z)({getPopupContainer:c.getPopupContainer},C),valueType:y,proFieldProps:T,filedConfig:{valueType:y,lightFilterLabelFormatter:function(O){return(0,d.Z)(O,"YYYY-MM-DD HH:mm:ss")}}},n))});L.Z=p},64317:function(B,L,e){"use strict";var M=e(22122),E=e(28991),Z=e(81253),t=e(67294),u=e(30885),d=e(96202),f=e(66758),W=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],y=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=t.forwardRef(function(n,c){var A=n.fieldProps,O=n.children,r=n.params,s=n.proFieldProps,l=n.mode,_=n.valueEnum,a=n.request,i=n.showSearch,v=n.options,F=(0,Z.Z)(n,W),R=(0,t.useContext)(f.Z);return t.createElement(u.Z,(0,M.Z)({mode:"edit",valueEnum:(0,d.h)(_),request:a,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({options:v,mode:l,showSearch:i,getPopupContainer:R.getPopupContainer},A),ref:c,proFieldProps:s},F),O)}),P=t.forwardRef(function(n,c){var A=n.fieldProps,O=n.children,r=n.params,s=n.proFieldProps,l=n.mode,_=n.valueEnum,a=n.request,i=n.options,v=(0,Z.Z)(n,y),F=(0,E.Z)({options:i,mode:l||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},A),R=(0,t.useContext)(f.Z);return t.createElement(u.Z,(0,M.Z)({mode:"edit",valueEnum:(0,d.h)(_),request:a,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({getPopupContainer:R.getPopupContainer},F),ref:c,proFieldProps:s},v),O)}),S=p,C=P,T=S;T.SearchSelect=C,T.displayName="ProFormComponent",L.Z=T},5894:function(B,L,e){"use strict";e.d(L,{A:function(){return i}});var M=e(9715),E=e(86835),Z=e(22122),t=e(67294),u=e(96156),d=e(49111),f=e(19650),W=e(84305),y=e(75901),p=e(28481),P=e(28991),S=e(8812),C=e(66758),T=e(96138),n=e(28664),c=e(58927),A=e(94184),O=e.n(A),r=e(2514),s=t.forwardRef(function(v,F){var R=t.useContext(C.Z),b=R.groupProps,g=(0,P.Z)((0,P.Z)({},b),v),w=g.children,K=g.collapsible,ne=g.defaultCollapsed,ae=g.style,se=g.labelLayout,j=g.title,G=j===void 0?v.label:j,z=g.tooltip,k=g.align,q=k===void 0?"start":k,$=g.direction,ee=g.size,te=ee===void 0?32:ee,oe=g.titleStyle,Y=g.titleRender,h=g.spaceProps,J=g.extra,x=g.autoFocus,D=(0,n.Z)(function(){return ne||!1},{value:v.collapsed,onChange:v.onCollapse}),m=(0,p.Z)(D,2),o=m[0],U=m[1],re=(0,t.useContext)(y.ZP.ConfigContext),V=re.getPrefixCls,H=(0,r.z)(v),ce=H.ColWrapper,ie=H.RowWrapper,X=V("pro-form-group"),ue=K&&t.createElement(S.Z,{style:{marginRight:8},rotate:o?void 0:90}),de=t.createElement(c.Z,{label:ue?t.createElement("div",null,ue,G):G,tooltip:z}),_e=(0,t.useCallback)(function(N){var Q=N.children;return t.createElement(f.Z,(0,Z.Z)({},h,{className:"".concat(X,"-container"),size:te,align:q,direction:$,style:(0,P.Z)({rowGap:0},h==null?void 0:h.style)}),Q)},[q,X,$,te,h]),me=Y?Y(de,v):de,ve=(0,t.useMemo)(function(){var N=[],Q=t.Children.toArray(w).map(function(I,Pe){var le;return t.isValidElement(I)&&(I==null||(le=I.props)===null||le===void 0?void 0:le.hidden)?(N.push(I),null):Pe===0&&t.isValidElement(I)&&x?t.cloneElement(I,(0,P.Z)((0,P.Z)({},I.props),{},{autoFocus:x})):I});return[t.createElement(ie,{key:"children",Wrapper:_e},Q),N.length>0?t.createElement("div",{style:{display:"none"}},N):null]},[w,ie,_e,x]),pe=(0,p.Z)(ve,2),Ee=pe[0],fe=pe[1];return t.createElement(ce,null,t.createElement("div",{className:O()(X,(0,u.Z)({},"".concat(X,"-twoLine"),se==="twoLine")),style:ae,ref:F},fe,(G||z||J)&&t.createElement("div",{className:"".concat(X,"-title"),style:oe,onClick:function(){U(!o)}},J?t.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"}},me,t.createElement("span",{onClick:function(Q){return Q.stopPropagation()}},J)):me),K&&o?null:Ee))});s.displayName="ProForm-Group";var l=s,_=e(87808),a=e(24214);function i(v){return t.createElement(a.I,(0,Z.Z)({layout:"vertical",submitter:{render:function(R,b){return b.reverse()}},contentRender:function(R,b){return t.createElement(t.Fragment,null,R,b)}},v))}i.Group=l,i.useForm=E.Z.useForm,i.Item=_.Z},58927:function(B,L,e){"use strict";var M=e(22385),E=e(61580),Z=e(96156),t=e(84305),u=e(75901),d=e(67294),f=e(68628),W=e(11445),y=e.n(W),p=e(94184),P=e.n(p),S=function(T){var n=T.label,c=T.tooltip,A=T.ellipsis,O=T.subTitle,r=(0,d.useContext)(u.ZP.ConfigContext),s=r.getPrefixCls;if(!c&&!O)return d.createElement(d.Fragment,null,n);var l=s("pro-core-label-tip"),_=typeof c=="string"||d.isValidElement(c)?{title:c}:c,a=(_==null?void 0:_.icon)||d.createElement(f.Z,null);return d.createElement("div",{className:l,onMouseDown:function(v){return v.stopPropagation()},onMouseLeave:function(v){return v.stopPropagation()},onMouseMove:function(v){return v.stopPropagation()}},d.createElement("div",{className:P()("".concat(l,"-title"),(0,Z.Z)({},"".concat(l,"-title-ellipsis"),A))},n),O&&d.createElement("div",{className:"".concat(l,"-subtitle")},O),c&&d.createElement(E.Z,_,d.createElement("span",{className:"".concat(l,"-icon")},a)))};L.Z=d.memo(S)},59712:function(B){B.exports={auditLog:"auditLog___oJOgF","auditLog__form-wrap":"auditLog__form-wrap___1CBpJ",content:"content___Hfc44"}},96138:function(){},11445:function(){},6227:function(B,L,e){"use strict";e.r(L);var M=e(49111),E=e(19650),Z=e(71153),t=e(60331),u=e(11849),d=e(3182),f=e(2824),W=e(94043),y=e.n(W),p=e(67294),P=e(59712),S=e.n(P),C=e(54154),T=e(89366),n=e(5894),c=e(64317),A=e(78844),O=e(29474),r=e(85893),s=function(){var _=(0,p.useState)([]),a=(0,f.Z)(_,2),i=a[0],v=a[1],F=(0,p.useState)([]),R=(0,f.Z)(F,2),b=R[0],g=R[1],w=(0,p.useState)([]),K=(0,f.Z)(w,2),ne=K[0],ae=K[1],se=(0,p.useState)([]),j=(0,f.Z)(se,2),G=j[0],z=j[1],k=(0,p.useRef)(),q=(0,p.useState)(0),$=(0,f.Z)(q,2),ee=$[0],te=$[1],oe=(0,p.useState)({pageNo:1,pageSize:20}),Y=(0,f.Z)(oe,2),h=Y[0],J=Y[1],x=(0,p.useCallback)(function(D){(0,C.CX)(D).then(function(m){var o=m.data,U=JSON.parse(o);if(te(U.total),U.rows){var re=JSON.parse(U.rows);z(re)}else z([])})},[]);return(0,p.useEffect)(function(){(0,C.m8)().then(function(D){var m=D.data;if(m){var o=JSON.parse(m);v(o)}}),(0,C.LX)().then(function(D){var m=D.data;if(m){var o=JSON.parse(m);ae(o)}}),(0,C.gY)().then(function(D){var m=D.data;if(m){var o=JSON.parse(m);g(o)}}),x(h)},[h,x]),(0,r.jsxs)("div",{className:S().auditLog,children:[(0,r.jsx)("div",{className:S()["auditLog__form-wrap"],children:(0,r.jsxs)(n.A,{layout:"inline",formRef:k,size:"middle",onFinish:function(){var D=(0,d.Z)(y().mark(function m(o){var U;return y().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:U={},Object.keys(o).length>0&&(o.times?(U=(0,u.Z)({startTime:o[0],endTime:o.times[1]},o),delete U.times):U=(0,u.Z)({},o),J(function(H){return(0,u.Z)({pageNo:H.pageNo,pageSize:H.pageSize},U)})),x((0,u.Z)({pageSize:h.pageSize,pageNo:h.pageNo},U));case 3:case"end":return V.stop()}},m)}));return function(m){return D.apply(this,arguments)}}(),submitter:{searchConfig:{submitText:"\u67E5\u8BE2"}},children:[(0,r.jsx)(n.A.Group,{children:(0,r.jsx)(c.Z,{options:i,placeholder:"\u7528\u6237\u540D",name:"dbUserName",filedConfig:{},fieldProps:{}},"value")}),(0,r.jsx)(n.A.Group,{children:(0,r.jsx)(c.Z,{options:b,width:"sm",placeholder:"\u6570\u636E\u5E93\u8868\u540D",name:"msTableName",filedConfig:{},fieldProps:{}},"value")}),(0,r.jsx)(n.A.Group,{children:(0,r.jsx)(c.Z,{options:ne,placeholder:"\u64CD\u4F5C\u7C7B\u578B",name:"sqlType"},"value")}),(0,r.jsx)(n.A.Group,{children:(0,r.jsx)(A.Z,{width:"md",fieldProps:{placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],bordered:!0},name:"times"})})]})}),(0,r.jsx)("div",{className:S().content,children:(0,r.jsx)(O.Rs,{rowKey:"id",dataSource:G,headerTitle:"\u6570\u636E\u5E93\u5BA1\u8BA1\u65E5\u5FD7\u5217\u8868",pagination:{showSizeChanger:!1,pageSize:h.pageSize,total:ee,current:h.pageNo,size:"small",onChange:function(m,o){x({pageNo:m,pageSize:o,dbUserName:h.dbUserName,sqlType:h.sqlType,msTableName:h.msTableName,startTime:h.startTime,endTime:h.endTime})}},metas:{avatar:{render:function(){return(0,r.jsx)(T.Z,{style:{color:"#52c41a"}})},search:!1},title:{dataIndex:"userName",search:!1},description:{dataIndex:"instanceName",search:!1,render:function(m,o){return[(0,r.jsxs)("div",{className:"fs-12",children:[(0,r.jsx)("span",{children:"\u6570\u636E\u5E93\u5B9E\u4F8B\u5730\u5740\uFF1A"}),(0,r.jsx)("span",{style:{color:"#36cfc9"},children:o.instanceName})]},"instanceName")]}},subTitle:{search:!1,dataIndex:"opTime",render:function(m,o){return[(0,r.jsxs)(E.Z,{children:[(0,r.jsx)("span",{children:o.opTime},"opTime"),o.sqlType&&o.sqlType!=="UNKNOW"&&(0,r.jsx)(t.Z,{color:"#55acee",children:(0,r.jsxs)("span",{className:"fs-12",children:["\u64CD\u4F5C\u7C7B\u578B\uFF1A",o.sqlType]})},"sqlType"),o.msTableName&&(0,r.jsx)(t.Z,{color:"#55acee",children:(0,r.jsxs)("span",{className:"fs-12",children:["\u8868\u540D\uFF1A",o.msTableName]})},"sqlType")]},"space")]}},content:{dataIndex:"msSql",search:!1,render:function(m,o){return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{color:"#00000073"},children:"SQL\u8BED\u53E5"}),(0,r.jsx)("div",{style:{color:"#000000D9"},children:o.msSql})]},"msSql")}}}})})]})};L.default=s},54154:function(B,L,e){"use strict";e.d(L,{Y8:function(){return d},IY:function(){return W},z2:function(){return p},m8:function(){return S},LX:function(){return T},gY:function(){return c},CX:function(){return O}});var M=e(11849),E=e(3182),Z=e(94043),t=e.n(Z),u=e(25377);function d(s){return f.apply(this,arguments)}function f(){return f=(0,E.Z)(t().mark(function s(l){return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.WY)("/api/skyflying/getAllUserName",(0,M.Z)({method:"GET"},l||{})));case 1:case"end":return a.stop()}},s)})),f.apply(this,arguments)}function W(s){return y.apply(this,arguments)}function y(){return y=(0,E.Z)(t().mark(function s(l){return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.WY)("/api/skyflying/getAllInstanceAndTableName",(0,M.Z)({method:"GET"},l||{})));case 1:case"end":return a.stop()}},s)})),y.apply(this,arguments)}function p(s,l){return P.apply(this,arguments)}function P(){return P=(0,E.Z)(t().mark(function s(l,_){return t().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.WY)("/api/skyflying/getAllSegments",(0,M.Z)({method:"GET",timeout:6e4,headers:{"Content-Type":"application/json"},params:l},_||{})));case 1:case"end":return i.stop()}},s)})),P.apply(this,arguments)}function S(s){return C.apply(this,arguments)}function C(){return C=(0,E.Z)(t().mark(function s(l){return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.WY)("/api/skyflying/getAllUserNameFromDMS",(0,M.Z)({timeout:6e4},l||{})));case 1:case"end":return a.stop()}},s)})),C.apply(this,arguments)}function T(s){return n.apply(this,arguments)}function n(){return n=(0,E.Z)(t().mark(function s(l){return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.WY)("/api/skyflying/getAllSqlTypeFromDMS",(0,M.Z)({timeout:6e4},l||{})));case 1:case"end":return a.stop()}},s)})),n.apply(this,arguments)}function c(s){return A.apply(this,arguments)}function A(){return A=(0,E.Z)(t().mark(function s(l){return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.WY)("/api/skyflying/getAllTableNameFromDMS",(0,M.Z)({timeout:6e4},l||{})));case 1:case"end":return a.stop()}},s)})),A.apply(this,arguments)}function O(s,l){return r.apply(this,arguments)}function r(){return r=(0,E.Z)(t().mark(function s(l,_){return t().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.WY)("/api/skyflying/getDmsAuditLogFromDb",(0,M.Z)({method:"GET",timeout:6e4,params:l},_||{})));case 1:case"end":return i.stop()}},s)})),r.apply(this,arguments)}}}]);
