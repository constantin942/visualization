(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(B){B.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2",nowrap:"nowrap___spq6f"}},81135:function(B,A,e){"use strict";e.r(A),e.d(A,{default:function(){return _e}});var E=e(57663),p=e(71577),R=e(13062),s=e(71230),_=e(95300),a=e(7277),u=e(89032),n=e(15746),r=e(58024),o=e(39144),S=e(71748),c=e(33860),h=e(3182),C=e(2824),U=e(94043),d=e.n(U),T=e(67294),m=e(26516),i=e.n(m),y=e(11849),b=e(46066),l=e(68628),t=e(85893),te=function(O){var Z={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Z,{className:"fs-16 ib danger mr-10"}),(0,t.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,t.jsx)("div",{className:"of-hidden",children:(0,t.jsx)(b.Z,(0,y.Z)((0,y.Z)({},Z),{},{children:O.warningList.map(function(j){return(0,t.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:j.alarmContent},j.id)})}))})]})},ae=te,ne=e(69886),se=function(O){return(0,T.useEffect)(function(){var Z=new ne.x1("RangeTimeData",{height:148,data:O.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"diamond",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"marker-active"}]});Z.changeData(O.data),Z.chart.data(O.data),Z.render()},[]),(0,t.jsx)("div",{id:"RangeTimeData"})},re=se,F=e(47369),N=e(24480),ue=e(6650),K=e(32773);function le(W,O){return k.apply(this,arguments)}function k(){return k=(0,h.Z)(d().mark(function W(O,Z){return d().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,K.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,y.Z)({params:O,method:"GET"},Z||{})));case 1:case"end":return M.stop()}},W)})),k.apply(this,arguments)}function ie(W){return L.apply(this,arguments)}function L(){return L=(0,h.Z)(d().mark(function W(O){return d().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,K.WY)("/api/skyflying/getOverviewOfSystem",(0,y.Z)({method:"GET"},O||{})));case 1:case"end":return j.stop()}},W)})),L.apply(this,arguments)}var oe=e(66572),de=e(2335),ce=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,render:function(O,Z){return(0,t.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:Z.usualVisitedData})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],me=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center"},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,align:"center"}],fe=function(O){var Z=(0,T.useState)(),j=(0,C.Z)(Z,2),M=j[0],$=j[1],ge=(0,T.useState)([]),H=(0,C.Z)(ge,2),Y=H[0],ve=H[1],pe=(0,T.useState)([]),V=(0,C.Z)(pe,2),z=V[0],he=V[1],ye=(0,T.useState)([]),J=(0,C.Z)(ye,2),De=J[0],X=J[1],Ee=(0,T.useState)(0),Q=(0,C.Z)(Ee,2),Ce=Q[0],Oe=Q[1],Se=(0,T.useState)({pageSize:20,pageNo:1}),Te=(0,C.Z)(Se,1),G=Te[0],Ue=(0,T.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),q=(0,C.Z)(Ue,2),I=q[0],Ze=q[1];function be(){(0,de.cD)({pageSize:100,pageNo:1}).then(function(x){var f=x.data;if(f){var g=JSON.parse(f);if(g){var v=JSON.parse(g.rows);X(v.map(function(D,w){return D.matchRuleId=w,D})),console.log(v)}else X([])}})}var je=function(){(0,ue.F$)().then(function(f){var g=f.data;if(g&&g.length>0){$(g.map(function(D){return D.id=N.Z.uuid(),D}));var v=[];g.forEach(function(D){v.push({level:1,name:D.userName,childrenNum:5,id:D.userName})}),console.log(v)}else $([])})},xe=function(){var f=N.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),g=N.Z.getRangeTime(7,"mm-dd");le({startTime:f[0],endTime:f[1]}).then(function(v){var D=v.data;ve(function(){return D.map(function(w,P){return{year:g[P],value:w}})})})},we=function(){var x=(0,h.Z)(d().mark(function f(){var g,v;return d().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,ie();case 2:g=w.sent,v=g.data,Ze(v);case 5:case"end":return w.stop()}},f)}));return function(){return x.apply(this,arguments)}}(),Ae=function(){var x=(0,h.Z)(d().mark(function f(){return d().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:case"end":return v.stop()}},f)}));return function(){return x.apply(this,arguments)}}(),ee=function(f){(0,oe.m)(f).then(function(g){var v=g.data;if(v){var D=JSON.parse(v);Oe(D.total);var w=JSON.parse(D.rows);console.log(D),he(w.map(function(P){return P.id=N.Z.uuid(),P}))}})};return(0,T.useEffect)(function(){je(),xe(),ee(G),we().then(),Ae().then(),be(),console.log(new Date("2022-07-20T03:22:09.000+0000"))},[]),(0,t.jsxs)("div",{className:i().overview,children:[(0,t.jsx)("div",{className:i().staticWrap,children:(0,t.jsxs)(s.Z,{gutter:20,children:[(0,t.jsx)(n.Z,{span:8,children:(0,t.jsx)(o.Z,{className:i().bgW,title:"\u8FD1\u4E03\u5929\u4FE1\u606F\u91C7\u96C6\u60C5\u51B5",children:(0,t.jsx)("div",{className:"mt-15",children:(0,t.jsx)(c.Z,{active:!0,loading:Y.length===0,children:(0,t.jsx)(re,{data:Y})})})})}),(0,t.jsx)(n.Z,{span:8,children:(0,t.jsx)(o.Z,{className:i().bgW,title:(0,t.jsx)("div",{className:"text-c",children:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5"}),children:(0,t.jsx)(s.Z,{gutter:20,className:"text-c",style:{height:"162px"},children:(0,t.jsxs)(c.Z,{active:!0,loading:Y.length===0,children:[(0,t.jsx)(n.Z,{span:12,className:"mt-15 text-c",children:(0,t.jsx)(a.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:I.visitedInformation,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(n.Z,{span:12,className:"mt-15",children:(0,t.jsx)(a.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:I.dbInstance,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(n.Z,{span:12,className:"mt-20",children:(0,t.jsx)(a.Z,{title:"\u7528\u6237\u4EBA\u6570",value:I.user,valueStyle:{color:"#3f8600"}})}),(0,t.jsx)(n.Z,{span:12,className:"mt-20",children:(0,t.jsx)(a.Z,{title:"\u6570\u636E\u5E93\u8868",value:I.table,valueStyle:{color:"#3f8600"}})})]})})})}),(0,t.jsx)(n.Z,{span:8,children:(0,t.jsx)("div",{className:i().waringWrap,children:(0,t.jsx)(ae,{warningList:De})})})]})}),(0,t.jsx)("div",{className:i().center,children:(0,t.jsxs)(s.Z,{gutter:30,children:[(0,t.jsx)(n.Z,{span:12,children:(0,t.jsx)(F.ZP,{columns:ce,dataSource:M,scroll:{y:500},options:!1,toolBarRender:function(){return[(0,t.jsx)(p.Z,{type:"link",size:"small",onClick:function(){O.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,pagination:!1,headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,t.jsx)(n.Z,{span:12,className:"pr-10",children:(0,t.jsx)(c.Z,{active:!0,loading:z.length===0,paragraph:{rows:5},children:(0,t.jsx)(F.ZP,{scroll:{y:500},columns:me,dataSource:z,options:!1,rowKey:"id",search:!1,pagination:{total:Ce,pageSize:G.pageSize,current:G.pageNo,onChange:function(f,g){ee({pageNo:f,pageSize:g})}},toolBarRender:function(){return[(0,t.jsx)(p.Z,{type:"link",size:"small",onClick:function(){O.history.push("/databases")},children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u884C\u4E3A"})})})]})})]})},_e=fe},66572:function(B,A,e){"use strict";e.d(A,{m:function(){return a}});var E=e(11849),p=e(3182),R=e(94043),s=e.n(R),_=e(21704);function a(n,r){return u.apply(this,arguments)}function u(){return u=(0,p.Z)(s().mark(function n(r,o){return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,_.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,E.Z)({method:"GET",params:r},o||{})));case 1:case"end":return c.stop()}},n)})),u.apply(this,arguments)}},6650:function(B,A,e){"use strict";e.d(A,{F$:function(){return a},Xd:function(){return n},et:function(){return c},Bx:function(){return C},wA:function(){return d}});var E=e(11849),p=e(3182),R=e(94043),s=e.n(R),_=e(32773);function a(m){return u.apply(this,arguments)}function u(){return u=(0,p.Z)(s().mark(function m(i){return s().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,_.WY)("/api/skyflying/getCoarseCountsOfUser",(0,E.Z)({method:"GET"},i||{})));case 1:case"end":return b.stop()}},m)})),u.apply(this,arguments)}function n(m,i){return r.apply(this,arguments)}function r(){return r=(0,p.Z)(s().mark(function m(i,y){return s().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,_.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,E.Z)({method:"GET",params:i},y||{})));case 1:case"end":return l.stop()}},m)})),r.apply(this,arguments)}function o(m,i){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime.mark(function m(i,y){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:i},y||{})));case 1:case"end":return l.stop()}},m)})),S.apply(this,arguments)}function c(m,i){return h.apply(this,arguments)}function h(){return h=(0,p.Z)(s().mark(function m(i,y){return s().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,_.WY)("/api/skyflying/getCountsOfUser",(0,E.Z)({method:"GET",params:i},y||{})));case 1:case"end":return l.stop()}},m)})),h.apply(this,arguments)}function C(m,i){return U.apply(this,arguments)}function U(){return U=(0,p.Z)(s().mark(function m(i,y){return s().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,_.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,E.Z)({method:"GET",params:i},y||{})));case 1:case"end":return l.stop()}},m)})),U.apply(this,arguments)}function d(m,i){return T.apply(this,arguments)}function T(){return T=(0,p.Z)(s().mark(function m(i,y){return s().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,_.WY)("/api/skyflying/getCoarseCountsOfOneUser",(0,E.Z)({method:"GET",params:i||{}},y||{})));case 1:case"end":return l.stop()}},m)})),T.apply(this,arguments)}},2335:function(B,A,e){"use strict";e.d(A,{rO:function(){return a},cD:function(){return n},sF:function(){return o}});var E=e(11849),p=e(3182),R=e(94043),s=e.n(R),_=e(32773);function a(c){return u.apply(this,arguments)}function u(){return u=(0,p.Z)(s().mark(function c(h){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,_.WY)("/api/skyflying/getUserNameAnomalyDetectionInfo",(0,E.Z)({method:"GET"},h||{})));case 1:case"end":return U.stop()}},c)})),u.apply(this,arguments)}function n(c,h){return r.apply(this,arguments)}function r(){return r=(0,p.Z)(s().mark(function c(h,C){return s().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,_.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,E.Z)({method:"GET",params:h||{}},C||{})));case 1:case"end":return d.stop()}},c)})),r.apply(this,arguments)}function o(c,h){return S.apply(this,arguments)}function S(){return S=(0,p.Z)(s().mark(function c(h,C){return s().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,_.WY)("/api/skyflying/getAnomalyDetectionInfoByGroupByUserName",(0,E.Z)({method:"GET",params:h||{}},C||{})));case 1:case"end":return d.stop()}},c)})),S.apply(this,arguments)}},24480:function(B,A,e){"use strict";e.d(A,{Z:function(){return R}});var E=e(69610),p=e(54941),R=function(){function s(){(0,E.Z)(this,s)}return(0,p.Z)(s,null,[{key:"timeStampToTime",value:function(a){var u=new Date(parseInt(a));return u.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",n,r={"Y+":a.getFullYear().toString(),"m+":(a.getMonth()+1).toString(),"d+":a.getDate().toString(),"H+":a.getHours().toString(),"M+":a.getMinutes().toString(),"S+":a.getSeconds().toString()},o=u;for(var S in r)n=new RegExp("("+S+")").exec(u),n&&(o=o.replace(n[1],n[1].length==1?r[S]:r[S].padStart(n[1].length,"0")));return o}},{key:"uuid",value:function(){for(var a=[],u="0123456789abcdef",n=0;n<36;n++)a[n]=u.substr(Math.floor(Math.random()*16),1);return a[14]="4",a[19]=u.substr(a[19]&3|8,1),a[8]=a[13]=a[18]=a[23]="-",a.join("").replace(new RegExp(/(-)/g),"")}},{key:"getRangeTime",value:function(a,u){for(var n=[],r=a-1;r>=0;r--){var o=void 0;r===a-1?o=new Date(Date.now()-r*24*60*60*1e3).setHours(0,0,1,0):o=new Date(Date.now()-r*24*60*60*1e3).setHours(23,59,59,999),u?n.push(s.getLocalTime(new Date(o),u)):n.push(o)}return n}},{key:"getRangeStartAndEndTime",value:function(a,u){for(var n=[],r=a-1;r>=0;r--){var o=void 0;r===a-1?o=new Date(Date.now()-r*24*60*60*1e3).setHours(0,0,0,0):r===0?o=new Date(Date.now()-(r-1)*24*60*60*1e3).setHours(0,0,0,0):o=new Date(Date.now()-r*24*60*60*1e3).setHours(23,59,59,999),u?n.push(s.getLocalTime(new Date(o),u)):n.push(o)}return[n[0],n[a-1]]}}]),s}();R.arrayDeDuplication=function(s){return Array.from(new Set(s))}}}]);
