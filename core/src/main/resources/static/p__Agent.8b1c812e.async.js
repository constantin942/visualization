(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[890],{5966:function(ue,H,e){"use strict";var b=e(22122),M=e(81253),R=e(67294),l=e(30885),K=["fieldProps","proFieldProps"],u=["fieldProps","proFieldProps"],p="text",m=function(V){var k=V.fieldProps,re=V.proFieldProps,le=(0,M.Z)(V,K);return R.createElement(l.Z,(0,b.Z)({mode:"edit",valueType:p,fieldProps:k,filedConfig:{valueType:p},proFieldProps:re},le))},t=function(V){var k=V.fieldProps,re=V.proFieldProps,le=(0,M.Z)(V,u);return R.createElement(l.Z,(0,b.Z)({mode:"edit",valueType:"password",fieldProps:k,proFieldProps:re,filedConfig:{valueType:p}},le))},x=m;x.Password=t,x.displayName="ProFormComponent",H.Z=x},79537:function(ue){ue.exports={agent:"agent___1XmY6",content:"content___23NZq",itemTitle:"itemTitle___2xC9y",activeItemTitle:"activeItemTitle___13Pah",itemWrap:"itemWrap___2R-Oy"}},99210:function(){},57529:function(){},49880:function(ue,H,e){"use strict";e.r(H),e.d(H,{default:function(){return Oe}});var b=e(14781),M=e(23492),R=e(54029),l=e(79166),K=e(38663),u=e(57529),p=e(22122),m=e(96156),t=e(67294),x=e(94184),I=e.n(x),V=e(7085),k=e(65632),re=function(o,r){var c={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(c[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,n=Object.getOwnPropertySymbols(o);d<n.length;d++)r.indexOf(n[d])<0&&Object.prototype.propertyIsEnumerable.call(o,n[d])&&(c[n[d]]=o[n[d]]);return c},le=function(r){var c,n,d=r.prefixCls,B=r.className,z=r.color,g=z===void 0?"blue":z,f=r.dot,N=r.pending,P=N===void 0?!1:N,G=r.position,A=r.label,J=r.children,oe=re(r,["prefixCls","className","color","dot","pending","position","label","children"]),Q=t.useContext(k.E_),pe=Q.getPrefixCls,h=pe("timeline",d),ve=I()((c={},(0,m.Z)(c,"".concat(h,"-item"),!0),(0,m.Z)(c,"".concat(h,"-item-pending"),P),c),B),xe=I()((n={},(0,m.Z)(n,"".concat(h,"-item-head"),!0),(0,m.Z)(n,"".concat(h,"-item-head-custom"),!!f),(0,m.Z)(n,"".concat(h,"-item-head-").concat(g),!0),n)),$=/blue|red|green|gray/.test(g||"")?void 0:g;return t.createElement("li",(0,p.Z)({},oe,{className:ve}),A&&t.createElement("div",{className:"".concat(h,"-item-label")},A),t.createElement("div",{className:"".concat(h,"-item-tail")}),t.createElement("div",{className:xe,style:{borderColor:$,color:$}},f),t.createElement("div",{className:"".concat(h,"-item-content")},J))},Ce=le,Ne=e(96159),Me=function(o,r){var c={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(c[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,n=Object.getOwnPropertySymbols(o);d<n.length;d++)r.indexOf(n[d])<0&&Object.prototype.propertyIsEnumerable.call(o,n[d])&&(c[n[d]]=o[n[d]]);return c},ce=function(r){var c,n=t.useContext(k.E_),d=n.getPrefixCls,B=n.direction,z=r.prefixCls,g=r.pending,f=g===void 0?null:g,N=r.pendingDot,P=r.children,G=r.className,A=r.reverse,J=A===void 0?!1:A,oe=r.mode,Q=oe===void 0?"":oe,pe=Me(r,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),h=d("timeline",z),ve=typeof f=="boolean"?null:f,xe=f?t.createElement(Ce,{pending:!!f,dot:N||t.createElement(V.Z,null)},ve):null,$=t.Children.toArray(P);$.push(xe),J&&$.reverse();var $e=function(D,ae){return Q==="alternate"?D.props.position==="right"?"".concat(h,"-item-right"):D.props.position==="left"||ae%2==0?"".concat(h,"-item-left"):"".concat(h,"-item-right"):Q==="left"?"".concat(h,"-item-left"):Q==="right"||D.props.position==="right"?"".concat(h,"-item-right"):""},ye=$.filter(function(Z){return!!Z}),Se=t.Children.count(ye),je="".concat(h,"-item-last"),De=t.Children.map(ye,function(Z,D){var ae=D===Se-2?je:"",Fe=D===Se-1?je:"";return(0,Ne.Tm)(Z,{className:I()([Z.props.className,!J&&!!f?ae:Fe,$e(Z,D)])})}),Re=$.some(function(Z){var D;return!!((D=Z==null?void 0:Z.props)===null||D===void 0?void 0:D.label)}),Ie=I()(h,(c={},(0,m.Z)(c,"".concat(h,"-pending"),!!f),(0,m.Z)(c,"".concat(h,"-reverse"),!!J),(0,m.Z)(c,"".concat(h,"-").concat(Q),!!Q&&!Re),(0,m.Z)(c,"".concat(h,"-label"),Re),(0,m.Z)(c,"".concat(h,"-rtl"),B==="rtl"),c),G);return t.createElement("ul",(0,p.Z)({},pe,{className:Ie}),De)};ce.Item=Ce;var Ve=ce,ge=Ve,Ue=e(57663),he=e(71577),Ee=e(71153),Pe=e(60331),s=e(90387),i=e(9536),v=e(2824),y=e(79537),S=e.n(y),E=e(28991),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M952 224h-52c-4.4 0-8 3.6-8 8v248h-92V304c0-4.4-3.6-8-8-8H232c-4.4 0-8 3.6-8 8v176h-92V232c0-4.4-3.6-8-8-8H72c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8h52c4.4 0 8-3.6 8-8V548h92v172c0 4.4 3.6 8 8 8h560c4.4 0 8-3.6 8-8V548h92v244c0 4.4 3.6 8 8 8h52c4.4 0 8-3.6 8-8V232c0-4.4-3.6-8-8-8zM296 368h88v288h-88V368zm432 288H448V368h280v288z"}}]},name:"box-plot",theme:"outlined"},Y=q,_=e(27029),ee=function(r,c){return t.createElement(_.Z,(0,E.Z)((0,E.Z)({},r),{},{ref:c,icon:Y}))};ee.displayName="BoxPlotOutlined";var te=t.forwardRef(ee),ne=e(8212),F=e(11849),O=e(3182),de=e(94043),j=e.n(de),se=e(32773);function T(o,r){return ie.apply(this,arguments)}function ie(){return ie=(0,O.Z)(j().mark(function o(r,c){return j().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,se.WY)("/api/skyflying/getAllSkywalkingAgent",(0,F.Z)({method:"GET",params:r},c||{})));case 1:case"end":return d.stop()}},o)})),ie.apply(this,arguments)}function W(o,r){return L.apply(this,arguments)}function L(){return L=(0,O.Z)(j().mark(function o(r,c){return j().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,se.WY)("/api/skyflying/updateSkywalkingAgent",(0,F.Z)({method:"GET",params:r},c||{})));case 1:case"end":return d.stop()}},o)})),L.apply(this,arguments)}function We(o){return me.apply(this,arguments)}function me(){return me=(0,O.Z)(j().mark(function o(r){return j().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,se.WY)("/api/skyflying/getActiveSkywalkingAgent",(0,F.Z)({method:"GET"},r||{})));case 1:case"end":return n.stop()}},o)})),me.apply(this,arguments)}var w=e(71194),Be=e(50146),Ze=e(5894),be=e(5966),a=e(85893);function Te(o,r){var c={labelCol:{span:6},wrapperCol:{span:20}},n=(0,t.useState)(),d=(0,v.Z)(n,2),B=d[0],z=d[1],g=(0,t.useRef)();return(0,t.useImperativeHandle)(r,function(){return{setInitValues:function(N){var P;z(N),(P=g.current)===null||P===void 0||P.setFieldsValue({agentName:N.agentName})}}}),(0,a.jsx)(Be.Z,{width:400,title:"\u4FEE\u6539\u63A2\u9488\u522B\u540D",visible:o.updateNameVisible,footer:[],onCancel:function(){return o.setVisible(!1)},children:(0,a.jsxs)(Ze.A,(0,F.Z)((0,F.Z)({formRef:g,layout:"horizontal"},c),{},{onFinish:function(){var f=(0,O.Z)(j().mark(function N(P){return j().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:W({id:B==null?void 0:B.id,agentName:P.agentName}).then(function(){o.refresh(),o.setVisible(!1)});case 1:case"end":return A.stop()}},N)}));return function(N){return f.apply(this,arguments)}}(),submitter:!1,children:[(0,a.jsx)(be.Z,{fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u522B\u540D"},label:"\u63A2\u9488\u522B\u540D",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u522B\u540D"}],name:"agentName",initialValue:o.agentName}),(0,a.jsx)(Ze.A.Group,{style:{textAlign:"center"},children:(0,a.jsx)(he.Z,{type:"primary",htmlType:"submit",className:"w-100",children:"\u786E\u8BA4\u4FEE\u6539"})})]}))})}var ze=(0,t.forwardRef)(Te),Ae=e(24480),Le=function(){var r=(0,t.useState)(0),c=(0,v.Z)(r,2),n=c[0],d=c[1],B=(0,t.useState)([]),z=(0,v.Z)(B,2),g=z[0],f=z[1],N=(0,t.useState)([]),P=(0,v.Z)(N,2),G=P[0],A=P[1],J=(0,t.useState)(""),oe=(0,v.Z)(J,2),Q=oe[0],pe=oe[1],h=(0,t.useState)(!1),ve=(0,v.Z)(h,2),xe=ve[0],$=ve[1],$e=(0,t.useState)("\u670D\u52A1\u5217\u8868"),ye=(0,v.Z)($e,2),Se=ye[0],je=ye[1],De=(0,t.useRef)(),Re=(0,t.useState)({pageNo:1,pageSize:20}),Ie=(0,v.Z)(Re,2),Z=Ie[0],D=Ie[1];(0,t.useEffect)(function(){ae(Z)},[]);function ae(C){T(C).then(function(U){var X=U.data,fe=JSON.parse(X);if(fe){var He=JSON.parse(fe.rows);d(fe.total),f(He),console.log(He)}})}function Fe(){We().then(function(C){var U=C.data,X=JSON.parse(U);X&&X.length>0&&A(X.map(function(fe){return fe.id=Ae.Z.uuid(),fe})),console.log(X)})}return(0,a.jsxs)("div",{className:S().agent,children:[(0,a.jsx)("div",{className:"text-c mb-30",children:(0,a.jsx)(i.Z,{options:["\u670D\u52A1\u5217\u8868","\u5B58\u6D3B\u63A2\u9488"],onChange:function(U){je(U),U==="\u670D\u52A1\u5217\u8868"?ae(Z):Fe()}})}),(0,a.jsx)("div",{className:S().content,children:(0,a.jsx)(ge,{children:Se==="\u670D\u52A1\u5217\u8868"?g.map(function(C){return(0,a.jsxs)(ge.Item,{dot:(0,a.jsx)(te,{}),children:[(0,a.jsxs)("div",{className:S().itemTitle,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"primary-blue-5 ib",children:C.agentName||"-"}),(0,a.jsx)(Pe.Z,{color:"#2db7f5",className:"ml-10",style:{marginLeft:"10px",padding:"0px 3px"},children:C.agentCode})]}),(0,a.jsx)(he.Z,{size:"small",type:"link",className:"fs-12",icon:(0,a.jsx)(ne.Z,{}),onClick:function(){pe(C.agentName||""),$(!0),De.current.setInitValues({id:C.id,agentName:C.agentName||""})},children:"\u4FEE\u6539\u522B\u540D"})]}),(0,a.jsxs)("div",{className:"fs-12",children:[(0,a.jsx)("span",{children:"\u521B\u5EFA\u65F6\u95F4\uFF1A"}),(0,a.jsx)("span",{children:C.gmtCreate})]})]},C.id)}):G.map(function(C){return(0,a.jsx)(ge.Item,{dot:(0,a.jsx)(te,{}),children:(0,a.jsx)(l.Z.Ribbon,{color:"green",children:(0,a.jsxs)("div",{className:S().itemWrap,children:[(0,a.jsxs)("div",{className:S().activeItemTitle,children:[(0,a.jsx)("h3",{className:"primary-blue-5",children:C.agentName||"-"}),C.serviceCode&&(0,a.jsx)(Pe.Z,{color:"#2db7f5",className:"ml-10",style:{marginLeft:"10px",padding:"0px 3px"},children:C.serviceCode}),(0,a.jsxs)("span",{className:"fs-12 ml-10 gray-7",children:[(0,a.jsx)("span",{children:"\u6700\u540E\u53D1\u9001\u6D88\u606F\u65F6\u95F4\uFF1A"}),(0,a.jsx)("span",{children:C.time})]})]}),(0,a.jsxs)("div",{className:"fs-12",children:[(0,a.jsx)("span",{children:"\u670D\u52A1\u5730\u5740\uFF1A"}),(0,a.jsx)("span",{children:C.serviceInstanceName})]})]})})},C.id)})})}),(0,a.jsx)("div",{className:"text-r mb-20",children:(0,a.jsx)(M.Z,{showSizeChanger:!1,size:"small",showQuickJumper:!0,current:Z.pageNo,pageSize:Z.pageSize,total:n,onChange:function(U,X){D({pageNo:U,pageSize:X}),ae({pageNo:U,pageSize:X})}})}),(0,a.jsx)(ze,{updateNameVisible:xe,setVisible:$,refresh:function(){Se==="\u670D\u52A1\u5217\u8868"?ae(Z):Fe()},ref:De,agentName:Q})]})},Oe=Le},24480:function(ue,H,e){"use strict";e.d(H,{Z:function(){return R}});var b=e(69610),M=e(54941),R=function(){function l(){(0,b.Z)(this,l)}return(0,M.Z)(l,null,[{key:"timeStampToTime",value:function(u){var p=new Date(parseInt(u));return p.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",m,t={"Y+":u.getFullYear().toString(),"m+":(u.getMonth()+1).toString(),"d+":u.getDate().toString(),"H+":u.getHours().toString(),"M+":u.getMinutes().toString(),"S+":u.getSeconds().toString()},x=p;for(var I in t)m=new RegExp("("+I+")").exec(p),m&&(x=x.replace(m[1],m[1].length==1?t[I]:t[I].padStart(m[1].length,"0")));return x}},{key:"uuid",value:function(){for(var u=[],p="0123456789abcdef",m=0;m<36;m++)u[m]=p.substr(Math.floor(Math.random()*16),1);return u[14]="4",u[19]=p.substr(u[19]&3|8,1),u[8]=u[13]=u[18]=u[23]="-",u.join("").replace(new RegExp(/(-)/g),"")}},{key:"getRangeTime",value:function(u,p){for(var m=[],t=u-1;t>=0;t--){var x=void 0;t===u-1?x=new Date(Date.now()-t*24*60*60*1e3).setHours(0,0,1,0):x=new Date(Date.now()-t*24*60*60*1e3).setHours(23,59,59,999),p?m.push(l.getLocalTime(new Date(x),p)):m.push(x)}return m}},{key:"getRangeStartAndEndTime",value:function(u,p){for(var m=[],t=u-1;t>=0;t--){var x=void 0;t===u-1?x=new Date(Date.now()-t*24*60*60*1e3).setHours(0,0,0,0):t===0?x=new Date(Date.now()-(t-1)*24*60*60*1e3).setHours(0,0,0,0):x=new Date(Date.now()-t*24*60*60*1e3).setHours(23,59,59,999),p?m.push(l.getLocalTime(new Date(x),p)):m.push(x)}return[m[0],m[u-1]]}}]),l}();R.arrayDeDuplication=function(l){return Array.from(new Set(l))}},9536:function(ue,H,e){"use strict";e.d(H,{Z:function(){return Pe}});var b=e(96156),M=e(22122),R=e(90484),l=e(67294),K=e(94184),u=e.n(K),p=e(28481),m=e(81253),t=e(28991),x=e(63441),I=e(21770),V=e(42550),k=e(98423),re=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function le(s){if(typeof s.title!="undefined")return s.title;if((0,R.Z)(s.label)!=="object"){var i;return(i=s.label)===null||i===void 0?void 0:i.toString()}}function Ce(s){return s.map(function(i){if((0,R.Z)(i)==="object"&&i!==null){var v=le(i);return(0,t.Z)((0,t.Z)({},i),{},{title:v})}return{label:i==null?void 0:i.toString(),title:i==null?void 0:i.toString(),value:i}})}var Ne=function(i){return{transform:"translateX(".concat(i.offsetLeft,"px)"),width:i.clientWidth}},Me=function(i){var v=i.prefixCls,y=i.className,S=i.disabled,E=i.checked,q=i.label,Y=i.title,_=i.value,ee=i.onChange,te=function(F){S||ee(F,_)};return l.createElement("label",{className:u()(y,(0,b.Z)({},"".concat(v,"-item-disabled"),S))},l.createElement("input",{className:"".concat(v,"-item-input"),type:"radio",disabled:S,checked:E,onChange:te}),l.createElement("div",{className:"".concat(v,"-item-label"),title:Y},q))},ce=l.forwardRef(function(s,i){var v,y,S=s.prefixCls,E=S===void 0?"rc-segmented":S,q=s.direction,Y=s.options,_=s.disabled,ee=s.defaultValue,te=s.value,ne=s.onChange,F=s.className,O=F===void 0?"":F,de=s.motionName,j=de===void 0?"thumb-motion":de,se=(0,m.Z)(s,re),T=l.useRef(null),ie=(0,V.sQ)(T,i),W=l.useRef({from:null,to:null}),L=l.useMemo(function(){return Ce(Y)},[Y]),We=(0,I.Z)((v=L[0])===null||v===void 0?void 0:v.value,{value:s.value,defaultValue:ee}),me=(0,p.Z)(We,2),w=me[0],Be=me[1],Ze=l.useState(w),be=(0,p.Z)(Ze,2),a=be[0],Te=be[1],ze=l.useState(!1),Ae=(0,p.Z)(ze,2),Le=Ae[0],Oe=Ae[1],o=l.useCallback(function(g){var f,N=L.findIndex(function(J){return J.value===g});if(!(N<0)){var P=(f=T.current)===null||f===void 0?void 0:f.querySelector(".".concat(E,"-item:nth-child(").concat(N+1,")"));if(P){var G,A=(G=T.current)===null||G===void 0?void 0:G.querySelector(".".concat(E,"-item-selected"));A&&P&&W.current&&(W.current.from=Ne(A),W.current.to=Ne(P),Oe(!0))}}},[E,L]),r=l.useRef(a);l.useEffect(function(){r.current=a}),l.useEffect(function(){(typeof w=="string"||typeof w=="number")&&w!==r.current&&o(w)},[w]);var c=function(f,N){_||(Be(N),ne==null||ne(N))},n=function(){var f=W.current.from;if(f)return Te(void 0),f},d=function(){var f=W.current.to;if(f)return f},B=function(){Oe(!1),Te(w),W.current&&(W.current={from:null,to:null})},z=(0,k.Z)(se,["children"]);return l.createElement("div",(0,t.Z)((0,t.Z)({},z),{},{className:u()(E,(y={},(0,b.Z)(y,"".concat(E,"-rtl"),q==="rtl"),(0,b.Z)(y,"".concat(E,"-disabled"),_),y),O),ref:ie}),l.createElement(x.Z,{visible:Le,motionName:"".concat(E,"-").concat(j),motionDeadline:300,onEnterStart:n,onEnterActive:d,onEnterEnd:B},function(g){var f=g.className,N=g.style;return l.createElement("div",{style:N,className:u()("".concat(E,"-thumb"),f)})}),L.map(function(g){return l.createElement(Me,(0,t.Z)({key:g.value,prefixCls:E,className:u()(g.className,"".concat(E,"-item"),(0,b.Z)({},"".concat(E,"-item-selected"),g.value===a)),checked:g.value===w,onChange:c},g))}))});ce.displayName="Segmented",ce.defaultProps={options:[]};var Ve=ce,ge=e(65632),Ue=e(97647),he=function(s,i){var v={};for(var y in s)Object.prototype.hasOwnProperty.call(s,y)&&i.indexOf(y)<0&&(v[y]=s[y]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,y=Object.getOwnPropertySymbols(s);S<y.length;S++)i.indexOf(y[S])<0&&Object.prototype.propertyIsEnumerable.call(s,y[S])&&(v[y[S]]=s[y[S]]);return v},Ee=l.forwardRef(function(s,i){var v,y=s.prefixCls,S=s.className,E=s.block,q=s.options,Y=s.size,_=Y===void 0?"middle":Y,ee=he(s,["prefixCls","className","block","options","size"]),te=l.useContext(ge.E_),ne=te.getPrefixCls,F=te.direction,O=ne("segmented",y),de=l.useContext(Ue.Z),j=_||de,se=l.useMemo(function(){return q.map(function(T){if((0,R.Z)(T)==="object"&&(T==null?void 0:T.icon)){var ie=T.icon,W=T.label,L=he(T,["icon","label"]);return(0,M.Z)((0,M.Z)({},L),{label:l.createElement(l.Fragment,null,l.createElement("span",{className:"".concat(O,"-item-icon")},ie),l.createElement("span",null,W))})}return T})},[q,O]);return l.createElement(Ve,(0,M.Z)({},ee,{className:u()(S,(v={},(0,b.Z)(v,"".concat(O,"-block"),E),(0,b.Z)(v,"".concat(O,"-sm"),j==="small"),(0,b.Z)(v,"".concat(O,"-lg"),j==="large"),v)),options:se,ref:i,prefixCls:O,direction:F}))});Ee.displayName="Segmented",Ee.defaultProps={options:[]};var Pe=Ee},90387:function(ue,H,e){"use strict";var b=e(38663),M=e.n(b),R=e(99210),l=e.n(R)}}]);
