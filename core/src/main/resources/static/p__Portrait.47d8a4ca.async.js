(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[990],{25592:function(I,D,e){"use strict";e.d(D,{Z:function(){return h}});var v=e(28991),m=e(67294),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},i=x,C=e(27029),b=function(T,O){return m.createElement(C.Z,(0,v.Z)((0,v.Z)({},T),{},{ref:O,icon:i}))};b.displayName="SyncOutlined";var h=m.forwardRef(b)},31199:function(I,D,e){"use strict";var v=e(22122),m=e(28991),x=e(81253),i=e(67294),C=e(43985),b=["fieldProps","min","proFieldProps","max"],h=function(T,O){var F=T.fieldProps,S=T.min,B=T.proFieldProps,g=T.max,r=(0,x.Z)(T,b);return i.createElement(C.Z,(0,v.Z)({mode:"edit",valueType:"digit",fieldProps:(0,m.Z)({min:S,max:g},F),ref:O,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:B},r))};D.Z=i.forwardRef(h)},64317:function(I,D,e){"use strict";var v=e(22122),m=e(28991),x=e(81253),i=e(67294),C=e(43985),b=e(22270),h=e(66758),N=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],T=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],O=i.forwardRef(function(r,V){var P=r.fieldProps,s=r.children,j=r.params,W=r.proFieldProps,U=r.mode,o=r.valueEnum,n=r.request,c=r.showSearch,f=r.options,t=(0,x.Z)(r,N),A=(0,i.useContext)(h.Z);return i.createElement(C.Z,(0,v.Z)({mode:"edit",valueEnum:(0,b.h)(o),request:n,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,m.Z)({options:f,mode:U,showSearch:c,getPopupContainer:A.getPopupContainer},P),ref:V,proFieldProps:W},t),s)}),F=i.forwardRef(function(r,V){var P=r.fieldProps,s=r.children,j=r.params,W=r.proFieldProps,U=r.mode,o=r.valueEnum,n=r.request,c=r.options,f=(0,x.Z)(r,T),t=(0,m.Z)({options:c,mode:U||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},P),A=(0,i.useContext)(h.Z);return i.createElement(C.Z,(0,v.Z)({mode:"edit",valueEnum:(0,b.h)(o),request:n,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,m.Z)({getPopupContainer:A.getPopupContainer},t),ref:V,proFieldProps:W},f),s)}),S=O,B=F,g=S;g.SearchSelect=B,g.displayName="ProFormComponent",D.Z=g},5966:function(I,D,e){"use strict";var v=e(22122),m=e(81253),x=e(67294),i=e(43985),C=["fieldProps","proFieldProps"],b=["fieldProps","proFieldProps"],h="text",N=function(S){var B=S.fieldProps,g=S.proFieldProps,r=(0,m.Z)(S,C);return x.createElement(i.Z,(0,v.Z)({mode:"edit",valueType:h,fieldProps:B,filedConfig:{valueType:h},proFieldProps:g},r))},T=function(S){var B=S.fieldProps,g=S.proFieldProps,r=(0,m.Z)(S,b);return x.createElement(i.Z,(0,v.Z)({mode:"edit",valueType:"password",fieldProps:B,proFieldProps:g,filedConfig:{valueType:h}},r))},O=N;O.Password=T,O.displayName="ProFormComponent",D.Z=O},952:function(I,D,e){"use strict";var v=e(56640),m=e.n(v),x=e(5894);D.ZP=x.A},49027:function(I){I.exports={portrait:"portrait___2weew","portrait__form-wrap":"portrait__form-wrap___2wsdq",table:"table___95yq2"}},56640:function(){},51182:function(I,D,e){"use strict";e.r(D),e.d(D,{default:function(){return ke}});var v=e(66456),m=e(78587),x=e(13062),i=e(71230),C=e(89032),b=e(15746),h=e(3182),N=e(48736),T=e(27049),O=e(57663),F=e(71577),S=e(74379),B=e(38648),g=e(11849),r=e(2824),V=e(94043),P=e.n(V),s=e(67294),j=e(49027),W=e.n(j),U=e(76570),o=e(25592),n=e(22122),c=e(28991),f=e(81253),t=e(43985),A=e(66758),Ce=["proFieldProps","fieldProps"],oe="date",Fe=s.forwardRef(function(l,d){var Z=l.proFieldProps,u=l.fieldProps,y=(0,f.Z)(l,Ce),_=(0,s.useContext)(A.Z);return s.createElement(t.Z,(0,n.Z)({ref:d,mode:"edit",valueType:oe,fieldProps:(0,c.Z)({getPopupContainer:_.getPopupContainer},u),proFieldProps:Z,filedConfig:{valueType:oe,customLightMode:!0}},y))}),De=Fe,xe=["proFieldProps","fieldProps"],ue="dateWeek",be=s.forwardRef(function(l,d){var Z=l.proFieldProps,u=l.fieldProps,y=(0,f.Z)(l,xe),_=(0,s.useContext)(A.Z);return s.createElement(t.Z,(0,n.Z)({ref:d,mode:"edit",valueType:ue,fieldProps:(0,c.Z)({getPopupContainer:_.getPopupContainer},u),proFieldProps:Z,filedConfig:{valueType:ue,customLightMode:!0}},y))}),Se=be,Be=["proFieldProps","fieldProps"],de="dateMonth",Re=s.forwardRef(function(l,d){var Z=l.proFieldProps,u=l.fieldProps,y=(0,f.Z)(l,Be),_=(0,s.useContext)(A.Z);return s.createElement(t.Z,(0,n.Z)({ref:d,mode:"edit",valueType:de,fieldProps:(0,c.Z)({getPopupContainer:_.getPopupContainer},u),proFieldProps:Z,filedConfig:{valueType:de,customLightMode:!0}},y))}),Me=Re,Oe=["fieldProps"],pe="dateQuarter",_e=s.forwardRef(function(l,d){var Z=l.fieldProps,u=(0,f.Z)(l,Oe),y=(0,s.useContext)(A.Z);return s.createElement(t.Z,(0,n.Z)({ref:d,mode:"edit",valueType:pe,fieldProps:(0,c.Z)({getPopupContainer:y.getPopupContainer},Z),filedConfig:{valueType:pe,customLightMode:!0}},u))}),Ue=_e,je=["proFieldProps","fieldProps"],ce="dateYear",We=s.forwardRef(function(l,d){var Z=l.proFieldProps,u=l.fieldProps,y=(0,f.Z)(l,je),_=(0,s.useContext)(A.Z);return s.createElement(t.Z,(0,n.Z)({ref:d,mode:"edit",valueType:ce,fieldProps:(0,c.Z)({getPopupContainer:_.getPopupContainer},u),proFieldProps:Z,filedConfig:{valueType:ce,customLightMode:!0}},y))}),Ae=We,w=De;w.Week=Se,w.Month=Me,w.Quarter=Ue,w.Year=Ae,w.displayName="ProFormComponent";var me=w,Y=e(5894),q=e(64317),ee=e(25377);function Le(l){return re.apply(this,arguments)}function re(){return re=(0,h.Z)(P().mark(function l(d){return P().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,ee.WY)("/api/skyflying/getAllUserNameUserPortraitByVisitedTableEveryday",(0,g.Z)({method:"GET"},d||{})));case 1:case"end":return u.stop()}},l)})),re.apply(this,arguments)}function Ie(l){return te.apply(this,arguments)}function te(){return te=(0,h.Z)(P().mark(function l(d){return P().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,ee.WY)("/api/skyflying/getAllVisitedTablePortraitByVisitedTableEveryday",(0,g.Z)({method:"GET"},d||{})));case 1:case"end":return u.stop()}},l)})),te.apply(this,arguments)}function Ne(l,d){return ae.apply(this,arguments)}function ae(){return ae=(0,h.Z)(P().mark(function l(d,Z){return P().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,ee.WY)("/api/skyflying/getUserPortraitByVisitedTableEveryday",(0,g.Z)({method:"GET",params:d||{}},Z||{})));case 1:case"end":return y.stop()}},l)})),ae.apply(this,arguments)}var ve=e(59975),ir=e(71194),Ve=e(50146),nr=e(20228),we=e(11382),Pe=e(952),fe=e(5966),Ke=e(31199),ze=["select","insert","update","delete"],lr=[{label:"\u7528\u6237\u8BBF\u95EE\u8868\u7684\u753B\u50CF\u89C4\u5219",value:"table"},{label:"\u7528\u6237\u5728\u4EC0\u4E48\u65F6\u95F4\u8BBF\u95EE\u8FC7\u591A\u5C11\u6B21\u7CFB\u7EDF\u753B\u50CF\u89C4\u5219",value:"time"}],a=e(85893),Ge=function(d){var Z=(0,s.useRef)(),u=(0,s.useState)(!1),y=(0,r.Z)(u,2),_=y[0],$=y[1],k={labelCol:{span:8},wrapperCol:{span:16}};return(0,a.jsx)(Ve.Z,{width:700,title:"\u6DFB\u52A0\u7528\u6237\u5BF9\u8868\u8BBF\u95EE\u7684\u753B\u50CF\u89C4\u5219",visible:d.tableRuleVisible,footer:[],onCancel:function(){return d.setVisible(!1)},children:(0,a.jsx)(we.Z,{spinning:_,children:(0,a.jsxs)(Pe.ZP,(0,g.Z)((0,g.Z)({size:"middle",layout:"horizontal"},k),{},{submitter:!1,onFinish:function(){var Q=(0,h.Z)(P().mark(function J(se){return P().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:$(!0),(0,ve.f2)(se).then(function(H){var ne=H.code;ne==="0000"&&(B.Z.success({message:"\u521B\u5EFA\u6210\u529F!",placement:"top"}),$(!1),d.setVisible(!1))});case 2:case"end":return G.stop()}},J)}));return function(J){return Q.apply(this,arguments)}}(),formRef:Z,children:[(0,a.jsx)(fe.Z,{name:"userName",width:"md",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",label:"\u767B\u5F55\u7CFB\u7EDF\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u7CFB\u7EDF\u7528\u6237\u540D"}],required:!0}),(0,a.jsx)(fe.Z,{name:"visitedTable",width:"md",label:"\u7528\u6237\u8BBF\u95EE\u8868",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u8BBF\u95EE\u8868"}],required:!0}),(0,a.jsx)(Ke.Z,{label:"\u8BBF\u95EE\u8868\u6B21\u6570",placeholder:"\u8BF7\u8F93\u5165\u6B21\u6570",name:"visitedCount",initialValue:1,width:"sm",min:1,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BBF\u95EE\u8868\u6B21\u6570"}],required:!0}),(0,a.jsx)(me,{label:"\u8BBF\u95EE\u8FC7\u8868\u7684\u65F6\u95F4",name:"visitedDate",placeholder:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u65F6\u95F4",width:"sm",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u65F6\u95F4\uFF01"}],required:!0}),(0,a.jsx)(q.Z,{label:"SQL\u7C7B\u578B",name:"dbType",options:ze,width:"sm",initialValue:"select",placeholder:"\u8BF7\u9009\u62E9SQL\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9SQL\u7C7B\u578B\uFF01"}],required:!0}),(0,a.jsxs)(Pe.ZP.Group,{style:{textAlign:"center",marginTop:"30px"},children:[(0,a.jsx)(F.Z,{type:"primary",htmlType:"submit",className:"w-100",children:"\u521B\u5EFA\u89C4\u5219"}),(0,a.jsx)(F.Z,{className:"w-100",htmlType:"reset",children:"\u91CD \u7F6E"})]})]}))})})},Ye=Ge,$e=function(){var d=(0,s.useRef)(),Z=(0,s.useState)([]),u=(0,r.Z)(Z,2),y=u[0],_=u[1],$=(0,s.useState)([]),k=(0,r.Z)($,2),Q=k[0],J=k[1],se=(0,s.useState)([]),ie=(0,r.Z)(se,2),G=ie[0],H=ie[1],ne=(0,s.useState)(!1),he=(0,r.Z)(ne,2),Qe=he[0],ye=he[1],Je=(0,s.useState)(0),ge=(0,r.Z)(Je,2),He=ge[0],Xe=ge[1],qe=(0,s.useState)({pageNo:1,pageSize:20}),Ee=(0,r.Z)(qe,2),K=Ee[0],er=Ee[1],rr=(0,s.useState)((0,g.Z)({},K)),Te=(0,r.Z)(rr,2),le=Te[0],tr=Te[1],ar=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"userName",align:"center"},{title:"\u8BBF\u95EE\u65E5\u671F\uFF08\u6309\u7167\u5929\u8BA1\u7B97\uFF09",dataIndex:"visitedDate",key:"visitedDate",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u8BBF\u95EE\u8868",dataIndex:"visitedTable",key:"visitedTable",align:"center"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"dbType",key:"dbType",align:"center"},{title:"\u64CD\u4F5C",key:"action",width:120,align:"center",render:function(p){return(0,a.jsx)(F.Z,{size:"small",type:"link",danger:p.isDelete===0,onClick:function(){(0,ve.ny)({ruleId:p.id,isDelete:p.isDelete===0?1:0}).then(function(L){var M=L.code;M==="0000"&&(B.Z.success({message:"\u64CD\u4F5C\u6210\u529F!",placement:"top"}),z())})},children:p.isDelete===0?"\u7981\u7528":"\u542F\u7528"})}}];function z(R){var p=R||K;Ne(p).then(function(E){var L=E.data;if(L){var M=JSON.parse(L);if(Xe(M.total),M){var Ze=JSON.parse(M.rows);H(Ze)}else H([])}})}var sr=function(p){p&&Object.keys(p).length>0&&tr(function(E){return{pageSize:E.pageSize,pageNo:E.pageNo,userName:p.userName,visitedDate:p.visitedDate,visitedTable:p.visitedTable}}),z(p)};return(0,s.useEffect)(function(){Le().then(function(R){var p=R.data,E=JSON.parse(p);_(E)}),Ie().then(function(R){var p=R.data,E=JSON.parse(p);J(E)}),z()},[]),(0,a.jsxs)("div",{className:W().portrait,children:[(0,a.jsxs)("div",{className:W()["portrait__form-wrap"],children:[(0,a.jsx)(T.Z,{orientation:"left",plain:!0,children:(0,a.jsx)(U.Z,{})}),(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(b.Z,{span:20,children:(0,a.jsxs)(Y.A,{layout:"inline",formRef:d,size:"small",onFinish:function(){var R=(0,h.Z)(P().mark(function p(E){return P().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:sr(E);case 1:case"end":return M.stop()}},p)}));return function(p){return R.apply(this,arguments)}}(),submitter:{render:function(){return[(0,a.jsx)(F.Z,{type:"primary",htmlType:"submit",icon:(0,a.jsx)(U.Z,{}),className:"br-5 w-80 fs-12",children:"\u67E5\u8BE2"},"edit"),(0,a.jsx)(F.Z,{htmlType:"button",icon:(0,a.jsx)(o.Z,{}),onClick:function(){var E;(E=d.current)===null||E===void 0||E.resetFields(),z({pageNo:K.pageNo,pageSize:K.pageSize})},className:"br-5 w-80 fs-12",children:"\u91CD\u7F6E"},"reset")]}},children:[(0,a.jsx)(Y.A.Group,{children:(0,a.jsx)(q.Z,{options:y,placeholder:"\u7528\u6237\u540D",name:"userName",filedConfig:{},fieldProps:{}},"value")}),(0,a.jsx)(Y.A.Group,{children:(0,a.jsx)(q.Z,{options:Q,width:"sm",placeholder:"\u6570\u636E\u5E93\u8868\u540D",name:"visitedTable",filedConfig:{},fieldProps:{}},"value")}),(0,a.jsx)(Y.A.Group,{children:(0,a.jsx)(me,{width:"sm",fieldProps:{bordered:!0,placeholder:"\u8BBF\u95EE\u65F6\u95F4"},name:"visitedDate"})})]})}),(0,a.jsx)(b.Z,{span:4,children:(0,a.jsx)("div",{className:"text-r",children:(0,a.jsx)(F.Z,{className:"br-5 w-80 fs-12",size:"small",type:"primary",onClick:function(){ye(!0)},children:"\u65B0\u589E\u89C4\u5219"})})})]})]}),(0,a.jsx)("div",{className:W().table,children:(0,a.jsx)(m.Z,{columns:ar,dataSource:G,rowKey:"id",size:"middle",pagination:{current:K.pageNo,pageSize:K.pageSize,total:He,onChange:function(){var R=(0,h.Z)(P().mark(function E(L,M){return P().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,er(function(or){return{pageSize:M,pageNo:L}});case 2:setTimeout(function(){z({pageNo:L,pageSize:M,userName:le.userName,visitedDate:le.visitedDate,visitedTable:le.visitedTable})},200);case 3:case"end":return X.stop()}},E)}));function p(E,L){return R.apply(this,arguments)}return p}()}})}),(0,a.jsx)(Ye,{tableRuleVisible:Qe,setVisible:ye,refresh:z})]})},ke=$e},59975:function(I,D,e){"use strict";e.d(D,{f2:function(){return N},MN:function(){return S},yb:function(){return g},ny:function(){return V},$D:function(){return s},Y3:function(){return W}});var v=e(11849),m=e(3182),x=e(94043),i=e.n(x),C=e(25377),b=e(80129),h=e.n(b);function N(o,n){return T.apply(this,arguments)}function T(){return T=(0,m.Z)(i().mark(function o(n,c){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/api/skyflying/addUserPortraitByVisitedTableEverydayRule",(0,v.Z)({method:"GET",params:n},c||{})));case 1:case"end":return t.stop()}},o)})),T.apply(this,arguments)}function O(o){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime.mark(function o(n){return _regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",request("/api/skyflying/updateUserPortraitByVisitedTimeRule",_objectSpread({method:"GET"},n||{})));case 1:case"end":return f.stop()}},o)})),F.apply(this,arguments)}function S(o,n){return B.apply(this,arguments)}function B(){return B=(0,m.Z)(i().mark(function o(n,c){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/api/skyflying/addUserPortraitByVisitedTtimeRule",(0,v.Z)({method:"GET",params:n},c||{})));case 1:case"end":return t.stop()}},o)})),B.apply(this,arguments)}function g(o,n){return r.apply(this,arguments)}function r(){return r=(0,m.Z)(i().mark(function o(n,c){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/api/skyflying/updateUserPortraitByVisitedTimeRule",(0,v.Z)({method:"GET",params:n},c||{})));case 1:case"end":return t.stop()}},o)})),r.apply(this,arguments)}function V(o,n){return P.apply(this,arguments)}function P(){return P=(0,m.Z)(i().mark(function o(n,c){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/api/skyflying/updateUserPortraitByVisitedTableEverydayRule",(0,v.Z)({method:"GET",params:n},c||{})));case 1:case"end":return t.stop()}},o)})),P.apply(this,arguments)}function s(o,n){return j.apply(this,arguments)}function j(){return j=(0,m.Z)(i().mark(function o(n,c){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/api/skyflying/getUserPortraitRules",(0,v.Z)({method:"GET",params:n},c||{})));case 1:case"end":return t.stop()}},o)})),j.apply(this,arguments)}function W(o,n){return U.apply(this,arguments)}function U(){return U=(0,m.Z)(i().mark(function o(n,c){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/api/skyflying/updateUserPortraitRule?"+h().stringify(n),(0,v.Z)({method:"POST"},c||{})));case 1:case"end":return t.stop()}},o)})),U.apply(this,arguments)}}}]);
