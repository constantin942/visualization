(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[990],{31199:function(N,b,e){"use strict";var E=e(22122),T=e(28991),B=e(81253),m=e(67294),R=e(43985),S=["fieldProps","min","proFieldProps","max"],v=function(g,M){var h=g.fieldProps,Z=g.min,C=g.proFieldProps,y=g.max,p=(0,B.Z)(g,S);return m.createElement(R.Z,(0,E.Z)({mode:"edit",valueType:"digit",fieldProps:(0,T.Z)({min:Z,max:y},h),ref:M,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:C},p))};b.Z=m.forwardRef(v)},5966:function(N,b,e){"use strict";var E=e(22122),T=e(81253),B=e(67294),m=e(43985),R=["fieldProps","proFieldProps"],S=["fieldProps","proFieldProps"],v="text",k=function(Z){var C=Z.fieldProps,y=Z.proFieldProps,p=(0,T.Z)(Z,R);return B.createElement(m.Z,(0,E.Z)({mode:"edit",valueType:v,fieldProps:C,filedConfig:{valueType:v},proFieldProps:y},p))},g=function(Z){var C=Z.fieldProps,y=Z.proFieldProps,p=(0,T.Z)(Z,S);return B.createElement(m.Z,(0,E.Z)({mode:"edit",valueType:"password",fieldProps:C,proFieldProps:y,filedConfig:{valueType:v}},p))},M=k;M.Password=g,M.displayName="ProFormComponent",b.Z=M},952:function(N,b,e){"use strict";var E=e(56640),T=e.n(E),B=e(5894);b.ZP=B.A},49027:function(N){N.exports={portrait:"portrait___2weew","portrait__form-wrap":"portrait__form-wrap___2wsdq",table:"table___95yq2"}},56640:function(){},51182:function(N,b,e){"use strict";e.r(b),e.d(b,{default:function(){return $e}});var E=e(66456),T=e(78587),B=e(13062),m=e(71230),R=e(89032),S=e(15746),v=e(3182),k=e(48736),g=e(27049),M=e(57663),h=e(71577),Z=e(74379),C=e(38648),y=e(11849),p=e(2824),f=e(94043),i=e.n(f),t=e(67294),D=e(49027),l=e.n(D),ne=e(76570),Ze=e(25592),_=e(22122),A=e(28991),L=e(81253),I=e(43985),w=e(66758),Ce=["proFieldProps","fieldProps"],le="date",xe=t.forwardRef(function(a,u){var c=a.proFieldProps,s=a.fieldProps,o=(0,L.Z)(a,Ce),F=(0,t.useContext)(w.Z);return t.createElement(I.Z,(0,_.Z)({ref:u,mode:"edit",valueType:le,fieldProps:(0,A.Z)({getPopupContainer:F.getPopupContainer},s),proFieldProps:c,filedConfig:{valueType:le,customLightMode:!0}},o))}),Fe=xe,be=["proFieldProps","fieldProps"],ue="dateWeek",De=t.forwardRef(function(a,u){var c=a.proFieldProps,s=a.fieldProps,o=(0,L.Z)(a,be),F=(0,t.useContext)(w.Z);return t.createElement(I.Z,(0,_.Z)({ref:u,mode:"edit",valueType:ue,fieldProps:(0,A.Z)({getPopupContainer:F.getPopupContainer},s),proFieldProps:c,filedConfig:{valueType:ue,customLightMode:!0}},o))}),Be=De,Re=["proFieldProps","fieldProps"],oe="dateMonth",je=t.forwardRef(function(a,u){var c=a.proFieldProps,s=a.fieldProps,o=(0,L.Z)(a,Re),F=(0,t.useContext)(w.Z);return t.createElement(I.Z,(0,_.Z)({ref:u,mode:"edit",valueType:oe,fieldProps:(0,A.Z)({getPopupContainer:F.getPopupContainer},s),proFieldProps:c,filedConfig:{valueType:oe,customLightMode:!0}},o))}),Se=je,Me=["fieldProps"],de="dateQuarter",Oe=t.forwardRef(function(a,u){var c=a.fieldProps,s=(0,L.Z)(a,Me),o=(0,t.useContext)(w.Z);return t.createElement(I.Z,(0,_.Z)({ref:u,mode:"edit",valueType:de,fieldProps:(0,A.Z)({getPopupContainer:o.getPopupContainer},c),filedConfig:{valueType:de,customLightMode:!0}},s))}),Ue=Oe,Ne=["proFieldProps","fieldProps"],pe="dateYear",Ve=t.forwardRef(function(a,u){var c=a.proFieldProps,s=a.fieldProps,o=(0,L.Z)(a,Ne),F=(0,t.useContext)(w.Z);return t.createElement(I.Z,(0,_.Z)({ref:u,mode:"edit",valueType:pe,fieldProps:(0,A.Z)({getPopupContainer:F.getPopupContainer},s),proFieldProps:c,filedConfig:{valueType:pe,customLightMode:!0}},o))}),We=Ve,V=Fe;V.Week=Be,V.Month=Se,V.Quarter=Ue,V.Year=We,V.displayName="ProFormComponent";var ce=V,z=e(5894),J=e(64317),H=e(25377);function _e(a){return X.apply(this,arguments)}function X(){return X=(0,v.Z)(i().mark(function a(u){return i().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,H.WY)("/api/skyflying/getAllUserNameUserPortraitByVisitedTableEveryday",(0,y.Z)({method:"GET"},u||{})));case 1:case"end":return s.stop()}},a)})),X.apply(this,arguments)}function Ae(a){return q.apply(this,arguments)}function q(){return q=(0,v.Z)(i().mark(function a(u){return i().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,H.WY)("/api/skyflying/getAllVisitedTablePortraitByVisitedTableEveryday",(0,y.Z)({method:"GET"},u||{})));case 1:case"end":return s.stop()}},a)})),q.apply(this,arguments)}function Le(a,u){return ee.apply(this,arguments)}function ee(){return ee=(0,v.Z)(i().mark(function a(u,c){return i().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,H.WY)("/api/skyflying/getUserPortraitByVisitedTableEveryday",(0,y.Z)({method:"GET",params:u||{}},c||{})));case 1:case"end":return o.stop()}},a)})),ee.apply(this,arguments)}var me=e(59975),tr=e(71194),Ie=e(50146),ar=e(20228),we=e(11382),ve=e(952),fe=e(5966),Ke=e(31199),ke=["select","insert","update","delete"],ir=[{label:"\u7528\u6237\u8BBF\u95EE\u8868\u7684\u753B\u50CF\u89C4\u5219",value:"table"},{label:"\u7528\u6237\u5728\u4EC0\u4E48\u65F6\u95F4\u8BBF\u95EE\u8FC7\u591A\u5C11\u6B21\u7CFB\u7EDF\u753B\u50CF\u89C4\u5219",value:"time"}],r=e(85893),ze=function(u){var c=(0,t.useRef)(),s=(0,t.useState)(!1),o=(0,p.Z)(s,2),F=o[0],G=o[1],Y={labelCol:{span:8},wrapperCol:{span:16}};return(0,r.jsx)(Ie.Z,{width:700,title:"\u6DFB\u52A0\u7528\u6237\u5BF9\u8868\u8BBF\u95EE\u7684\u753B\u50CF\u89C4\u5219",visible:u.tableRuleVisible,footer:[],onCancel:function(){return u.setVisible(!1)},children:(0,r.jsx)(we.Z,{spinning:F,children:(0,r.jsxs)(ve.ZP,(0,y.Z)((0,y.Z)({size:"middle",layout:"horizontal"},Y),{},{submitter:!1,onFinish:function(){var $=(0,v.Z)(i().mark(function Q(re){return i().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:G(!0),(0,me.f2)(re).then(function(ae){var ie=ae.code;ie==="0000"&&(C.Z.success({message:"\u521B\u5EFA\u6210\u529F!",placement:"top"}),G(!1),u.setVisible(!1))});case 2:case"end":return K.stop()}},Q)}));return function(Q){return $.apply(this,arguments)}}(),formRef:c,children:[(0,r.jsx)(fe.Z,{name:"userName",width:"md",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",label:"\u767B\u5F55\u7CFB\u7EDF\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u7CFB\u7EDF\u7528\u6237\u540D"}],required:!0}),(0,r.jsx)(fe.Z,{name:"visitedTable",width:"md",label:"\u7528\u6237\u8BBF\u95EE\u8868",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u8BBF\u95EE\u8868"}],required:!0}),(0,r.jsx)(Ke.Z,{label:"\u8BBF\u95EE\u8868\u6B21\u6570",placeholder:"\u8BF7\u8F93\u5165\u6B21\u6570",name:"visitedCount",initialValue:1,width:"sm",min:1,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BBF\u95EE\u8868\u6B21\u6570"}],required:!0}),(0,r.jsx)(ce,{label:"\u8BBF\u95EE\u8FC7\u8868\u7684\u65F6\u95F4",name:"visitedDate",placeholder:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u65F6\u95F4",width:"sm",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u65F6\u95F4\uFF01"}],required:!0}),(0,r.jsx)(J.Z,{label:"SQL\u7C7B\u578B",name:"dbType",options:ke,width:"sm",initialValue:"select",placeholder:"\u8BF7\u9009\u62E9SQL\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9SQL\u7C7B\u578B\uFF01"}],required:!0}),(0,r.jsxs)(ve.ZP.Group,{style:{textAlign:"center",marginTop:"30px"},children:[(0,r.jsx)(h.Z,{type:"primary",htmlType:"submit",className:"w-100",children:"\u521B\u5EFA\u89C4\u5219"}),(0,r.jsx)(h.Z,{className:"w-100",htmlType:"reset",children:"\u91CD \u7F6E"})]})]}))})})},Ge=ze,Ye=function(){var u=(0,t.useRef)(),c=(0,t.useState)([]),s=(0,p.Z)(c,2),o=s[0],F=s[1],G=(0,t.useState)([]),Y=(0,p.Z)(G,2),$=Y[0],Q=Y[1],re=(0,t.useState)([]),te=(0,p.Z)(re,2),K=te[0],ae=te[1],ie=(0,t.useState)(!1),Pe=(0,p.Z)(ie,2),Qe=Pe[0],he=Pe[1],Je=(0,t.useState)({pageNo:1,pageSize:20,total:0}),ye=(0,p.Z)(Je,2),O=ye[0],ge=ye[1],He=(0,t.useState)((0,y.Z)({},O)),Ee=(0,p.Z)(He,2),se=Ee[0],Xe=Ee[1],qe=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"userName",align:"center"},{title:"\u8BBF\u95EE\u65E5\u671F\uFF08\u6309\u7167\u5929\u8BA1\u7B97\uFF09",dataIndex:"visitedDate",key:"visitedDate",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u8BBF\u95EE\u8868",dataIndex:"visitedTable",key:"visitedTable",align:"center"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"dbType",key:"dbType",align:"center"},{title:"\u64CD\u4F5C",key:"action",width:120,align:"center",render:function(n){return(0,r.jsx)(h.Z,{size:"small",type:"link",danger:n.isDelete===0,onClick:function(){(0,me.ny)({ruleId:n.id,isDelete:n.isDelete===0?1:0}).then(function(j){var x=j.code;x==="0000"&&(C.Z.success({message:"\u64CD\u4F5C\u6210\u529F!",placement:"top"}),W())})},children:n.isDelete===0?"\u7981\u7528":"\u542F\u7528"})}}];function W(P){var n=P||O;Le(n).then(function(d){var j=d.data;if(j){var x=JSON.parse(j);if(ge(function(U){return{total:x.total,pageNo:U.pageNo,pageSize:U.pageSize}}),x){var Te=JSON.parse(x.rows);ae(Te)}}})}var er=function(n){n&&Object.keys(n).length>0&&Xe(function(d){return{pageSize:d.pageSize,pageNo:d.pageNo,userName:n.userName,visitedDate:n.visitedDate,visitedTable:n.visitedTable}}),W(n)};return(0,t.useEffect)(function(){_e().then(function(P){var n=P.data,d=JSON.parse(n);F(d)}),Ae().then(function(P){var n=P.data,d=JSON.parse(n);Q(d)}),W()},[]),(0,r.jsxs)("div",{className:l().portrait,children:[(0,r.jsxs)("div",{className:l()["portrait__form-wrap"],children:[(0,r.jsx)(g.Z,{orientation:"left",plain:!0,children:(0,r.jsx)(ne.Z,{})}),(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(S.Z,{span:20,children:(0,r.jsxs)(z.A,{layout:"inline",formRef:u,size:"small",onFinish:function(){var P=(0,v.Z)(i().mark(function n(d){return i().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:er(d);case 1:case"end":return x.stop()}},n)}));return function(n){return P.apply(this,arguments)}}(),submitter:{render:function(){return[(0,r.jsx)(h.Z,{type:"primary",htmlType:"submit",icon:(0,r.jsx)(ne.Z,{}),className:"br-5 w-80 fs-12",children:"\u67E5\u8BE2"},"edit"),(0,r.jsx)(h.Z,{htmlType:"button",icon:(0,r.jsx)(Ze.Z,{}),onClick:function(){var d;(d=u.current)===null||d===void 0||d.resetFields(),W({pageNo:O.pageNo,pageSize:O.pageSize})},className:"br-5 w-80 fs-12",children:"\u91CD\u7F6E"},"reset")]}},children:[(0,r.jsx)(z.A.Group,{children:(0,r.jsx)(J.Z,{options:o,placeholder:"\u7528\u6237\u540D",name:"userName",filedConfig:{},fieldProps:{}},"value")}),(0,r.jsx)(z.A.Group,{children:(0,r.jsx)(J.Z,{options:$,width:"sm",placeholder:"\u6570\u636E\u5E93\u8868\u540D",name:"visitedTable",filedConfig:{},fieldProps:{}},"value")}),(0,r.jsx)(z.A.Group,{children:(0,r.jsx)(ce,{width:"sm",fieldProps:{bordered:!0,placeholder:"\u8BBF\u95EE\u65F6\u95F4"},name:"visitedDate"})})]})}),(0,r.jsx)(S.Z,{span:4,children:(0,r.jsx)("div",{className:"text-r",children:(0,r.jsx)(h.Z,{className:"br-5 w-80 fs-12",size:"small",type:"primary",onClick:function(){he(!0)},children:"\u65B0\u589E\u89C4\u5219"})})})]})]}),(0,r.jsx)("div",{className:l().table,children:(0,r.jsx)(T.Z,{columns:qe,dataSource:K,rowKey:"id",size:"middle",pagination:{current:O.pageNo,pageSize:O.pageSize,total:O.total,onChange:function(){var P=(0,v.Z)(i().mark(function d(j,x){return i().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,ge(function(rr){return{pageSize:x,pageNo:j,total:rr.total}});case 2:setTimeout(function(){W({pageNo:j,pageSize:x,userName:se.userName,visitedDate:se.visitedDate,visitedTable:se.visitedTable})},200);case 3:case"end":return U.stop()}},d)}));function n(d,j){return P.apply(this,arguments)}return n}()}})}),(0,r.jsx)(Ge,{tableRuleVisible:Qe,setVisible:function(n){return he(n)},refresh:W})]})},$e=Ye},59975:function(N,b,e){"use strict";e.d(b,{f2:function(){return S},MN:function(){return M},yb:function(){return Z},ny:function(){return y}});var E=e(11849),T=e(3182),B=e(94043),m=e.n(B),R=e(25377);function S(f,i){return v.apply(this,arguments)}function v(){return v=(0,T.Z)(m().mark(function f(i,t){return m().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,R.WY)("/api/skyflying/addUserPortraitByVisitedTableEverydayRule",(0,E.Z)({method:"GET",params:i},t||{})));case 1:case"end":return l.stop()}},f)})),v.apply(this,arguments)}function k(f){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime.mark(function f(i){return _regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",request("/api/skyflying/updateUserPortraitByVisitedTimeRule",_objectSpread({method:"GET"},i||{})));case 1:case"end":return D.stop()}},f)})),g.apply(this,arguments)}function M(f,i){return h.apply(this,arguments)}function h(){return h=(0,T.Z)(m().mark(function f(i,t){return m().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,R.WY)("/api/skyflying/addUserPortraitByVisitedTtimeRule",(0,E.Z)({method:"GET",params:i},t||{})));case 1:case"end":return l.stop()}},f)})),h.apply(this,arguments)}function Z(f,i){return C.apply(this,arguments)}function C(){return C=(0,T.Z)(m().mark(function f(i,t){return m().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,R.WY)("/api/skyflying/updateUserPortraitByVisitedTimeRule",(0,E.Z)({method:"GET",params:i},t||{})));case 1:case"end":return l.stop()}},f)})),C.apply(this,arguments)}function y(f,i){return p.apply(this,arguments)}function p(){return p=(0,T.Z)(m().mark(function f(i,t){return m().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,R.WY)("/api/skyflying/updateUserPortraitByVisitedTableEverydayRule",(0,E.Z)({method:"GET",params:i},t||{})));case 1:case"end":return l.stop()}},f)})),p.apply(this,arguments)}}}]);
