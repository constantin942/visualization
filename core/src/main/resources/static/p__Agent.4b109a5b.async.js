(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[890],{8212:function(le,B,e){"use strict";e.d(B,{Z:function(){return C}});var j=e(28991),g=e(67294),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},y=d,I=e(27029),v=function(D,S){return g.createElement(I.Z,(0,j.Z)((0,j.Z)({},D),{},{ref:S,icon:y}))};v.displayName="EditOutlined";var C=g.forwardRef(v)},5966:function(le,B,e){"use strict";var j=e(22122),g=e(81253),d=e(67294),y=e(30885),I=["fieldProps","proFieldProps"],v=["fieldProps","proFieldProps"],C="text",x=function(E){var N=E.fieldProps,X=E.proFieldProps,w=(0,g.Z)(E,I);return d.createElement(y.Z,(0,j.Z)({mode:"edit",valueType:C,fieldProps:N,filedConfig:{valueType:C},proFieldProps:X},w))},D=function(E){var N=E.fieldProps,X=E.proFieldProps,w=(0,g.Z)(E,v);return d.createElement(y.Z,(0,j.Z)({mode:"edit",valueType:"password",fieldProps:N,proFieldProps:X,filedConfig:{valueType:C}},w))},S=x;S.Password=D,S.displayName="ProFormComponent",B.Z=S},79537:function(le){le.exports={agent:"agent___1XmY6",content:"content___23NZq",itemTitle:"itemTitle___2xC9y",activeItemTitle:"activeItemTitle___13Pah",itemWrap:"itemWrap___2R-Oy"}},99210:function(){},57529:function(){},68981:function(le,B,e){"use strict";e.r(B),e.d(B,{default:function(){return at}});var j=e(14781),g=e(23492),d=e(54029),y=e(79166),I=e(87593),v=e(37636),C=e(57663),x=e(71577),D=e(71153),S=e(60331),se=e(38663),E=e(99210),N=e(96156),X=e(22122),w=e(90484),t=e(67294),c=e(94184),u=e.n(c),l=e(28481),p=e(81253),L=e(28991),me=e(63441),_=e(21770),$=e(42550),ve=e(98423),ye=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function Pe(n){if(typeof n.title!="undefined")return n.title;if((0,w.Z)(n.label)!=="object"){var a;return(a=n.label)===null||a===void 0?void 0:a.toString()}}function ie(n){return n.map(function(a){if((0,w.Z)(a)==="object"&&a!==null){var s=Pe(a);return(0,L.Z)((0,L.Z)({},a),{},{title:s})}return{label:a==null?void 0:a.toString(),title:a==null?void 0:a.toString(),value:a}})}var ee=function(a){return{transform:"translateX(".concat(a.offsetLeft,"px)"),width:a.clientWidth}},fe=function(a){var s=a.prefixCls,i=a.className,o=a.disabled,h=a.checked,H=a.label,M=a.title,R=a.value,T=a.onChange,P=function(F){o||T(F,R)};return t.createElement("label",{className:u()(i,(0,N.Z)({},"".concat(s,"-item-disabled"),o))},t.createElement("input",{className:"".concat(s,"-item-input"),type:"radio",disabled:o,checked:h,onChange:P}),t.createElement("div",{className:"".concat(s,"-item-label"),title:M},H))},U=t.forwardRef(function(n,a){var s,i,o=n.prefixCls,h=o===void 0?"rc-segmented":o,H=n.direction,M=n.options,R=n.disabled,T=n.defaultValue,P=n.value,k=n.onChange,F=n.className,Q=F===void 0?"":F,ce=n.motionName,he=ce===void 0?"thumb-motion":ce,Ne=(0,p.Z)(n,ye),b=t.useRef(null),pe=(0,$.sQ)(b,a),G=t.useRef({from:null,to:null}),q=t.useMemo(function(){return ie(M)},[M]),Le=(0,_.Z)((s=q[0])===null||s===void 0?void 0:s.value,{value:n.value,defaultValue:T}),Ze=(0,l.Z)(Le,2),J=Ze[0],$e=Ze[1],Ae=t.useState(J),Te=(0,l.Z)(Ae,2),xe=Te[0],ae=Te[1],Ue=t.useState(!1),ue=(0,l.Z)(Ue,2),Ie=ue[0],f=ue[1],V=t.useCallback(function(O){var z,de=q.findIndex(function(it){return it.value===O});if(!(de<0)){var Ke=(z=b.current)===null||z===void 0?void 0:z.querySelector(".".concat(h,"-item:nth-child(").concat(de+1,")"));if(Ke){var Ye,Ge=(Ye=b.current)===null||Ye===void 0?void 0:Ye.querySelector(".".concat(h,"-item-selected"));Ge&&Ke&&G.current&&(G.current.from=ee(Ge),G.current.to=ee(Ke),f(!0))}}},[h,q]),W=t.useRef(xe);t.useEffect(function(){W.current=xe}),t.useEffect(function(){(typeof J=="string"||typeof J=="number")&&J!==W.current&&V(J)},[J]);var re=function(z,de){R||($e(de),k==null||k(de))},De=function(){var z=G.current.from;if(z)return ae(void 0),z},rt=function(){var z=G.current.to;if(z)return z},lt=function(){f(!1),ae(J),G.current&&(G.current={from:null,to:null})},st=(0,ve.Z)(Ne,["children"]);return t.createElement("div",(0,L.Z)((0,L.Z)({},st),{},{className:u()(h,(i={},(0,N.Z)(i,"".concat(h,"-rtl"),H==="rtl"),(0,N.Z)(i,"".concat(h,"-disabled"),R),i),Q),ref:pe}),t.createElement(me.Z,{visible:Ie,motionName:"".concat(h,"-").concat(he),motionDeadline:300,onEnterStart:De,onEnterActive:rt,onEnterEnd:lt},function(O){var z=O.className,de=O.style;return t.createElement("div",{style:de,className:u()("".concat(h,"-thumb"),z)})}),q.map(function(O){return t.createElement(fe,(0,L.Z)({key:O.value,prefixCls:h,className:u()(O.className,"".concat(h,"-item"),(0,N.Z)({},"".concat(h,"-item-selected"),O.value===xe)),checked:O.value===J,onChange:re},O))}))});U.displayName="Segmented",U.defaultProps={options:[]};var Ce=U,m=e(65632),Se=e(97647),ge=function(n,a){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)a.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s},K=t.forwardRef(function(n,a){var s,i=n.prefixCls,o=n.className,h=n.block,H=n.options,M=n.size,R=M===void 0?"middle":M,T=ge(n,["prefixCls","className","block","options","size"]),P=t.useContext(m.E_),k=P.getPrefixCls,F=P.direction,Q=k("segmented",i),ce=t.useContext(Se.Z),he=R||ce,Ne=t.useMemo(function(){return H.map(function(b){if((0,w.Z)(b)==="object"&&(b==null?void 0:b.icon)){var pe=b.icon,G=b.label,q=ge(b,["icon","label"]);return(0,X.Z)((0,X.Z)({},q),{label:t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(Q,"-item-icon")},pe),t.createElement("span",null,G))})}return b})},[H,Q]);return t.createElement(Ce,(0,X.Z)({},T,{className:u()(o,(s={},(0,N.Z)(s,"".concat(Q,"-block"),h),(0,N.Z)(s,"".concat(Q,"-sm"),he==="small"),(0,N.Z)(s,"".concat(Q,"-lg"),he==="large"),s)),options:Ne,ref:a,prefixCls:Q,direction:F}))});K.displayName="Segmented",K.defaultProps={options:[]};var Me=K,Y=e(2824),be=e(79537),te=e.n(be),Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M952 224h-52c-4.4 0-8 3.6-8 8v248h-92V304c0-4.4-3.6-8-8-8H232c-4.4 0-8 3.6-8 8v176h-92V232c0-4.4-3.6-8-8-8H72c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8h52c4.4 0 8-3.6 8-8V548h92v172c0 4.4 3.6 8 8 8h560c4.4 0 8-3.6 8-8V548h92v244c0 4.4 3.6 8 8 8h52c4.4 0 8-3.6 8-8V232c0-4.4-3.6-8-8-8zM296 368h88v288h-88V368zm432 288H448V368h280v288z"}}]},name:"box-plot",theme:"outlined"},Oe=Re,Fe=e(27029),A=function(a,s){return t.createElement(Fe.Z,(0,L.Z)((0,L.Z)({},a),{},{ref:s,icon:Oe}))};A.displayName="BoxPlotOutlined";var Z=t.forwardRef(A),Ee=e(8212),oe=e(11849),je=e(3182),Je=e(94043),ne=e.n(Je),Ve=e(25377);function Qe(n,a){return We.apply(this,arguments)}function We(){return We=(0,je.Z)(ne().mark(function n(a,s){return ne().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Ve.WY)("/api/skyflying/getAllSkywalkingAgent",(0,oe.Z)({method:"GET",params:a},s||{})));case 1:case"end":return o.stop()}},n)})),We.apply(this,arguments)}function Xe(n,a){return ze.apply(this,arguments)}function ze(){return ze=(0,je.Z)(ne().mark(function n(a,s){return ne().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Ve.WY)("/api/skyflying/updateSkywalkingAgent",(0,oe.Z)({method:"GET",params:a},s||{})));case 1:case"end":return o.stop()}},n)})),ze.apply(this,arguments)}function we(n){return Be.apply(this,arguments)}function Be(){return Be=(0,je.Z)(ne().mark(function n(a){return ne().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Ve.WY)("/api/skyflying/getActiveSkywalkingAgent",(0,oe.Z)({method:"GET"},a||{})));case 1:case"end":return i.stop()}},n)})),Be.apply(this,arguments)}var ot=e(71194),ke=e(50146),He=e(5894),qe=e(5966),r=e(85893);function _e(n,a){var s={labelCol:{span:6},wrapperCol:{span:20}},i=(0,t.useState)(),o=(0,Y.Z)(i,2),h=o[0],H=o[1],M=(0,t.useRef)();return(0,t.useImperativeHandle)(a,function(){return{setInitValues:function(T){var P;H(T),(P=M.current)===null||P===void 0||P.setFieldsValue({agentName:T.agentName})}}}),(0,r.jsx)(ke.Z,{width:400,title:"\u4FEE\u6539\u63A2\u9488\u522B\u540D",visible:n.updateNameVisible,footer:[],onCancel:function(){return n.setVisible(!1)},children:(0,r.jsxs)(He.A,(0,oe.Z)((0,oe.Z)({formRef:M,layout:"horizontal"},s),{},{onFinish:function(){var R=(0,je.Z)(ne().mark(function T(P){return ne().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:Xe({id:h==null?void 0:h.id,agentName:P.agentName}).then(function(){n.refresh(),n.setVisible(!1)});case 1:case"end":return F.stop()}},T)}));return function(T){return R.apply(this,arguments)}}(),submitter:!1,children:[(0,r.jsx)(qe.Z,{fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u522B\u540D"},label:"\u63A2\u9488\u522B\u540D",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u522B\u540D"}],name:"agentName",initialValue:n.agentName}),(0,r.jsx)(He.A.Group,{style:{textAlign:"center"},children:(0,r.jsx)(x.Z,{type:"primary",htmlType:"submit",className:"w-100",children:"\u786E\u8BA4\u4FEE\u6539"})})]}))})}var et=(0,t.forwardRef)(_e),tt=e(24480),nt=function(){var a=(0,t.useState)(0),s=(0,Y.Z)(a,2),i=s[0],o=s[1],h=(0,t.useState)([]),H=(0,Y.Z)(h,2),M=H[0],R=H[1],T=(0,t.useState)([]),P=(0,Y.Z)(T,2),k=P[0],F=P[1],Q=(0,t.useState)(""),ce=(0,Y.Z)(Q,2),he=ce[0],Ne=ce[1],b=(0,t.useState)(!1),pe=(0,Y.Z)(b,2),G=pe[0],q=pe[1],Le=(0,t.useState)("\u670D\u52A1\u5217\u8868"),Ze=(0,Y.Z)(Le,2),J=Ze[0],$e=Ze[1],Ae=(0,t.useRef)(),Te=(0,t.useState)({pageNo:1,pageSize:20}),xe=(0,Y.Z)(Te,2),ae=xe[0],Ue=xe[1];(0,t.useEffect)(function(){ue(ae)},[]);function ue(f){Qe(f).then(function(V){var W=V.data,re=JSON.parse(W);if(re){var De=JSON.parse(re.rows);o(re.total),R(De),console.log(De)}})}function Ie(){we().then(function(f){var V=f.data,W=JSON.parse(V);W&&W.length>0&&F(W.map(function(re){return re.id=tt.Z.uuid(),re})),console.log(W)})}return(0,r.jsxs)("div",{className:te().agent,children:[(0,r.jsx)("div",{className:"text-c mb-30",children:(0,r.jsx)(Me,{options:["\u670D\u52A1\u5217\u8868","\u5B58\u6D3B\u63A2\u9488"],onChange:function(V){$e(V),V==="\u670D\u52A1\u5217\u8868"?ue(ae):Ie()}})}),(0,r.jsx)("div",{className:te().content,children:(0,r.jsx)(v.Z,{children:J==="\u670D\u52A1\u5217\u8868"?M.map(function(f){return(0,r.jsxs)(v.Z.Item,{dot:(0,r.jsx)(Z,{}),children:[(0,r.jsxs)("div",{className:te().itemTitle,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"primary-blue-5 ib",children:f.agentName||"-"}),(0,r.jsx)(S.Z,{color:"#2db7f5",className:"ml-10",style:{marginLeft:"10px",padding:"0px 3px"},children:f.agentCode})]}),(0,r.jsx)(x.Z,{size:"small",type:"link",className:"fs-12",icon:(0,r.jsx)(Ee.Z,{}),onClick:function(){Ne(f.agentName||""),q(!0),Ae.current.setInitValues({id:f.id,agentName:f.agentName||""})},children:"\u4FEE\u6539\u522B\u540D"})]}),(0,r.jsxs)("div",{className:"fs-12",children:[(0,r.jsx)("span",{children:"\u521B\u5EFA\u65F6\u95F4\uFF1A"}),(0,r.jsx)("span",{children:f.gmtCreate})]})]},f.id)}):k.map(function(f){return(0,r.jsx)(v.Z.Item,{dot:(0,r.jsx)(Z,{}),children:(0,r.jsx)(y.Z.Ribbon,{color:"green",children:(0,r.jsxs)("div",{className:te().itemWrap,children:[(0,r.jsxs)("div",{className:te().activeItemTitle,children:[(0,r.jsx)("h3",{className:"primary-blue-5",children:f.agentName||"-"}),f.serviceCode&&(0,r.jsx)(S.Z,{color:"#2db7f5",className:"ml-10",style:{marginLeft:"10px",padding:"0px 3px"},children:f.serviceCode}),(0,r.jsxs)("span",{className:"fs-12 ml-10 gray-7",children:[(0,r.jsx)("span",{children:"\u6700\u540E\u53D1\u9001\u6D88\u606F\u65F6\u95F4\uFF1A"}),(0,r.jsx)("span",{children:f.time})]})]}),(0,r.jsxs)("div",{className:"fs-12",children:[(0,r.jsx)("span",{children:"\u670D\u52A1\u5730\u5740\uFF1A"}),(0,r.jsx)("span",{children:f.serviceInstanceName})]})]})})},f.id)})})}),(0,r.jsx)("div",{className:"text-r mb-20",children:(0,r.jsx)(g.Z,{size:"small",showQuickJumper:!0,current:ae.pageNo,pageSize:ae.pageSize,total:i,onChange:function(V,W){Ue({pageNo:V,pageSize:W}),ue({pageNo:V,pageSize:W})}})}),(0,r.jsx)(et,{updateNameVisible:G,setVisible:q,refresh:function(){J==="\u670D\u52A1\u5217\u8868"?ue(ae):Ie()},ref:Ae,agentName:he})]})},at=nt},24480:function(le,B,e){"use strict";e.d(B,{Z:function(){return d}});var j=e(69610),g=e(54941),d=function(){function y(){(0,j.Z)(this,y)}return(0,g.Z)(y,null,[{key:"timeStampToTime",value:function(v){var C=new Date(parseInt(v));return C.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(v){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",x=v||new Date,D,S={"Y+":x.getFullYear().toString(),"m+":this.twoCompletion(x.getMonth()+1),"d+":this.twoCompletion(x.getDate()),"H+":this.twoCompletion(x.getHours()),"M+":this.twoCompletion(x.getMinutes()),"S+":this.twoCompletion(x.getSeconds())},se="";return Object.keys(S).forEach(function(E){D=new RegExp("("+E+")").exec(C),D&&(se=C.replace(D[1],D[1].length===1?S[E]:S[E].padStart(D[1].length,"0")))}),se}},{key:"uuid",value:function(){for(var v=[],C="0123456789abcdef",x=0;x<36;x++)v[x]=C.substr(Math.floor(Math.random()*16),1);return v[14]="4",v[19]=C.substr(v[19]&3|8,1),v[8]=v[13]=v[18]=v[23]="-",v.join("").replace(new RegExp(/(-)/g),"")}}]),y}();d.arrayDeDuplication=function(y){return Array.from(new Set(y))},d.twoCompletion=function(y){return y.toString().padStart(2,"0")}},37636:function(le,B,e){"use strict";e.d(B,{Z:function(){return w}});var j=e(22122),g=e(96156),d=e(67294),y=e(94184),I=e.n(y),v=e(7085),C=e(65632),x=function(t,c){var u={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&c.indexOf(l)<0&&(u[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,l=Object.getOwnPropertySymbols(t);p<l.length;p++)c.indexOf(l[p])<0&&Object.prototype.propertyIsEnumerable.call(t,l[p])&&(u[l[p]]=t[l[p]]);return u},D=function(c){var u,l,p=c.prefixCls,L=c.className,me=c.color,_=me===void 0?"blue":me,$=c.dot,ve=c.pending,ye=ve===void 0?!1:ve,Pe=c.position,ie=c.label,ee=c.children,fe=x(c,["prefixCls","className","color","dot","pending","position","label","children"]),U=d.useContext(C.E_),Ce=U.getPrefixCls,m=Ce("timeline",p),Se=I()((u={},(0,g.Z)(u,"".concat(m,"-item"),!0),(0,g.Z)(u,"".concat(m,"-item-pending"),ye),u),L),ge=I()((l={},(0,g.Z)(l,"".concat(m,"-item-head"),!0),(0,g.Z)(l,"".concat(m,"-item-head-custom"),!!$),(0,g.Z)(l,"".concat(m,"-item-head-").concat(_),!0),l)),K=/blue|red|green|gray/.test(_||"")?void 0:_;return d.createElement("li",(0,j.Z)({},fe,{className:Se}),ie&&d.createElement("div",{className:"".concat(m,"-item-label")},ie),d.createElement("div",{className:"".concat(m,"-item-tail")}),d.createElement("div",{className:ge,style:{borderColor:K,color:K}},$),d.createElement("div",{className:"".concat(m,"-item-content")},ee))},S=D,se=e(96159),E=function(t,c){var u={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&c.indexOf(l)<0&&(u[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,l=Object.getOwnPropertySymbols(t);p<l.length;p++)c.indexOf(l[p])<0&&Object.prototype.propertyIsEnumerable.call(t,l[p])&&(u[l[p]]=t[l[p]]);return u},N=function(c){var u,l=d.useContext(C.E_),p=l.getPrefixCls,L=l.direction,me=c.prefixCls,_=c.pending,$=_===void 0?null:_,ve=c.pendingDot,ye=c.children,Pe=c.className,ie=c.reverse,ee=ie===void 0?!1:ie,fe=c.mode,U=fe===void 0?"":fe,Ce=E(c,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),m=p("timeline",me),Se=typeof $=="boolean"?null:$,ge=$?d.createElement(S,{pending:!!$,dot:ve||d.createElement(v.Z,null)},Se):null,K=d.Children.toArray(ye);K.push(ge),ee&&K.reverse();var Me=function(Z,Ee){return U==="alternate"?Z.props.position==="right"?"".concat(m,"-item-right"):Z.props.position==="left"||Ee%2==0?"".concat(m,"-item-left"):"".concat(m,"-item-right"):U==="left"?"".concat(m,"-item-left"):U==="right"||Z.props.position==="right"?"".concat(m,"-item-right"):""},Y=K.filter(function(A){return!!A}),be=d.Children.count(Y),te="".concat(m,"-item-last"),Re=d.Children.map(Y,function(A,Z){var Ee=Z===be-2?te:"",oe=Z===be-1?te:"";return(0,se.Tm)(A,{className:I()([A.props.className,!ee&&!!$?Ee:oe,Me(A,Z)])})}),Oe=K.some(function(A){var Z;return!!((Z=A==null?void 0:A.props)===null||Z===void 0?void 0:Z.label)}),Fe=I()(m,(u={},(0,g.Z)(u,"".concat(m,"-pending"),!!$),(0,g.Z)(u,"".concat(m,"-reverse"),!!ee),(0,g.Z)(u,"".concat(m,"-").concat(U),!!U&&!Oe),(0,g.Z)(u,"".concat(m,"-label"),Oe),(0,g.Z)(u,"".concat(m,"-rtl"),L==="rtl"),u),Pe);return d.createElement("ul",(0,j.Z)({},Ce,{className:Fe}),Re)};N.Item=S;var X=N,w=X},87593:function(le,B,e){"use strict";var j=e(38663),g=e.n(j),d=e(57529),y=e.n(d)}}]);
