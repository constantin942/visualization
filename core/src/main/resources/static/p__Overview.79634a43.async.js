(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(b){b.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2"}},44089:function(b,B,t){"use strict";t.r(B),t.d(B,{default:function(){return de}});var A=t(57663),x=t(71577),w=t(13062),l=t(71230),E=t(95300),a=t(7277),c=t(89032),n=t(15746),u=t(58024),o=t(39144),S=t(71748),N=t(33860),D=t(3182),F=t(2824),U=t(94043),s=t.n(U),i=t(67294),y=t(26516),d=t.n(y),r=t(11849),J=t(46066),Q=t(68628),e=t(85893),q=function(){var m={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(Q.Z,{className:"fs-16 ib danger mr-10"}),(0,e.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,e.jsx)("div",{className:"of-hidden",children:(0,e.jsxs)(J.Z,(0,r.Z)((0,r.Z)({},m),{},{children:[(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237admin\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user1\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user2\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user3\u5728\u591C\u95F4\u8BBF\u95EEsys_user\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237admin\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user1\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user2\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user3\u5728\u591C\u95F4\u8BBF\u95EEsys_user\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237admin\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user1\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user2\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user3\u5728\u591C\u95F4\u8BBF\u95EEsys_user\u8868"})]}))})]})},ee=q,te=t(69886),ae=function(m){return(0,i.useEffect)(function(){var j=new te.x1("RangeTimeData",{height:148,data:m.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"diamond",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"marker-active"}]});j.changeData(m.data),j.chart.data(m.data),j.render()},[]),(0,e.jsx)("div",{id:"RangeTimeData"})},ne=ae,Y=t(47369),W=t(24480),L=t(6650),$=t(32773);function se(g,m){return M.apply(this,arguments)}function M(){return M=(0,D.Z)(s().mark(function g(m,j){return s().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,$.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,r.Z)({params:m,method:"GET"},j||{})));case 1:case"end":return O.stop()}},g)})),M.apply(this,arguments)}function re(g){return I.apply(this,arguments)}function I(){return I=(0,D.Z)(s().mark(function g(m){return s().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,$.WY)("/api/skyflying/getOverviewOfSystem",(0,r.Z)({method:"GET"},m||{})));case 1:case"end":return v.stop()}},g)})),I.apply(this,arguments)}var ue=t(21704);function le(g){return P.apply(this,arguments)}function P(){return P=(0,D.Z)(s().mark(function g(m){return s().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,ue.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,r.Z)({method:"GET"},m||{})));case 1:case"end":return v.stop()}},g)})),P.apply(this,arguments)}var ie=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],ce=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"count",initialValue:"all",align:"center"},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"since",dataIndex:"data",align:"center"},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"since2",dataIndex:"time",valueType:"date",hideInSetting:!0,align:"center"}],oe=function(m){var j=(0,i.useState)(),v=(0,F.Z)(j,2),O=v[0],G=v[1],me=(0,i.useState)([]),H=(0,F.Z)(me,2),k=H[0],ve=H[1],fe=(0,i.useState)([]),K=(0,F.Z)(fe,2),V=K[0],he=K[1],ge=(0,i.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),z=(0,F.Z)(ge,2),R=z[0],pe=z[1],Ee=function(){(0,L.F$)().then(function(f){var h=f.data;if(h&&h.length>0){G(h.map(function(Z){return Z.id=W.Z.uuid(),Z}));var p=[];h.forEach(function(Z){p.push({level:1,name:Z.userName,childrenNum:5,id:Z.userName}),(0,L.Bx)({applicationUserName:Z.userName}).then(function(C){C.data&&C.data.forEach(function(_){var je=[],X=_.visitedData.split(",");X.forEach(function(Ze){je.push({source:_.userName,target:Ze})}),console.log(X)})})}),console.log(p)}else G([])})},ye=function(){var f=W.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),h=W.Z.getRangeTime(7,"mm-dd");se({startTime:f[0],endTime:f[1]}).then(function(p){var Z=p.data;ve(function(){return Z.map(function(C,_){return{year:h[_],value:C}})})})},Ce=function(){var T=(0,D.Z)(s().mark(function f(){var h,p;return s().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,re();case 2:h=C.sent,p=h.data,pe(p);case 5:case"end":return C.stop()}},f)}));return function(){return T.apply(this,arguments)}}(),xe=function(){var T=(0,D.Z)(s().mark(function f(){return s().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:case"end":return p.stop()}},f)}));return function(){return T.apply(this,arguments)}}(),De=function(){le().then(function(f){var h=f.data;h&&he(h)})};return(0,i.useEffect)(function(){Ee(),ye(),De(),Ce().then(),xe().then()},[]),(0,e.jsxs)("div",{className:d().overview,children:[(0,e.jsx)("div",{className:d().staticWrap,children:(0,e.jsxs)(l.Z,{gutter:20,children:[(0,e.jsx)(n.Z,{span:8,children:(0,e.jsx)(o.Z,{className:d().bgW,title:"\u8FD1\u4E03\u5929\u4FE1\u606F\u91C7\u96C6\u60C5\u51B5",children:(0,e.jsx)("div",{className:"mt-15",children:(0,e.jsx)(N.Z,{active:!0,loading:k.length===0,children:(0,e.jsx)(ne,{data:k})})})})}),(0,e.jsx)(n.Z,{span:8,children:(0,e.jsx)(o.Z,{className:d().bgW,title:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5",children:(0,e.jsx)(l.Z,{gutter:20,className:"text-c",style:{height:"162px"},children:(0,e.jsxs)(N.Z,{active:!0,loading:k.length===0,children:[(0,e.jsx)(n.Z,{span:12,className:"mt-15 text-c",children:(0,e.jsx)(a.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:R.visitedInformation,valueStyle:{color:"#3f8600"}})}),(0,e.jsx)(n.Z,{span:12,className:"mt-15",children:(0,e.jsx)(a.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:R.dbInstance,valueStyle:{color:"#3f8600"}})}),(0,e.jsx)(n.Z,{span:12,className:"mt-20",children:(0,e.jsx)(a.Z,{title:"\u7528\u6237\u4EBA\u6570",value:R.user,valueStyle:{color:"#3f8600"}})}),(0,e.jsx)(n.Z,{span:12,className:"mt-20",children:(0,e.jsx)(a.Z,{title:"\u6570\u636E\u5E93\u8868",value:R.table,valueStyle:{color:"#3f8600"}})})]})})})}),(0,e.jsx)(n.Z,{span:8,children:(0,e.jsx)("div",{className:d().waringWrap,children:(0,e.jsx)(ee,{})})})]})}),(0,e.jsx)("div",{className:d().center,children:(0,e.jsxs)(l.Z,{gutter:30,children:[(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(Y.ZP,{columns:ie,dataSource:O,options:!1,toolBarRender:function(){return[(0,e.jsx)(x.Z,{type:"link",size:"small",onClick:function(){m.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,e.jsx)(n.Z,{span:12,className:"pr-10",children:(0,e.jsx)(N.Z,{active:!0,loading:V.length===0,paragraph:{rows:5},children:(0,e.jsx)(Y.ZP,{columns:ce,dataSource:V,options:!1,rowKey:"id",search:!1,toolBarRender:function(){return[(0,e.jsx)(x.Z,{type:"link",size:"small",children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u884C\u4E3A"})})})]})})]})},de=oe},6650:function(b,B,t){"use strict";t.d(B,{F$:function(){return a},Xd:function(){return n},et:function(){return N},Bx:function(){return F}});var A=t(11849),x=t(3182),w=t(94043),l=t.n(w),E=t(32773);function a(s){return c.apply(this,arguments)}function c(){return c=(0,x.Z)(l().mark(function s(i){return l().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.WY)("/api/skyflying/getCoarseCountsOfUser",(0,A.Z)({method:"GET"},i||{})));case 1:case"end":return d.stop()}},s)})),c.apply(this,arguments)}function n(s,i){return u.apply(this,arguments)}function u(){return u=(0,x.Z)(l().mark(function s(i,y){return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,A.Z)({method:"GET",params:i},y||{})));case 1:case"end":return r.stop()}},s)})),u.apply(this,arguments)}function o(s,i){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime.mark(function s(i,y){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:i},y||{})));case 1:case"end":return r.stop()}},s)})),S.apply(this,arguments)}function N(s,i){return D.apply(this,arguments)}function D(){return D=(0,x.Z)(l().mark(function s(i,y){return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.WY)("/api/skyflying/getCountsOfUser",(0,A.Z)({method:"GET",params:i},y||{})));case 1:case"end":return r.stop()}},s)})),D.apply(this,arguments)}function F(s,i){return U.apply(this,arguments)}function U(){return U=(0,x.Z)(l().mark(function s(i,y){return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,A.Z)({method:"GET",params:i},y||{})));case 1:case"end":return r.stop()}},s)})),U.apply(this,arguments)}},24480:function(b,B,t){"use strict";t.d(B,{Z:function(){return w}});var A=t(69610),x=t(54941),w=function(){function l(){(0,A.Z)(this,l)}return(0,x.Z)(l,null,[{key:"timeStampToTime",value:function(a){var c=new Date(parseInt(a));return c.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",n,u={"Y+":a.getFullYear().toString(),"m+":(a.getMonth()+1).toString(),"d+":a.getDate().toString(),"H+":a.getHours().toString(),"M+":a.getMinutes().toString(),"S+":a.getSeconds().toString()},o=c;for(var S in u)n=new RegExp("("+S+")").exec(c),n&&(o=o.replace(n[1],n[1].length==1?u[S]:u[S].padStart(n[1].length,"0")));return o}},{key:"uuid",value:function(){for(var a=[],c="0123456789abcdef",n=0;n<36;n++)a[n]=c.substr(Math.floor(Math.random()*16),1);return a[14]="4",a[19]=c.substr(a[19]&3|8,1),a[8]=a[13]=a[18]=a[23]="-",a.join("").replace(new RegExp(/(-)/g),"")}},{key:"getRangeTime",value:function(a,c){for(var n=[],u=a-1;u>=0;u--){var o=void 0;u===a-1?o=new Date(Date.now()-u*24*60*60*1e3).setHours(0,0,1,0):o=new Date(Date.now()-u*24*60*60*1e3).setHours(23,59,59,999),c?n.push(l.getLocalTime(new Date(o),c)):n.push(o)}return n}},{key:"getRangeStartAndEndTime",value:function(a,c){for(var n=[],u=a-1;u>=0;u--){var o=void 0;u===a-1?o=new Date(Date.now()-u*24*60*60*1e3).setHours(0,0,0,0):u===0?o=new Date(Date.now()-(u-1)*24*60*60*1e3).setHours(0,0,0,0):o=new Date(Date.now()-u*24*60*60*1e3).setHours(23,59,59,999),c?n.push(l.getLocalTime(new Date(o),c)):n.push(o)}return[n[0],n[a-1]]}}]),l}();w.arrayDeDuplication=function(l){return Array.from(new Set(l))}}}]);
