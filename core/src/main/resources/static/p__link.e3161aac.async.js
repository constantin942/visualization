(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[72],{94407:function(W,p,t){"use strict";t.r(p),t.d(p,{default:function(){return L}});var Y=t(87593),v=t(37636),$=t(71153),Z=t(60331),M=t(98858),r=t(4914),g=t(2824),i=t(67294),Q=t(13254),C=t(14277),U=t(54029),N=t(79166),T=t(99270),e=t(85893),I=[{title:"ip",width:150,align:"center",render:function(s,n){return(0,e.jsx)(N.Z,{status:"processing",text:n.ip})}},{title:"dbType",dataIndex:"dbType",width:100,align:"center"},{title:"databaseName",dataIndex:"databaseName",width:200,align:"center"},{title:"tableName",dataIndex:"tableName",width:200,align:"center"},{title:"actionType",dataIndex:"actionType",width:100,align:"center"},{title:"sqlDetail",dataIndex:"sqlDetail",tip:"",ellipsis:!0}],b=function(s){return(0,e.jsx)("div",{className:"detail-table",children:s.reorganizingSpans.length>0?(0,e.jsx)(T.ZP,{columns:I,options:!1,size:"small",dataSource:s.reorganizingSpans,rowKey:"sqlDetail",search:!1,pagination:!1}):(0,e.jsx)(C.Z,{description:"\u6682\u65E0\u64CD\u4F5C\u6570\u636E"})})},z=b,d=t(57895),D=t(3182),P=t(94043),f=t.n(P),A=t(21704);function E(){return m.apply(this,arguments)}function m(){return m=(0,D.Z)(f().mark(function c(){return f().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,A.WY)("/api/skyflying/getAllSegments",{method:"GET",headers:{"Content-Type":"application/json"}}));case 1:case"end":return n.stop()}},c)})),m.apply(this,arguments)}var H=function(){var s=(0,i.useState)(-1),n=(0,g.Z)(s,2),F=n[0],R=n[1],B=(0,i.useState)([]),x=(0,g.Z)(B,2),G=x[0],y=x[1],J=(0,i.useState)([]),j=(0,g.Z)(J,2),S=j[0],O=j[1],K=function(o,l){y([]),R(l),o.length>1&&y(o.filter(function(u){return u.dbType!==void 0}))};return(0,i.useEffect)(function(){E().then(function(a){O(function(){return JSON.parse(a.data)})})},[]),(0,e.jsx)("div",{className:"link",children:S.length>0&&S.map(function(a,o){return(0,e.jsx)(d.ZP,{collapsibleIconRender:function(){return(0,e.jsxs)(r.Z,{size:"small",children:[(0,e.jsx)(r.Z.Item,{label:"userName",style:{margin:"0",padding:"0",lineHeight:"1"},children:(0,e.jsx)("p",{className:"primary-blue",children:a.header.userName})}),(0,e.jsx)(r.Z.Item,{label:"requestStartTime",style:{margin:"0",padding:"0",lineHeight:"1"},children:(0,e.jsx)("p",{className:"primary-blue",children:a.header.requestStartTime})}),(0,e.jsx)(r.Z.Item,{label:"url",style:{margin:"0",padding:"0",lineHeight:"1"},children:(0,e.jsx)("p",{className:"primary-blue",children:a.header.url})})]})},className:"link__item-card",style:{},headerBordered:!0,collapsible:!0,defaultCollapsed:!1,children:(0,e.jsx)("div",{children:(0,e.jsxs)(d.ZP,{split:"vertical",children:[(0,e.jsx)(d.ZP,{colSpan:"30%",children:(0,e.jsx)(v.Z,{children:a.body.map(function(l,u){var h=JSON.parse(l.reorganizingSpans);return(0,e.jsx)(v.Z.Item,{color:h.length>1?"#00CCFF":"green",className:"pointer pb-10",children:(0,e.jsxs)("div",{onClick:function(){K(h,u)},children:[(0,e.jsx)("p",{className:F===u?"is-active":"",children:h[0].url}),(0,e.jsx)(Z.Z,{color:"#3b5999",style:{fontSize:"12px",padding:"2px 3px",lineHeight:"1"},children:l.operationName}),(0,e.jsx)("span",{style:{color:"#C0C4CC",fontSize:"12px"},children:l.requestStartTime})]})},l.id)})})}),(0,e.jsx)(d.ZP,{headerBordered:!0,children:(0,e.jsx)(z,{reorganizingSpans:G})})]})})},o)})})},L=H}}]);
