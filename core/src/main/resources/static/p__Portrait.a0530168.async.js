(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[990],{25592:function(j,C,e){"use strict";e.d(C,{Z:function(){return h}});var m=e(28991),d=e(67294),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},n=x,F=e(27029),S=function(Z,_){return d.createElement(F.Z,(0,m.Z)((0,m.Z)({},Z),{},{ref:_,icon:n}))};S.displayName="SyncOutlined";var h=d.forwardRef(S)},31199:function(j,C,e){"use strict";var m=e(22122),d=e(28991),x=e(81253),n=e(67294),F=e(30885),S=["fieldProps","min","proFieldProps","max"],h=function(Z,_){var D=Z.fieldProps,b=Z.min,B=Z.proFieldProps,g=Z.max,r=(0,x.Z)(Z,S);return n.createElement(F.Z,(0,m.Z)({mode:"edit",valueType:"digit",fieldProps:(0,d.Z)({min:b,max:g},D),ref:_,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:B},r))};C.Z=n.forwardRef(h)},64317:function(j,C,e){"use strict";var m=e(22122),d=e(28991),x=e(81253),n=e(67294),F=e(30885),S=e(96202),h=e(66758),N=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],Z=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],_=n.forwardRef(function(r,V){var P=r.fieldProps,s=r.children,W=r.params,A=r.proFieldProps,U=r.mode,o=r.valueEnum,i=r.request,v=r.showSearch,f=r.options,t=(0,x.Z)(r,N),L=(0,n.useContext)(h.Z);return n.createElement(F.Z,(0,m.Z)({mode:"edit",valueEnum:(0,S.h)(o),request:i,params:W,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({options:f,mode:U,showSearch:v,getPopupContainer:L.getPopupContainer},P),ref:V,proFieldProps:A},t),s)}),D=n.forwardRef(function(r,V){var P=r.fieldProps,s=r.children,W=r.params,A=r.proFieldProps,U=r.mode,o=r.valueEnum,i=r.request,v=r.options,f=(0,x.Z)(r,Z),t=(0,d.Z)({options:v,mode:U||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},P),L=(0,n.useContext)(h.Z);return n.createElement(F.Z,(0,m.Z)({mode:"edit",valueEnum:(0,S.h)(o),request:i,params:W,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({getPopupContainer:L.getPopupContainer},t),ref:V,proFieldProps:A},f),s)}),b=_,B=D,g=b;g.SearchSelect=B,g.displayName="ProFormComponent",C.Z=g},5966:function(j,C,e){"use strict";var m=e(22122),d=e(81253),x=e(67294),n=e(30885),F=["fieldProps","proFieldProps"],S=["fieldProps","proFieldProps"],h="text",N=function(b){var B=b.fieldProps,g=b.proFieldProps,r=(0,d.Z)(b,F);return x.createElement(n.Z,(0,m.Z)({mode:"edit",valueType:h,fieldProps:B,filedConfig:{valueType:h},proFieldProps:g},r))},Z=function(b){var B=b.fieldProps,g=b.proFieldProps,r=(0,d.Z)(b,S);return x.createElement(n.Z,(0,m.Z)({mode:"edit",valueType:"password",fieldProps:B,proFieldProps:g,filedConfig:{valueType:h}},r))},_=N;_.Password=Z,_.displayName="ProFormComponent",C.Z=_},952:function(j,C,e){"use strict";var m=e(56640),d=e.n(m),x=e(5894);C.ZP=x.A},49027:function(j){j.exports={portrait:"portrait___2weew","portrait__form-wrap":"portrait__form-wrap___2wsdq",table:"table___95yq2"}},56640:function(){},80302:function(j,C,e){"use strict";e.r(C),e.d(C,{default:function(){return ke}});var m=e(66456),d=e(78587),x=e(13062),n=e(71230),F=e(89032),S=e(15746),h=e(3182),N=e(48736),Z=e(27049),_=e(57663),D=e(71577),b=e(74379),B=e(38648),g=e(11849),r=e(2824),V=e(94043),P=e.n(V),s=e(67294),W=e(49027),A=e.n(W),U=e(76570),o=e(25592),i=e(22122),v=e(28991),f=e(81253),t=e(30885),L=e(66758),Ce=["proFieldProps","fieldProps"],oe="date",Fe=s.forwardRef(function(l,p){var T=l.proFieldProps,u=l.fieldProps,y=(0,f.Z)(l,Ce),O=(0,s.useContext)(L.Z);return s.createElement(t.Z,(0,i.Z)({ref:p,mode:"edit",valueType:oe,fieldProps:(0,v.Z)({getPopupContainer:O.getPopupContainer},u),proFieldProps:T,filedConfig:{valueType:oe,customLightMode:!0}},y))}),De=Fe,xe=["proFieldProps","fieldProps"],ue="dateWeek",Se=s.forwardRef(function(l,p){var T=l.proFieldProps,u=l.fieldProps,y=(0,f.Z)(l,xe),O=(0,s.useContext)(L.Z);return s.createElement(t.Z,(0,i.Z)({ref:p,mode:"edit",valueType:ue,fieldProps:(0,v.Z)({getPopupContainer:O.getPopupContainer},u),proFieldProps:T,filedConfig:{valueType:ue,customLightMode:!0}},y))}),be=Se,Be=["proFieldProps","fieldProps"],de="dateMonth",Re=s.forwardRef(function(l,p){var T=l.proFieldProps,u=l.fieldProps,y=(0,f.Z)(l,Be),O=(0,s.useContext)(L.Z);return s.createElement(t.Z,(0,i.Z)({ref:p,mode:"edit",valueType:de,fieldProps:(0,v.Z)({getPopupContainer:O.getPopupContainer},u),proFieldProps:T,filedConfig:{valueType:de,customLightMode:!0}},y))}),Me=Re,_e=["fieldProps"],pe="dateQuarter",Oe=s.forwardRef(function(l,p){var T=l.fieldProps,u=(0,f.Z)(l,_e),y=(0,s.useContext)(L.Z);return s.createElement(t.Z,(0,i.Z)({ref:p,mode:"edit",valueType:pe,fieldProps:(0,v.Z)({getPopupContainer:y.getPopupContainer},T),filedConfig:{valueType:pe,customLightMode:!0}},u))}),Ue=Oe,je=["proFieldProps","fieldProps"],ce="dateYear",We=s.forwardRef(function(l,p){var T=l.proFieldProps,u=l.fieldProps,y=(0,f.Z)(l,je),O=(0,s.useContext)(L.Z);return s.createElement(t.Z,(0,i.Z)({ref:p,mode:"edit",valueType:ce,fieldProps:(0,v.Z)({getPopupContainer:O.getPopupContainer},u),proFieldProps:T,filedConfig:{valueType:ce,customLightMode:!0}},y))}),Ae=We,w=De;w.Week=be,w.Month=Me,w.Quarter=Ue,w.Year=Ae,w.displayName="ProFormComponent";var me=w,Y=e(5894),q=e(64317),ee=e(25377);function Le(l){return re.apply(this,arguments)}function re(){return re=(0,h.Z)(P().mark(function l(p){return P().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,ee.WY)("/api/skyflying/getAllUserNameUserPortraitByVisitedTableEveryday",(0,g.Z)({method:"GET"},p||{})));case 1:case"end":return u.stop()}},l)})),re.apply(this,arguments)}function Ie(l){return te.apply(this,arguments)}function te(){return te=(0,h.Z)(P().mark(function l(p){return P().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,ee.WY)("/api/skyflying/getAllVisitedTablePortraitByVisitedTableEveryday",(0,g.Z)({method:"GET"},p||{})));case 1:case"end":return u.stop()}},l)})),te.apply(this,arguments)}function Ne(l,p){return ae.apply(this,arguments)}function ae(){return ae=(0,h.Z)(P().mark(function l(p,T){return P().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,ee.WY)("/api/skyflying/getUserPortraitByVisitedTableEveryday",(0,g.Z)({method:"GET",params:p||{}},T||{})));case 1:case"end":return y.stop()}},l)})),ae.apply(this,arguments)}var ve=e(59975),nr=e(71194),Ve=e(50146),ir=e(20228),we=e(11382),Pe=e(952),fe=e(5966),Ke=e(31199),ze=e(21514),a=e(85893),Ge=function(p){var T=(0,s.useRef)(),u=(0,s.useState)(!1),y=(0,r.Z)(u,2),O=y[0],$=y[1],k={labelCol:{span:8},wrapperCol:{span:16}};return(0,a.jsx)(Ve.Z,{width:700,title:"\u6DFB\u52A0\u7528\u6237\u5BF9\u8868\u8BBF\u95EE\u7684\u753B\u50CF\u89C4\u5219",visible:p.tableRuleVisible,footer:[],onCancel:function(){return p.setVisible(!1)},children:(0,a.jsx)(we.Z,{spinning:O,children:(0,a.jsxs)(Pe.ZP,(0,g.Z)((0,g.Z)({size:"middle",layout:"horizontal"},k),{},{submitter:!1,onFinish:function(){var Q=(0,h.Z)(P().mark(function J(se){return P().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:$(!0),(0,ve.f2)(se).then(function(H){var ie=H.code;ie==="0000"&&(B.Z.success({message:"\u521B\u5EFA\u6210\u529F!",placement:"top"}),$(!1),p.setVisible(!1))});case 2:case"end":return G.stop()}},J)}));return function(J){return Q.apply(this,arguments)}}(),formRef:T,children:[(0,a.jsx)(fe.Z,{name:"userName",width:"md",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",label:"\u767B\u5F55\u7CFB\u7EDF\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u7CFB\u7EDF\u7528\u6237\u540D"}],required:!0}),(0,a.jsx)(fe.Z,{name:"visitedTable",width:"md",label:"\u7528\u6237\u8BBF\u95EE\u8868",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u8BBF\u95EE\u8868"}],required:!0}),(0,a.jsx)(Ke.Z,{label:"\u8BBF\u95EE\u8868\u6B21\u6570",placeholder:"\u8BF7\u8F93\u5165\u6B21\u6570",name:"visitedCount",initialValue:1,width:"sm",min:1,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BBF\u95EE\u8868\u6B21\u6570"}],required:!0}),(0,a.jsx)(me,{label:"\u8BBF\u95EE\u8FC7\u8868\u7684\u65F6\u95F4",name:"visitedDate",placeholder:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u65F6\u95F4",width:"sm",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u65F6\u95F4\uFF01"}],required:!0}),(0,a.jsx)(q.Z,{label:"SQL\u7C7B\u578B",name:"dbType",options:ze._,width:"sm",initialValue:"select",placeholder:"\u8BF7\u9009\u62E9SQL\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9SQL\u7C7B\u578B\uFF01"}],required:!0}),(0,a.jsxs)(Pe.ZP.Group,{style:{textAlign:"center",marginTop:"30px"},children:[(0,a.jsx)(D.Z,{type:"primary",htmlType:"submit",className:"w-100",children:"\u521B\u5EFA\u89C4\u5219"}),(0,a.jsx)(D.Z,{className:"w-100",htmlType:"reset",children:"\u91CD \u7F6E"})]})]}))})})},Ye=Ge,$e=function(){var p=(0,s.useRef)(),T=(0,s.useState)([]),u=(0,r.Z)(T,2),y=u[0],O=u[1],$=(0,s.useState)([]),k=(0,r.Z)($,2),Q=k[0],J=k[1],se=(0,s.useState)([]),ne=(0,r.Z)(se,2),G=ne[0],H=ne[1],ie=(0,s.useState)(!1),he=(0,r.Z)(ie,2),Qe=he[0],ye=he[1],Je=(0,s.useState)(0),ge=(0,r.Z)(Je,2),He=ge[0],Xe=ge[1],qe=(0,s.useState)({pageNo:1,pageSize:20}),Ee=(0,r.Z)(qe,2),K=Ee[0],er=Ee[1],rr=(0,s.useState)((0,g.Z)({},K)),Ze=(0,r.Z)(rr,2),le=Ze[0],tr=Ze[1],ar=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"userName",align:"center"},{title:"\u8BBF\u95EE\u65E5\u671F\uFF08\u6309\u7167\u5929\u8BA1\u7B97\uFF09",dataIndex:"visitedDate",key:"visitedDate",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u8BBF\u95EE\u8868",dataIndex:"visitedTable",key:"visitedTable",align:"center"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"dbType",key:"dbType",align:"center"},{title:"\u64CD\u4F5C",key:"action",width:120,align:"center",render:function(c){return(0,a.jsx)(D.Z,{size:"small",type:"link",danger:c.isDelete===0,onClick:function(){(0,ve.ny)({ruleId:c.id,isDelete:c.isDelete===0?1:0}).then(function(I){var M=I.code;M==="0000"&&(B.Z.success({message:"\u64CD\u4F5C\u6210\u529F!",placement:"top"}),z())})},children:c.isDelete===0?"\u7981\u7528":"\u542F\u7528"})}}];function z(R){var c=R||K;Ne(c).then(function(E){var I=E.data;if(I){var M=JSON.parse(I);if(Xe(M.total),M){var Te=JSON.parse(M.rows);H(Te)}else H([])}})}var sr=function(c){c&&Object.keys(c).length>0&&tr(function(E){return{pageSize:E.pageSize,pageNo:E.pageNo,userName:c.userName,visitedDate:c.visitedDate,visitedTable:c.visitedTable}}),z(c)};return(0,s.useEffect)(function(){Le().then(function(R){var c=R.data,E=JSON.parse(c);O(E)}),Ie().then(function(R){var c=R.data,E=JSON.parse(c);J(E)}),z()},[]),(0,a.jsxs)("div",{className:A().portrait,children:[(0,a.jsxs)("div",{className:A()["portrait__form-wrap"],children:[(0,a.jsx)(Z.Z,{orientation:"left",plain:!0,children:(0,a.jsx)(U.Z,{})}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(S.Z,{span:20,children:(0,a.jsxs)(Y.A,{layout:"inline",formRef:p,size:"small",onFinish:function(){var R=(0,h.Z)(P().mark(function c(E){return P().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:sr(E);case 1:case"end":return M.stop()}},c)}));return function(c){return R.apply(this,arguments)}}(),submitter:{render:function(){return[(0,a.jsx)(D.Z,{type:"primary",htmlType:"submit",icon:(0,a.jsx)(U.Z,{}),className:"br-5 w-80 fs-12",children:"\u67E5\u8BE2"},"edit"),(0,a.jsx)(D.Z,{htmlType:"button",icon:(0,a.jsx)(o.Z,{}),onClick:function(){var E;(E=p.current)===null||E===void 0||E.resetFields(),z({pageNo:K.pageNo,pageSize:K.pageSize})},className:"br-5 w-80 fs-12",children:"\u91CD\u7F6E"},"reset")]}},children:[(0,a.jsx)(Y.A.Group,{children:(0,a.jsx)(q.Z,{options:y,placeholder:"\u7528\u6237\u540D",name:"userName",filedConfig:{},fieldProps:{}},"value")}),(0,a.jsx)(Y.A.Group,{children:(0,a.jsx)(q.Z,{options:Q,width:"sm",placeholder:"\u6570\u636E\u5E93\u8868\u540D",name:"visitedTable",filedConfig:{},fieldProps:{}},"value")}),(0,a.jsx)(Y.A.Group,{children:(0,a.jsx)(me,{width:"sm",fieldProps:{bordered:!0,placeholder:"\u8BBF\u95EE\u65F6\u95F4"},name:"visitedDate"})})]})}),(0,a.jsx)(S.Z,{span:4,children:(0,a.jsx)("div",{className:"text-r",children:(0,a.jsx)(D.Z,{className:"br-5 w-80 fs-12",size:"small",type:"primary",onClick:function(){ye(!0)},children:"\u65B0\u589E\u89C4\u5219"})})})]})]}),(0,a.jsx)("div",{className:A().table,children:(0,a.jsx)(d.Z,{columns:ar,dataSource:G,rowKey:"id",size:"middle",pagination:{current:K.pageNo,pageSize:K.pageSize,total:He,onChange:function(){var R=(0,h.Z)(P().mark(function E(I,M){return P().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,er(function(lr){return{pageSize:M,pageNo:I}});case 2:setTimeout(function(){z({pageNo:I,pageSize:M,userName:le.userName,visitedDate:le.visitedDate,visitedTable:le.visitedTable})},200);case 3:case"end":return X.stop()}},E)}));function c(E,I){return R.apply(this,arguments)}return c}()}})}),(0,a.jsx)(Ye,{tableRuleVisible:Qe,setVisible:ye,refresh:z})]})},ke=$e},21514:function(j,C,e){"use strict";e.d(C,{_:function(){return m},g:function(){return d}});var m=["select","insert","update","delete"],d=[{level:"\u9AD8\u5371",color:"#D9534F",value:1},{level:"\u4E2D\u5371",color:"#F0AD4E",value:2},{level:"\u4F4E\u5371",color:"#FFF600",value:3}]},59975:function(j,C,e){"use strict";e.d(C,{f2:function(){return N},MN:function(){return b},yb:function(){return g},ny:function(){return V},$D:function(){return s},Y3:function(){return A}});var m=e(11849),d=e(3182),x=e(94043),n=e.n(x),F=e(25377),S=e(80129),h=e.n(S);function N(o,i){return Z.apply(this,arguments)}function Z(){return Z=(0,d.Z)(n().mark(function o(i,v){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,F.WY)("/api/skyflying/addUserPortraitByVisitedTableEverydayRule",(0,m.Z)({method:"GET",params:i},v||{})));case 1:case"end":return t.stop()}},o)})),Z.apply(this,arguments)}function _(o){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime.mark(function o(i){return _regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",request("/api/skyflying/updateUserPortraitByVisitedTimeRule",_objectSpread({method:"GET"},i||{})));case 1:case"end":return f.stop()}},o)})),D.apply(this,arguments)}function b(o,i){return B.apply(this,arguments)}function B(){return B=(0,d.Z)(n().mark(function o(i,v){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,F.WY)("/api/skyflying/addUserPortraitByVisitedTtimeRule",(0,m.Z)({method:"GET",params:i},v||{})));case 1:case"end":return t.stop()}},o)})),B.apply(this,arguments)}function g(o,i){return r.apply(this,arguments)}function r(){return r=(0,d.Z)(n().mark(function o(i,v){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,F.WY)("/api/skyflying/updateUserPortraitByVisitedTimeRule",(0,m.Z)({method:"GET",params:i},v||{})));case 1:case"end":return t.stop()}},o)})),r.apply(this,arguments)}function V(o,i){return P.apply(this,arguments)}function P(){return P=(0,d.Z)(n().mark(function o(i,v){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,F.WY)("/api/skyflying/updateUserPortraitByVisitedTableEverydayRule",(0,m.Z)({method:"GET",params:i},v||{})));case 1:case"end":return t.stop()}},o)})),P.apply(this,arguments)}function s(o,i){return W.apply(this,arguments)}function W(){return W=(0,d.Z)(n().mark(function o(i,v){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,F.WY)("/api/skyflying/getUserPortraitRules",(0,m.Z)({method:"GET",params:i},v||{})));case 1:case"end":return t.stop()}},o)})),W.apply(this,arguments)}function A(o,i){return U.apply(this,arguments)}function U(){return U=(0,d.Z)(n().mark(function o(i,v){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,F.WY)("/api/skyflying/updateUserPortraitRule?"+h().stringify(i),(0,m.Z)({method:"POST"},v||{})));case 1:case"end":return t.stop()}},o)})),U.apply(this,arguments)}}}]);
