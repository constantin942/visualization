(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[990],{31199:function(U,b,e){"use strict";var y=e(22122),g=e(28991),B=e(81253),p=e(67294),R=e(43985),M=["fieldProps","min","proFieldProps","max"],c=function(h,S){var f=h.fieldProps,E=h.min,T=h.proFieldProps,P=h.max,x=(0,B.Z)(h,M);return p.createElement(R.Z,(0,y.Z)({mode:"edit",valueType:"digit",fieldProps:(0,g.Z)({min:E,max:P},f),ref:S,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:T},x))};b.Z=p.forwardRef(c)},5966:function(U,b,e){"use strict";var y=e(22122),g=e(81253),B=e(67294),p=e(43985),R=["fieldProps","proFieldProps"],M=["fieldProps","proFieldProps"],c="text",k=function(E){var T=E.fieldProps,P=E.proFieldProps,x=(0,g.Z)(E,R);return B.createElement(p.Z,(0,y.Z)({mode:"edit",valueType:c,fieldProps:T,filedConfig:{valueType:c},proFieldProps:P},x))},h=function(E){var T=E.fieldProps,P=E.proFieldProps,x=(0,g.Z)(E,M);return B.createElement(p.Z,(0,y.Z)({mode:"edit",valueType:"password",fieldProps:T,proFieldProps:P,filedConfig:{valueType:c}},x))},S=k;S.Password=h,S.displayName="ProFormComponent",b.Z=S},952:function(U,b,e){"use strict";var y=e(56640),g=e.n(y),B=e(5894);b.ZP=B.A},49027:function(U){U.exports={portrait:"portrait___2weew","portrait__form-wrap":"portrait__form-wrap___2wsdq",table:"table___95yq2"}},56640:function(){},51182:function(U,b,e){"use strict";e.r(b),e.d(b,{default:function(){return Ye}});var y=e(66456),g=e(78587),B=e(13062),p=e(71230),R=e(89032),M=e(15746),c=e(3182),k=e(48736),h=e(27049),S=e(57663),f=e(71577),E=e(74379),T=e(38648),P=e(2824),x=e(94043),s=e.n(x),r=e(67294),D=e(49027),Z=e.n(D),l=e(76570),Ee=e(25592),A=e(22122),_=e(28991),N=e(81253),L=e(43985),I=e(66758),Te=["proFieldProps","fieldProps"],ne="date",Ze=r.forwardRef(function(a,n){var d=a.proFieldProps,i=a.fieldProps,o=(0,N.Z)(a,Te),F=(0,r.useContext)(I.Z);return r.createElement(L.Z,(0,A.Z)({ref:n,mode:"edit",valueType:ne,fieldProps:(0,_.Z)({getPopupContainer:F.getPopupContainer},i),proFieldProps:d,filedConfig:{valueType:ne,customLightMode:!0}},o))}),Ce=Ze,xe=["proFieldProps","fieldProps"],le="dateWeek",Fe=r.forwardRef(function(a,n){var d=a.proFieldProps,i=a.fieldProps,o=(0,N.Z)(a,xe),F=(0,r.useContext)(I.Z);return r.createElement(L.Z,(0,A.Z)({ref:n,mode:"edit",valueType:le,fieldProps:(0,_.Z)({getPopupContainer:F.getPopupContainer},i),proFieldProps:d,filedConfig:{valueType:le,customLightMode:!0}},o))}),be=Fe,De=["proFieldProps","fieldProps"],ue="dateMonth",Be=r.forwardRef(function(a,n){var d=a.proFieldProps,i=a.fieldProps,o=(0,N.Z)(a,De),F=(0,r.useContext)(I.Z);return r.createElement(L.Z,(0,A.Z)({ref:n,mode:"edit",valueType:ue,fieldProps:(0,_.Z)({getPopupContainer:F.getPopupContainer},i),proFieldProps:d,filedConfig:{valueType:ue,customLightMode:!0}},o))}),Re=Be,je=["fieldProps"],oe="dateQuarter",Me=r.forwardRef(function(a,n){var d=a.fieldProps,i=(0,N.Z)(a,je),o=(0,r.useContext)(I.Z);return r.createElement(L.Z,(0,A.Z)({ref:n,mode:"edit",valueType:oe,fieldProps:(0,_.Z)({getPopupContainer:o.getPopupContainer},d),filedConfig:{valueType:oe,customLightMode:!0}},i))}),Se=Me,Oe=["proFieldProps","fieldProps"],de="dateYear",Ue=r.forwardRef(function(a,n){var d=a.proFieldProps,i=a.fieldProps,o=(0,N.Z)(a,Oe),F=(0,r.useContext)(I.Z);return r.createElement(L.Z,(0,A.Z)({ref:n,mode:"edit",valueType:de,fieldProps:(0,_.Z)({getPopupContainer:F.getPopupContainer},i),proFieldProps:d,filedConfig:{valueType:de,customLightMode:!0}},o))}),Ve=Ue,V=Ce;V.Week=be,V.Month=Re,V.Quarter=Se,V.Year=Ve,V.displayName="ProFormComponent";var pe=V,G=e(5894),H=e(64317),w=e(11849),X=e(25377);function We(a){return q.apply(this,arguments)}function q(){return q=(0,c.Z)(s().mark(function a(n){return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,X.WY)("/api/skyflying/getAllUserNameUserPortraitByVisitedTableEveryday",(0,w.Z)({method:"GET"},n||{})));case 1:case"end":return i.stop()}},a)})),q.apply(this,arguments)}function Ae(a){return ee.apply(this,arguments)}function ee(){return ee=(0,c.Z)(s().mark(function a(n){return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,X.WY)("/api/skyflying/getAllVisitedTablePortraitByVisitedTableEveryday",(0,w.Z)({method:"GET"},n||{})));case 1:case"end":return i.stop()}},a)})),ee.apply(this,arguments)}function _e(a,n){return re.apply(this,arguments)}function re(){return re=(0,c.Z)(s().mark(function a(n,d){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,X.WY)("/api/skyflying/getUserPortraitByVisitedTableEveryday",(0,w.Z)({method:"GET",params:n||{}},d||{})));case 1:case"end":return o.stop()}},a)})),re.apply(this,arguments)}var ce=e(59975),Xe=e(71194),Ne=e(50146),qe=e(20228),Le=e(11382),me=e(952),ve=e(5966),Ie=e(31199),we=["select","insert","update","delete"],er=[{label:"\u7528\u6237\u8BBF\u95EE\u8868\u7684\u753B\u50CF\u89C4\u5219",value:"table"},{label:"\u7528\u6237\u5728\u4EC0\u4E48\u65F6\u95F4\u8BBF\u95EE\u8FC7\u591A\u5C11\u6B21\u7CFB\u7EDF\u753B\u50CF\u89C4\u5219",value:"time"}],t=e(85893),Ke=function(n){var d=(0,r.useRef)(),i=(0,r.useState)(!1),o=(0,P.Z)(i,2),F=o[0],Y=o[1],z={labelCol:{span:8},wrapperCol:{span:16}};return(0,t.jsx)(Ne.Z,{width:700,title:"\u6DFB\u52A0\u7528\u6237\u5BF9\u8868\u8BBF\u95EE\u7684\u753B\u50CF\u89C4\u5219",visible:n.tableRuleVisible,footer:[],onCancel:function(){return n.setVisible(!1)},children:(0,t.jsx)(Le.Z,{spinning:F,children:(0,t.jsxs)(me.ZP,(0,w.Z)((0,w.Z)({size:"middle",layout:"horizontal"},z),{},{submitter:!1,onFinish:function(){var $=(0,c.Z)(s().mark(function Q(te){return s().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:Y(!0),(0,ce.f2)(te).then(function(se){var ie=se.code;ie==="0000"&&(T.Z.success({message:"\u521B\u5EFA\u6210\u529F!",placement:"top"}),Y(!1),n.setVisible(!1))});case 2:case"end":return K.stop()}},Q)}));return function(Q){return $.apply(this,arguments)}}(),formRef:d,children:[(0,t.jsx)(ve.Z,{name:"userName",width:"md",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",label:"\u767B\u5F55\u7CFB\u7EDF\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u7CFB\u7EDF\u7528\u6237\u540D"}],required:!0}),(0,t.jsx)(ve.Z,{name:"visitedTable",width:"md",label:"\u7528\u6237\u8BBF\u95EE\u8868",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u8BBF\u95EE\u8868"}],required:!0}),(0,t.jsx)(Ie.Z,{label:"\u8BBF\u95EE\u8868\u6B21\u6570",placeholder:"\u8BF7\u8F93\u5165\u6B21\u6570",name:"visitedCount",initialValue:1,width:"sm",min:1,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BBF\u95EE\u8868\u6B21\u6570"}],required:!0}),(0,t.jsx)(pe,{label:"\u8BBF\u95EE\u8FC7\u8868\u7684\u65F6\u95F4",name:"visitedDate",placeholder:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u65F6\u95F4",width:"sm",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u65F6\u95F4\uFF01"}],required:!0}),(0,t.jsx)(H.Z,{label:"SQL\u7C7B\u578B",name:"dbType",options:we,width:"sm",initialValue:"select",placeholder:"\u8BF7\u9009\u62E9SQL\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9SQL\u7C7B\u578B\uFF01"}],required:!0}),(0,t.jsxs)(me.ZP.Group,{style:{textAlign:"center",marginTop:"30px"},children:[(0,t.jsx)(f.Z,{type:"primary",htmlType:"submit",className:"w-100",children:"\u521B\u5EFA\u89C4\u5219"}),(0,t.jsx)(f.Z,{className:"w-100",htmlType:"reset",children:"\u91CD \u7F6E"})]})]}))})})},ke=Ke,Ge=function(){var n=(0,r.useRef)(),d=(0,r.useState)([]),i=(0,P.Z)(d,2),o=i[0],F=i[1],Y=(0,r.useState)([]),z=(0,P.Z)(Y,2),$=z[0],Q=z[1],te=(0,r.useState)([]),ae=(0,P.Z)(te,2),K=ae[0],se=ae[1],ie=(0,r.useState)(!1),fe=(0,P.Z)(ie,2),ze=fe[0],Pe=fe[1],$e=(0,r.useState)({pageNo:1,pageSize:20,total:0}),he=(0,P.Z)($e,2),J=he[0],ye=he[1],Qe=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"userName",align:"center"},{title:"\u8BBF\u95EE\u65E5\u671F\uFF08\u6309\u7167\u5929\u8BA1\u7B97\uFF09",dataIndex:"visitedDate",key:"visitedDate",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u8BBF\u95EE\u8868",dataIndex:"visitedTable",key:"visitedTable",align:"center"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"dbType",key:"dbType",align:"center"},{title:"\u64CD\u4F5C",key:"action",width:120,align:"center",render:function(u){return(0,t.jsx)(f.Z,{size:"small",type:"link",danger:u.isDelete===0,onClick:function(){(0,ce.ny)({ruleId:u.id,isDelete:u.isDelete===0?1:0}).then(function(j){var C=j.code;C==="0000"&&(T.Z.success({message:"\u64CD\u4F5C\u6210\u529F!",placement:"top"}),W())})},children:u.isDelete===0?"\u7981\u7528":"\u542F\u7528"})}}];function W(m){var u=m||J;_e(u).then(function(v){var j=v.data;if(j){var C=JSON.parse(j);if(ye(function(O){return{total:C.total,pageNo:O.pageNo,pageSize:O.pageSize}}),C){var ge=JSON.parse(C.rows);se(ge)}}})}var Je=function(u){W(u)};return(0,r.useEffect)(function(){We().then(function(m){var u=m.data,v=JSON.parse(u);F(v)}),Ae().then(function(m){var u=m.data,v=JSON.parse(u);Q(v)}),W()},[]),(0,t.jsxs)("div",{className:Z().portrait,children:[(0,t.jsxs)("div",{className:Z()["portrait__form-wrap"],children:[(0,t.jsx)(h.Z,{orientation:"left",plain:!0,children:(0,t.jsx)(l.Z,{})}),(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(M.Z,{span:20,children:(0,t.jsxs)(G.A,{layout:"inline",formRef:n,size:"small",onFinish:function(){var m=(0,c.Z)(s().mark(function u(v){return s().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:Je(v);case 1:case"end":return C.stop()}},u)}));return function(u){return m.apply(this,arguments)}}(),submitter:{render:function(){return[(0,t.jsx)(f.Z,{type:"primary",htmlType:"submit",icon:(0,t.jsx)(l.Z,{}),className:"br-5 w-80 fs-12",children:"\u67E5\u8BE2"},"edit"),(0,t.jsx)(f.Z,{htmlType:"button",icon:(0,t.jsx)(Ee.Z,{}),onClick:function(){var v;(v=n.current)===null||v===void 0||v.resetFields(),W()},className:"br-5 w-80 fs-12",children:"\u91CD\u7F6E"},"reset")]}},children:[(0,t.jsx)(G.A.Group,{children:(0,t.jsx)(H.Z,{options:o,placeholder:"\u7528\u6237\u540D",name:"userName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(G.A.Group,{children:(0,t.jsx)(H.Z,{options:$,width:"sm",placeholder:"\u6570\u636E\u5E93\u8868\u540D",name:"visitedTable",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(G.A.Group,{children:(0,t.jsx)(pe,{width:"sm",fieldProps:{bordered:!0,placeholder:"\u8BBF\u95EE\u65F6\u95F4"},name:"visitedDate"})})]})}),(0,t.jsx)(M.Z,{span:4,children:(0,t.jsx)("div",{className:"text-r",children:(0,t.jsx)(f.Z,{className:"br-5 w-80 fs-12",size:"small",type:"primary",onClick:function(){Pe(!0)},children:"\u65B0\u589E\u89C4\u5219"})})})]})]}),(0,t.jsx)("div",{className:Z().table,children:(0,t.jsx)(g.Z,{columns:Qe,dataSource:K,rowKey:"id",size:"middle",pagination:{current:J.pageNo,pageSize:J.pageSize,total:J.total,onChange:function(){var m=(0,c.Z)(s().mark(function v(j,C){return s().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,ye(function(He){return{pageSize:C,pageNo:j,total:He.total}});case 2:setTimeout(function(){W({pageNo:j,pageSize:C})},200);case 3:case"end":return O.stop()}},v)}));function u(v,j){return m.apply(this,arguments)}return u}()}})}),(0,t.jsx)(ke,{tableRuleVisible:ze,setVisible:function(u){return Pe(u)},refresh:W})]})},Ye=Ge},59975:function(U,b,e){"use strict";e.d(b,{f2:function(){return M},MN:function(){return S},yb:function(){return E},ny:function(){return P}});var y=e(11849),g=e(3182),B=e(94043),p=e.n(B),R=e(25377);function M(s,r){return c.apply(this,arguments)}function c(){return c=(0,g.Z)(p().mark(function s(r,D){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,R.WY)("/api/skyflying/addUserPortraitByVisitedTableEverydayRule",(0,y.Z)({method:"GET",params:r},D||{})));case 1:case"end":return l.stop()}},s)})),c.apply(this,arguments)}function k(s){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime.mark(function s(r){return _regeneratorRuntime.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",request("/api/skyflying/updateUserPortraitByVisitedTimeRule",_objectSpread({method:"GET"},r||{})));case 1:case"end":return Z.stop()}},s)})),h.apply(this,arguments)}function S(s,r){return f.apply(this,arguments)}function f(){return f=(0,g.Z)(p().mark(function s(r,D){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,R.WY)("/api/skyflying/addUserPortraitByVisitedTtimeRule",(0,y.Z)({method:"GET",params:r},D||{})));case 1:case"end":return l.stop()}},s)})),f.apply(this,arguments)}function E(s,r){return T.apply(this,arguments)}function T(){return T=(0,g.Z)(p().mark(function s(r,D){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,R.WY)("/api/skyflying/updateUserPortraitByVisitedTimeRule",(0,y.Z)({method:"GET",params:r},D||{})));case 1:case"end":return l.stop()}},s)})),T.apply(this,arguments)}function P(s,r){return x.apply(this,arguments)}function x(){return x=(0,g.Z)(p().mark(function s(r,D){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,R.WY)("/api/skyflying/updateUserPortraitByVisitedTableEverydayRule",(0,y.Z)({method:"GET",params:r},D||{})));case 1:case"end":return l.stop()}},s)})),x.apply(this,arguments)}}}]);
