(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(b){b.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2"}},44089:function(b,F,t){"use strict";t.r(F),t.d(F,{default:function(){return ie}});var T=t(57663),C=t(71577),O=t(13062),u=t(71230),y=t(95300),a=t(7277),l=t(89032),s=t(15746),n=t(58024),r=t(39144),D=t(71748),U=t(33860),j=t(3182),i=t(2824),f=t(94043),o=t.n(f),d=t(67294),c=t(26516),S=t.n(c),w=t(11849),V=t(46066),z=t(68628),e=t(85893),X=function(){var m={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(z.Z,{className:"fs-16 ib danger mr-10"}),(0,e.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,e.jsx)("div",{className:"of-hidden",children:(0,e.jsxs)(V.Z,(0,w.Z)((0,w.Z)({},m),{},{children:[(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237admin\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user1\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user2\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user3\u5728\u591C\u95F4\u8BBF\u95EEsys_user\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237admin\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user1\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user2\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user3\u5728\u591C\u95F4\u8BBF\u95EEsys_user\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237admin\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user1\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user2\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user3\u5728\u591C\u95F4\u8BBF\u95EEsys_user\u8868"})]}))})]})},J=X,Q=t(69886),q=function(m){return(0,d.useEffect)(function(){var x=new Q.x1("RangeTimeData",{height:148,data:m.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"diamond",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"marker-active"}]});x.changeData(m.data),x.chart.data(m.data),x.render()},[]),(0,e.jsx)("div",{id:"RangeTimeData"})},ee=q,P=t(47369),R=t(24480),k=t(6650),te=t(32773);function xe(p,m){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime.mark(function p(m,x){return _regeneratorRuntime.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({params:m,method:"GET"},x||{})));case 1:case"end":return A.stop()}},p)})),N.apply(this,arguments)}function ae(p){return W.apply(this,arguments)}function W(){return W=(0,j.Z)(o().mark(function p(m){return o().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,te.WY)("/api/skyflying/getOverviewOfSystem",(0,w.Z)({method:"GET"},m||{})));case 1:case"end":return v.stop()}},p)})),W.apply(this,arguments)}var se=t(21704);function ne(p){return M.apply(this,arguments)}function M(){return M=(0,j.Z)(o().mark(function p(m){return o().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,se.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,w.Z)({method:"GET"},m||{})));case 1:case"end":return v.stop()}},p)})),M.apply(this,arguments)}var ue=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",search:!1,align:"center"}],re=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"userName",key:"name",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"count",initialValue:"all",align:"center"},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"since",dataIndex:"data",align:"center"},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"since2",dataIndex:"time",valueType:"date",hideInSetting:!0,align:"center"}],le=function(m){var x=(0,d.useState)(),v=(0,i.Z)(x,2),A=v[0],Y=v[1],ce=(0,d.useState)([]),L=(0,i.Z)(ce,2),I=L[0],oe=L[1],de=(0,d.useState)([]),$=(0,i.Z)(de,2),H=$[0],me=$[1],ve=(0,d.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),G=(0,i.Z)(ve,2),_=G[0],he=G[1],fe=function(){(0,k.F$)().then(function(h){var g=h.data;g&&g.length>0?Y(g.map(function(E){return E.id=R.Z.uuid(),E})):Y([])})},ge=function(){var h=R.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),g=R.Z.getRangeTime(7,"mm-dd");(0,k.Xd)({startTime:h[0],endTime:h[1]}).then(function(E){var K=E.data;oe(function(){return K.map(function(B,Ce){return{year:g[Ce],value:B}})})})},pe=function(){var Z=(0,j.Z)(o().mark(function h(){var g,E;return o().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,ae();case 2:g=B.sent,E=g.data,he(E);case 5:case"end":return B.stop()}},h)}));return function(){return Z.apply(this,arguments)}}(),Ee=function(){var Z=(0,j.Z)(o().mark(function h(){return o().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:case"end":return E.stop()}},h)}));return function(){return Z.apply(this,arguments)}}(),ye=function(){ne().then(function(h){var g=h.data;g&&me(g)})};return(0,d.useEffect)(function(){fe(),ge(),ye(),pe().then(),Ee().then()},[]),(0,e.jsxs)("div",{className:S().overview,children:[(0,e.jsx)("div",{className:S().staticWrap,children:(0,e.jsxs)(u.Z,{gutter:20,children:[(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(r.Z,{className:S().bgW,title:"\u8FD1\u4E03\u5929\u4FE1\u606F\u91C7\u96C6\u60C5\u51B5",children:(0,e.jsx)("div",{className:"mt-15",children:(0,e.jsx)(U.Z,{active:!0,loading:I.length===0,children:(0,e.jsx)(ee,{data:I})})})})}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(r.Z,{className:S().bgW,title:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5",children:(0,e.jsx)(u.Z,{gutter:20,className:"text-c",style:{height:"162px"},children:(0,e.jsxs)(U.Z,{active:!0,loading:I.length===0,children:[(0,e.jsx)(s.Z,{span:12,className:"mt-15 text-c",children:(0,e.jsx)(a.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:_.visitedInformation,valueStyle:{color:"#3f8600"}})}),(0,e.jsx)(s.Z,{span:12,className:"mt-15",children:(0,e.jsx)(a.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:_.dbInstance,valueStyle:{color:"#3f8600"}})}),(0,e.jsx)(s.Z,{span:12,className:"mt-20",children:(0,e.jsx)(a.Z,{title:"\u7528\u6237\u4EBA\u6570",value:_.user,valueStyle:{color:"#3f8600"}})}),(0,e.jsx)(s.Z,{span:12,className:"mt-20",children:(0,e.jsx)(a.Z,{title:"\u6570\u636E\u5E93\u8868",value:_.table,valueStyle:{color:"#3f8600"}})})]})})})}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)("div",{className:S().waringWrap,children:(0,e.jsx)(J,{})})})]})}),(0,e.jsx)("div",{className:S().center,children:(0,e.jsxs)(u.Z,{gutter:30,children:[(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(P.ZP,{columns:ue,dataSource:A,options:!1,toolBarRender:function(){return[(0,e.jsx)(C.Z,{type:"link",size:"small",onClick:function(){m.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"key",search:!1,headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,e.jsx)(s.Z,{span:12,className:"pr-10",children:(0,e.jsx)(U.Z,{active:!0,loading:H.length===0,paragraph:{rows:5},children:(0,e.jsx)(P.ZP,{columns:re,dataSource:H,options:!1,rowKey:"key",search:!1,toolBarRender:function(){return[(0,e.jsx)(C.Z,{type:"link",size:"small",children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u884C\u4E3A"})})})]})})]})},ie=le},6650:function(b,F,t){"use strict";t.d(F,{F$:function(){return a},Xd:function(){return s},et:function(){return r},Bx:function(){return U}});var T=t(11849),C=t(3182),O=t(94043),u=t.n(O),y=t(32773);function a(i){return l.apply(this,arguments)}function l(){return l=(0,C.Z)(u().mark(function i(f){return u().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,y.WY)("/api/skyflying/getCoarseCountsOfUser",(0,T.Z)({method:"GET"},f||{})));case 1:case"end":return d.stop()}},i)})),l.apply(this,arguments)}function s(i,f){return n.apply(this,arguments)}function n(){return n=(0,C.Z)(u().mark(function i(f,o){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,y.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,T.Z)({method:"GET",params:f},o||{})));case 1:case"end":return c.stop()}},i)})),n.apply(this,arguments)}function r(i,f){return D.apply(this,arguments)}function D(){return D=(0,C.Z)(u().mark(function i(f,o){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,y.WY)("/api/skyflying/getCountsOfUser",(0,T.Z)({method:"GET",params:f},o||{})));case 1:case"end":return c.stop()}},i)})),D.apply(this,arguments)}function U(i,f){return j.apply(this,arguments)}function j(){return j=(0,C.Z)(u().mark(function i(f,o){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,y.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,T.Z)({method:"GET",params:f},o||{})));case 1:case"end":return c.stop()}},i)})),j.apply(this,arguments)}},24480:function(b,F,t){"use strict";t.d(F,{Z:function(){return O}});var T=t(69610),C=t(54941),O=function(){function u(){(0,T.Z)(this,u)}return(0,C.Z)(u,null,[{key:"timeStampToTime",value:function(a){var l=new Date(parseInt(a));return l.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",s,n={"Y+":a.getFullYear().toString(),"m+":(a.getMonth()+1).toString(),"d+":a.getDate().toString(),"H+":a.getHours().toString(),"M+":a.getMinutes().toString(),"S+":a.getSeconds().toString()},r=l;for(var D in n)s=new RegExp("("+D+")").exec(l),s&&(r=r.replace(s[1],s[1].length==1?n[D]:n[D].padStart(s[1].length,"0")));return r}},{key:"uuid",value:function(){for(var a=[],l="0123456789abcdef",s=0;s<36;s++)a[s]=l.substr(Math.floor(Math.random()*16),1);return a[14]="4",a[19]=l.substr(a[19]&3|8,1),a[8]=a[13]=a[18]=a[23]="-",a.join("").replace(new RegExp(/(-)/g),"")}},{key:"getRangeTime",value:function(a,l){for(var s=[],n=a-1;n>=0;n--){var r=void 0;n===a-1?r=new Date(Date.now()-n*24*60*60*1e3).setHours(0,0,1,0):r=new Date(Date.now()-n*24*60*60*1e3).setHours(23,59,59,999),l?s.push(u.getLocalTime(new Date(r),l)):s.push(r)}return s}},{key:"getRangeStartAndEndTime",value:function(a,l){for(var s=[],n=a-1;n>=0;n--){var r=void 0;n===a-1?r=new Date(Date.now()-n*24*60*60*1e3).setHours(0,0,0,0):n===0?r=new Date(Date.now()-(n-1)*24*60*60*1e3).setHours(0,0,0,0):r=new Date(Date.now()-n*24*60*60*1e3).setHours(23,59,59,999),l?s.push(u.getLocalTime(new Date(r),l)):s.push(r)}return[s[0],s[a-1]]}}]),u}();O.arrayDeDuplication=function(u){return Array.from(new Set(u))}}}]);
