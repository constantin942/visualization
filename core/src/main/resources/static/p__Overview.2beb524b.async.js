(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[628],{26516:function(F){F.exports={overview:"overview___ZXPWZ",staticWrap:"staticWrap___2Invp",waringWrap:"waringWrap___AfQ25",bgW:"bgW___3rDWk",center:"center___21dU2",nowrap:"nowrap___spq6f"}},81135:function(F,x,t){"use strict";t.r(x),t.d(x,{default:function(){return le}});var y=t(57663),E=t(71577),b=t(13062),u=t(71230),p=t(95300),a=t(7277),i=t(89032),s=t(15746),n=t(58024),d=t(39144),h=t(71748),U=t(33860),j=t(3182),O=t(2824),w=t(94043),l=t.n(w),o=t(67294),_=t(26516),c=t.n(_),r=t(11849),H=t(46066),V=t(68628),e=t(85893),z=function(){var m={dots:!1,innerSlider:!0,slidesToShow:6,slidesToScroll:1,vertical:!0,verticalSwiping:!0,autoplay:!0,speed:2e3,autoplaySpeed:2e3,arrows:!1,cssEase:"linear"};return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(V.Z,{className:"fs-16 ib danger mr-10"}),(0,e.jsx)("h3",{className:"danger fs-16 ib",children:"\u544A\u8B66\u4FE1\u606F"})]}),(0,e.jsx)("div",{className:"of-hidden",children:(0,e.jsxs)(H.Z,(0,r.Z)((0,r.Z)({},m),{},{children:[(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237admin\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user1\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user2\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user3\u5728\u591C\u95F4\u8BBF\u95EEsys_user\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237admin\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user1\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user2\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user3\u5728\u591C\u95F4\u8BBF\u95EEsys_user\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237admin\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user1\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user2\u4ECE\u6765\u6CA1\u6709\u8BBF\u95EE\u8FC7\u8FD9\u4E2A\u8868"}),(0,e.jsx)("div",{className:"mt-5 mb-5 text-c lh-2",children:"\u7528\u6237user3\u5728\u591C\u95F4\u8BBF\u95EEsys_user\u8868"})]}))})]})},X=z,J=t(69886),Q=function(m){return(0,o.useEffect)(function(){var C=new J.x1("RangeTimeData",{height:148,data:m.data,xField:"year",yField:"value",label:{},point:{size:5,shape:"diamond",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"marker-active"}]});C.changeData(m.data),C.chart.data(m.data),C.render()},[]),(0,e.jsx)("div",{id:"RangeTimeData"})},q=Q,P=t(47369),R=t(24480),ee=t(6650),k=t(32773);function te(D,m){return W.apply(this,arguments)}function W(){return W=(0,j.Z)(l().mark(function D(m,C){return l().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,k.WY)("/api/skyflying/getCountsOfAllRecentSevenDays",(0,r.Z)({params:m,method:"GET"},C||{})));case 1:case"end":return S.stop()}},D)})),W.apply(this,arguments)}function ae(D){return M.apply(this,arguments)}function M(){return M=(0,j.Z)(l().mark(function D(m){return l().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,k.WY)("/api/skyflying/getOverviewOfSystem",(0,r.Z)({method:"GET"},m||{})));case 1:case"end":return T.stop()}},D)})),M.apply(this,arguments)}var se=t(66572),ne=[{title:"\u7528\u6237\u540D",dataIndex:"userName",key:"name",width:100,align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",width:100,dataIndex:"visitedCount",key:"visitedCount",search:!1,align:"center"},{title:"\u5E38\u7528\u6570\u636E",dataIndex:"usualVisitedData",key:"usualVisitedData",align:"center",search:!1,width:500,render:function(m,C){return(0,e.jsx)("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:C.usualVisitedData})}},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",dataIndex:"lastVisitedDate",key:"lastVisitedDate",width:300,search:!1,align:"center"}],re=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center"},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center"},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,align:"center"}],ue=function(m){var C=(0,o.useState)(),T=(0,O.Z)(C,2),S=T[0],L=T[1],ie=(0,o.useState)([]),Y=(0,O.Z)(ie,2),I=Y[0],oe=Y[1],de=(0,o.useState)([]),K=(0,O.Z)(de,2),$=K[0],ce=K[1],me=(0,o.useState)({dbInstance:0,table:0,user:0,visitedInformation:0}),G=(0,O.Z)(me,2),N=G[0],ve=G[1],fe=function(){(0,ee.F$)().then(function(v){var g=v.data;if(g&&g.length>0){L(g.map(function(Z){return Z.id=R.Z.uuid(),Z}));var f=[];g.forEach(function(Z){f.push({level:1,name:Z.userName,childrenNum:5,id:Z.userName})}),console.log(f)}else L([])})},he=function(){var v=R.Z.getRangeStartAndEndTime(7,"YYYY-mm-dd HH:MM:SS"),g=R.Z.getRangeTime(7,"mm-dd");te({startTime:v[0],endTime:v[1]}).then(function(f){var Z=f.data;oe(function(){return Z.map(function(B,_e){return{year:g[_e],value:B}})})})},ge=function(){var A=(0,j.Z)(l().mark(function v(){var g,f;return l().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,ae();case 2:g=B.sent,f=g.data,ve(f);case 5:case"end":return B.stop()}},v)}));return function(){return A.apply(this,arguments)}}(),pe=function(){var A=(0,j.Z)(l().mark(function v(){return l().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:case"end":return f.stop()}},v)}));return function(){return A.apply(this,arguments)}}(),Ee=function(){(0,se.m)().then(function(v){var g=v.data;g&&ce(g.map(function(f){return f.id=R.Z.uuid(),f}))})};return(0,o.useEffect)(function(){fe(),he(),Ee(),ge().then(),pe().then()},[]),(0,e.jsxs)("div",{className:c().overview,children:[(0,e.jsx)("div",{className:c().staticWrap,children:(0,e.jsxs)(u.Z,{gutter:20,children:[(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(d.Z,{className:c().bgW,title:"\u8FD1\u4E03\u5929\u4FE1\u606F\u91C7\u96C6\u60C5\u51B5",children:(0,e.jsx)("div",{className:"mt-15",children:(0,e.jsx)(U.Z,{active:!0,loading:I.length===0,children:(0,e.jsx)(q,{data:I})})})})}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(d.Z,{className:c().bgW,title:"\u6570\u636E\u7EDF\u8BA1\u60C5\u51B5",children:(0,e.jsx)(u.Z,{gutter:20,className:"text-c",style:{height:"162px"},children:(0,e.jsxs)(U.Z,{active:!0,loading:I.length===0,children:[(0,e.jsx)(s.Z,{span:12,className:"mt-15 text-c",children:(0,e.jsx)(a.Z,{title:"\u5DF2\u6536\u96C6\u4FE1\u606F",value:N.visitedInformation,valueStyle:{color:"#3f8600"}})}),(0,e.jsx)(s.Z,{span:12,className:"mt-15",children:(0,e.jsx)(a.Z,{title:"\u6570\u636E\u5E93\u4E2A\u6570",value:N.dbInstance,valueStyle:{color:"#3f8600"}})}),(0,e.jsx)(s.Z,{span:12,className:"mt-20",children:(0,e.jsx)(a.Z,{title:"\u7528\u6237\u4EBA\u6570",value:N.user,valueStyle:{color:"#3f8600"}})}),(0,e.jsx)(s.Z,{span:12,className:"mt-20",children:(0,e.jsx)(a.Z,{title:"\u6570\u636E\u5E93\u8868",value:N.table,valueStyle:{color:"#3f8600"}})})]})})})}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)("div",{className:c().waringWrap,children:(0,e.jsx)(X,{})})})]})}),(0,e.jsx)("div",{className:c().center,children:(0,e.jsxs)(u.Z,{gutter:30,children:[(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(P.ZP,{columns:ne,dataSource:S,options:!1,toolBarRender:function(){return[(0,e.jsx)(E.Z,{type:"link",size:"small",onClick:function(){m.history.push("/user-access")},children:"\u8BE6\u60C5"},"user-link")]},rowKey:"id",search:!1,pagination:!1,headerTitle:"\u7528\u6237\u8BBF\u95EE\u884C\u4E3A"})}),(0,e.jsx)(s.Z,{span:12,className:"pr-10",children:(0,e.jsx)(U.Z,{active:!0,loading:$.length===0,paragraph:{rows:5},children:(0,e.jsx)(P.ZP,{columns:re,dataSource:$,options:!1,rowKey:"id",search:!1,pagination:!1,toolBarRender:function(){return[(0,e.jsx)(E.Z,{type:"link",size:"small",onClick:function(){m.history.push("/databases")},children:"\u8BE6\u60C5"},"data-link")]},headerTitle:"\u6570\u636E\u8BBF\u95EE\u884C\u4E3A"})})})]})})]})},le=ue},66572:function(F,x,t){"use strict";t.d(x,{m:function(){return a}});var y=t(11849),E=t(3182),b=t(94043),u=t.n(b),p=t(21704);function a(s){return i.apply(this,arguments)}function i(){return i=(0,E.Z)(u().mark(function s(n){return u().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,p.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,y.Z)({method:"GET"},n||{})));case 1:case"end":return h.stop()}},s)})),i.apply(this,arguments)}},6650:function(F,x,t){"use strict";t.d(x,{F$:function(){return a},Xd:function(){return s},et:function(){return U},Bx:function(){return O}});var y=t(11849),E=t(3182),b=t(94043),u=t.n(b),p=t(32773);function a(l){return i.apply(this,arguments)}function i(){return i=(0,E.Z)(u().mark(function l(o){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,p.WY)("/api/skyflying/getCoarseCountsOfUser",(0,y.Z)({method:"GET"},o||{})));case 1:case"end":return c.stop()}},l)})),i.apply(this,arguments)}function s(l,o){return n.apply(this,arguments)}function n(){return n=(0,E.Z)(u().mark(function l(o,_){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.WY)("/api/skyflying/getCountsOfUserRecentSevenDays",(0,y.Z)({method:"GET",params:o},_||{})));case 1:case"end":return r.stop()}},l)})),n.apply(this,arguments)}function d(l,o){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime.mark(function l(o,_){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/skyflying/getCountsOfAllRecentSevenDays",_objectSpread({method:"GET",params:o},_||{})));case 1:case"end":return r.stop()}},l)})),h.apply(this,arguments)}function U(l,o){return j.apply(this,arguments)}function j(){return j=(0,E.Z)(u().mark(function l(o,_){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.WY)("/api/skyflying/getCountsOfUser",(0,y.Z)({method:"GET",params:o},_||{})));case 1:case"end":return r.stop()}},l)})),j.apply(this,arguments)}function O(l,o){return w.apply(this,arguments)}function w(){return w=(0,E.Z)(u().mark(function l(o,_){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.WY)("/api/skyflying/getUserUsualAndUnusualData",(0,y.Z)({method:"GET",params:o},_||{})));case 1:case"end":return r.stop()}},l)})),w.apply(this,arguments)}},24480:function(F,x,t){"use strict";t.d(x,{Z:function(){return b}});var y=t(69610),E=t(54941),b=function(){function u(){(0,y.Z)(this,u)}return(0,E.Z)(u,null,[{key:"timeStampToTime",value:function(a){var i=new Date(parseInt(a));return i.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",s,n={"Y+":a.getFullYear().toString(),"m+":(a.getMonth()+1).toString(),"d+":a.getDate().toString(),"H+":a.getHours().toString(),"M+":a.getMinutes().toString(),"S+":a.getSeconds().toString()},d=i;for(var h in n)s=new RegExp("("+h+")").exec(i),s&&(d=d.replace(s[1],s[1].length==1?n[h]:n[h].padStart(s[1].length,"0")));return d}},{key:"uuid",value:function(){for(var a=[],i="0123456789abcdef",s=0;s<36;s++)a[s]=i.substr(Math.floor(Math.random()*16),1);return a[14]="4",a[19]=i.substr(a[19]&3|8,1),a[8]=a[13]=a[18]=a[23]="-",a.join("").replace(new RegExp(/(-)/g),"")}},{key:"getRangeTime",value:function(a,i){for(var s=[],n=a-1;n>=0;n--){var d=void 0;n===a-1?d=new Date(Date.now()-n*24*60*60*1e3).setHours(0,0,1,0):d=new Date(Date.now()-n*24*60*60*1e3).setHours(23,59,59,999),i?s.push(u.getLocalTime(new Date(d),i)):s.push(d)}return s}},{key:"getRangeStartAndEndTime",value:function(a,i){for(var s=[],n=a-1;n>=0;n--){var d=void 0;n===a-1?d=new Date(Date.now()-n*24*60*60*1e3).setHours(0,0,0,0):n===0?d=new Date(Date.now()-(n-1)*24*60*60*1e3).setHours(0,0,0,0):d=new Date(Date.now()-n*24*60*60*1e3).setHours(23,59,59,999),i?s.push(u.getLocalTime(new Date(d),i)):s.push(d)}return[s[0],s[a-1]]}}]),u}();b.arrayDeDuplication=function(u){return Array.from(new Set(u))}}}]);
