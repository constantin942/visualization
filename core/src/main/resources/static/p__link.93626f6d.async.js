(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[72],{82277:function(F){F.exports={"link__form-wrap":"link__form-wrap___4fdvJ",link__content:"link__content___oPe_t",pages:"pages___3NUwO","link__item-card":"link__item-card___y2kSX",link:"link___s0XZS","detail-table":"detail-table___2NvnS","ant-table-tbody":"ant-table-tbody___2xnJD","is-active":"is-active___3dJbi"}},48385:function(F,P,e){"use strict";e.r(P),e.d(P,{default:function(){return me}});var T=e(13254),f=e(14277),ee=e(14781),i=e(23492),D=e(57663),_=e(71577),U=e(3182),te=e(48736),O=e(27049),H=e(11849),g=e(2824),X=e(94043),A=e.n(X),h=e(67294),S=e(5894),k=e(64317),I=e(78844),z=e(76570),Y=e(25592),a=["select","insert","update","delete"],s=e(54154),x=e(87593),n=e(37636),p=e(14650),W=e(39265),ne=e(69610),ae=e(54941),E=function(){function j(){(0,ne.Z)(this,j)}return(0,ae.Z)(j,null,[{key:"timeStampToTime",value:function(l){var m=new Date(parseInt(l));return m.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",u=l||new Date,b,N={"Y+":u.getFullYear().toString(),"m+":this.twoCompletion(u.getMonth()+1),"d+":this.twoCompletion(u.getDate()),"H+":this.twoCompletion(u.getHours()),"M+":this.twoCompletion(u.getMinutes()),"S+":this.twoCompletion(u.getSeconds())},M="";return Object.keys(N).forEach(function(Z){b=new RegExp("("+Z+")").exec(m),b&&(M=m.replace(b[1],b[1].length===1?N[Z]:N[Z].padStart(b[1].length,"0")))}),M}},{key:"uuid",value:function(){for(var l=[],m="0123456789abcdef",u=0;u<36;u++)l[u]=m.substr(Math.floor(Math.random()*16),1);return l[14]="4",l[19]=m.substr(l[19]&3|8,1),l[8]=l[13]=l[18]=l[23]="-",l.join("").replace(new RegExp(/(-)/g),"")}}]),j}();E.arrayDeDuplication=function(j){return Array.from(new Set(j))},E.twoCompletion=function(j){return j.toString().padStart(2,"0")};var t=e(85893),re=[{title:"\u64CD\u4F5C\u6570\u636E",dataIndex:"function",align:"center",fixed:"left",ellipsis:!0},{title:"IP",dataIndex:"peer",align:"center"},{title:"\u7528\u6237",dataIndex:"dbUserName",align:"center"},{title:"\u6570\u636E\u5E93\u5B9E\u4F8B",dataIndex:"dbInstance",align:"center"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"dbType",align:"center"},{title:"SQL\u8BED\u53E5",dataIndex:"dbStatement",align:"center"}],se=function(d){var l=function(){return d.body.length===1?d.body[0].segments.filter(function(C){return C.peer}):d.body[0].segments},m=(0,h.useState)(0),u=(0,g.Z)(m,2),b=u[0],N=u[1],M=(0,h.useState)(l().map(function(v){return v.id=E.uuid(),v})),Z=(0,g.Z)(M,2),B=Z[0],G=Z[1],Q=function(C,$){N($),G(C.map(function(R){return R.id=E.uuid(),R}))};return(0,t.jsx)("div",{className:d.style["detail-table"],children:(0,t.jsxs)(W.ZP,{split:"vertical",children:[d.body.length>1&&(0,t.jsx)(W.ZP,{colSpan:"30%",children:(0,t.jsx)(n.Z,{children:d.body.map(function(v,C){return(0,t.jsx)(n.Z.Item,{color:v.segments.length>1?"#00CCFF":"green",className:"pointer pb-10",children:(0,t.jsx)("div",{onClick:function(){Q(v.segments,C)},children:(0,t.jsx)("p",{className:b===C?d.style["is-active"]:"",children:v.url})})},E.uuid())})})}),(0,t.jsx)(W.ZP,{headerBordered:!0,children:B.length>0?(0,t.jsx)(p.ZP,{columns:re,options:!1,size:"small",dataSource:B,rowKey:"id",search:!1,pagination:!1}):(0,t.jsx)(f.Z,{description:"\u6682\u65E0\u64CD\u4F5C\u6570\u636E"})})]})})},le=se,ie=e(6251),ue=e.n(ie),oe=e(82277),L=e.n(oe),ce=[],de=function(){var d=(0,h.useState)([]),l=(0,g.Z)(d,2),m=l[0],u=l[1],b=(0,h.useState)(ce),N=(0,g.Z)(b,2),M=N[0],Z=N[1],B=(0,h.useState)([]),G=(0,g.Z)(B,2),Q=G[0],v=G[1],C=(0,h.useRef)(),$=(0,h.useState)({pageNo:1,pageSize:20,total:0}),R=(0,g.Z)($,2),J=R[0],pe=R[1],K=function(r){var o=r;r&&r.times&&(r.startTime=r.times[0],r.endTime=r.times[1],delete r.times,o=(0,H.Z)({},r)),(0,s.z2)(Object.assign(o)).then(function(y){var w=y.data,V=JSON.parse(w);pe(function(){return{pageSize:o.pageSize,pageNo:o.pageNo,total:V.total}});var q=JSON.parse(V.rows);V.rows&&(Array.isArray(q)?u(q):u([q]))})};return(0,h.useEffect)(function(){(0,s.Y8)().then(function(c){var r=c.data,o=JSON.parse(r).filter(function(y){return y});Z(function(y){return y.concat(o)})}),(0,s.IY)().then(function(c){var r=c.data,o=JSON.parse(r).filter(function(y){return y});v(function(y){return y.concat(o)})}),K(J)},[]),(0,t.jsxs)("div",{className:L().link,children:[(0,t.jsxs)("div",{className:L()["link__form-wrap"],children:[(0,t.jsx)(O.Z,{orientation:"left",plain:!0,children:(0,t.jsx)(z.Z,{})}),(0,t.jsxs)(S.A,{layout:"inline",formRef:C,size:"small",onFinish:function(){var c=(0,U.Z)(A().mark(function r(o){return A().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:K(o);case 1:case"end":return w.stop()}},r)}));return function(r){return c.apply(this,arguments)}}(),submitter:{render:function(){return[(0,t.jsx)(_.Z,{type:"primary",htmlType:"submit",icon:(0,t.jsx)(z.Z,{}),className:"br-5 w-80 fs-12",children:"\u67E5\u8BE2"},"edit"),(0,t.jsx)(_.Z,{htmlType:"button",icon:(0,t.jsx)(Y.Z,{}),className:"br-5 w-80 fs-12",onClick:function(){var o;(o=C.current)===null||o===void 0||o.resetFields(),K(J)},children:"\u91CD\u7F6E"},"reset")]}},children:[(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(k.Z,{options:M,placeholder:"\u7528\u6237\u540D",name:"applicationUserName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(k.Z,{options:Q,width:"sm",placeholder:"\u6570\u636E\u5E93\u8868\u540D",name:"msTableName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(k.Z,{options:a,placeholder:"\u64CD\u4F5C\u7C7B\u578B",name:"dbType"},"value")}),(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(I.Z,{width:"md",fieldProps:{placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],bordered:!1},name:"times"})})]})]}),m.length>0?(0,t.jsxs)("div",{className:L().link__content,children:[m.map(function(c){return(0,t.jsx)(W.ZP,{collapsibleIconRender:function(){return(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"primary-blue-5 m-0",children:c.header.userName}),(0,t.jsxs)("div",{className:"fs-12",children:[(0,t.jsxs)("span",{className:"mr-20",children:[(0,t.jsx)("span",{className:"in-l",children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),(0,t.jsx)("span",{children:c.header.requestStartTime})]}),(0,t.jsxs)("span",{className:"mt-20",children:[(0,t.jsx)("span",{className:"in-l",children:"URL\uFF1A"}),(0,t.jsx)("span",{children:c.header.url})]})]})]})},className:"link__item-card",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,t.jsx)(le,{body:c.body,style:L()})},E.uuid())}),(0,t.jsx)("div",{className:L().pages,children:(0,t.jsx)(i.Z,{total:J.total,size:"small",onChange:function(r,o){K({pageNo:r,pageSize:o,total:J.total})},defaultPageSize:20,defaultCurrent:1})})]}):(0,t.jsx)(f.Z,{style:{textAlign:"center",fontSize:"18px",color:"#C0C4CC",marginTop:"100px"},imageStyle:{width:"400px",height:"400px",margin:"0 auto"},image:ue()})]})},me=de},54154:function(F,P,e){"use strict";e.d(P,{Y8:function(){return _},IY:function(){return te},z2:function(){return H},m8:function(){return X},LX:function(){return h},gY:function(){return k},CX:function(){return z}});var T=e(11849),f=e(3182),ee=e(94043),i=e.n(ee),D=e(25377);function _(a){return U.apply(this,arguments)}function U(){return U=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,D.WY)("/api/skyflying/getAllUserName",(0,T.Z)({method:"GET"},s||{})));case 1:case"end":return n.stop()}},a)})),U.apply(this,arguments)}function te(a){return O.apply(this,arguments)}function O(){return O=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,D.WY)("/api/skyflying/getAllMsTableName",(0,T.Z)({method:"GET"},s||{})));case 1:case"end":return n.stop()}},a)})),O.apply(this,arguments)}function H(a,s){return g.apply(this,arguments)}function g(){return g=(0,f.Z)(i().mark(function a(s,x){return i().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,D.WY)("/api/skyflying/getAllSegments",(0,T.Z)({method:"GET",timeout:6e4,headers:{"Content-Type":"application/json"},params:s},x||{})));case 1:case"end":return p.stop()}},a)})),g.apply(this,arguments)}function X(a){return A.apply(this,arguments)}function A(){return A=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,D.WY)("/api/skyflying/getAllUserNameFromDMS",(0,T.Z)({timeout:6e4},s||{})));case 1:case"end":return n.stop()}},a)})),A.apply(this,arguments)}function h(a){return S.apply(this,arguments)}function S(){return S=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,D.WY)("/api/skyflying/getAllSqlTypeFromDMS",(0,T.Z)({timeout:6e4},s||{})));case 1:case"end":return n.stop()}},a)})),S.apply(this,arguments)}function k(a){return I.apply(this,arguments)}function I(){return I=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,D.WY)("/api/skyflying/getAllTableNameFromDMS",(0,T.Z)({timeout:6e4},s||{})));case 1:case"end":return n.stop()}},a)})),I.apply(this,arguments)}function z(a,s){return Y.apply(this,arguments)}function Y(){return Y=(0,f.Z)(i().mark(function a(s,x){return i().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,D.WY)("/api/skyflying/getDmsAuditLogFromDb",(0,T.Z)({method:"GET",timeout:6e4,params:s},x||{})));case 1:case"end":return p.stop()}},a)})),Y.apply(this,arguments)}},6251:function(F,P,e){F.exports=e.p+"static/empty.a9f51423.png"}}]);
