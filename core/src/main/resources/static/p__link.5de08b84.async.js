(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[72],{82277:function(P){P.exports={"link__form-wrap":"link__form-wrap___4fdvJ",link__content:"link__content___oPe_t",pages:"pages___3NUwO","link__item-card":"link__item-card___y2kSX",link:"link___s0XZS","detail-table":"detail-table___2NvnS","ant-table-tbody":"ant-table-tbody___2xnJD","is-active":"is-active___3dJbi"}},48385:function(P,O,e){"use strict";e.r(O),e.d(O,{default:function(){return pe}});var j=e(13254),v=e(14277),ee=e(14781),i=e(23492),C=e(57663),_=e(71577),k=e(11849),X=e(3182),z=e(48736),Q=e(27049),g=e(2824),V=e(94043),M=e.n(V),f=e(67294),S=e(5894),I=e(64317),Y=e(78844),W=e(76570),L=e(25592),r=["select","insert","update","delete"],s=e(54154),b=e(87593),n=e(37636),h=e(14650),B=e(39265),ae=e(69610),re=e(54941),U=function(){function T(){(0,ae.Z)(this,T)}return(0,re.Z)(T,null,[{key:"timeStampToTime",value:function(l){var m=new Date(parseInt(l));return m.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",u=l||new Date,x,D={"Y+":u.getFullYear().toString(),"m+":this.twoCompletion(u.getMonth()+1),"d+":this.twoCompletion(u.getDate()),"H+":this.twoCompletion(u.getHours()),"M+":this.twoCompletion(u.getMinutes()),"S+":this.twoCompletion(u.getSeconds())},F="";return Object.keys(D).forEach(function(Z){x=new RegExp("("+Z+")").exec(m),x&&(F=m.replace(x[1],x[1].length===1?D[Z]:D[Z].padStart(x[1].length,"0")))}),F}},{key:"uuid",value:function(){for(var l=[],m="0123456789abcdef",u=0;u<36;u++)l[u]=m.substr(Math.floor(Math.random()*16),1);return l[14]="4",l[19]=m.substr(l[19]&3|8,1),l[8]=l[13]=l[18]=l[23]="-",l.join("").replace(new RegExp(/(-)/g),"")}}]),T}();U.arrayDeDuplication=function(T){return Array.from(new Set(T))},U.twoCompletion=function(T){return T.toString().padStart(2,"0")};var t=e(85893),se=[{title:"\u64CD\u4F5C\u6570\u636E",dataIndex:"function",align:"center",fixed:"left",ellipsis:!0},{title:"IP",dataIndex:"peer",align:"center"},{title:"\u6570\u636E\u5E93\u8D26\u53F7",dataIndex:"dbUserName",align:"center"},{title:"\u6570\u636E\u5E93\u5B9E\u4F8B",dataIndex:"dbInstance",align:"center"},{title:"\u6570\u636E\u5E93\u8868\u540D",dataIndex:"dbTableName",align:"center"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"dbType",align:"center"},{title:"SQL\u8BED\u53E5",dataIndex:"dbStatement",align:"center"}],le=function(c){var l=function(){return c.body.length===1?c.body[0].segments.filter(function(N){return N.peer}):c.body[0].segments},m=(0,f.useState)(0),u=(0,g.Z)(m,2),x=u[0],D=u[1],F=(0,f.useState)(l().map(function(y){return y.id=U.uuid(),y})),Z=(0,g.Z)(F,2),G=Z[0],$=Z[1],q=function(N,J){D(J),$(N.map(function(w){return w.id=U.uuid(),w}))};return(0,t.jsx)("div",{className:c.style["detail-table"],children:(0,t.jsxs)(B.ZP,{split:"vertical",children:[c.body.length>1&&(0,t.jsx)(B.ZP,{colSpan:"30%",children:(0,t.jsx)(n.Z,{children:c.body.map(function(y,N){return(0,t.jsx)(n.Z.Item,{color:y.segments.length>1?"#00CCFF":"green",className:"pointer pb-10",children:(0,t.jsx)("div",{onClick:function(){q(y.segments,N)},children:(0,t.jsx)("p",{className:x===N?c.style["is-active"]:"",children:y.url})})},U.uuid())})})}),(0,t.jsx)(B.ZP,{headerBordered:!0,children:G.length>0?(0,t.jsx)(h.ZP,{columns:se,options:!1,size:"small",dataSource:G,rowKey:"id",search:!1,pagination:!1}):(0,t.jsx)(v.Z,{description:"\u6682\u65E0\u64CD\u4F5C\u6570\u636E"})})]})})},ie=le,ue=e(6251),oe=e.n(ue),de=e(82277),R=e.n(de),ce=[],me=function(){var c=(0,f.useState)([]),l=(0,g.Z)(c,2),m=l[0],u=l[1],x=(0,f.useState)(ce),D=(0,g.Z)(x,2),F=D[0],Z=D[1],G=(0,f.useState)([]),$=(0,g.Z)(G,2),q=$[0],y=$[1],N=(0,f.useRef)(),J=(0,f.useState)(0),w=(0,g.Z)(J,2),ge=w[0],fe=w[1],he=(0,f.useState)({pageNo:1,pageSize:20}),te=(0,g.Z)(he,2),A=te[0],ve=te[1],K=function(p){(0,s.z2)(Object.assign(p)).then(function(a){var d=a.data,H=JSON.parse(d);fe(H.total);var E=JSON.parse(H.rows);H.rows&&(console.log(E),Array.isArray(E)?u(E):u([E]))})};return(0,f.useEffect)(function(){(0,s.Y8)().then(function(o){var p=o.data,a=JSON.parse(p).filter(function(d){return d});Z(function(d){return d.concat(a)})}),(0,s.IY)().then(function(o){var p=o.data,a=JSON.parse(p).filter(function(d){return d});y(function(d){return d.concat(a)})}),K(A)},[]),(0,t.jsxs)("div",{className:R().link,children:[(0,t.jsxs)("div",{className:R()["link__form-wrap"],children:[(0,t.jsx)(Q.Z,{orientation:"left",plain:!0,children:(0,t.jsx)(W.Z,{})}),(0,t.jsxs)(S.A,{layout:"inline",formRef:N,size:"small",onFinish:function(){var o=(0,X.Z)(M().mark(function p(a){var d;return M().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:d=a,Object.keys(a).length>0&&(a.times&&(a.startTime=a.times[0],a.endTime=a.times[1],delete a.times,d=(0,k.Z)({},a)),ve(function(ne){return{pageNo:ne.pageNo,pageSize:ne.pageSize,applicationUserName:a.applicationUserName,dbType:a.dbType,msTableName:a.msTableName}})),K(d);case 3:case"end":return E.stop()}},p)}));return function(p){return o.apply(this,arguments)}}(),submitter:{render:function(){return[(0,t.jsx)(_.Z,{type:"primary",htmlType:"submit",icon:(0,t.jsx)(W.Z,{}),className:"br-5 w-80 fs-12",children:"\u67E5\u8BE2"},"edit"),(0,t.jsx)(_.Z,{htmlType:"button",icon:(0,t.jsx)(L.Z,{}),className:"br-5 w-80 fs-12",onClick:function(){var a;(a=N.current)===null||a===void 0||a.resetFields(),K({pageSize:A.pageSize,pageNo:A.pageNo})},children:"\u91CD\u7F6E"},"reset")]}},children:[(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(I.Z,{options:F,placeholder:"\u7528\u6237\u540D",name:"applicationUserName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(I.Z,{options:q,width:"sm",placeholder:"\u6570\u636E\u5E93\u8868\u540D",name:"msTableName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(I.Z,{options:r,placeholder:"\u64CD\u4F5C\u7C7B\u578B",name:"dbType"},"value")}),(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(Y.Z,{width:"md",fieldProps:{placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],bordered:!1},name:"times"})})]})]}),m.length>0?(0,t.jsxs)("div",{className:R().link__content,children:[m.map(function(o){return(0,t.jsx)(B.ZP,{collapsibleIconRender:function(){return(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"primary-blue-5 m-0",children:o.header.userName}),(0,t.jsxs)("div",{className:"fs-12",children:[(0,t.jsxs)("span",{className:"mr-20",children:[(0,t.jsx)("span",{className:"in-l",children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),(0,t.jsx)("span",{children:o.header.requestStartTime})]}),(0,t.jsxs)("span",{className:"mt-20",children:[(0,t.jsx)("span",{className:"in-l",children:"URL\uFF1A"}),(0,t.jsx)("span",{children:o.header.url})]})]})]})},className:"link__item-card",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,t.jsx)(ie,{body:o.body,style:R()})},U.uuid())}),(0,t.jsx)("div",{className:R().pages,children:(0,t.jsx)(i.Z,{total:ge,size:"small",onChange:function(p,a){K({pageNo:p,pageSize:a,applicationUserName:A.applicationUserName,msTableName:A.msTableName,dbType:A.dbType,startTime:A.startTime,endTime:A.endTime})},defaultPageSize:20,defaultCurrent:1})})]}):(0,t.jsx)(v.Z,{style:{textAlign:"center",fontSize:"18px",color:"#C0C4CC",marginTop:"100px"},imageStyle:{width:"400px",height:"400px",margin:"0 auto"},image:oe()})]})},pe=me},54154:function(P,O,e){"use strict";e.d(O,{Y8:function(){return _},IY:function(){return X},z2:function(){return Q},m8:function(){return V},LX:function(){return f},gY:function(){return I},CX:function(){return W}});var j=e(11849),v=e(3182),ee=e(94043),i=e.n(ee),C=e(25377);function _(r){return k.apply(this,arguments)}function k(){return k=(0,v.Z)(i().mark(function r(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllUserName",(0,j.Z)({method:"GET"},s||{})));case 1:case"end":return n.stop()}},r)})),k.apply(this,arguments)}function X(r){return z.apply(this,arguments)}function z(){return z=(0,v.Z)(i().mark(function r(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllMsTableName",(0,j.Z)({method:"GET"},s||{})));case 1:case"end":return n.stop()}},r)})),z.apply(this,arguments)}function Q(r,s){return g.apply(this,arguments)}function g(){return g=(0,v.Z)(i().mark(function r(s,b){return i().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,C.WY)("/api/skyflying/getAllSegments",(0,j.Z)({method:"GET",timeout:6e4,headers:{"Content-Type":"application/json"},params:s},b||{})));case 1:case"end":return h.stop()}},r)})),g.apply(this,arguments)}function V(r){return M.apply(this,arguments)}function M(){return M=(0,v.Z)(i().mark(function r(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllUserNameFromDMS",(0,j.Z)({timeout:6e4},s||{})));case 1:case"end":return n.stop()}},r)})),M.apply(this,arguments)}function f(r){return S.apply(this,arguments)}function S(){return S=(0,v.Z)(i().mark(function r(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllSqlTypeFromDMS",(0,j.Z)({timeout:6e4},s||{})));case 1:case"end":return n.stop()}},r)})),S.apply(this,arguments)}function I(r){return Y.apply(this,arguments)}function Y(){return Y=(0,v.Z)(i().mark(function r(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllTableNameFromDMS",(0,j.Z)({timeout:6e4},s||{})));case 1:case"end":return n.stop()}},r)})),Y.apply(this,arguments)}function W(r,s){return L.apply(this,arguments)}function L(){return L=(0,v.Z)(i().mark(function r(s,b){return i().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,C.WY)("/api/skyflying/getDmsAuditLogFromDb",(0,j.Z)({method:"GET",timeout:6e4,params:s},b||{})));case 1:case"end":return h.stop()}},r)})),L.apply(this,arguments)}},6251:function(P,O,e){P.exports=e.p+"static/empty.a9f51423.png"}}]);
