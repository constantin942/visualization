(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[72],{82277:function(b){b.exports={"link__form-wrap":"link__form-wrap___4fdvJ","link__item-card":"link__item-card___y2kSX",link:"link___s0XZS","detail-table":"detail-table___2NvnS","ant-table-tbody":"ant-table-tbody___2xnJD","is-active":"is-active___3dJbi"}},80666:function(b,U,t){"use strict";t.r(U),t.d(U,{default:function(){return de}});var ce=t(13254),J=t(14277),me=t(57663),k=t(71577),Z=t(3182),fe=t(48736),H=t(27049),N=t(11849),y=t(2824),$=t(94043),c=t.n($),v=t(67294),S=t(5894),E=t(64317),B=t(78844),L=t(76570),W=t(25592),X=["select","insert","update","delete"],O=t(25377);function K(l){return P.apply(this,arguments)}function P(){return P=(0,Z.Z)(c().mark(function l(s){return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,O.WY)("/api/skyflying/getAllUserName",(0,N.Z)({method:"GET"},s||{})));case 1:case"end":return a.stop()}},l)})),P.apply(this,arguments)}function Q(l){return M.apply(this,arguments)}function M(){return M=(0,Z.Z)(c().mark(function l(s){return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,O.WY)("/api/skyflying/getAllMsTableName",(0,N.Z)({method:"GET"},s||{})));case 1:case"end":return a.stop()}},l)})),M.apply(this,arguments)}function V(l,s){return R.apply(this,arguments)}function R(){return R=(0,Z.Z)(c().mark(function l(s,n){return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,O.WY)("/api/skyflying/getAllSegments",(0,N.Z)({method:"GET",timeout:6e4,headers:{"Content-Type":"application/json"},params:s},n||{})));case 1:case"end":return r.stop()}},l)})),R.apply(this,arguments)}var he=t(87593),w=t(37636),pe=t(54029),q=t(79166),_=t(24384),C=t(57895),ee=t(69610),te=t(54941),A=function(){function l(){(0,ee.Z)(this,l)}return(0,te.Z)(l,null,[{key:"timeStampToTime",value:function(n){var a=new Date(parseInt(n));return a.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",r=n||new Date,d,m={"Y+":r.getFullYear().toString(),"m+":this.twoCompletion(r.getMonth()+1),"d+":this.twoCompletion(r.getDate()),"H+":this.twoCompletion(r.getHours()),"M+":this.twoCompletion(r.getMinutes()),"S+":this.twoCompletion(r.getSeconds())},x="";return Object.keys(m).forEach(function(f){d=new RegExp("("+f+")").exec(a),d&&(x=a.replace(d[1],d[1].length===1?m[f]:m[f].padStart(d[1].length,"0")))}),x}},{key:"uuid",value:function(){for(var n=[],a="0123456789abcdef",r=0;r<36;r++)n[r]=a.substring(Math.floor(Math.random()*16),1);return n[14]="4",n[19]=a.substring(n[19]&3|8,1),n[8]=n[13]=n[18]=n[23]="-",n.join("")}}]),l}();A.arrayDeDuplication=function(l){return Array.from(new Set(l))},A.twoCompletion=function(l){return l.toString().padStart(2,"0")};var e=t(85893),ne=[{title:"peer",dataIndex:"peer",align:"center",fixed:"left",render:function(s,n){return(0,e.jsx)(q.Z,{status:"processing",text:n.peer})}},{title:"dbUserName",dataIndex:"dbUserName",align:"center"},{title:"dbInstance",dataIndex:"dbInstance",align:"center"},{title:"dbType",dataIndex:"dbType",align:"center"},{title:"dbStatement",dataIndex:"dbStatement",align:"center",width:300,fixed:"right",ellipsis:!0}],ae=function(s){var n=function(){return s.body.length===1?s.body[0].segments.filter(function(h){return h.peer}):s.body[0].segments},a=(0,v.useState)(0),r=(0,y.Z)(a,2),d=r[0],m=r[1],x=(0,v.useState)(n()),f=(0,y.Z)(x,2),D=f[0],F=f[1],G=function(h,j){m(j),F(h)};return(0,e.jsx)("div",{className:s.style["detail-table"],children:(0,e.jsxs)(C.ZP,{split:"vertical",children:[s.body.length>1&&(0,e.jsx)(C.ZP,{colSpan:"30%",children:(0,e.jsx)(w.Z,{children:s.body.map(function(g,h){return(0,e.jsx)(w.Z.Item,{color:g.segments.length>1?"#00CCFF":"green",className:"pointer pb-10",children:(0,e.jsx)("div",{onClick:function(){G(g.segments,h)},children:(0,e.jsx)("p",{className:d===h?s.style["is-active"]:"",children:g.url})})},A.uuid())})})}),(0,e.jsx)(C.ZP,{headerBordered:!0,children:D.length>0?(0,e.jsx)(_.ZP,{columns:ne,options:!1,size:"small",dataSource:D,rowKey:"dbStatement",search:!1,pagination:!1}):(0,e.jsx)(J.Z,{description:"\u6682\u65E0\u64CD\u4F5C\u6570\u636E"})})]})})},re=ae,se=t(6251),le=t.n(se),ie=t(82277),Y=t.n(ie),oe=[],ue=function(){var s=(0,v.useState)([]),n=(0,y.Z)(s,2),a=n[0],r=n[1],d=(0,v.useState)(oe),m=(0,y.Z)(d,2),x=m[0],f=m[1],D=(0,v.useState)([]),F=(0,y.Z)(D,2),G=F[0],g=F[1],h=(0,v.useRef)(),j=function(i){var p=i;i&&i.times&&(i.startTime=i.times[0],i.endTime=i.times[1],delete i.times,p=(0,N.Z)({},i)),V(p).then(function(u){var T=u.data,z=JSON.parse(T),I=JSON.parse(z.rows);z.rows&&(Array.isArray(I)?r(I):r([I])),console.log([I])})};return(0,v.useEffect)(function(){K().then(function(o){var i=o.data,p=JSON.parse(i).filter(function(u){return u});f(function(u){return u.concat(p)})}),Q().then(function(o){var i=o.data,p=JSON.parse(i).filter(function(u){return u});g(function(u){return u.concat(p)})}),j(void 0)},[]),(0,e.jsxs)("div",{className:Y().link,children:[(0,e.jsxs)("div",{className:Y()["link__form-wrap"],children:[(0,e.jsx)(H.Z,{orientation:"left",plain:!0,children:(0,e.jsx)(L.Z,{})}),(0,e.jsxs)(S.A,{layout:"inline",formRef:h,size:"small",onFinish:function(){var o=(0,Z.Z)(c().mark(function i(p){return c().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:j(p);case 1:case"end":return T.stop()}},i)}));return function(i){return o.apply(this,arguments)}}(),submitter:{render:function(){return[(0,e.jsx)(k.Z,{type:"primary",htmlType:"submit",icon:(0,e.jsx)(L.Z,{}),className:"br-5 w-80 fs-12",children:"\u67E5\u8BE2"},"edit"),(0,e.jsx)(k.Z,{type:"ghost",htmlType:"button",icon:(0,e.jsx)(W.Z,{}),className:"br-5 w-80 fs-12",children:"\u91CD\u7F6E"},"reset")]}},children:[(0,e.jsx)(S.A.Group,{children:(0,e.jsx)(E.Z,{options:x,placeholder:"userName",name:"applicationUserName",filedConfig:{},fieldProps:{}},"value")}),(0,e.jsx)(S.A.Group,{children:(0,e.jsx)(E.Z,{options:G,width:"sm",placeholder:"tableName",name:"msTableName",filedConfig:{},fieldProps:{}},"value")}),(0,e.jsx)(S.A.Group,{children:(0,e.jsx)(E.Z,{options:X,placeholder:"dbType",name:"dbType"},"value")}),(0,e.jsx)(S.A.Group,{children:(0,e.jsx)(B.Z,{width:"md",fieldProps:{placeholder:["startTime","endTime"],bordered:!1},name:"times"})})]})]}),a.length>0?a.map(function(o){return(0,e.jsx)(C.ZP,{collapsibleIconRender:function(){return(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"primary-blue-5 m-0",children:o.header.userName}),(0,e.jsxs)("div",{className:"fs-12",children:[(0,e.jsxs)("span",{className:"mr-20",children:[(0,e.jsx)("span",{className:"in-l",children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),(0,e.jsx)("span",{children:o.header.requestStartTime})]}),(0,e.jsxs)("span",{className:"mt-20",children:[(0,e.jsx)("span",{className:"in-l",children:"URL\uFF1A"}),(0,e.jsx)("span",{children:o.header.url})]})]})]})},className:"link__item-card",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,e.jsx)(re,{body:o.body,style:Y()})},A.uuid())}):(0,e.jsx)(J.Z,{style:{textAlign:"center",fontSize:"18px",color:"#C0C4CC",marginTop:"100px"},imageStyle:{width:"400px",height:"400px",margin:"0 auto"},image:le()})]})},de=ue},6251:function(b,U,t){b.exports=t.p+"static/empty.a9f51423.png"}}]);
