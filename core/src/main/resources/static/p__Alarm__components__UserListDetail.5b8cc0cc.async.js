(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[126],{37174:function(se){se.exports={alarm:"alarm___12xQi",salesRank:"salesRank___-5oIk",rankingList:"rankingList___rxbMU",rankingItemNumber:"rankingItemNumber___3eh0u",active:"active___3KjTZ",rankingItemTitle:"rankingItemTitle___3gCS2","alarm-data":"alarm-data___17B2L",alarmDetail:"alarmDetail___9Lz5b"}},52953:function(){},26723:function(se,te,e){"use strict";e.r(te),e.d(te,{default:function(){return Me}});var X=e(20228),H=e(11382),de=e(66456),T=e(78587),Q=e(3182),me=e(57663),q=e(71577),z=e(11849),v=e(2824),re=e(94043),Y=e.n(re),t=e(67294),_=e(37174),x=e.n(_),Z=e(48606),J=e(71194),E=e(50146),L=e(88983),Ce=e(47933),He=e(62350),xe=e(75443),Qe=e(77576),Ze=e(12028),Ye=e(17462),Ee=e(76772),Je=e(38663),ke=e(52953),k=e(96156),De=e(28481),ve=e(90484),be=e(94184),ee=e.n(be),Ne=e(50344),ne=e(24308),Ie=e(21687),je=e(65632),D=e(22122);function ae(a){return a!=null}var Re=function(n){var s=n.itemPrefixCls,r=n.component,l=n.span,i=n.className,o=n.style,f=n.labelStyle,g=n.contentStyle,S=n.bordered,m=n.label,h=n.content,O=n.colon,p=r;if(S){var d;return t.createElement(p,{className:ee()((d={},(0,k.Z)(d,"".concat(s,"-item-label"),ae(m)),(0,k.Z)(d,"".concat(s,"-item-content"),ae(h)),d),i),style:o,colSpan:l},ae(m)&&t.createElement("span",{style:f},m),ae(h)&&t.createElement("span",{style:g},h))}return t.createElement(p,{className:ee()("".concat(s,"-item"),i),style:o,colSpan:l},t.createElement("div",{className:"".concat(s,"-item-container")},(m||m===0)&&t.createElement("span",{className:ee()("".concat(s,"-item-label"),(0,k.Z)({},"".concat(s,"-item-no-colon"),!O)),style:f},m),(h||h===0)&&t.createElement("span",{className:ee()("".concat(s,"-item-content")),style:g},h)))},oe=Re;function ie(a,n,s){var r=n.colon,l=n.prefixCls,i=n.bordered,o=s.component,f=s.type,g=s.showLabel,S=s.showContent,m=s.labelStyle,h=s.contentStyle;return a.map(function(O,p){var d=O.props,R=d.label,V=d.children,N=d.prefixCls,M=N===void 0?l:N,A=d.className,u=d.style,K=d.labelStyle,W=d.contentStyle,U=d.span,I=U===void 0?1:U,F=O.key;return typeof o=="string"?t.createElement(oe,{key:"".concat(f,"-").concat(F||p),className:A,style:u,labelStyle:(0,D.Z)((0,D.Z)({},m),K),contentStyle:(0,D.Z)((0,D.Z)({},h),W),span:I,colon:r,component:o,itemPrefixCls:M,bordered:i,label:g?R:null,content:S?V:null}):[t.createElement(oe,{key:"label-".concat(F||p),className:A,style:(0,D.Z)((0,D.Z)((0,D.Z)({},m),u),K),span:1,colon:r,component:o[0],itemPrefixCls:M,bordered:i,label:R}),t.createElement(oe,{key:"content-".concat(F||p),className:A,style:(0,D.Z)((0,D.Z)((0,D.Z)({},h),u),W),span:I*2-1,component:o[1],itemPrefixCls:M,bordered:i,content:V})]})}var Ae=function(n){var s=t.useContext(fe),r=n.prefixCls,l=n.vertical,i=n.row,o=n.index,f=n.bordered;return l?t.createElement(t.Fragment,null,t.createElement("tr",{key:"label-".concat(o),className:"".concat(r,"-row")},ie(i,n,(0,D.Z)({component:"th",type:"label",showLabel:!0},s))),t.createElement("tr",{key:"content-".concat(o),className:"".concat(r,"-row")},ie(i,n,(0,D.Z)({component:"td",type:"content",showContent:!0},s)))):t.createElement("tr",{key:o,className:"".concat(r,"-row")},ie(i,n,(0,D.Z)({component:f?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},s)))},Fe=Ae,Pe=function(n){var s=n.children;return s},Te=Pe,Le=e(96159),fe=t.createContext({}),he={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function Oe(a,n){if(typeof a=="number")return a;if((0,ve.Z)(a)==="object")for(var s=0;s<ne.c4.length;s++){var r=ne.c4[s];if(n[r]&&a[r]!==void 0)return a[r]||he[r]}return 3}function pe(a,n,s){var r=a;return(n===void 0||n>s)&&(r=(0,Le.Tm)(a,{span:s}),(0,Ie.Z)(n===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),r}function Ue(a,n){var s=(0,Ne.Z)(a).filter(function(o){return o}),r=[],l=[],i=n;return s.forEach(function(o,f){var g,S=(g=o.props)===null||g===void 0?void 0:g.span,m=S||1;if(f===s.length-1){l.push(pe(o,S,i)),r.push(l);return}m<i?(i-=m,l.push(o)):(l.push(pe(o,m,i)),r.push(l),i=n,l=[])}),r}function ye(a){var n,s=a.prefixCls,r=a.title,l=a.extra,i=a.column,o=i===void 0?he:i,f=a.colon,g=f===void 0?!0:f,S=a.bordered,m=a.layout,h=a.children,O=a.className,p=a.style,d=a.size,R=a.labelStyle,V=a.contentStyle,N=t.useContext(je.E_),M=N.getPrefixCls,A=N.direction,u=M("descriptions",s),K=t.useState({}),W=(0,De.Z)(K,2),U=W[0],I=W[1],F=Oe(o,U);t.useEffect(function(){var P=ne.ZP.subscribe(function(G){(0,ve.Z)(o)==="object"&&I(G)});return function(){ne.ZP.unsubscribe(P)}},[]);var b=Ue(h,F),C=t.useMemo(function(){return{labelStyle:R,contentStyle:V}},[R,V]);return t.createElement(fe.Provider,{value:C},t.createElement("div",{className:ee()(u,(n={},(0,k.Z)(n,"".concat(u,"-").concat(d),d&&d!=="default"),(0,k.Z)(n,"".concat(u,"-bordered"),!!S),(0,k.Z)(n,"".concat(u,"-rtl"),A==="rtl"),n),O),style:p},(r||l)&&t.createElement("div",{className:"".concat(u,"-header")},r&&t.createElement("div",{className:"".concat(u,"-title")},r),l&&t.createElement("div",{className:"".concat(u,"-extra")},l)),t.createElement("div",{className:"".concat(u,"-view")},t.createElement("table",null,t.createElement("tbody",null,b.map(function(P,G){return t.createElement(Fe,{key:G,index:G,colon:g,prefixCls:u,vertical:m==="vertical",bordered:S,row:P})}))))))}ye.Item=Te;var ue=ye,Xe=e(74379),ge=e(38648),c=e(85893);function $e(a,n){var s=(0,t.useState)({}),r=(0,v.Z)(s,2),l=r[0],i=r[1],o=(0,t.useState)(!1),f=(0,v.Z)(o,2),g=f[0],S=f[1],m=(0,t.useState)(!1),h=(0,v.Z)(m,2),O=h[0],p=h[1],d=(0,t.useState)(!1),R=(0,v.Z)(d,2),V=R[0],N=R[1],M=(0,t.useState)([]),A=(0,v.Z)(M,2),u=A[0],K=A[1],W=(0,t.useState)("update"),U=(0,v.Z)(W,2),I=U[0],F=U[1];return(0,t.useImperativeHandle)(n,function(){return{setInitValues:function(C){C.length===1&&i(C[0]),K(C)}}}),(0,c.jsx)(E.Z,{width:600,afterClose:function(){p(!1),S(!1),F("update")},destroyOnClose:!0,title:u.length===1?"".concat(l==null?void 0:l.userName,"\uFF08\u544A\u8B66\u5904\u7F6E\uFF09"):"\u6279\u91CF\u5904\u7F6E".concat(u.length,"\u6761\u544A\u8B66"),visible:a.handleVisible,onCancel:function(){a.setVisible(!1),N(!1),F("update")},onOk:function(){if(g&&(0,Z.QD)([{id:l.id,matchRuleId:l.matchRuleId,originalTime:l.originalTime,userName:l.userName,alarmContent:l.alarmContent,flag:V?"update":"delete"}]).then(function(){a.refresh(),ge.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)}),u.length>1){var C=u.map(function(P){return P.flag=I,P});(0,Z.QD)(C).then(function(){a.refresh(),ge.Z.info({message:"\u63D0\u793A",description:"\u64CD\u4F5C\u6210\u529F!"}),a.setVisible(!1)})}a.setVisible(!1)},children:u.length===1?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ue,{layout:"horizontal",column:2,children:[(0,c.jsx)(ue.Item,{label:"\u8BB0\u5F55\u4EA7\u751F\u65F6\u95F4",children:l==null?void 0:l.originalTime}),(0,c.jsx)(ue.Item,{label:"\u89C4\u5219ID",children:l==null?void 0:l.matchRuleId})]}),(0,c.jsx)(Ee.Z,{message:l==null?void 0:l.alarmContent,className:"text-c",type:"warning"}),(0,c.jsxs)("div",{className:"flex-x-sb mt-20",children:[(0,c.jsx)("div",{}),(0,c.jsx)("div",{children:(0,c.jsx)(xe.Z,{title:"\u662F\u5426\u66F4\u65B0\u753B\u50CF\uFF1F",visible:O,onConfirm:function(){p(!1),N(!0)},onCancel:function(){return p(!1)},okText:"\u66F4\u65B0",cancelText:"\u4E0D\u66F4\u65B0",children:(0,c.jsx)(Ze.Z,{checkedChildren:"\u5FFD\u7565\u544A\u8B66",unCheckedChildren:"\u4E0D\u5904\u7F6E",onChange:function(C){S(C),p(C)}})})})]})]}):(0,c.jsx)("div",{className:"text-c",children:(0,c.jsx)(Ce.ZP.Group,{defaultValue:"update",value:I,options:[{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66",value:"update"},{label:"\u5FFD\u7565\u9009\u4E2D\u7684\u544A\u8B66\u5E76\u66F4\u65B0\u753B\u50CF",value:"delete"}],onChange:function(C){var P=C.target.value;F(P)}})})})}var Be=(0,t.forwardRef)($e),Ve=function(n){var s=(0,t.useState)([]),r=(0,v.Z)(s,2),l=r[0],i=r[1],o=(0,t.useState)(0),f=(0,v.Z)(o,2),g=f[0],S=f[1],m=(0,t.useState)(!1),h=(0,v.Z)(m,2),O=h[0],p=h[1],d=(0,t.useState)(!1),R=(0,v.Z)(d,2),V=R[0],N=R[1],M=(0,t.useState)([]),A=(0,v.Z)(M,2),u=A[0],K=A[1],W=(0,t.useState)({pageNo:1,pageSize:10}),U=(0,v.Z)(W,2),I=U[0],F=U[1],b=(0,t.useRef)(),C=(0,t.useState)({}),P=(0,v.Z)(C,2),G=P[0],We=P[1];function ce(j){(0,Z.cD)(j).then(function(w){var y=w.data;if(p(!0),y){var $=JSON.parse(y);if(S($.total),$){var B=JSON.parse($.rows);i(B.filter(function(Se){return Se.isDelete===0}))}else i([])}p(!1)})}var we=[{title:"\u8BB0\u5F55\u4EA7\u751F\u7684\u65F6\u95F4",dataIndex:"originalTime\uFF1A",key:"originalTime\uFF1A",width:"250px",align:"center",render:function(w,y){return y.originalTime||"-"}},{title:"\u89C4\u5219ID",dataIndex:"matchRuleId\uFF1A",key:"matchRuleId\uFF1A",width:"250px",align:"center",render:function(w,y){return y.matchRuleId||"-"}},{title:"\u544A\u8B66\u5185\u5BB9",dataIndex:"alarmContent",key:"alarmContent",align:"center"},{title:"\u5904\u7F6E",width:"150px",align:"center",render:function(w,y){return[(0,c.jsx)("a",{onClick:function(){var B;N(!0),(B=b.current)===null||B===void 0||B.setInitValues([y])},children:"\u5904\u7F6E"},"handle")]}}],ze=function(w){K(w)},Ke={selectedRowKeys:u,onChange:ze},Ge=u.length>0;return(0,t.useEffect)(function(){var j=n.location.query;We(j),ce((0,z.Z)((0,z.Z)((0,z.Z)({},j),I),{isDelete:0}))},[]),(0,c.jsxs)("div",{className:x().alarmDetail,children:[(0,c.jsx)(H.Z,{spinning:O,children:(0,c.jsx)(T.Z,{rowSelection:Ke,columns:we,dataSource:l,rowKey:"id",title:function(){return(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{children:G.userName}),(0,c.jsx)(q.Z,{type:"primary",disabled:!Ge,size:"middle",onClick:function(){var y,$=l.filter(function(B){return u.includes(B.id)});N(!0),(y=b.current)===null||y===void 0||y.setInitValues($)},children:"\u6279\u91CF\u5904\u7F6E"})]})},size:"middle",pagination:{current:I.pageNo,pageSize:I.pageSize,total:g,onChange:function(){var j=(0,Q.Z)(Y().mark(function y($,B){return Y().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,F(function(){return{pageSize:B,pageNo:$}});case 2:ce((0,z.Z)({pageNo:$,pageSize:B},G));case 3:case"end":return le.stop()}},y)}));function w(y,$){return j.apply(this,arguments)}return w}()}})}),(0,c.jsx)(Be,{refresh:function(){ce((0,z.Z)((0,z.Z)({},I),G))},setVisible:N,handleVisible:V,ref:b})]})},Me=Ve},48606:function(se,te,e){"use strict";e.d(te,{Hp:function(){return me},CI:function(){return z},cD:function(){return re},QD:function(){return t}});var X=e(11849),H=e(3182),de=e(94043),T=e.n(de),Q=e(21704);function me(x){return q.apply(this,arguments)}function q(){return q=(0,H.Z)(T().mark(function x(Z){return T().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,Q.WY)("/api/skyflying/getAlarmData",(0,X.Z)({method:"GET"},Z||{})));case 1:case"end":return E.stop()}},x)})),q.apply(this,arguments)}function z(x){return v.apply(this,arguments)}function v(){return v=(0,H.Z)(T().mark(function x(Z){return T().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,Q.WY)("/api/skyflying/getUserAlarmData",(0,X.Z)({method:"GET"},Z||{})));case 1:case"end":return E.stop()}},x)})),v.apply(this,arguments)}function re(x,Z){return Y.apply(this,arguments)}function Y(){return Y=(0,H.Z)(T().mark(function x(Z,J){return T().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,Q.WY)("/api/skyflying/getAllAlarmInfoDetailByUserName",(0,X.Z)({method:"GET",params:Z||{}},J||{})));case 1:case"end":return L.stop()}},x)})),Y.apply(this,arguments)}function t(x,Z){return _.apply(this,arguments)}function _(){return _=(0,H.Z)(T().mark(function x(Z,J){return T().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,Q.WY)("/api/skyflying/updateAnomalyDetectionInfo",(0,X.Z)({method:"POST",data:Z||{}},J||{})));case 1:case"end":return L.stop()}},x)})),_.apply(this,arguments)}}}]);
