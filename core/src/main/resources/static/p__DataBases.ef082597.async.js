(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[383],{12265:function(b){b.exports={databases:"databases___35H4X","detail-wrap":"detail-wrap___1IA0t","tops-wrap":"tops-wrap___2AQns",tops:"tops___2lHCZ"}},87330:function(b,x,t){"use strict";t.r(x),t.d(x,{default:function(){return F}});var C=t(2824),g=t(67294),D=t(47369),v=t(13062),y=t(71230),n=t(89032),r=t(15746),i=t(54421),s=t(38272),u=t(54029),f=t(79166),j=t(39004),e=t(85893),A=function(l){var d=[{item:"insert",count:32,percent:.32},{item:"delete",count:100,percent:.1},{item:"update",count:10,percent:.1},{item:"select",count:48,percent:.48}];return(0,g.useEffect)(function(){var a=new j.kL({container:"ActionPie".concat(l.id),autoFit:!0,height:250}),o=a.createView();a.coordinate("theta",{radius:.75,innerRadius:.5}),a.data(d),a.tooltip(!1),a.legend("item",{position:"bottom",custom:!0,items:d.map(function(c,m){return{name:c.item,value:c.count,marker:{symbol:"square",style:{r:5,fill:a.getTheme().colors10[m]}}}}),itemValue:{style:{fill:"#999"}}}),a.interval().adjust("stack").position("percent").color("item").style({fillOpacity:1}).state({active:{style:function(m){var p=m.shape;return{lineWidth:10,stroke:p.attr("fill"),strokeOpacity:p.attr("fillOpacity")}}}}),a.removeInteraction("legend-filter"),a.interaction("element-active"),a.render(),a.on("element:statechange",function(c){var m=c.gEvent.originalEvent,p=m.state,V=m.stateStatus,k=m.element;if(p==="active"){var H=k.getData();V?E(H):_()}});var h;function E(c){c.item!==h&&(o.annotation().clear(!0),o.annotation().text({position:["50%","50%"],content:c.item,style:{fontSize:20,fill:"#8c8c8c",textAlign:"center"},offsetY:-20}).text({position:["50%","50%"],content:c.count,style:{fontSize:28,fill:"#8c8c8c",textAlign:"center"},offsetX:-10,offsetY:20}).text({position:["50%","50%"],content:"\u6B21",style:{fontSize:20,fill:"#8c8c8c",textAlign:"center"},offsetY:20,offsetX:20}),o.render(!0),h=c.item)}function _(){o.annotation().clear(!0),o.render(!0),h=null}},[]),(0,e.jsx)("div",{id:"ActionPie"+l.id})},P=A,I=function(l){var d=[{type:"\u4E0A\u5348",value:32},{type:"\u4E0B\u5348",value:10},{type:"\u665A\u4E0A",value:10}];return(0,g.useEffect)(function(){var a=new j.kL({container:"VisibleTimePie"+l.id,autoFit:!0,height:250});a.data(d),a.coordinate("theta",{radius:.75}),a.tooltip({showMarkers:!0}),a.interval().adjust("stack").position("value").color("type",["#063d8a","#1770d6","#47abfc","#38c060"]).style({opacity:.4}).state({active:{style:function(h){var E=h.shape;return{matrix:j.Zr.zoom(E,1.1)}}}}).label("type",function(o){var h=o==="select"?1:.5;return{offset:-30,style:{opacity:h,fill:"white",fontSize:12,shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"},content:function(_){return _.type+`
`+_.value+"%"}}}),a.interaction("element-single-selected"),a.render()},[]),(0,e.jsx)("div",{id:"VisibleTimePie"+l.id})},R=I,S=function(l){var d=[{year:"2022-07-01",value:15468},{year:"2022-07-02",value:16100},{year:"2022-07-03",value:15900},{year:"2022-07-04",value:17409},{year:"2022-07-05",value:17e3},{year:"2022-07-06",value:31056},{year:"2022-07-07",value:31982}];return(0,g.useEffect)(function(){console.log("pie");var a=new j.kL({container:"RecentlyLine".concat(l.id),autoFit:!0,height:200});a.data(d),a.scale({value:{min:1e4,nice:!0},year:{range:[0,1]}}),a.tooltip({showCrosshairs:!0,shared:!0}),a.axis("value",{label:{formatter:function(h){return(+h/1e4).toFixed(1)+"k"}}}),a.area().position("year*value"),a.line().position("year*value"),a.render()},[]),(0,e.jsx)("div",{id:"RecentlyLine"+l.id})},M=S,Z=function(l){var d=[{name:"\u5F20\u4E09",count:8848},{name:"\u674E\u56DB",count:7070},{name:"\u5F20\u4E09",count:8848},{name:"\u674E\u56DB",count:7070},{name:"\u5F20\u4E09",count:8848},{name:"\u674E\u56DB",count:7070},{name:"\u5F20\u4E09",count:8848},{name:"\u674E\u56DB",count:7070}];return(0,e.jsxs)(y.Z,{className:l.style["detail-wrap"],gutter:20,children:[(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsxs)("div",{className:l.style["tops-wrap"],children:[(0,e.jsx)("h4",{className:"text-c bg-w",children:"\u7ECF\u5E38\u8BBF\u95EE\u4EBA\u5458"}),(0,e.jsx)(s.ZP,{size:"small",className:l.style.tops,dataSource:d,renderItem:function(o){return(0,e.jsxs)(s.ZP.Item,{className:"flex-x-sb pl-20",children:[(0,e.jsxs)("span",{children:[o.name," "]}),(0,e.jsx)(f.Z,{style:{backgroundColor:"#52c41a"},overflowCount:999,count:o.count})]})}})]}),(0,e.jsxs)("div",{className:l.style["tops-wrap"],children:[(0,e.jsx)("h4",{className:"text-c bg-w",children:"\u7ECF\u5E38\u8BBF\u95EE\u4EBA\u5458"}),(0,e.jsx)(s.ZP,{size:"small",className:l.style.tops,dataSource:d,renderItem:function(o){return(0,e.jsxs)(s.ZP.Item,{className:"flex-x-sb pl-20",children:[(0,e.jsxs)("span",{children:[o.name," "]}),(0,e.jsx)(f.Z,{style:{backgroundColor:"#52c41a"},overflowCount:999,count:o.count})]})}})]})]}),(0,e.jsxs)(r.Z,{span:16,children:[(0,e.jsxs)(y.Z,{children:[(0,e.jsxs)(r.Z,{span:12,className:"text-c",children:[(0,e.jsx)("h3",{children:"\u64CD\u4F5C\u884C\u4E3A\u5206\u5E03"}),(0,e.jsx)(P,{id:l.id})]}),(0,e.jsxs)(r.Z,{span:12,className:"text-c",children:[(0,e.jsx)("h3",{children:"\u8BBF\u95EE\u65F6\u6BB5\u5206\u5E03"}),(0,e.jsx)(R,{id:l.id})]})]}),(0,e.jsxs)("div",{className:"text-c mt-15 mb-20",children:[(0,e.jsx)("h3",{children:"\u8FD1\u4E03\u5929\u8BBF\u95EE\u6570\u636E\u7EDF\u8BA1"}),(0,e.jsx)(M,{id:l.id})]})]})]})},w=Z,O=t(12265),B=t.n(O),L=t(66572),N=t(24480),U=function(){var l=(0,g.useState)([]),d=(0,C.Z)(l,2),a=d[0],o=d[1],h=[{title:"\u6570\u636E\u5E93\u8868",dataIndex:"tableName",key:"tableName",align:"center"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"visitedCount",key:"visitedCount",align:"center",search:!1},{title:"\u5E38\u8BBF\u95EE\u4EBA\u5458",key:"usualVisitedUser",dataIndex:"usualVisitedUser",align:"center",search:!1},{title:"\u6700\u540E\u8BBF\u95EE\u65F6\u95F4",key:"lastVisitedDate",dataIndex:"lastVisitedDate",valueType:"date",hideInSetting:!0,search:!1,align:"center"}],E=function(){(0,L.m)().then(function(c){var m=c.data;m&&o(m.map(function(p){return p.id=N.Z.uuid(),p}))})};return(0,g.useEffect)(function(){E()},[]),(0,e.jsx)("div",{className:B().databases,children:(0,e.jsx)(D.ZP,{columns:h,rowKey:"key",expandable:{expandedRowRender:function(c,m){return(0,e.jsx)(w,{id:m,style:B()})},expandIcon:function(){return""},expandRowByClick:!0},dataSource:a})})},F=U},66572:function(b,x,t){"use strict";t.d(x,{m:function(){return n}});var C=t(11849),g=t(3182),D=t(94043),v=t.n(D),y=t(21704);function n(i){return r.apply(this,arguments)}function r(){return r=(0,g.Z)(v().mark(function i(s){return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,y.WY)("/api/skyflying/getCoarseCountsOfTableName",(0,C.Z)({method:"GET"},s||{})));case 1:case"end":return f.stop()}},i)})),r.apply(this,arguments)}},24480:function(b,x,t){"use strict";t.d(x,{Z:function(){return D}});var C=t(69610),g=t(54941),D=function(){function v(){(0,C.Z)(this,v)}return(0,g.Z)(v,null,[{key:"timeStampToTime",value:function(n){var r=new Date(parseInt(n));return r.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",i,s={"Y+":n.getFullYear().toString(),"m+":(n.getMonth()+1).toString(),"d+":n.getDate().toString(),"H+":n.getHours().toString(),"M+":n.getMinutes().toString(),"S+":n.getSeconds().toString()},u=r;for(var f in s)i=new RegExp("("+f+")").exec(r),i&&(u=u.replace(i[1],i[1].length==1?s[f]:s[f].padStart(i[1].length,"0")));return u}},{key:"uuid",value:function(){for(var n=[],r="0123456789abcdef",i=0;i<36;i++)n[i]=r.substr(Math.floor(Math.random()*16),1);return n[14]="4",n[19]=r.substr(n[19]&3|8,1),n[8]=n[13]=n[18]=n[23]="-",n.join("").replace(new RegExp(/(-)/g),"")}},{key:"getRangeTime",value:function(n,r){for(var i=[],s=n-1;s>=0;s--){var u=void 0;s===n-1?u=new Date(Date.now()-s*24*60*60*1e3).setHours(0,0,1,0):u=new Date(Date.now()-s*24*60*60*1e3).setHours(23,59,59,999),r?i.push(v.getLocalTime(new Date(u),r)):i.push(u)}return i}},{key:"getRangeStartAndEndTime",value:function(n,r){for(var i=[],s=n-1;s>=0;s--){var u=void 0;s===n-1?u=new Date(Date.now()-s*24*60*60*1e3).setHours(0,0,0,0):s===0?u=new Date(Date.now()-(s-1)*24*60*60*1e3).setHours(0,0,0,0):u=new Date(Date.now()-s*24*60*60*1e3).setHours(23,59,59,999),r?i.push(v.getLocalTime(new Date(u),r)):i.push(u)}return[i[0],i[n-1]]}}]),v}();D.arrayDeDuplication=function(v){return Array.from(new Set(v))}}}]);
