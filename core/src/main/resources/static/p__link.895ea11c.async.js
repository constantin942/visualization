(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[72],{94407:function(j,p,t){"use strict";t.r(p),t.d(p,{default:function(){return B}});var K=t(13254),S=t(14277),W=t(98858),g=t(4914),f=t(2824),d=t(67294),b=t(3182),I=t(94043),C=t.n(I),D=t(25377);function z(){return v.apply(this,arguments)}function v(){return v=(0,b.Z)(C().mark(function h(){return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,D.WY)("/api/skyflying/getAllSegments",{method:"GET",timeout:6e4,headers:{"Content-Type":"application/json"}}));case 1:case"end":return n.stop()}},h)})),v.apply(this,arguments)}var Y=t(87593),Z=t(37636),$=t(71153),F=t(60331),M=t(54029),E=t(79166),A=t(99270),m=t(57895),e=t(85893),P=[{title:"ip",width:150,align:"center",render:function(a,n){return(0,e.jsx)(E.Z,{status:"processing",text:n.ip})}},{title:"dbType",dataIndex:"dbType",width:100,align:"center"},{title:"databaseName",dataIndex:"databaseName",width:200,align:"center"},{title:"tableName",dataIndex:"tableName",width:200,align:"center"},{title:"actionType",dataIndex:"actionType",width:100,align:"center"},{title:"sqlDetail",dataIndex:"sqlDetail",tip:"",ellipsis:!0}],H=function(a){var n=(0,d.useState)(0),o=(0,f.Z)(n,2),x=o[0],l=o[1],u=(0,d.useState)([]),s=(0,f.Z)(u,2),N=s[0],y=s[1],G=function(){return JSON.parse(a.body[0].reorganizingSpans).filter(function(i){return i.dbType!==void 0})},U=function(i,c){y([]),l(c),i.length>1&&y(i.filter(function(T){return T.dbType!==void 0}))};return(0,d.useEffect)(function(){y(a.body.length===1?G():[])},[]),(0,e.jsx)("div",{className:"detail-table",children:(0,e.jsxs)(m.ZP,{split:"vertical",children:[a.body.length>1&&(0,e.jsx)(m.ZP,{colSpan:"30%",children:(0,e.jsx)(Z.Z,{children:a.body.map(function(r,i){var c=JSON.parse(r.reorganizingSpans);return(0,e.jsx)(Z.Z.Item,{color:c.length>1?"#00CCFF":"green",className:"pointer pb-10",children:(0,e.jsxs)("div",{onClick:function(){U(c,i)},children:[(0,e.jsx)("p",{className:x===i?"is-active":"",children:c[0].url}),(0,e.jsx)(F.Z,{color:"#3b5999",style:{fontSize:"12px",padding:"2px 3px",lineHeight:"1"},children:r.operationName}),(0,e.jsx)("span",{style:{color:"#C0C4CC",fontSize:"12px"},children:r.requestStartTime})]})},r.id)})})}),(0,e.jsx)(m.ZP,{headerBordered:!0,children:N.length>0?(0,e.jsx)(A.ZP,{columns:P,options:!1,size:"small",dataSource:N,rowKey:"sqlDetail",search:!1,pagination:!1}):(0,e.jsx)(S.Z,{description:"\u6682\u65E0\u64CD\u4F5C\u6570\u636E"})})]})})},L=H,J=t(6251),O=t.n(J),R=function(){var a=(0,d.useState)([]),n=(0,f.Z)(a,2),o=n[0],x=n[1];return(0,d.useEffect)(function(){z().then(function(l){var u=l.data,s=JSON.parse(u);x(function(){return s}),console.log(s)})},[]),(0,e.jsx)("div",{className:"link",children:o.length>0?o.map(function(l,u){return(0,e.jsx)(m.ZP,{collapsibleIconRender:function(){return(0,e.jsx)("div",{children:(0,e.jsxs)(g.Z,{size:"small",children:[(0,e.jsx)(g.Z.Item,{label:"\u64CD\u4F5C\u7528\u6237",style:{margin:"0",padding:"0",lineHeight:"1"},children:(0,e.jsx)("p",{className:"primary-blue",children:l.header.userName})}),(0,e.jsx)(g.Z.Item,{label:"\u64CD\u4F5C\u65F6\u95F4",style:{margin:"0",padding:"0",lineHeight:"1"},children:(0,e.jsx)("p",{className:"primary-blue",children:l.header.requestStartTime})}),(0,e.jsx)(g.Z.Item,{label:"url",style:{margin:"0",padding:"0",lineHeight:"1"},children:(0,e.jsx)("p",{className:"primary-blue",children:l.header.url})})]})})},className:"link__item-card",style:{},headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,e.jsx)("div",{children:(0,e.jsx)(L,{reorganizingSpans:[],body:l.body})})},u)}):(0,e.jsx)(S.Z,{style:{textAlign:"center",fontSize:"18px",color:"#C0C4CC",marginTop:"100px"},imageStyle:{width:"400px",height:"400px",margin:"0 auto"},image:O()})})},B=R},6251:function(j,p,t){j.exports=t.p+"static/empty.a9f51423.png"}}]);
