(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[310],{5966:function(N,j,e){"use strict";var O=e(22122),x=e(81253),B=e(67294),A=e(30885),z=["fieldProps","proFieldProps"],V=["fieldProps","proFieldProps"],t="text",f=function(l){var E=l.fieldProps,i=l.proFieldProps,v=(0,x.Z)(l,z);return B.createElement(A.Z,(0,O.Z)({mode:"edit",valueType:t,fieldProps:E,filedConfig:{valueType:t},proFieldProps:i},v))},r=function(l){var E=l.fieldProps,i=l.proFieldProps,v=(0,x.Z)(l,V);return B.createElement(A.Z,(0,O.Z)({mode:"edit",valueType:"password",fieldProps:E,proFieldProps:i,filedConfig:{valueType:t}},v))},S=f;S.Password=r,S.displayName="ProFormComponent",j.Z=S},97796:function(N){N.exports={table:"table___3lKck"}},24927:function(N,j,e){"use strict";e.r(j),e.d(j,{default:function(){return ie}});var O=e(57663),x=e(71577),B=e(62350),A=e(75443),z=e(74379),V=e(38648),t=e(11849),f=e(2824),r=e(67294),S=e(97796),W=e.n(S),l=e(3182),E=e(94043),i=e.n(E),v=e(21704),Q=e(80129),X=e.n(Q);function w(n,o){return K.apply(this,arguments)}function K(){return K=(0,l.Z)(i().mark(function n(o,d){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.WY)("/api/skyflying/getAllMonitorTables",(0,t.Z)({method:"GET",params:o},d||{})));case 1:case"end":return a.stop()}},n)})),K.apply(this,arguments)}function k(n,o){return U.apply(this,arguments)}function U(){return U=(0,l.Z)(i().mark(function n(o,d){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.WY)("/api/skyflying/updateMonitorTable?"+X().stringify(o),(0,t.Z)({method:"POST"},d||{})));case 1:case"end":return a.stop()}},n)})),U.apply(this,arguments)}function q(n,o){return $.apply(this,arguments)}function $(){return $=(0,l.Z)(i().mark(function n(o,d){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.WY)("/api/skyflying/updateMonitorTable",(0,t.Z)({method:"GET",params:o},d||{})));case 1:case"end":return a.stop()}},n)})),$.apply(this,arguments)}var pe=e(71194),_=e(50146),G=e(5894),ee=e(5966),s=e(85893);function te(n,o){var d={labelCol:{span:6},wrapperCol:{span:20}},T=(0,r.useState)(),a=(0,f.Z)(T,2),D=a[0],R=a[1],I=(0,r.useRef)();return(0,r.useImperativeHandle)(o,function(){return{setInitValues:function(m){var p;R(m),(p=I.current)===null||p===void 0||p.setFieldsValue({tableDesc:m.tableDesc})}}}),(0,s.jsx)(_.Z,{width:400,title:"\u4FEE\u6539\u63CF\u8FF0",visible:n.visible,footer:[],onCancel:function(){return n.setVisible(!1)},children:(0,s.jsxs)(G.A,(0,t.Z)((0,t.Z)({formRef:I,layout:"horizontal"},d),{},{onFinish:function(){var Z=(0,l.Z)(i().mark(function m(p){return i().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:q({id:D==null?void 0:D.id,tableDesc:p.tableDesc}).then(function(){n.refresh(),n.setVisible(!1)});case 1:case"end":return M.stop()}},m)}));return function(m){return Z.apply(this,arguments)}}(),submitter:!1,children:[(0,s.jsx)(ee.Z,{fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u8868\u7684\u63CF\u8FF0\u6587\u5B57"},label:"\u63CF\u8FF0\u6587\u5B57",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u63CF\u8FF0\u6587\u5B57"}],name:"tableDesc"}),(0,s.jsx)(G.A.Group,{style:{textAlign:"center"},children:(0,s.jsx)(x.Z,{type:"primary",htmlType:"submit",className:"w-100",children:"\u786E\u8BA4\u4FEE\u6539"})})]}))})}var ae=(0,r.forwardRef)(te),ne=e(47369),re=e(13312),se=e(49101),le=function(){var o=(0,r.useState)([]),d=(0,f.Z)(o,2),T=d[0],a=d[1],D=(0,r.useState)(0),R=(0,f.Z)(D,2),I=R[0],Z=R[1],m=(0,r.useState)({}),p=(0,f.Z)(m,2),C=p[0],M=p[1],oe=(0,r.useState)(!1),L=(0,f.Z)(oe,2),ue=L[0],J=L[1],Y=(0,r.useRef)(),de=(0,r.useState)({pageNo:1,pageSize:20}),H=(0,f.Z)(de,2),h=H[0],ce=H[1],P=function(g){w(g).then(function(u){var y=u.data,c=JSON.parse(y);if(c&&c.rows){var F=JSON.parse(c.rows);if(console.log(F),F&&F.length>0){Z(c.total),a(F);return}}Z(0),a([])})};(0,r.useEffect)(function(){P((0,t.Z)({},h))},[]);var fe=[{title:"\u6570\u636E\u5E93\u5730\u5740",dataIndex:"dbAddress",align:"center"},{title:"\u6570\u636E\u5E93\u540D",dataIndex:"dbName",align:"center",ellipsis:!0},{title:"\u8868\u540D",dataIndex:"tableName",align:"center"},{title:"\u63CF\u8FF0",dataIndex:"tableDesc",align:"center"},{title:"\u72B6\u6001",align:"center",dataIndex:"isDelete",search:!1,initialValue:"0",valueEnum:{0:{text:"\u542F\u7528\u4E2D",status:"Success"},1:{text:"\u5DF2\u7981\u7528",status:"Error"}}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"gmtModified",dataIndex:"gmtModified",align:"center",valueType:"dateTime",search:!1},{title:"\u64CD\u4F5C",key:"option",align:"center",valueType:"option",render:function(g,u){return[(0,s.jsx)(A.Z,{title:"\u60A8\u786E\u8BA4".concat(u.isDelete===0?"\u7981\u7528":"\u542F\u7528").concat(u.tableName,"\u8868\u5417\uFF1F"),placement:"top",onConfirm:function(){k({id:u.id,isDelete:u.isDelete===1?0:1}).then(function(c){var F=c.code;F===re.Gh&&(V.Z.success({message:"\u66F4\u65B0\u6210\u529F\uFF01"}),P((0,t.Z)((0,t.Z)({},h),C)))})},children:(0,s.jsx)("a",{className:u.isDelete===0?"danger":"",children:u.isDelete===0?"\u7981\u7528":"\u542F\u7528"})},"link"),(0,s.jsx)("a",{onClick:function(){var c;(c=Y.current)===null||c===void 0||c.setInitValues(u),J(!0)},children:"\u66F4\u65B0"},"update")]}}];return(0,s.jsxs)("div",{className:W().table,children:[(0,s.jsx)(ne.ZP,{columns:fe,dataSource:T,rowKey:"id",pagination:{showQuickJumper:!0,total:I,pageSize:h.pageSize,current:h.pageNo,onChange:function(g,u){var y={pageNo:g,pageSize:u};ce(y),P((0,t.Z)((0,t.Z)({},y),C))}},search:{},onSubmit:function(g){M(g),P((0,t.Z)((0,t.Z)({},h),g))},onReset:function(){P((0,t.Z)((0,t.Z)({},h),C))},dateFormatter:"string",headerTitle:"\u5DF2\u6709\u6570\u636E\u5E93\u8868",toolBarRender:function(){return[(0,s.jsx)(x.Z,{icon:(0,s.jsx)(se.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")]}}),(0,s.jsx)(ae,{ref:Y,visible:ue,setVisible:J,refresh:function(){P((0,t.Z)((0,t.Z)({},h),C))}})]})},ie=le}}]);
