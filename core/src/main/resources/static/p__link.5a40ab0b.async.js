(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[72],{82277:function(F){F.exports={"link__form-wrap":"link__form-wrap___4fdvJ",link__content:"link__content___oPe_t",pages:"pages___3NUwO","link__item-card":"link__item-card___y2kSX",link:"link___s0XZS","detail-table":"detail-table___2NvnS","ant-table-tbody":"ant-table-tbody___2xnJD","is-active":"is-active___3dJbi"}},48385:function(F,P,e){"use strict";e.r(P),e.d(P,{default:function(){return ce}});var N=e(13254),f=e(14277),ee=e(14781),i=e(23492),C=e(57663),_=e(71577),U=e(3182),te=e(48736),O=e(27049),H=e(11849),g=e(2824),X=e(94043),A=e.n(X),h=e(67294),S=e(5894),k=e(64317),I=e(78844),z=e(76570),Y=e(25592),a=["select","insert","update","delete"],s=e(54154),x=e(87593),n=e(37636),p=e(14650),W=e(39265),ne=e(69610),ae=e(54941),M=function(){function j(){(0,ne.Z)(this,j)}return(0,ae.Z)(j,null,[{key:"timeStampToTime",value:function(l){var c=new Date(parseInt(l));return c.toJSON().substring(0,10).replace("T","")}},{key:"getLocalTime",value:function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-mm-dd HH:MM:SS",u=l||new Date,b,Z={"Y+":u.getFullYear().toString(),"m+":this.twoCompletion(u.getMonth()+1),"d+":this.twoCompletion(u.getDate()),"H+":this.twoCompletion(u.getHours()),"M+":this.twoCompletion(u.getMinutes()),"S+":this.twoCompletion(u.getSeconds())},E="";return Object.keys(Z).forEach(function(D){b=new RegExp("("+D+")").exec(c),b&&(E=c.replace(b[1],b[1].length===1?Z[D]:Z[D].padStart(b[1].length,"0")))}),E}},{key:"uuid",value:function(){for(var l=[],c="0123456789abcdef",u=0;u<36;u++)l[u]=c.substr(Math.floor(Math.random()*16),1);return l[14]="4",l[19]=c.substr(l[19]&3|8,1),l[8]=l[13]=l[18]=l[23]="-",l.join("").replace(new RegExp(/(-)/g),"")}}]),j}();M.arrayDeDuplication=function(j){return Array.from(new Set(j))},M.twoCompletion=function(j){return j.toString().padStart(2,"0")};var t=e(85893),re=[{title:"\u64CD\u4F5C\u6570\u636E",dataIndex:"function",align:"center",fixed:"left",width:300,ellipsis:!0},{title:"IP",dataIndex:"peer",align:"center"},{title:"\u7528\u6237",dataIndex:"dbUserName",align:"center"},{title:"\u6570\u636E\u5E93\u5B9E\u4F8B",dataIndex:"dbInstance",align:"center"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"dbType",align:"center"},{title:"SQL\u8BED\u53E5",dataIndex:"dbStatement",align:"center",width:300,fixed:"right",ellipsis:!0}],se=function(m){var l=function(){return m.body.length===1?m.body[0].segments.filter(function(T){return T.peer}):m.body[0].segments},c=(0,h.useState)(0),u=(0,g.Z)(c,2),b=u[0],Z=u[1],E=(0,h.useState)(l().map(function(v){return v.id=M.uuid(),v})),D=(0,g.Z)(E,2),G=D[0],$=D[1],Q=function(T,B){Z(B),$(T.map(function(L){return L.id=M.uuid(),L}))};return(0,t.jsx)("div",{className:m.style["detail-table"],children:(0,t.jsxs)(W.ZP,{split:"vertical",children:[m.body.length>1&&(0,t.jsx)(W.ZP,{colSpan:"30%",children:(0,t.jsx)(n.Z,{children:m.body.map(function(v,T){return(0,t.jsx)(n.Z.Item,{color:v.segments.length>1?"#00CCFF":"green",className:"pointer pb-10",children:(0,t.jsx)("div",{onClick:function(){Q(v.segments,T)},children:(0,t.jsx)("p",{className:b===T?m.style["is-active"]:"",children:v.url})})},M.uuid())})})}),(0,t.jsx)(W.ZP,{headerBordered:!0,children:G.length>0?(0,t.jsx)(p.ZP,{columns:re,options:!1,size:"small",dataSource:G,rowKey:"id",search:!1,pagination:!1}):(0,t.jsx)(f.Z,{description:"\u6682\u65E0\u64CD\u4F5C\u6570\u636E"})})]})})},le=se,ie=e(6251),ue=e.n(ie),oe=e(82277),w=e.n(oe),de=[],me=function(){var m=(0,h.useState)([]),l=(0,g.Z)(m,2),c=l[0],u=l[1],b=(0,h.useState)(de),Z=(0,g.Z)(b,2),E=Z[0],D=Z[1],G=(0,h.useState)([]),$=(0,g.Z)(G,2),Q=$[0],v=$[1],T=(0,h.useRef)(),B=(0,h.useState)({pageNo:1,pageSize:20,total:0}),L=(0,g.Z)(B,2),J=L[0],pe=L[1],K=function(r){var o=r;r&&r.times&&(r.startTime=r.times[0],r.endTime=r.times[1],delete r.times,o=(0,H.Z)({},r)),(0,s.z2)(Object.assign(o)).then(function(y){var R=y.data,V=JSON.parse(R);pe(function(){return{pageSize:o.pageSize,pageNo:o.pageNo,total:V.total}});var q=JSON.parse(V.rows);V.rows&&(Array.isArray(q)?u(q):u([q]))})};return(0,h.useEffect)(function(){(0,s.Y8)().then(function(d){var r=d.data,o=JSON.parse(r).filter(function(y){return y});D(function(y){return y.concat(o)})}),(0,s.IY)().then(function(d){var r=d.data,o=JSON.parse(r).filter(function(y){return y});v(function(y){return y.concat(o)})}),K(J)},[]),(0,t.jsxs)("div",{className:w().link,children:[(0,t.jsxs)("div",{className:w()["link__form-wrap"],children:[(0,t.jsx)(O.Z,{orientation:"left",plain:!0,children:(0,t.jsx)(z.Z,{})}),(0,t.jsxs)(S.A,{layout:"inline",formRef:T,size:"small",onFinish:function(){var d=(0,U.Z)(A().mark(function r(o){return A().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:K(o);case 1:case"end":return R.stop()}},r)}));return function(r){return d.apply(this,arguments)}}(),submitter:{render:function(){return[(0,t.jsx)(_.Z,{type:"primary",htmlType:"submit",icon:(0,t.jsx)(z.Z,{}),className:"br-5 w-80 fs-12",children:"\u67E5\u8BE2"},"edit"),(0,t.jsx)(_.Z,{type:"ghost",htmlType:"button",icon:(0,t.jsx)(Y.Z,{}),className:"br-5 w-80 fs-12",onClick:function(){var o;(o=T.current)===null||o===void 0||o.resetFields(),K(J)},children:"\u91CD\u7F6E"},"reset")]}},children:[(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(k.Z,{options:E,placeholder:"userName",name:"applicationUserName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(k.Z,{options:Q,width:"sm",placeholder:"tableName",name:"msTableName",filedConfig:{},fieldProps:{}},"value")}),(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(k.Z,{options:a,placeholder:"dbType",name:"dbType"},"value")}),(0,t.jsx)(S.A.Group,{children:(0,t.jsx)(I.Z,{width:"md",fieldProps:{placeholder:["startTime","endTime"],bordered:!1},name:"times"})})]})]}),c.length>0?(0,t.jsxs)("div",{className:w().link__content,children:[c.map(function(d){return(0,t.jsx)(W.ZP,{collapsibleIconRender:function(){return(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"primary-blue-5 m-0",children:d.header.userName}),(0,t.jsxs)("div",{className:"fs-12",children:[(0,t.jsxs)("span",{className:"mr-20",children:[(0,t.jsx)("span",{className:"in-l",children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),(0,t.jsx)("span",{children:d.header.requestStartTime})]}),(0,t.jsxs)("span",{className:"mt-20",children:[(0,t.jsx)("span",{className:"in-l",children:"URL\uFF1A"}),(0,t.jsx)("span",{children:d.header.url})]})]})]})},className:"link__item-card",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,t.jsx)(le,{body:d.body,style:w()})},M.uuid())}),(0,t.jsx)("div",{className:w().pages,children:(0,t.jsx)(i.Z,{total:J.total,size:"small",onChange:function(r,o){K({pageNo:r,pageSize:o,total:J.total})},defaultPageSize:20,defaultCurrent:1})})]}):(0,t.jsx)(f.Z,{style:{textAlign:"center",fontSize:"18px",color:"#C0C4CC",marginTop:"100px"},imageStyle:{width:"400px",height:"400px",margin:"0 auto"},image:ue()})]})},ce=me},54154:function(F,P,e){"use strict";e.d(P,{Y8:function(){return _},IY:function(){return te},z2:function(){return H},m8:function(){return X},LX:function(){return h},gY:function(){return k},CX:function(){return z}});var N=e(11849),f=e(3182),ee=e(94043),i=e.n(ee),C=e(25377);function _(a){return U.apply(this,arguments)}function U(){return U=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllUserName",(0,N.Z)({method:"GET"},s||{})));case 1:case"end":return n.stop()}},a)})),U.apply(this,arguments)}function te(a){return O.apply(this,arguments)}function O(){return O=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllMsTableName",(0,N.Z)({method:"GET"},s||{})));case 1:case"end":return n.stop()}},a)})),O.apply(this,arguments)}function H(a,s){return g.apply(this,arguments)}function g(){return g=(0,f.Z)(i().mark(function a(s,x){return i().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,C.WY)("/api/skyflying/getAllSegments",(0,N.Z)({method:"GET",timeout:6e4,headers:{"Content-Type":"application/json"},params:s},x||{})));case 1:case"end":return p.stop()}},a)})),g.apply(this,arguments)}function X(a){return A.apply(this,arguments)}function A(){return A=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllUserNameFromDMS",(0,N.Z)({timeout:6e4},s||{})));case 1:case"end":return n.stop()}},a)})),A.apply(this,arguments)}function h(a){return S.apply(this,arguments)}function S(){return S=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllSqlTypeFromDMS",(0,N.Z)({timeout:6e4},s||{})));case 1:case"end":return n.stop()}},a)})),S.apply(this,arguments)}function k(a){return I.apply(this,arguments)}function I(){return I=(0,f.Z)(i().mark(function a(s){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,C.WY)("/api/skyflying/getAllTableNameFromDMS",(0,N.Z)({timeout:6e4},s||{})));case 1:case"end":return n.stop()}},a)})),I.apply(this,arguments)}function z(a,s){return Y.apply(this,arguments)}function Y(){return Y=(0,f.Z)(i().mark(function a(s,x){return i().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,C.WY)("/api/skyflying/getDmsAuditLogFromDb",(0,N.Z)({method:"GET",timeout:6e4,params:s},x||{})));case 1:case"end":return p.stop()}},a)})),Y.apply(this,arguments)}},6251:function(F,P,e){F.exports=e.p+"static/empty.a9f51423.png"}}]);
